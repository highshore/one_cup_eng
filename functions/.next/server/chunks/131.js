"use strict";exports.id=131,exports.ids=[131],exports.modules={9086:(a,b,c)=>{let d;c.d(b,{db:()=>d});var e=c(46675),f=c.n(e),g=c(33873),h=c.n(g),i=c(29021),j=c.n(i);try{if(f().apps.length)d=f().firestore(),f().auth();else{let a=h().join(process.cwd(),"firebase_service_account.json");if(j().existsSync(a))console.log("Initializing Firebase Admin SDK with service account file"),f().initializeApp({credential:f().credential.cert(a),databaseURL:"https://one-cup-eng-default-rtdb.firebaseio.com/"}),d=f().firestore(),f().auth();else{let a=process.env.FIREBASE_PROJECT_ID||"one-cup-eng",b=process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n")||"",c=process.env.FIREBASE_CLIENT_EMAIL||"";b&&c&&"-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----"!==b?(console.log("Initializing Firebase Admin SDK with environment variables"),f().initializeApp({credential:f().credential.cert({projectId:a,privateKey:b,clientEmail:c}),databaseURL:process.env.FIREBASE_DATABASE_URL||"https://one-cup-eng-default-rtdb.firebaseio.com/"}),d=f().firestore(),f().auth()):(console.warn("Firebase Admin SDK not initialized: Missing service account file and environment credentials. This is expected during build time."),d={})}}}catch(a){console.warn("Firebase Admin SDK initialization failed:",a),d={}}},36099:(a,b,c)=>{c.d(b,{c:()=>N});var d=c(60687),e=c(43210),f=c(4529),g=c(70146),h=c(83503);let i=a=>{let b=Date.now(),c=Math.random().toString(36).substring(2,15),d=a.split(".").pop()||"jpg";return`${b}_${c}.${d}`},j=async a=>{try{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(a.type))throw Error("Only JPEG, PNG, and WebP images are allowed");if(a.size>5242880)throw Error("Image size must be less than 5MB");let b=i(a.name),c=(0,g.KR)(h.IG,`blog/${b}`),d=await (0,g.D)(c,a),e=await (0,g.qk)(d.ref);return console.log("Blog image uploaded successfully:",e),e}catch(a){throw console.error("Error uploading blog image:",a),a}},k=a=>{let b=[],c=[],d=Array.from(a),e=["image/jpeg","image/jpg","image/png","image/webp"];return d.forEach((a,d)=>e.includes(a.type)?a.size>5242880?void c.push(`File ${d+1}: Image size must be less than 5MB`):void b.push(a):void c.push(`File ${d+1}: Only JPEG, PNG, and WebP images are allowed`)),{valid:b,errors:c}},l={primary:"#2C1810",primaryLight:"#4A2F23",primaryPale:"#F5EBE6",primaryBg:"#FDF9F6",accent:"#C8A27A",text:{dark:"#2C1810",medium:"#4A2F23",light:"#8B6B4F"}},m=f.Ay.div.withConfig({componentId:"sc-e274f75c-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;overflow-y:auto;"]),n=f.Ay.div.withConfig({componentId:"sc-e274f75c-1"})(['background:white;border-radius:16px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;box-shadow:0 16px 48px rgba(0,0,0,0.2);font-family:"Noto Sans KR",sans-serif;@media (max-width:768px){max-height:95vh;border-radius:14px;}']),o=f.Ay.div.withConfig({componentId:"sc-e274f75c-2"})(["padding:1.25rem 1.75rem;border-bottom:1px solid ",";background:",";border-radius:16px 16px 0 0;@media (max-width:768px){padding:1rem 1.25rem;border-radius:14px 14px 0 0;}"],l.primaryPale,l.primaryBg),p=f.Ay.h2.withConfig({componentId:"sc-e274f75c-3"})(["font-size:1.4rem;font-weight:700;color:",';margin:0;font-family:"Noto Sans KR",sans-serif;@media (max-width:768px){font-size:1.2rem;}'],l.text.dark),q=f.Ay.form.withConfig({componentId:"sc-e274f75c-4"})(["padding:1.5rem;@media (max-width:768px){padding:1.25rem;}"]),r=f.Ay.div.withConfig({componentId:"sc-e274f75c-5"})(["margin-bottom:1.25rem;@media (max-width:768px){margin-bottom:1rem;}"]),s=f.Ay.label.withConfig({componentId:"sc-e274f75c-6"})(["display:block;font-size:0.85rem;font-weight:600;color:",';margin-bottom:0.4rem;font-family:"Noto Sans KR",sans-serif;'],l.text.dark),t=f.Ay.input.withConfig({componentId:"sc-e274f75c-7"})(["width:100%;padding:0.6rem 0.8rem;border:2px solid ",";border-radius:10px;font-size:0.95rem;color:",';background:white;transition:all 0.2s ease;box-sizing:border-box;font-family:"Noto Sans KR",sans-serif;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}&::placeholder{color:",";}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.9rem;border-radius:8px;}"],l.primaryPale,l.text.dark,l.accent,l.text.light),u=f.Ay.textarea.withConfig({componentId:"sc-e274f75c-8"})(["width:100%;min-height:100px;padding:0.6rem 0.8rem;border:2px solid ",";border-radius:10px;font-size:0.85rem;color:",';background:white;transition:all 0.2s ease;resize:vertical;font-family:"Noto Sans KR",sans-serif;line-height:1.5;box-sizing:border-box;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}&::placeholder{color:",";}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.8rem;min-height:80px;border-radius:8px;}"],l.primaryPale,l.text.dark,l.accent,l.text.light),v=f.Ay.textarea.withConfig({componentId:"sc-e274f75c-9"})(["width:100%;min-height:280px;padding:0.8rem;border:2px solid ",";border-radius:10px;font-size:0.95rem;color:",';background:white;transition:all 0.2s ease;resize:vertical;font-family:"Noto Sans KR",sans-serif;line-height:1.6;box-sizing:border-box;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}&::placeholder{color:",";}@media (max-width:768px){padding:0.7rem;font-size:0.9rem;min-height:220px;border-radius:8px;}"],l.primaryPale,l.text.dark,l.accent,l.text.light),w=f.Ay.select.withConfig({componentId:"sc-e274f75c-10"})(["width:100%;padding:0.6rem 0.8rem;border:2px solid ",";border-radius:10px;font-size:0.95rem;color:",';background:white;transition:all 0.2s ease;box-sizing:border-box;font-family:"Noto Sans KR",sans-serif;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.9rem;border-radius:8px;}"],l.primaryPale,l.text.dark,l.accent),x=(0,f.Ay)(t).withConfig({componentId:"sc-e274f75c-11"})(["&::placeholder{color:",";}"],l.text.light),y=f.Ay.div.withConfig({componentId:"sc-e274f75c-12"})(["display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;@media (max-width:768px){grid-template-columns:1fr;gap:0.6rem;}"]),z=f.Ay.div.withConfig({componentId:"sc-e274f75c-13"})(["display:flex;gap:0.8rem;justify-content:flex-end;margin-top:1.5rem;padding-top:1.25rem;border-top:1px solid ",";@media (max-width:768px){flex-direction:column-reverse;gap:0.6rem;margin-top:1.25rem;padding-top:1rem;}"],l.primaryPale),A=f.Ay.button.withConfig({componentId:"sc-e274f75c-14"})(['padding:0.6rem 1.25rem;border:none;border-radius:25px;font-size:0.95rem;font-weight:600;font-family:"Noto Sans KR",sans-serif;cursor:pointer;transition:all 0.3s ease;min-width:110px;'," &:active{transform:translateY(0);}&:disabled{opacity:0.6;cursor:not-allowed;transform:none;}@media (max-width:768px){padding:0.5rem 1rem;font-size:0.9rem;min-width:90px;}"],a=>{switch(a.$variant){case"primary":return`
          background: ${l.primary};
          color: white;
          box-shadow: 0 4px 12px rgba(44, 24, 16, 0.2);
          
          &:hover {
            background: ${l.primaryLight};
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(44, 24, 16, 0.3);
          }
        `;case"danger":return`
          background: #ef4444;
          color: white;
          box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
          
          &:hover {
            background: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.3);
          }
        `;default:return`
          background: ${l.primaryPale};
          color: ${l.text.dark};
          
          &:hover {
            background: ${l.accent};
            color: white;
            transform: translateY(-2px);
          }
        `}}),B=f.Ay.div.withConfig({componentId:"sc-e274f75c-15"})(["text-align:right;font-size:0.75rem;color:",';margin-top:0.2rem;font-family:"Noto Sans KR",sans-serif;'],l.text.light),C=f.Ay.div.withConfig({componentId:"sc-e274f75c-16"})(["font-size:0.75rem;color:",';margin-top:0.2rem;line-height:1.4;font-family:"Noto Sans KR",sans-serif;'],l.text.light),D=f.Ay.button.withConfig({componentId:"sc-e274f75c-17"})(["padding:0.6rem 0.8rem;background:",';color:white;border:none;border-radius:8px;font-size:0.85rem;font-weight:600;font-family:"Noto Sans KR",sans-serif;cursor:pointer;transition:all 0.2s ease;white-space:nowrap;display:flex;align-items:center;gap:0.4rem;min-width:110px;justify-content:center;&:hover{background:',";transform:translateY(-1px);}&:disabled{opacity:0.6;cursor:not-allowed;transform:none;}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.8rem;min-width:90px;gap:0.3rem;}"],l.accent,l.primaryLight),E=f.Ay.input.withConfig({componentId:"sc-e274f75c-18"})(["display:none;"]),F=f.Ay.div.withConfig({componentId:"sc-e274f75c-19"})(["margin-top:0.4rem;display:flex;align-items:center;gap:0.4rem;img{width:50px;height:50px;object-fit:cover;border-radius:6px;border:1px solid ",";}@media (max-width:768px){margin-top:0.3rem;gap:0.3rem;img{width:40px;height:40px;border-radius:5px;}}"],l.primaryPale),G=f.Ay.button.withConfig({componentId:"sc-e274f75c-20"})(["background:#ef4444;color:white;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;&:hover{background:#dc2626;transform:scale(1.1);}"]),H=f.Ay.div.withConfig({componentId:"sc-e274f75c-21"})(["display:flex;gap:0.5rem;margin-bottom:0.5rem;flex-wrap:wrap;@media (max-width:768px){gap:0.375rem;}"]),I=f.Ay.div.withConfig({componentId:"sc-e274f75c-22"})(["display:flex;gap:0.5rem;align-items:center;margin-bottom:0.5rem;flex-wrap:wrap;padding:0.5rem;background:",";border-radius:8px;@media (max-width:768px){gap:0.4rem;padding:0.4rem;}"],l.primaryBg),J=f.Ay.button.withConfig({componentId:"sc-e274f75c-23"})(["background:",";color:",";border:1px solid ",';border-radius:6px;padding:0.4rem 0.6rem;font-size:0.85rem;font-weight:600;font-family:"Noto Sans KR",sans-serif;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:0.3rem;&:hover{background:',";}&:disabled{opacity:0.5;cursor:not-allowed;}@media (max-width:768px){padding:0.3rem 0.5rem;font-size:0.8rem;}"],a=>a.$active?l.accent:"white",a=>a.$active?"white":l.text.dark,l.primaryPale,a=>a.$active?l.primaryLight:l.primaryPale),K=f.Ay.div.withConfig({componentId:"sc-e274f75c-24"})(["display:flex;flex-direction:column;gap:0.5rem;"]),L=f.Ay.button.withConfig({componentId:"sc-e274f75c-25"})(["padding:0.5rem 0.75rem;background:",";color:",";border:none;border-radius:6px;font-size:0.8rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:0.375rem;&:hover{background:",";color:white;}&:disabled{opacity:0.6;cursor:not-allowed;}@media (max-width:768px){padding:0.4rem 0.6rem;font-size:0.75rem;}"],l.primaryPale,l.text.dark,l.accent),M=f.Ay.div.withConfig({componentId:"sc-e274f75c-26"})(["margin-top:0.5rem;padding:0.5rem;background:",";border-radius:6px;font-size:0.8rem;color:",";border:1px solid ",";"],l.primaryBg,l.text.medium,l.primaryPale),N=({post:a,onSave:b,onCancel:c})=>{let[f,g]=(0,e.useState)({title:"",content:"",excerpt:"",status:"draft",featuredImage:"",tags:""}),[h,i]=(0,e.useState)(!1),[l,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)(""),Q=(0,e.useRef)(null),R=(0,e.useRef)(null);(0,e.useEffect)(()=>{a&&g({title:a.title||"",content:a.content||"",excerpt:a.excerpt||"",status:a.status||"draft",featuredImage:a.featuredImage||"",tags:a.tags?.join(", ")||""})},[a]);let S=a=>{let{name:b,value:c}=a.target;g(a=>({...a,[b]:c}))},T=async a=>{if(a.preventDefault(),!f.title.trim())return void alert("제목을 입력해주세요.");if(!f.content.trim())return void alert("내용을 입력해주세요.");i(!0);try{let a={title:f.title.trim(),content:f.content.trim(),status:f.status};if(f.excerpt.trim()&&(a.excerpt=f.excerpt.trim()),f.featuredImage.trim()&&(a.featuredImage=f.featuredImage.trim()),f.tags.trim()){let b=f.tags.split(",").map(a=>a.trim()).filter(a=>a.length>0);b.length>0&&(a.tags=b)}console.log("Submitting blog post data:",a),await b(a)}catch(a){console.error("Failed to save post:",a),alert("저장에 실패했습니다. 다시 시도해주세요.")}finally{i(!1)}},U=async a=>{let b=a.target.files;if(!b||0===b.length)return;let{valid:c,errors:d}=k(b);if(d.length>0)return void alert("이미지 업로드 오류:\n"+d.join("\n"));if(0!==c.length)try{N(!0),P("대표 이미지 업로드 중...");let a=await j(c[0]);g(b=>({...b,featuredImage:a})),P("")}catch(a){console.error("Featured image upload failed:",a),alert("이미지 업로드에 실패했습니다: "+(a instanceof Error?a.message:String(a)))}finally{N(!1),Q.current&&(Q.current.value="")}},V=async a=>{let b=a.target.files;if(!b||0===b.length)return;let{valid:c,errors:d}=k(b);if(d.length>0)return void alert("이미지 업로드 오류:\n"+d.join("\n"));if(0!==c.length)try{N(!0),P("컨텐츠 이미지 업로드 중...");let a=await j(c[0]),b=`
![이미지 설명](${a})
`,d=document.getElementById("content");if(d){let a=d.selectionStart,c=d.selectionEnd,e=f.content,h=e.substring(0,a)+b+e.substring(c);g(a=>({...a,content:h})),setTimeout(()=>{d.focus(),d.setSelectionRange(a+b.length,a+b.length)},100)}else g(a=>({...a,content:a.content+b}));P("")}catch(a){console.error("Content image upload failed:",a),alert("이미지 업로드에 실패했습니다: "+(a instanceof Error?a.message:String(a)))}finally{N(!1),R.current&&(R.current.value="")}},W=a=>{let b=document.getElementById("content");if(b){let c=b.scrollTop,d=b.selectionStart,e=b.selectionEnd,h=f.content,i=h.substring(d,e);if(!i)return;let j="";"bold"===a?j=`**${i}**`:"crimson"===a&&(j=`<span style="color: crimson; font-weight: bold;">${i}</span>`);let k=h.substring(0,d)+j+h.substring(e);g(a=>({...a,content:k})),setTimeout(()=>{let a=d+j.length;b.setSelectionRange(a,a),b.scrollTop=c,b.focus()},50)}};return(0,d.jsx)(m,{onClick:a=>{a.target===a.currentTarget&&c()},children:(0,d.jsxs)(n,{children:[(0,d.jsx)(o,{children:(0,d.jsx)(p,{children:a?"포스트 편집":"새 포스트 작성"})}),(0,d.jsxs)(q,{onSubmit:T,children:[(0,d.jsxs)(r,{children:[(0,d.jsx)(s,{htmlFor:"title",children:"제목 *"}),(0,d.jsx)(t,{id:"title",name:"title",type:"text",value:f.title,onChange:S,placeholder:"블로그 포스트 제목을 입력하세요",required:!0}),(0,d.jsxs)(B,{children:[f.title.length,"/100"]})]}),(0,d.jsxs)(r,{children:[(0,d.jsx)(s,{htmlFor:"excerpt",children:"요약"}),(0,d.jsx)(u,{id:"excerpt",name:"excerpt",value:f.excerpt,onChange:S,placeholder:"포스트의 간단한 요약을 작성하세요 (선택사항)",rows:3}),(0,d.jsxs)(B,{children:[f.excerpt.length,"/300"]})]}),(0,d.jsxs)(r,{children:[(0,d.jsx)(s,{htmlFor:"content",children:"내용 *"}),(0,d.jsxs)(H,{children:[(0,d.jsx)(L,{type:"button",onClick:()=>{let a=document.getElementById("content");if(a){let b=a.scrollTop,c=a.selectionStart,d=a.selectionEnd,e=f.content,h=e.substring(0,c),i=""===h||h.endsWith("\n")?"# ":"\n# ",j=e.substring(0,c)+i+e.substring(d);g(a=>({...a,content:j})),setTimeout(()=>{a.setSelectionRange(c+i.length,c+i.length),a.scrollTop=b,a.focus()},50)}},disabled:l,children:"\uD83D\uDCDD 헤더 삽입"}),(0,d.jsx)(L,{type:"button",onClick:()=>{R.current?.click()},disabled:l,children:"\uD83D\uDDBC️ 이미지 삽입"}),(0,d.jsx)(C,{style:{margin:0,fontSize:"0.75rem"},children:"헤더는 '# ' 형식으로, 이미지는 마크다운 형식으로 커서 위치에 삽입됩니다"})]}),(0,d.jsxs)(I,{children:[(0,d.jsxs)(J,{type:"button",onClick:()=>W("bold"),disabled:l,title:"굵은 텍스트",children:[(0,d.jsx)("strong",{children:"B"}),"굵게"]}),(0,d.jsxs)(J,{type:"button",onClick:()=>W("crimson"),disabled:l,title:"빨간 굵은 텍스트",style:{color:"crimson"},children:[(0,d.jsx)("strong",{style:{color:"crimson"},children:"A"}),"빨간색"]}),(0,d.jsx)(C,{style:{margin:0,fontSize:"0.75rem"},children:"텍스트를 선택한 후 버튼을 클릭하거나, 버튼을 클릭하여 서식을 삽입하세요"})]}),(0,d.jsx)(v,{id:"content",name:"content",value:f.content,onChange:S,placeholder:"여기에 블로그 포스트 내용을 작성하세요...",required:!0}),(0,d.jsxs)(B,{children:[f.content.length," 글자"]}),(0,d.jsx)(E,{ref:R,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:V})]}),(0,d.jsxs)(y,{children:[(0,d.jsxs)(r,{children:[(0,d.jsx)(s,{htmlFor:"status",children:"상태"}),(0,d.jsxs)(w,{id:"status",name:"status",value:f.status,onChange:S,children:[(0,d.jsx)("option",{value:"draft",children:"초안"}),(0,d.jsx)("option",{value:"published",children:"발행"})]})]}),(0,d.jsxs)(r,{children:[(0,d.jsx)(s,{children:"대표 이미지"}),(0,d.jsxs)(K,{children:[(0,d.jsx)(D,{type:"button",onClick:()=>{Q.current?.click()},disabled:l,children:"\uD83D\uDCC1 파일 선택"}),f.featuredImage&&(0,d.jsxs)(F,{children:[(0,d.jsx)("img",{src:f.featuredImage,alt:"대표 이미지 미리보기"}),(0,d.jsx)(G,{type:"button",onClick:()=>{g(a=>({...a,featuredImage:""}))},title:"이미지 제거",children:"✕"})]}),(0,d.jsx)(E,{ref:Q,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:U})]})]})]}),(0,d.jsxs)(r,{children:[(0,d.jsx)(s,{htmlFor:"tags",children:"태그"}),(0,d.jsx)(x,{id:"tags",name:"tags",type:"text",value:f.tags,onChange:S,placeholder:"태그를 쉼표로 구분하여 입력하세요 (예: 영어학습, 비즈니스, 팁)"}),(0,d.jsx)(C,{children:"태그는 쉼표(,)로 구분하여 입력해주세요. 독자들이 관련 포스트를 찾는데 도움이 됩니다."})]}),O&&(0,d.jsx)(M,{children:O}),(0,d.jsxs)(z,{children:[(0,d.jsx)(A,{type:"button",onClick:c,disabled:l,children:"취소"}),(0,d.jsx)(A,{type:"submit",$variant:"primary",disabled:h||l,children:h?"저장 중...":l?"업로드 중...":a?"수정하기":"발행하기"})]})]})]})})}},43136:(a,b,c)=>{c.d(b,{UA:()=>h,ck:()=>i,lo:()=>g});var d=c(9086);let e="blog_posts",f=a=>{let b=a.data();return{id:a.id,title:b.title||"",content:b.content||"",excerpt:b.excerpt||"",createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date,publishedAt:b.publishedAt?.toDate()||null,status:b.status||"draft",slug:b.slug||"",featuredImage:b.featuredImage||"",tags:b.tags||[],views:b.views||0,likes:b.likes||0,likedBy:b.likedBy||[]}},g=async()=>{try{if(!d.db.collection)return console.warn("Firebase Admin SDK not initialized, returning empty blog posts"),[];let a=d.db.collection(e);return(await a.get()).docs.map(f).filter(a=>"published"===a.status).sort((a,b)=>{let c=a.publishedAt||a.createdAt;return(b.publishedAt||b.createdAt).getTime()-c.getTime()})}catch(a){return console.error("Error fetching published blog posts on server:",a),[]}},h=async a=>{try{if(!d.db.collection)return console.warn("Firebase Admin SDK not initialized, returning null for blog post"),null;let b=d.db.collection(e).doc(a),c=await b.get();if(c.exists){let a=f(c);if("published"===a.status)return a}return null}catch(a){return console.error("Error fetching published blog post by ID on server:",a),null}},i=async()=>{try{if(!d.db.collection)return console.warn("Firebase Admin SDK not initialized, returning empty blog post IDs"),[];let a=d.db.collection(e);return(await a.get()).docs.map(f).filter(a=>"published"===a.status).map(a=>a.id)}catch(a){return console.error("Error fetching blog post IDs on server:",a),[]}}},87850:(a,b,c)=>{c.d(b,{$r:()=>j,CF:()=>i,Fd:()=>m,TB:()=>k,ZA:()=>l,m0:()=>o,s2:()=>n});var d=c(75535),e=c(83503);let f="blog_posts",g=a=>a.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").trim(),h=a=>{let b=a.data();return{id:a.id,title:b.title||"",content:b.content||"",excerpt:b.excerpt||"",createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date,publishedAt:b.publishedAt?.toDate()||null,status:b.status||"draft",slug:b.slug||"",featuredImage:b.featuredImage||"",tags:b.tags||[],views:b.views||0,likes:b.likes||0,likedBy:b.likedBy||[]}},i=async()=>{try{let a=(0,d.rJ)(e.db,f);return(await (0,d.GG)(a)).docs.map(h).filter(a=>"published"===a.status).sort((a,b)=>{let c=a.publishedAt||a.createdAt;return(b.publishedAt||b.createdAt).getTime()-c.getTime()})}catch(a){return console.error("Error fetching blog posts:",a),[]}},j=async()=>{try{let a=(0,d.rJ)(e.db,f);return(await (0,d.GG)(a)).docs.map(h).sort((a,b)=>b.updatedAt.getTime()-a.updatedAt.getTime())}catch(a){return console.error("Error fetching all blog posts:",a),[]}},k=async a=>{try{let b=(0,d.H9)(e.db,f,a),c=await (0,d.x7)(b);if(c.exists())return h(c);return null}catch(a){throw console.error("Error fetching blog post:",a),Error("Failed to fetch blog post")}},l=async a=>{try{let b=(0,d.H9)(e.db,f,a),c=await (0,d.x7)(b);if(!c.exists())return null;{let a=h(c);if("published"===a.status)return a;return null}}catch(a){throw console.error("Error fetching published blog post:",a),Error("Failed to fetch blog post")}},m=async a=>{try{console.log("Creating blog post with data:",a);let b=new Date,c=g(a.title||""),h={title:a.title||"",content:a.content||"",createdAt:d.Dc.fromDate(b),updatedAt:d.Dc.fromDate(b),publishedAt:"published"===a.status?d.Dc.fromDate(b):null,status:a.status||"draft",slug:c};a.excerpt&&(h.excerpt=a.excerpt),a.featuredImage&&(h.featuredImage=a.featuredImage),a.tags&&a.tags.length>0&&(h.tags=a.tags),console.log("Final blog post object:",h);let i=(0,d.rJ)(e.db,f),j=await (0,d.gS)(i,h);return console.log("Blog post created successfully with ID:",j.id),j.id}catch(a){throw console.error("Error creating blog post:",a),console.error("Error stack:",a instanceof Error?a.stack:"No stack"),Error("Failed to create blog post: "+(a instanceof Error?a.message:String(a)))}},n=async(a,b)=>{try{console.log("Updating blog post ID:",a,"with data:",b);let c=(0,d.H9)(e.db,f,a),h=new Date,i={updatedAt:d.Dc.fromDate(h)};if(void 0!==b.title&&(i.title=b.title,i.slug=g(b.title)),void 0!==b.content&&(i.content=b.content),void 0!==b.excerpt&&(i.excerpt=b.excerpt),void 0!==b.status&&(i.status=b.status),void 0!==b.featuredImage&&(i.featuredImage=b.featuredImage),void 0!==b.tags&&(i.tags=b.tags),"published"===b.status){let a=(await (0,d.x7)(c)).data();a?.publishedAt||(i.publishedAt=d.Dc.fromDate(h))}console.log("Final update data:",i),await (0,d.mZ)(c,i),console.log("Blog post updated successfully")}catch(a){throw console.error("Error updating blog post:",a),console.error("Error stack:",a instanceof Error?a.stack:"No stack"),Error("Failed to update blog post: "+(a instanceof Error?a.message:String(a)))}},o=async a=>{try{let b=(0,d.H9)(e.db,f,a);await (0,d.kd)(b)}catch(a){throw console.error("Error deleting blog post:",a),Error("Failed to delete blog post")}}}};