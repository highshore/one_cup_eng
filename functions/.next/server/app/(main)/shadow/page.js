(()=>{var exports={};exports.id=852,exports.ids=[852],exports.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},520:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationWebsocketMessageFormatter=void 0;let d=c(94705),e=c(91747);class f{toConnectionMessage(a){let b=new d.Deferred;try{if(a.messageType===d.MessageType.Text){let c=new e.ConversationConnectionMessage(a.messageType,a.textContent,{},a.id);b.resolve(c)}else a.messageType===d.MessageType.Binary&&b.resolve(new e.ConversationConnectionMessage(a.messageType,a.binaryContent,void 0,a.id))}catch(a){b.reject(`Error formatting the message. Error: ${a}`)}return b.promise}fromConnectionMessage(a){let b=new d.Deferred;try{if(a.messageType===d.MessageType.Text){let c=`${a.textBody?a.textBody:""}`;b.resolve(new d.RawWebsocketMessage(d.MessageType.Text,c,a.id))}}catch(a){b.reject(`Error formatting the message. ${a}`)}return b.promise}}b.ConversationWebsocketMessageFormatter=f},681:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ResultType=void 0,function(a){a.Auto="Auto",a.StableFragment="StableFragment",a.Hypothesis="Hypothesis",a.None="None"}(c=b.ResultType||(b.ResultType={}))},1255:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.QueryParameterNames=void 0;class c{}b.QueryParameterNames=c,c.BotId="botid",c.CustomSpeechDeploymentId="cid",c.CustomVoiceDeploymentId="deploymentId",c.EnableAudioLogging="storeAudio",c.EnableLanguageId="lidEnabled",c.EnableWordLevelTimestamps="wordLevelTimestamps",c.EndSilenceTimeoutMs="endSilenceTimeoutMs",c.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",c.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",c.SegmentationStrategy="segmentationStrategy",c.Format="format",c.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",c.Language="language",c.Profanity="profanity",c.RequestBotStatusMessages="enableBotMessageStatus",c.StableIntermediateThreshold="stableIntermediateThreshold",c.StableTranslation="stableTranslation",c.TestHooks="testhooks",c.Postprocessing="postprocessing",c.CtsMeetingId="meetingId",c.CtsDeviceId="deviceId",c.CtsIsParticipant="isParticipant",c.EnableAvatar="enableTalkingAvatar"},1818:(a,b,c)=>{Promise.resolve().then(c.bind(c,80899))},2033:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechConfigImpl=b.SpeechConfig=void 0;let d=c(35961),e=c(87470),f=c(41686);class g{constructor(){return}static fromSubscription(a,b){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(b,"region");let c=new h;return c.setProperty(f.PropertyId.SpeechServiceConnection_Region,b),c.setProperty(f.PropertyId.SpeechServiceConnection_IntentRegion,b),c.setProperty(f.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,b){e.Contracts.throwIfNull(a,"endpoint");let c="string"==typeof b&&b.trim().length>0,d="object"==typeof b&&null!==b&&"function"==typeof b.getToken;if(void 0!==b&&!c&&!d)throw Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");let g="object"==typeof b?new h(b):new h;return g.setProperty(f.PropertyId.SpeechServiceConnection_Endpoint,a.href),"string"==typeof b&&b.trim().length>0&&g.setProperty(f.PropertyId.SpeechServiceConnection_Key,b),g}static fromHost(a,b){e.Contracts.throwIfNull(a,"hostName");let c=new h;return c.setProperty(f.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(""===a.port?"":":"+a.port)),c.setProperty(f.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),void 0!==b&&c.setProperty(f.PropertyId.SpeechServiceConnection_Key,b),c}static fromAuthorizationToken(a,b){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(b,"region");let c=new h;return c.setProperty(f.PropertyId.SpeechServiceConnection_Region,b),c.setProperty(f.PropertyId.SpeechServiceConnection_IntentRegion,b),c.authorizationToken=a,c}close(){}}b.SpeechConfig=g;class h extends g{constructor(a){super(),this.privProperties=new f.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=f.OutputFormat.Simple,this.privTokenCredential=a}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return f.OutputFormat[this.privProperties.getProperty(d.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(d.OutputFormatPropertyName,f.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_EndpointId,a)}get tokenCredential(){return this.privTokenCredential}setProperty(a,b){e.Contracts.throwIfNull(b,"value"),this.privProperties.setProperty(a,b)}getProperty(a,b){return this.privProperties.getProperty(a,b)}setProxy(a,b,c,d){this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyPort],b),this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyPassword],d)}setServiceProperty(a,b){let c=JSON.parse(this.privProperties.getProperty(d.ServicePropertiesPropertyName,"{}"));c[a]=b,this.privProperties.setProperty(d.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceResponse_ProfanityOption,f.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(f.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(d.OutputFormatPropertyName,f.OutputFormat[f.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(d.ForceDictationPropertyName,"true")}clone(){let a=new h(this.tokenCredential);return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return f.SpeechSynthesisOutputFormat[this.privProperties.getProperty(f.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_SynthOutputFormat,f.SpeechSynthesisOutputFormat[a])}}b.SpeechConfigImpl=h},2444:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.RecognitionStatus=b.SynthesisStatus=void 0,function(a){a[a.Success=0]="Success",a[a.SynthesisEnd=1]="SynthesisEnd",a[a.Error=2]="Error"}(c=b.SynthesisStatus||(b.SynthesisStatus={})),function(a){a[a.Success=0]="Success",a[a.NoMatch=1]="NoMatch",a[a.InitialSilenceTimeout=2]="InitialSilenceTimeout",a[a.BabbleTimeout=3]="BabbleTimeout",a[a.Error=4]="Error",a[a.EndOfDictation=5]="EndOfDictation",a[a.TooManyRequests=6]="TooManyRequests",a[a.BadRequest=7]="BadRequest",a[a.Forbidden=8]="Forbidden"}(d=b.RecognitionStatus||(b.RecognitionStatus={}))},2807:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DetailedSpeechPhrase=void 0;let d=c(35961);class e{constructor(a,b){this.privDetailedSpeechPhrase=JSON.parse(a),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(b)}static fromJSON(a,b){return new e(a,b)}updateOffsets(a){if(this.privDetailedSpeechPhrase.Offset+=a,this.privDetailedSpeechPhrase.NBest)for(let b of this.privDetailedSpeechPhrase.NBest){if(b.Words)for(let c of b.Words)c.Offset+=a;if(b.DisplayWords)for(let c of b.DisplayWords)c.Offset+=a}}asJson(){let a={...this.privDetailedSpeechPhrase};return JSON.stringify({...a,RecognitionStatus:d.RecognitionStatus[a.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(a){return"string"==typeof a?d.RecognitionStatus[a]:"number"==typeof a?a:void 0}}b.DetailedSpeechPhrase=e},3231:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EventSource=void 0;let d=c(29016),e=c(10977);class f{constructor(a){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=a}onEvent(a){if(this.isDisposed())throw new d.ObjectDisposedError("EventSource");if(this.metadata)for(let b in this.metadata)b&&a.metadata&&!a.metadata[b]&&(a.metadata[b]=this.metadata[b]);for(let b in this.privEventListeners)b&&this.privEventListeners[b]&&this.privEventListeners[b](a)}attach(a){let b=(0,e.createNoDashGuid)();return this.privEventListeners[b]=a,{detach:()=>(delete this.privEventListeners[b],Promise.resolve())}}attachListener(a){return this.attach(b=>a.onEvent(b))}attachConsoleListener(a){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(b=>a.onEvent(b)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}b.EventSource=f},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3511:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationManager=void 0;let d=c(9403),e=c(87470),f=c(41686),g=c(7360);class h{constructor(){this.privRequestParams=g.ConversationConnectionConfig.configParams,this.privErrors=g.ConversationConnectionConfig.restErrors,this.privHost=g.ConversationConnectionConfig.host,this.privApiVersion=g.ConversationConnectionConfig.apiVersion,this.privRestPath=g.ConversationConnectionConfig.restPath,this.privRestAdapter=new d.RestMessageAdapter({})}createOrJoin(a,b,c,h){try{e.Contracts.throwIfNullOrUndefined(a,"args");let i=a.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage,g.ConversationConnectionConfig.defaultLanguageCode),j=a.getProperty(f.PropertyId.ConversationTranslator_Name,"conversation_host"),k=a.getProperty(f.PropertyId.ConversationTranslator_Host,this.privHost),l=a.getProperty(f.PropertyId.ConversationTranslator_CorrelationId),m=a.getProperty(f.PropertyId.SpeechServiceConnection_Key),n=a.getProperty(f.PropertyId.SpeechServiceConnection_Region),o=a.getProperty(f.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(i,"languageCode"),e.Contracts.throwIfNullOrWhitespace(j,"nickname"),e.Contracts.throwIfNullOrWhitespace(k,"endpointHost");let p={};p[this.privRequestParams.apiVersion]=this.privApiVersion,p[this.privRequestParams.languageCode]=i,p[this.privRequestParams.nickname]=j;let q={};l&&(q[this.privRequestParams.correlationId]=l),q[this.privRequestParams.clientAppId]=g.ConversationConnectionConfig.clientAppId,void 0!==b?p[this.privRequestParams.roomId]=b:(e.Contracts.throwIfNullOrUndefined(n,this.privErrors.authInvalidSubscriptionRegion),q[this.privRequestParams.subscriptionRegion]=n,m?q[this.privRequestParams.subscriptionKey]=m:o?q[this.privRequestParams.authorization]=`Bearer ${o}`:e.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionKey));let r={};r.headers=q,this.privRestAdapter.options=r;let s=`https://${k}${this.privRestPath}`;this.privRestAdapter.request(d.RestRequestType.Post,s,p,null).then(a=>{let b=d.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,a.headers);if(!a.ok){if(h){let c,d=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",a.status.toString());try{c=JSON.parse(a.data),d+=` [${c.error.code}: ${c.error.message}]`}catch(b){d+=` [${a.data}]`}b&&(d+=` ${b}`),h(d)}return}let e=JSON.parse(a.data);if(e&&(e.requestId=b),c){try{c(e)}catch(a){h&&h(a)}c=void 0}}).catch(()=>{})}catch(a){if(h)if(a instanceof Error){let b=a;h(b.name+": "+b.message)}else h(a)}}leave(a,b){return new Promise((c,g)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(b,this.privErrors.invalidArgs.replace("{arg}","token"));let g=a.getProperty(f.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(f.PropertyId.ConversationTranslator_CorrelationId),i={};i[this.privRequestParams.apiVersion]=this.privApiVersion,i[this.privRequestParams.sessionToken]=b;let j={};h&&(j[this.privRequestParams.correlationId]=h);let k={};k.headers=j,this.privRestAdapter.options=k;let l=`https://${g}${this.privRestPath}`;this.privRestAdapter.request(d.RestRequestType.Delete,l,i,null).then(a=>{a.ok,c()}).catch(()=>{})}catch(a){if(a instanceof Error){let b=a;g(b.name+": "+b.message)}else g(a)}})}}b.ConversationManager=h},3673:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.WebsocketMessageAdapter=void 0;let h=f(c(91645)),i=f(c(34631)),j=g(c(67220)),k=g(c(23247)),l=g(c(21079)),m=c(89393),n=c(94705);class o{constructor(a,b,c,d,e,f){if(!a)throw new n.ArgumentNullError("uri");if(!c)throw new n.ArgumentNullError("messageFormatter");this.proxyInfo=d,this.privConnectionEvents=new n.EventSource,this.privConnectionId=b,this.privMessageFormatter=c,this.privConnectionState=n.ConnectionState.None,this.privUri=a,this.privHeaders=e,this.privEnableCompression=f,this.privHeaders[m.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===n.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new n.Deferred,this.privCertificateValidatedDeferral=new n.Deferred,this.privConnectionState=n.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||o.forceNpmWebSocket){let a=new URL(this.privUri).protocol;a?.toLocaleLowerCase()==="wss:"?a="https:":a?.toLocaleLowerCase()==="ws:"&&(a="http:");let b={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:"https:"===a.toLocaleLowerCase()};this.privCertificateValidatedDeferral.resolve(),b.agent=this.getAgent(),b.agent.protocol=a,this.privWebsocketClient=new l.default(this.privUri,b),this.privWebsocketClient.on("redirect",a=>{let b=new n.ConnectionRedirectEvent(this.privConnectionId,a,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${a}'`);n.Events.instance.onEvent(b)})}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new n.Queue,this.privDisconnectDeferral=new n.Deferred,this.privSendMessageQueue=new n.Queue,this.processSendQueue().catch(a=>{n.Events.instance.onEvent(new n.BackgroundEvent(a))})}catch(a){return this.privConnectionEstablishDeferral.resolve(new n.ConnectionOpenResponse(500,a)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new n.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=n.ConnectionState.Connected,this.onEvent(new n.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new n.ConnectionOpenResponse(200,""))},a=>{this.privConnectionEstablishDeferral.reject(a)})},this.privWebsocketClient.onerror=a=>{this.onEvent(new n.ConnectionErrorEvent(this.privConnectionId,a.message,a.type)),this.privLastErrorReceived=a.message},this.privWebsocketClient.onclose=a=>{this.privConnectionState===n.ConnectionState.Connecting?(this.privConnectionState=n.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new n.ConnectionOpenResponse(a.code,a.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=n.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new n.ConnectionClosedEvent(this.privConnectionId,a.code,a.reason))),this.onClose(a.code,a.reason).catch(a=>{n.Events.instance.onEvent(new n.BackgroundEvent(a))})},this.privWebsocketClient.onmessage=a=>{let b=new Date().toISOString();if(this.privConnectionState===n.ConnectionState.Connected){let c=new n.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(c.promise),a.data instanceof ArrayBuffer){let d=new n.RawWebsocketMessage(n.MessageType.Binary,a.data);this.privMessageFormatter.toConnectionMessage(d).then(a=>{this.onEvent(new n.ConnectionMessageReceivedEvent(this.privConnectionId,b,a)),c.resolve(a)},a=>{c.reject(`Invalid binary message format. Error: ${a}`)})}else{let d=new n.RawWebsocketMessage(n.MessageType.Text,a.data);this.privMessageFormatter.toConnectionMessage(d).then(a=>{this.onEvent(new n.ConnectionMessageReceivedEvent(this.privConnectionId,b,a)),c.resolve(a)},a=>{c.reject(`Invalid text message format. Error: ${a}`)})}}},this.privConnectionEstablishDeferral.promise}send(a){if(this.privConnectionState!==n.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${n.ConnectionState[this.privConnectionState]} state`);let b=new n.Deferred,c=new n.Deferred;return this.privSendMessageQueue.enqueueFromPromise(c.promise),this.privMessageFormatter.fromConnectionMessage(a).then(d=>{c.resolve({Message:a,RawWebsocketMessage:d,sendStatusDeferral:b})},a=>{c.reject(`Error formatting the message. ${a}`)}),b.promise}read(){return this.privConnectionState!==n.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(a){return this.privWebsocketClient?(this.privConnectionState!==n.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,a||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(a){try{if(!a)return Promise.resolve();if(this.onEvent(new n.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),a.Message)),!this.isWebsocketOpen)return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+a.Message.id+" "+Error().stack);return this.privWebsocketClient.send(a.RawWebsocketMessage.payload),Promise.resolve()}catch(a){return Promise.reject(`websocket send error: ${a}`)}}async onClose(a,b){let c=`Connection closed. ${a}: ${b}`;this.privConnectionState=n.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},c),await this.privSendMessageQueue.drainAndDispose(a=>{a.sendStatusDeferral.reject(c)},c)}async processSendQueue(){for(;;){let a=this.privSendMessageQueue.dequeue(),b=await a;if(!b)return;try{await this.sendRawMessage(b),b.sendStatusDeferral.resolve()}catch(a){b.sendStatusDeferral.reject(a)}}}onEvent(a){this.privConnectionEvents.onEvent(a),n.Events.instance.onEvent(a)}getAgent(){let a=new j.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(a.proxyInfo=this.proxyInfo),a}static GetProxyAgent(a){let b={host:a.HostName,port:a.Port};return a.UserName?b.headers={"Proxy-Authentication":"Basic "+new Buffer(`${a.UserName}:${void 0===a.Password?"":a.Password}`).toString("base64")}:b.headers={},b.headers.requestOCSP="true",new k.default(b)}createConnection(a,b){let c;if(b={...b,...{requestOCSP:!0,servername:b.host}},this.proxyInfo){let d=o.GetProxyAgent(this.proxyInfo);c=new Promise((c,e)=>{d.callback(a,b,(a,b)=>{a?e(a):c(b)})})}else c=b.secureEndpoint?Promise.resolve(i.connect(b)):Promise.resolve(h.connect(b));return c}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}b.WebsocketMessageAdapter=o,o.forceNpmWebSocket=!1},3740:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MeetingTranscriber=void 0;let d=c(35961),e=c(94705),f=c(87470),g=c(41686),h=c(63169);class i{constructor(a){this.privAudioConfig=a,this.privProperties=new g.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return f.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(g.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return g.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(g.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){f.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(g.PropertyId.SpeechServiceAuthorization_Token,a)}joinMeetingAsync(a,b,c){let g=a;f.Contracts.throwIfNullOrUndefined(h.MeetingImpl,"Meeting"),this.privRecognizer=new d.TranscriberRecognizer(a.config,this.privAudioConfig),f.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,e.marshalPromiseToCallbacks)(g.connectTranscriberRecognizer(this.privRecognizer),b,c)}startTranscribingAsync(a,b){this.privRecognizer.startContinuousRecognitionAsync(a,b)}stopTranscribingAsync(a,b){this.privRecognizer.stopContinuousRecognitionAsync(a,b)}leaveMeetingAsync(a,b){this.privRecognizer.disconnectCallbacks(),(0,e.marshalPromiseToCallbacks)((async()=>{})(),a,b)}close(a,b){f.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}async dispose(a){!this.privDisposedRecognizer&&(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),a&&(this.privDisposedRecognizer=!0))}}b.MeetingTranscriber=i},3791:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DialogConnectionFactory=void 0;let d=c(9403),e=c(35961),f=c(41686),g=c(8941),h=c(35961),i=c(89393),j=c(1255);class k extends g.ConnectionFactoryBase{create(a,b,c){let l=a.parameters.getProperty(f.PropertyId.Conversation_ApplicationId,""),m=a.parameters.getProperty(f.PropertyId.Conversation_DialogType),n=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Region),o=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),p=a.parameters.getProperty(f.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),q={};q[i.HeaderNames.ConnectionId]=c,q[j.QueryParameterNames.Format]=a.parameters.getProperty(e.OutputFormatPropertyName,f.OutputFormat[f.OutputFormat.Simple]).toLowerCase(),q[j.QueryParameterNames.Language]=o,q[j.QueryParameterNames.RequestBotStatusMessages]=p,l&&(q[j.QueryParameterNames.BotId]=l,m===f.DialogServiceConfig.DialogTypes.CustomCommands&&(q[i.HeaderNames.CustomCommandsAppId]=l));let r=m===f.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",s=m===f.DialogServiceConfig.DialogTypes.CustomCommands?"v1":m===f.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",t={};null!=b.token&&""!==b.token&&(t[b.headerName]=b.token);let u=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Endpoint,"");if(!u){let b=g.ConnectionFactoryBase.getHostSuffix(n),c=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Host,`wss://${n}.${k.BaseUrl}${b}`),d=c.endsWith("/")?c:c+"/";u=`${d}${r}${k.ApiKey}/${s}`}this.setCommonUrlParams(a,q,u);let v="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new d.WebsocketConnection(u,q,t,new h.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),v,c))}}b.DialogConnectionFactory=k,k.ApiKey="api",k.BaseUrl="convai.speech"},4367:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisAdapter=void 0;let d=c(41686),e=c(35961);class f extends e.SynthesisAdapterBase{constructor(a,b,c,d,e){super(a,b,c,e),this.privSpeechSynthesizer=d,this.privSynthesizer=d}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(a){let b=new d.SpeechSynthesisEventArgs(new d.SpeechSynthesisResult(a,d.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,b)}onSynthesizing(a){if(this.privSpeechSynthesizer.synthesizing)try{let b=this.privSynthesisTurn.audioOutputFormat.addHeader(a),c=new d.SpeechSynthesisEventArgs(new d.SpeechSynthesisResult(this.privSynthesisTurn.requestId,d.ResultReason.SynthesizingAudio,b));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,c)}catch(a){}}onSynthesisCancelled(a){if(this.privSpeechSynthesizer.SynthesisCanceled){let b=new d.SpeechSynthesisEventArgs(a);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,b)}catch{}}}onSynthesisCompleted(a){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new d.SpeechSynthesisEventArgs(a))}catch(a){}}onWordBoundary(a){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,a)}catch(a){}}onVisemeReceived(a){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,a)}catch(a){}}onBookmarkReached(a){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,a)}catch(a){}}}b.SpeechSynthesisAdapter=f},4568:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationServiceAdapter=void 0;let d=c(94705),e=c(41686),f=c(35961),g=c(91747),h=c(14601),i=c(63239),j=c(7268),k=c(5610);class l extends f.ServiceRecognizerBase{constructor(a,b,c,e,f){super(a,b,c,e,f),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=f,this.privConversationAuthentication=a,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=a=>this.conversationConnectImpl(a),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new h.ConversationRequestSession((0,d.createNoDashGuid)()),this.privConversationConnectionFactory=b,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(a){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){let b=await this.privConnectionConfigPromise;await b.dispose(a)}await super.dispose(a)}async sendMessage(a){return(await this.fetchConnection()).send(new g.ConversationConnectionMessage(d.MessageType.Text,a))}async sendMessageAsync(a){let b=await this.fetchConnection();await b.send(new g.ConversationConnectionMessage(d.MessageType.Text,a))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(a,b,c,d,f){this.terminateMessageLoop=!0;let g=new e.ConversationTranslationCanceledEventArgs(c,f,d,void 0,a);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,g)}catch{}}async conversationConnectImpl(a){return this.privConnectionLoop=this.startMessageLoop(),a}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();let a=new d.Deferred;try{let b=await this.fetchConnection(),c=await b.read();if(this.isDisposed()||this.terminateMessageLoop)return a.resolve(),Promise.resolve();if(!c)return this.receiveConversationMessageOverride();let d=this.privConversationRequestSession.sessionId,g=c.conversationMessageType.toLowerCase(),h=!1;try{switch(g){case"info":case"participant_command":case"command":let a=k.CommandResponsePayload.fromJSON(c.textBody);switch(a.command.toLowerCase()){case"participantlist":let b=k.ParticipantsListPayloadResponse.fromJSON(c.textBody),l=b.participants.map(a=>({avatar:a.avatar,displayName:a.nickname,id:a.participantId,isHost:a.ishost,isMuted:a.ismuted,isUsingTts:a.usetts,preferredLanguage:a.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new i.ParticipantsListEventArgs(b.roomid,b.token,b.translateTo,b.profanityFilter,b.roomProfanityFilter,b.roomLocked,b.muteAll,l,d));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new i.ParticipantAttributeEventArgs(a.participantId,j.ConversationTranslatorCommandTypes.setTranslateToLanguages,a.value,d));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new i.ParticipantAttributeEventArgs(a.participantId,j.ConversationTranslatorCommandTypes.setProfanityFiltering,a.value,d));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new i.ParticipantAttributeEventArgs(a.participantId,j.ConversationTranslatorCommandTypes.setMute,a.value,d));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new i.MuteAllEventArgs(a.value,d));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(a.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new i.ParticipantAttributeEventArgs(a.participantId,j.ConversationTranslatorCommandTypes.setUseTTS,a.value,d));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new i.LockRoomEventArgs(a.value,d));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new i.ParticipantAttributeEventArgs(a.participantId,j.ConversationTranslatorCommandTypes.changeNickname,a.value,d));break;case"joinsession":let m=k.ParticipantPayloadResponse.fromJSON(c.textBody),n={avatar:m.avatar,displayName:m.nickname,id:m.participantId,isHost:m.ishost,isMuted:m.ismuted,isUsingTts:m.usetts,preferredLanguage:m.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new i.ParticipantEventArgs(n,d));break;case"leavesession":let o={id:a.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new i.ParticipantEventArgs(o,d));break;case"disconnectsession":a.participantId;break;case"token":let p=new f.CognitiveTokenAuthentication(()=>{let b=a.token;return Promise.resolve(b)},()=>{let b=a.token;return Promise.resolve(b)});this.authentication=p,this.privConversationServiceConnector.onToken(p)}break;case"partial":case"final":let q=k.SpeechResponsePayload.fromJSON(c.textBody),r="final"===g?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,s=new e.ConversationTranslationResult(q.participantId,this.getTranslations(q.translations),q.language,q.id,r,q.recognition,void 0,void 0,c.textBody,void 0);q.isFinal?(void 0!==s.text&&s.text.length>0?h=!0:q.id===this.privLastPartialUtteranceId&&(h=!0),h&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new i.ConversationReceivedTranslationEventArgs(j.ConversationTranslatorMessageTypes.final,s,d))):void 0!==s.text&&(this.privLastPartialUtteranceId=q.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new i.ConversationReceivedTranslationEventArgs(j.ConversationTranslatorMessageTypes.partial,s,d)));break;case"translated_message":let t=k.TextResponsePayload.fromJSON(c.textBody),u=new e.ConversationTranslationResult(t.participantId,this.getTranslations(t.translations),t.language,void 0,void 0,t.originalText,void 0,void 0,void 0,c.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new i.ConversationReceivedTranslationEventArgs(j.ConversationTranslatorMessageTypes.instantMessage,u,d))}}catch(a){}return this.receiveConversationMessageOverride()}catch(a){this.terminateMessageLoop=!0}return a.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;let a=this.receiveConversationMessageOverride();try{return await a}catch(a){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,a),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(a=>a.state()===d.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(a=>a),this.privConnectionConfigPromise)}getTranslations(a){let b;if(void 0!==a)for(let c of(b=new e.Translations,a))b.set(c.lang,c.translation);return b}}b.ConversationServiceAdapter=l},4592:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisResult=void 0;let d=c(41686);class e extends d.SynthesisResult{constructor(a,b,c,d,e,f){super(a,b,d,e),this.privAudioData=c,this.privAudioDuration=f}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}b.SpeechSynthesisResult=e},4857:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IntentRecognizer=void 0;let d=c(35961),e=c(38786),f=c(94705),g=c(87470),h=c(41686);class i extends h.Recognizer{constructor(a,b){g.Contracts.throwIfNullOrUndefined(a,"speechConfig");let c=a;g.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(b,c.properties,new d.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,g.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage),h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return g.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,b){if(g.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){let a=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=a.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(a.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,f.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,b)}startContinuousRecognitionAsync(a,b){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){let a=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=a.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(a.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,f.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,b)}stopContinuousRecognitionAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),a,b)}startKeywordRecognitionAsync(a,b,c){g.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,b){if(a)try{a()}catch(a){b&&b(a)}}addIntent(a,b){g.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),g.Contracts.throwIfNullOrWhitespace(b,"intentId"),g.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([b,a])}addIntentWithLanguageModel(a,b,c){g.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),g.Contracts.throwIfNullOrWhitespace(a,"intentId"),g.Contracts.throwIfNull(b,"model");let e=b;g.Contracts.throwIfNullOrWhitespace(e.appId,"model.appId"),this.privAddedLmIntents[a]=new d.AddedLmIntent(e,c)}addAllIntents(a,b){g.Contracts.throwIfNull(a,"model");let c=a;g.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new d.AddedLmIntent(c,b)}close(a,b){g.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,f.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}createRecognizerConfig(a){return new d.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,b,c,e){let f=c;return new d.IntentServiceRecognizer(a,b,f,e,this)}async dispose(a){!this.privDisposedIntentRecognizer&&a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,b,c,d=[];for(let e of(void 0!==this.privUmbrellaIntent&&(a=this.privUmbrellaIntent.modelImpl.appId,b=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey),Object.keys(this.privAddedLmIntents))){let f=this.privAddedLmIntents[e];if(void 0===a)a=f.modelImpl.appId;else if(a!==f.modelImpl.appId)throw Error("Intents must all be from the same LUIS model");if(void 0===b)b=f.modelImpl.region;else if(b!==f.modelImpl.region)throw Error("Intents must all be from the same LUIS model in a single region");if(void 0===c)c=f.modelImpl.subscriptionKey;else if(c!==f.modelImpl.subscriptionKey)throw Error("Intents must all use the same subscription key");let g="luis/"+a+"-PRODUCTION#"+e;d.push(g)}return{Intent:{id:a,key:void 0===c?this.privProperties.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?d:["luis/"+a+"-PRODUCTION"]}}}b.IntentRecognizer=i},5610:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TextResponsePayload=b.SpeechResponsePayload=b.ParticipantPayloadResponse=b.ParticipantsListPayloadResponse=b.CommandResponsePayload=void 0;var d=c(42413);Object.defineProperty(b,"CommandResponsePayload",{enumerable:!0,get:function(){return d.CommandResponsePayload}});var e=c(30817);Object.defineProperty(b,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return e.ParticipantsListPayloadResponse}}),Object.defineProperty(b,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return e.ParticipantPayloadResponse}});var f=c(58115);Object.defineProperty(b,"SpeechResponsePayload",{enumerable:!0,get:function(){return f.SpeechResponsePayload}}),Object.defineProperty(b,"TextResponsePayload",{enumerable:!0,get:function(){return f.TextResponsePayload}})},6484:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BackgroundEvent=void 0;let d=c(94705);class e extends d.PlatformEvent{constructor(a){super("BackgroundEvent",d.EventType.Error),this.privError=a}get error(){return this.privError}}b.BackgroundEvent=e},6487:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechContext=void 0;let d=c(38786),e=c(64379);class f{constructor(a){this.privContext={},this.privDynamicGrammar=a}getContext(){return this.privContext}setPronunciationAssessmentParams(a,b,c=!1){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(a)||{},c&&(this.privContext.phraseDetection.mode=d.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.PronunciationAssessment),-1===this.privContext.phraseOutput.detailed.options.indexOf(e.PhraseOption.SNR)&&this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.SNR),b&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:b},this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.ContentAssessment))}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=e.OutputFormat.Detailed}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=e.OutputFormat.Detailed,-1===this.privContext.phraseOutput.detailed.options.indexOf(e.PhraseOption.WordTimings)&&this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(a){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=a}toJSON(){let a=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=a,JSON.stringify(this.privContext)}}b.SpeechContext=f},6796:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){return function(b,c){return new Promise((d,e)=>{a.call(this,b,c,(a,b)=>{a?e(a):d(b)})})}}},6930:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranscriptionServiceRecognizer=void 0;let d=c(41686),e=c(35961),f=c(74342),g=c(38786);class h extends e.ServiceRecognizerBase{constructor(a,b,c,d,e){super(a,b,c,d,e),this.privConversationTranscriber=e,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){let a=this.privSpeechContext.getContext().phraseDetection||{};a.mode=g.RecognitionMode.Conversation;let b={};b.mode=f.SpeakerDiarizationMode.Anonymous,b.audioSessionId=this.privDiarizationSessionId,b.audioOffsetMs=0,b.diarizeIntermediates="true"===this.privRecognizerConfig.parameters.getProperty(d.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false"),a.speakerDiarization=b,this.privSpeechContext.getContext().phraseDetection=a}}async processTypeSpecificMessages(a){let b,c=new d.PropertyCollection;c.setProperty(d.PropertyId.SpeechServiceResponse_JsonResult,a.textBody);let f=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let g=e.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);b=new d.ConversationTranscriptionResult(this.privRequestSession.requestId,d.ResultReason.RecognizingSpeech,g.Text,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,g.SpeakerId,void 0,g.asJson(),c),this.privRequestSession.onHypothesis(g.Offset);let h=new d.ConversationTranscriptionEventArgs(b,g.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,h)}catch(a){}f=!0;break;case"speech.phrase":let i=e.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),j=e.EnumTranslation.implTranslateRecognitionResult(i.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(i.Offset+i.Duration),d.ResultReason.Canceled===j){let a=e.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus),b=e.EnumTranslation.implTranslateCancelErrorCode(i.RecognitionStatus);await this.cancelRecognitionLocal(a,b,e.EnumTranslation.implTranslateErrorDetails(b))}else if(!(this.privRequestSession.isSpeechEnded&&j===d.ResultReason.NoMatch&&i.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===d.OutputFormat[d.OutputFormat.Simple])b=new d.ConversationTranscriptionResult(this.privRequestSession.requestId,j,i.DisplayText,i.Duration,i.Offset,i.Language,i.LanguageDetectionConfidence,i.SpeakerId,void 0,i.asJson(),c);else{let f=e.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);b=new d.ConversationTranscriptionResult(this.privRequestSession.requestId,j,f.RecognitionStatus===e.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,i.SpeakerId,void 0,f.asJson(),c)}let f=new d.ConversationTranscriptionEventArgs(b,b.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,f)}catch(a){}}f=!0}return f}cancelRecognition(a,b,c,f,g){if(new d.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,d.CancellationErrorCode[f]),this.privConversationTranscriber.canceled){let b=new d.ConversationTranscriptionCanceledEventArgs(c,g,f,void 0,a);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,b)}catch{}}}}b.ConversationTranscriptionServiceRecognizer=h},6948:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisEventArgs=void 0;class c{constructor(a){this.privResult=a}get result(){return this.privResult}}b.SpeechSynthesisEventArgs=c},7268:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranslatorCommandTypes=b.ConversationTranslatorMessageTypes=b.InternalParticipants=void 0;class c{constructor(a=[],b){this.participants=a,this.meId=b}addOrUpdateParticipant(a){if(void 0===a)return;let b=this.getParticipantIndex(a.id);return b>-1?this.participants.splice(b,1,a):this.participants.push(a),this.getParticipant(a.id)}getParticipantIndex(a){return this.participants.findIndex(b=>b.id===a)}getParticipant(a){return this.participants.find(b=>b.id===a)}deleteParticipant(a){this.participants=this.participants.filter(b=>b.id!==a)}get host(){return this.participants.find(a=>!0===a.isHost)}get me(){return this.getParticipant(this.meId)}}b.InternalParticipants=c,b.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},b.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},7360:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationConnectionConfig=void 0;let d=c(17739);class e extends d.RestConfigBase{static get host(){return e.privHost}static get apiVersion(){return e.privApiVersion}static get clientAppId(){return e.privClientAppId}static get defaultLanguageCode(){return e.privDefaultLanguageCode}static get restPath(){return e.privRestPath}static get webSocketPath(){return e.privWebSocketPath}static get transcriptionEventKeys(){return e.privTranscriptionEventKeys}}b.ConversationConnectionConfig=e,e.privHost="dev.microsofttranslator.com",e.privRestPath="/capito/room",e.privApiVersion="2.0",e.privDefaultLanguageCode="en-US",e.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",e.privWebSocketPath="/capito/translate",e.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]},7565:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AddedLmIntent=void 0;class c{constructor(a,b){this.modelImpl=a,this.intentName=b}}b.AddedLmIntent=c},8152:a=>{"use strict";let b=(a,b)=>a.byteLength===b.byteLength||a.byteLength>b.byteLength?a.byteLength:b.byteLength,c=(a,b)=>c.from(a,b);c.sorter=(a,d)=>{let e=b(a=c(a),d=c(d)),f=0;for(;f<e-1;){if(f>=a.byteLength)return 1;if(f>=d.byteLength||a.getUint8(f)<d.getUint8(f))return -1;if(a.getUint8(f)>d.getUint8(f))return 1;f++}return 0},c.compare=(a,b)=>!c.sorter(a,b),c.memcopy=(a,b)=>{let d=c(a,b);return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)},c.arrayBuffer=(a,b)=>(a=c(a,b)).buffer.byteLength===a.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength);let d=(a,b=0,d=null)=>(a=c(a),d=(null===d?a.byteLength:d)-b,[a.buffer,a.byteOffset+b,d]);c.slice=(a,b,c)=>new DataView(...d(a,b,c)),c.memcopySlice=(a,b,c)=>{let[e,f,g]=d(a,b,c);return e.slice(f,g+f)},c.typedArray=(a,b=Uint8Array)=>new b((a=c(a)).buffer,a.byteOffset,a.byteLength/b.BYTES_PER_ELEMENT),c.concat=a=>{let b=new Uint8Array((a=(a=Array.from(a)).map(a=>c(a))).reduce((a,b)=>a+b.byteLength,0)),d=0;for(let e of a){let a=c.typedArray(e);b.set(a,d),d+=a.byteLength}return b.buffer};let e=65536;c.random=a=>{let b=new ArrayBuffer(a);if(a>e){let a=0;for(;a<b.byteLength;){let d;d=a+e>b.byteLength?b.byteLength-a:e;let f=new Uint8Array(b,a,d);a+=e,c._randomFill(f)}}else{let a=new Uint8Array(b);c._randomFill(a)}return b},a.exports=c},8239:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},8874:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ServiceRecognizerBase=void 0;let d=c(9403),e=c(94705),f=c(41686),g=c(35961),h=c(42436),i=c(59647),j=c(38786),k=c(66422),l=c(72142),m=c(72714),n=c(36092),o=c(48993),p=c(681),q=c(40406),r=c(23506);class s{constructor(a,b,c,d,h){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!a)throw new e.ArgumentNullError("authentication");if(!b)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("audioSource");if(!d)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=d.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=a,this.privConnectionFactory=b,this.privAudioSource=c,this.privRecognizerConfig=d,this.privIsDisposed=!1,this.privRecognizer=h,this.privRequestSession=new g.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new g.DynamicGrammarBuilder,this.privSpeechContext=new g.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new g.AgentConfig,"on"===this.privRecognizerConfig.parameters.getProperty(f.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?this.privSetTimeout=e.Timeout.setTimeout:("undefined"!=typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),"undefined"!=typeof globalThis&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(a=>{if("ConnectionClosedEvent"===a.name){let b=a;(1003===b.statusCode||1007===b.statusCode||1002===b.statusCode||4e3===b.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(f.CancellationReason.Error,1007===b.statusCode?f.CancellationErrorCode.BadRequestParameters:f.CancellationErrorCode.ConnectionFailure,`${b.reason} websocket error code: ${b.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,e.createNoDashGuid)())}setTranslationJson(){let a=this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==a){let b=a.split(","),c=this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),d=this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),e=void 0!==c?k.NextAction.Synthesize:k.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:e},onSuccess:{action:e},output:{includePassThroughResults:!0,interimResults:{mode:l.Mode.Always}},targetLanguages:b},void 0!==d&&(this.privSpeechContext.getContext().translation.category=d),void 0!==c){let a={};for(let d of b)a[d]=c;this.privSpeechContext.getContext().synthesis={defaultVoices:a}}let g=this.privSpeechContext.getContext().phraseDetection||{};g.onSuccess={action:r.NextAction.Translate},g.onInterim={action:r.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=g}}setSpeechSegmentationTimeoutJson(){let a=this.privRecognizerConfig.parameters.getProperty(f.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),b=this.privRecognizerConfig.parameters.getProperty(f.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),c=this.privRecognizerConfig.parameters.getProperty(f.PropertyId.Speech_SegmentationStrategy,void 0),d={mode:i.SegmentationMode.Normal,segmentationForcedTimeoutMs:0,segmentationSilenceTimeoutMs:0},e=!1;if(void 0!==c){e=!0;let a=i.SegmentationMode.Normal;switch(c.toLowerCase()){case"default":break;case"time":a=i.SegmentationMode.Custom;break;case"semantic":a=i.SegmentationMode.Semantic}d.mode=a}if(void 0!==a){e=!0;let b=parseInt(a,10);d.mode=i.SegmentationMode.Custom,d.segmentationSilenceTimeoutMs=b}if(void 0!==b){e=!0;let a=parseInt(b,10);d.mode=i.SegmentationMode.Custom,d.segmentationForcedTimeoutMs=a}if(e){let a=this.privSpeechContext.getContext().phraseDetection||{};switch(a.mode=this.recognitionMode,this.recognitionMode){case j.RecognitionMode.Conversation:a.conversation=a.conversation??{segmentation:{}},a.conversation.segmentation=d;break;case j.RecognitionMode.Interactive:a.interactive=a.interactive??{segmentation:{}},a.interactive.segmentation=d;break;case j.RecognitionMode.Dictation:a.dictation=a.dictation??{},a.dictation.segmentation=d}this.privSpeechContext.getContext().phraseDetection=a}}setLanguageIdJson(){let a=this.privSpeechContext.getContext().phraseDetection||{};if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){let b,c=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");1===c.length&&c[0]===g.AutoDetectSourceLanguagesOpenRangeOptionName&&(c[0]="UND"),b="Continuous"===this.privRecognizerConfig.languageIdMode?m.LanguageIdDetectionMode.DetectContinuous:m.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:c,mode:b,onSuccess:{action:n.NextAction.Recognize},onUnknown:{action:o.OnUnknownAction.None},priority:m.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.Auto},phraseResults:{resultType:q.PhraseResultOutputType.Always}};let d=this.privRecognizerConfig.sourceLanguageModels;void 0!==d&&(a.customModels=d,a.onInterim={action:r.NextAction.None},a.onSuccess={action:r.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=a}setOutputDetailLevelJson(){this.privEnableSpeakerId&&("true"===this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(g.OutputFormatPropertyName,f.OutputFormat[f.OutputFormat.Simple]).toLowerCase()===f.OutputFormat[f.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(a){this.privRecognizerConfig.parameters.setProperty(f.PropertyId.ConversationTranslator_Token,a)}set voiceProfileType(a){this.privRecognizerConfig.parameters.setProperty(f.PropertyId.SpeechServiceConnection_SpeakerIdMode,a)}set authentication(a){this.privAuthentication=a}isDisposed(){return this.privIsDisposed}async dispose(a){if(this.privIsDisposed=!0,void 0!==this.privConnectionPromise)try{let b=await this.privConnectionPromise;await b.dispose(a)}catch(a){return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(a,b,c){let e;if(void 0!==this.recognizeOverride)return void await this.recognizeOverride(a,b,c);if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=a,"2"===this.privRecognizerConfig.recognitionEndpointVersion){let b=this.privSpeechContext.getContext().phraseDetection||{};b.mode=a,this.privSpeechContext.getContext().phraseDetection=b}this.setLanguageIdJson(),this.setTranslationJson(),void 0!==this.privRecognizerConfig.autoDetectSourceLanguages&&void 0!==this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.privSuccessCallback=b,this.privErrorCallback=c,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);let h=this.connectImpl();try{let a=await this.audioSource.attach(this.privRequestSession.audioNodeId),b=await this.audioSource.format,c=await this.audioSource.deviceInfo;this.privIsLiveAudio=c.type&&c.type===g.type.Microphones,e=new d.ReplayableAudioNode(a,b.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(e,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c}}catch(a){throw await this.privRequestSession.onStopRecognizing(),a}try{await h}catch(a){await this.cancelRecognitionLocal(f.CancellationReason.Error,f.CancellationErrorCode.ConnectionFailure,a);return}let i=new f.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,i),this.receiveMessage(),this.sendAudio(e).catch(async a=>{await this.cancelRecognitionLocal(f.CancellationReason.Error,f.CancellationErrorCode.RuntimeError,a)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(a,b){this.connectImpl().then(()=>{try{a&&a()}catch(a){b&&b(a)}},a=>{try{b&&b(a)}catch(a){}})}async disconnect(){if(await this.cancelRecognitionLocal(f.CancellationReason.Error,f.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&await this.disconnectOverride(),void 0!==this.privConnectionPromise)try{await (await this.privConnectionPromise).dispose()}catch(a){}this.privConnectionPromise=void 0}sendMessage(a){}async sendNetworkMessage(a,b){let c="string"==typeof b?e.MessageType.Text:e.MessageType.Binary,d="string"==typeof b?"application/json":"";return(await this.fetchConnection()).send(new h.SpeechConnectionMessage(c,a,this.privRequestSession.requestId,d,b))}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(a){this.privExpectContentAssessmentResponse=a}async sendTelemetryData(){let a=this.privRequestSession.getTelemetry();if(!0!==s.telemetryDataEnabled||this.privIsDisposed||null===a)return;if(s.telemetryData)try{s.telemetryData(a)}catch{}let b=await this.fetchConnection();await b.send(new h.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",a))}async cancelRecognitionLocal(a,b,c){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a,b,c))}async receiveMessage(){try{if(this.privIsDisposed)return;let a=await this.fetchConnection(),b=await a.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!b)return this.receiveMessage();this.privServiceHasSentMessage=!0;let c=h.SpeechConnectionMessage.fromConnectionMessage(b);if(c.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":let d=g.SpeechDetected.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset),i=new f.RecognitionEventArgs(d.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,i);break;case"speech.enddetected":let j;j=c.textBody.length>0?c.textBody:"{ Offset: 0 }";let k=g.SpeechDetected.fromJSON(j,this.privRequestSession.currentTurnAudioOffset),l=new f.RecognitionEventArgs(k.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,l);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(f.CancellationReason.EndOfStream,f.CancellationErrorCode.NoError,void 0));let m=new f.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing)a=await this.fetchConnection(),await this.sendPrePayloadJSON(a);else{this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,m);return}break;default:!await this.processTypeSpecificMessages(c)&&this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch(a){return null}}updateSpeakerDiarizationAudioOffset(){let a=this.privRequestSession.recognitionBytesSent,b=0!==this.privAverageBytesPerMs?a/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(b)}sendSpeechContext(a,b){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();let c=this.speechContext.toJSON();if(b&&this.privRequestSession.onSpeechContext(),c)return a.send(new h.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",c))}setupTranslationWithLanguageId(){let a=this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),b=void 0!==this.privRecognizerConfig.autoDetectSourceLanguages;if(void 0!==a&&b){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.None},phraseResults:{resultType:q.PhraseResultOutputType.None}};let a=this.privSpeechContext.getContext().translation;if(a){let b=this.privRecognizerConfig.sourceLanguageModels;if(void 0!==b&&b.length>0){let a=this.privSpeechContext.getContext().phraseDetection||{};a.customModels=b,this.privSpeechContext.getContext().phraseDetection=a}void 0!==this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&(a.onSuccess={action:k.NextAction.Synthesize},a.onPassthrough={action:k.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(a,b=!0){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(a);await this.sendSpeechContext(a,b),await this.sendWaveHeader(a)}async sendWaveHeader(a){let b=await this.audioSource.format;return a.send(new h.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",b.header))}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride)?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise}sendSpeechServiceConfig(a,b,c){if(b.onSpeechContext(),!0!==s.telemetryDataEnabled&&(c=JSON.stringify({context:{system:JSON.parse(c).context.system}})),"true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){let a=JSON.parse(c);a.context.DisableReferenceChannel="True",a.context.MicSpec="1_0_0",c=JSON.stringify(a)}if(c)return a.send(new h.SpeechConnectionMessage(e.MessageType.Text,"speech.config",b.requestId,"application/json",c))}async fetchConnection(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(a){let b=await this.audioSource.format;this.privAverageBytesPerMs=b.avgBytesPerSec/1e3;let c=Date.now(),d=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),f=b.avgBytesPerSec/1e3*parseInt(d,10),g=this.privRequestSession.recogNumber,i=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===g){let d,j,k=await this.fetchConnection(),l=await a.read();if(!this.privRequestSession.isSpeechEnded&&(!l||l.isEnd?(d=null,j=0):(d=l.buffer,this.privRequestSession.onAudioSent(d.byteLength),j=f>=this.privRequestSession.bytesSent?0:Math.max(0,c-Date.now())),0!==j&&await this.delay(j),null!==d&&(c=Date.now()+1e3*d.byteLength/(2*b.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===g)){if(k.send(new h.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,d)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!l?.isEnd)return i();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}};return i()}async retryableConnect(){let a=!1;this.privAuthFetchEventId=(0,e.createNoDashGuid)();let b=this.privRequestSession.sessionId;this.privConnectionId=void 0!==b?b:(0,e.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let c=0,d="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();let b=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),e=await b;await this.privRequestSession.onAuthCompleted(!1);let f=await this.privConnectionFactory.create(this.privRecognizerConfig,e,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(f.events),f.events.attach(a=>{this.connectionEvents.onEvent(a)});let g=await f.open();if(200===g.statusCode)return await this.privRequestSession.onConnectionEstablishCompleted(g.statusCode),Promise.resolve(f);1006===g.statusCode&&(a=!0),c=g.statusCode,d=g.reason}return await this.privRequestSession.onConnectionEstablishCompleted(c,d),Promise.reject(`Unable to contact server. StatusCode: ${c}, ${this.privRecognizerConfig.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${d}`)}delay(a){return new Promise(b=>this.privSetTimeout(b,a))}writeBufferToConsole(a){let b="Buffer Size: ";if(null===a)b+="null";else{let c=new Uint8Array(a);b+=`${a.byteLength}\r
`;for(let d=0;d<a.byteLength;d++)b+=c[d].toString(16).padStart(2,"0")+" ",(d+1)%16==0&&(console.info(b),b="")}console.info(b)}async sendFinalAudio(){let a=await this.fetchConnection();await a.send(new h.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){let a=await this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(a):(await this.sendSpeechServiceConfig(a,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(a,!1),a)}}b.ServiceRecognizerBase=s,s.telemetryDataEnabled=!0},8882:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceProfilePhraseResult=void 0;let d=c(87470),e=c(41686);class f extends e.VoiceProfileResult{constructor(a,b,c,e){super(a,b),this.privPhrases=[],d.Contracts.throwIfNullOrUndefined(e,"phrase array"),this.privType=c,e&&e[0]&&(this.privPhrases=e)}get phrases(){return this.privPhrases}get type(){return this.privType}}b.VoiceProfilePhraseResult=f},8941:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionFactoryBase=void 0;let d=c(35961),e=c(94705),f=c(41686),g=c(1255);class h{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,b,c){new Map([[f.PropertyId.Speech_SegmentationSilenceTimeoutMs,g.QueryParameterNames.SegmentationSilenceTimeoutMs],[f.PropertyId.SpeechServiceConnection_EnableAudioLogging,g.QueryParameterNames.EnableAudioLogging],[f.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,g.QueryParameterNames.EndSilenceTimeoutMs],[f.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,g.QueryParameterNames.InitialSilenceTimeoutMs],[f.PropertyId.SpeechServiceResponse_PostProcessingOption,g.QueryParameterNames.Postprocessing],[f.PropertyId.SpeechServiceResponse_ProfanityOption,g.QueryParameterNames.Profanity],[f.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,g.QueryParameterNames.EnableWordLevelTimestamps],[f.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,g.QueryParameterNames.StableIntermediateThreshold]]).forEach((d,e)=>{this.setUrlParameter(e,d,a,b,c)});let e=JSON.parse(a.parameters.getProperty(d.ServicePropertiesPropertyName,"{}"));Object.keys(e).forEach(a=>{b[a]=e[a]})}setUrlParameter(a,b,c,d,e){let f=c.parameters.getProperty(a,void 0);f&&(!e||-1===e.search(b))&&(d[b]=f.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(a){let b;if("undefined"!=typeof window&&void 0!==window.fetch){let c=new URL(a);c.protocol="https:",c.port="443",c.searchParams.append("GenerateRedirectResponse","true");let d=c.toString();e.Events.instance.onEvent(new e.ConnectionRedirectEvent("",d,void 0,"ConnectionFactoryBase: redirectUrl request"));let f=await fetch(d);if(200!==f.status)return a;b=await f.text()}else b=a;e.Events.instance.onEvent(new e.ConnectionRedirectEvent("",b,a,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(b.trim()).toString()}catch(b){return a}}}b.ConnectionFactoryBase=h},8997:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.PropertyId=void 0,function(a){a[a.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",a[a.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",a[a.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",a[a.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",a[a.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",a[a.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",a[a.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",a[a.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",a[a.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",a[a.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",a[a.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",a[a.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",a[a.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",a[a.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",a[a.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",a[a.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",a[a.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",a[a.Speech_SessionId=17]="Speech_SessionId",a[a.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",a[a.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",a[a.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",a[a.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",a[a.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",a[a.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",a[a.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",a[a.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",a[a.CancellationDetails_Reason=26]="CancellationDetails_Reason",a[a.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",a[a.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",a[a.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",a[a.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",a[a.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",a[a.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",a[a.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",a[a.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",a[a.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",a[a.SpeechServiceConnection_EnableAudioLogging=36]="SpeechServiceConnection_EnableAudioLogging",a[a.SpeechServiceConnection_LanguageIdMode=37]="SpeechServiceConnection_LanguageIdMode",a[a.SpeechServiceConnection_RecognitionEndpointVersion=38]="SpeechServiceConnection_RecognitionEndpointVersion",a[a.SpeechServiceConnection_SpeakerIdMode=39]="SpeechServiceConnection_SpeakerIdMode",a[a.SpeechServiceResponse_ProfanityOption=40]="SpeechServiceResponse_ProfanityOption",a[a.SpeechServiceResponse_PostProcessingOption=41]="SpeechServiceResponse_PostProcessingOption",a[a.SpeechServiceResponse_RequestWordLevelTimestamps=42]="SpeechServiceResponse_RequestWordLevelTimestamps",a[a.SpeechServiceResponse_StablePartialResultThreshold=43]="SpeechServiceResponse_StablePartialResultThreshold",a[a.SpeechServiceResponse_OutputFormatOption=44]="SpeechServiceResponse_OutputFormatOption",a[a.SpeechServiceResponse_TranslationRequestStablePartialResult=45]="SpeechServiceResponse_TranslationRequestStablePartialResult",a[a.SpeechServiceResponse_RequestWordBoundary=46]="SpeechServiceResponse_RequestWordBoundary",a[a.SpeechServiceResponse_RequestPunctuationBoundary=47]="SpeechServiceResponse_RequestPunctuationBoundary",a[a.SpeechServiceResponse_RequestSentenceBoundary=48]="SpeechServiceResponse_RequestSentenceBoundary",a[a.SpeechServiceResponse_DiarizeIntermediateResults=49]="SpeechServiceResponse_DiarizeIntermediateResults",a[a.Conversation_ApplicationId=50]="Conversation_ApplicationId",a[a.Conversation_DialogType=51]="Conversation_DialogType",a[a.Conversation_Initial_Silence_Timeout=52]="Conversation_Initial_Silence_Timeout",a[a.Conversation_From_Id=53]="Conversation_From_Id",a[a.Conversation_Conversation_Id=54]="Conversation_Conversation_Id",a[a.Conversation_Custom_Voice_Deployment_Ids=55]="Conversation_Custom_Voice_Deployment_Ids",a[a.Conversation_Speech_Activity_Template=56]="Conversation_Speech_Activity_Template",a[a.Conversation_Request_Bot_Status_Messages=57]="Conversation_Request_Bot_Status_Messages",a[a.Conversation_Agent_Connection_Id=58]="Conversation_Agent_Connection_Id",a[a.SpeechServiceConnection_Host=59]="SpeechServiceConnection_Host",a[a.ConversationTranslator_Host=60]="ConversationTranslator_Host",a[a.ConversationTranslator_Name=61]="ConversationTranslator_Name",a[a.ConversationTranslator_CorrelationId=62]="ConversationTranslator_CorrelationId",a[a.ConversationTranslator_Token=63]="ConversationTranslator_Token",a[a.PronunciationAssessment_ReferenceText=64]="PronunciationAssessment_ReferenceText",a[a.PronunciationAssessment_GradingSystem=65]="PronunciationAssessment_GradingSystem",a[a.PronunciationAssessment_Granularity=66]="PronunciationAssessment_Granularity",a[a.PronunciationAssessment_EnableMiscue=67]="PronunciationAssessment_EnableMiscue",a[a.PronunciationAssessment_Json=68]="PronunciationAssessment_Json",a[a.PronunciationAssessment_Params=69]="PronunciationAssessment_Params",a[a.SpeakerRecognition_Api_Version=70]="SpeakerRecognition_Api_Version",a[a.WebWorkerLoadType=71]="WebWorkerLoadType",a[a.TalkingAvatarService_WebRTC_SDP=72]="TalkingAvatarService_WebRTC_SDP"}(c=b.PropertyId||(b.PropertyId={}))},9038:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationServiceRecognizer=void 0;let d=c(41686),e=c(35961);class f extends e.ServiceRecognizerBase{constructor(a,b,c,d,e){super(a,b,c,d,e),this.handleSpeechPhraseMessage=async a=>this.handleSpeechPhrase(a),this.handleSpeechHypothesisMessage=a=>this.handleSpeechHypothesis(a)}processTypeSpecificMessages(a){}handleRecognizedCallback(a,b,c){}handleRecognizingCallback(a,b,c){}async processSpeechMessages(a){let b=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(a.textBody),b=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(a.textBody),b=!0}return b}cancelRecognition(a,b,c,d,e){}async handleSpeechPhrase(a){let b,c=e.SimpleSpeechPhrase.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),f=e.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus),g=new d.PropertyCollection;if(g.setProperty(d.PropertyId.SpeechServiceResponse_JsonResult,a),this.privRequestSession.onPhraseRecognized(c.Offset+c.Duration),d.ResultReason.Canceled===f){let a=e.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),b=e.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);await this.cancelRecognitionLocal(a,b,e.EnumTranslation.implTranslateErrorDetails(b))}else if(c.RecognitionStatus!==e.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===d.OutputFormat[d.OutputFormat.Simple])b=new d.SpeechRecognitionResult(this.privRequestSession.requestId,f,c.DisplayText,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,c.asJson(),g);else{let c=e.DetailedSpeechPhrase.fromJSON(a,this.privRequestSession.currentTurnAudioOffset);b=new d.SpeechRecognitionResult(this.privRequestSession.requestId,f,c.Text,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,c.asJson(),g)}this.handleRecognizedCallback(b,b.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(a){let b=e.SpeechHypothesis.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),c=new d.PropertyCollection;c.setProperty(d.PropertyId.SpeechServiceResponse_JsonResult,a);let f=new d.SpeechRecognitionResult(this.privRequestSession.requestId,d.ResultReason.RecognizingSpeech,b.Text,b.Duration,b.Offset,b.Language,b.LanguageDetectionConfidence,b.SpeakerId,void 0,b.asJson(),c);this.privRequestSession.onHypothesis(b.Offset),this.handleRecognizingCallback(f,b.Duration,this.privRequestSession.sessionId)}}b.ConversationServiceRecognizer=f},9187:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},9403:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(42248),b),e(c(38341),b),e(c(23844),b),e(c(70781),b),e(c(90370),b),e(c(23755),b),e(c(3673),b),e(c(18487),b),e(c(23100),b),e(c(22850),b),e(c(17739),b)},9658:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RiffPcmEncoder=void 0;class c{constructor(a,b){this.privActualSampleRate=a,this.privDesiredSampleRate=b}encode(a){let b=this.downSampleAudioFrame(a,this.privActualSampleRate,this.privDesiredSampleRate);if(!b)return null;let c=new ArrayBuffer(2*b.length),d=new DataView(c);return this.floatTo16BitPCM(d,0,b),c}setString(a,b,c){for(let d=0;d<c.length;d++)a.setUint8(b+d,c.charCodeAt(d))}floatTo16BitPCM(a,b,c){for(let d=0;d<c.length;d++,b+=2){let e=Math.max(-1,Math.min(1,c[d]));a.setInt16(b,e<0?32768*e:32767*e,!0)}}downSampleAudioFrame(a,b,c){if(!a)return null;if(c===b||c>b)return a;let d=b/c,e=Math.round(a.length/d),f=new Float32Array(e),g=0,h=0;for(;h<e;){let b=Math.round((h+1)*d),c=0,e=0;for(;g<b&&g<a.length;)c+=a[g++],e++;f[h++]=c/e}return f}}b.RiffPcmEncoder=c},9728:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceProfileConnectionFactory=b.SpeakerRecognitionConnectionFactory=void 0;let d=c(9403),e=c(41686),f=c(8941),g=c(35961),h=c(89393);class i extends f.ConnectionFactoryBase{create(a,b,c,i){let j=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!j){let b=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),d=f.ConnectionFactoryBase.getHostSuffix(b),g=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${b}.spr-frontend.speech${d}`),h=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");j=`${g}/speaker/ws/${this.scenarioToPath(h)}/${c}`}let k={format:"simple",language:a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(a,k,j);let l={};void 0!==b.token&&""!==b.token&&(l[b.headerName]=b.token),l[h.HeaderNames.ConnectionId]=i,l[h.HeaderNames.SpIDAuthKey]=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),a.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,j);let m="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new d.WebsocketConnection(j,k,l,new g.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),m,i))}scenarioToPath(a){switch(a){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}class j extends i{create(a,b,c){return super.create(a,b,"recognition",c)}}b.SpeakerRecognitionConnectionFactory=j;class k extends i{create(a,b,c){return super.create(a,b,"profile",c)}}b.VoiceProfileConnectionFactory=k},10238:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisConnectionFactory=void 0;let d=c(9403),e=c(41686),f=c(8941),g=c(35961),h=c(89393),i=c(1255);class j{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(a,b,c){let j=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0),k=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),l=f.ConnectionFactoryBase.getHostSuffix(k),m=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),n=void 0===m?"tts":"voice",o=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+k+"."+n+".speech"+l),p={},q={};if(void 0!==b.token&&""!==b.token&&(q[b.headerName]=b.token),q[h.HeaderNames.ConnectionId]=c,void 0===m||""===m||j&&-1!==j.search(i.QueryParameterNames.CustomVoiceDeploymentId)||(p[i.QueryParameterNames.CustomVoiceDeploymentId]=m),a.avatarEnabled&&(!j||-1===j.search(i.QueryParameterNames.EnableAvatar))&&(p[i.QueryParameterNames.EnableAvatar]="true"),j){let a=new URL(j),b=a.pathname;(""===b||"/"===b)&&(a.pathname=this.synthesisUri,j=await f.ConnectionFactoryBase.getRedirectUrlFromEndpoint(a.toString()))}j||(j=o+this.synthesisUri),a.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,j);let r="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new d.WebsocketConnection(j,p,q,new g.WebsocketMessageFormatter,d.ProxyInfo.fromParameters(a.parameters),r,c)}}b.SpeechSynthesisConnectionFactory=j},10340:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AudioOutputFormatImpl=void 0;let d=c(43551),e=c(57645);class f extends e.AudioStreamFormatImpl{constructor(a,b,c,d,e,f,g,h,i){super(c,f,b,a),this.formatTag=a,this.avgBytesPerSec=d,this.blockAlign=e,this.priAudioFormatString=g,this.priRequestAudioFormatString=h,this.priHasHeader=i}static fromSpeechSynthesisOutputFormat(a){return void 0===a?f.getDefaultOutputFormat():f.fromSpeechSynthesisOutputFormatString(f.SpeechSynthesisOutputFormatToString[a])}static fromSpeechSynthesisOutputFormatString(a){switch(a){case"raw-8khz-8bit-mono-mulaw":return new f(e.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,a,a,!1);case"riff-16khz-16kbps-mono-siren":return new f(e.AudioFormatTag.Siren,1,16e3,2e3,40,0,a,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new f(e.AudioFormatTag.Siren,1,16e3,2e3,40,0,a,a,!1);case"audio-16khz-32kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,16e3,4096,2,16,a,a,!1);case"audio-16khz-128kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,16e3,16384,2,16,a,a,!1);case"audio-16khz-64kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,16e3,8192,2,16,a,a,!1);case"audio-24khz-48kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,24e3,6144,2,16,a,a,!1);case"audio-24khz-96kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,24e3,12288,2,16,a,a,!1);case"audio-24khz-160kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,24e3,20480,2,16,a,a,!1);case"raw-16khz-16bit-mono-truesilk":return new f(e.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,a,a,!1);case"riff-8khz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,8e3,16e3,2,16,a,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,24e3,48e3,2,16,a,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new f(e.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,a,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,16e3,32e3,2,16,a,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,24e3,48e3,2,16,a,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,8e3,16e3,2,16,a,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new f(e.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,a,a,!1);case"ogg-24khz-16bit-mono-opus":return new f(e.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,a,a,!1);case"raw-48khz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,48e3,96e3,2,16,a,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,48e3,96e3,2,16,a,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,48e3,12288,2,16,a,a,!1);case"audio-48khz-192kbitrate-mono-mp3":return new f(e.AudioFormatTag.MP3,1,48e3,24576,2,16,a,a,!1);case"ogg-48khz-16bit-mono-opus":return new f(e.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,a,a,!1);case"webm-16khz-16bit-mono-opus":return new f(e.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,a,a,!1);case"webm-24khz-16bit-mono-opus":return new f(e.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,a,a,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new f(e.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,a,a,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new f(e.AudioFormatTag.OPUS,1,16e3,4e3,2,16,a,a,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new f(e.AudioFormatTag.OPUS,1,24e3,6e3,2,16,a,a,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new f(e.AudioFormatTag.OPUS,1,24e3,3e3,2,16,a,a,!1);case"audio-24khz-16bit-mono-flac":return new f(e.AudioFormatTag.FLAC,1,24e3,24e3,2,16,a,a,!1);case"audio-48khz-16bit-mono-flac":return new f(e.AudioFormatTag.FLAC,1,48e3,3e4,2,16,a,a,!1);case"raw-24khz-16bit-mono-truesilk":return new f(e.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,a,a,!1);case"raw-8khz-8bit-mono-alaw":return new f(e.AudioFormatTag.ALaw,1,8e3,8e3,1,8,a,a,!1);case"riff-8khz-8bit-mono-alaw":return new f(e.AudioFormatTag.ALaw,1,8e3,8e3,1,8,a,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,22050,44100,2,16,a,a,!1);case"riff-22050hz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,22050,44100,2,16,a,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,44100,88200,2,16,a,a,!1);case"riff-44100hz-16bit-mono-pcm":return new f(e.AudioFormatTag.PCM,1,44100,88200,2,16,a,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new f(e.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,a,a,!1);case"g722-16khz-64kbps":return new f(e.AudioFormatTag.G722,1,16e3,8e3,2,16,a,a,!1);default:return new f(e.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return f.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(a){if(this.priHasHeader){let b=new DataView(this.privHeader);b.setUint32(4,a+this.privHeader.byteLength-8,!0),b.setUint32(40,a,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(a){if(!this.hasHeader)return a;this.updateHeader(a.byteLength);let b=new Uint8Array(a.byteLength+this.header.byteLength);return b.set(new Uint8Array(this.header),0),b.set(new Uint8Array(a),this.header.byteLength),b.buffer}}b.AudioOutputFormatImpl=f,f.SpeechSynthesisOutputFormatToString={[d.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[d.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[d.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[d.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[d.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[d.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[d.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[d.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[d.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[d.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[d.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[d.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[d.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[d.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[d.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[d.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[d.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[d.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[d.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[d.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[d.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10977:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createNoDashGuid=b.createGuid=void 0;let d=c(70553),e=()=>(0,d.v4)();b.createGuid=e,b.createNoDashGuid=()=>e().replace(/-/g,"").toUpperCase()},11668:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.PronunciationAssessmentGranularity=void 0,function(a){a[a.Phoneme=1]="Phoneme",a[a.Word=2]="Word",a[a.FullText=3]="FullText"}(c=b.PronunciationAssessmentGranularity||(b.PronunciationAssessmentGranularity={}))},12380:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},12412:a=>{"use strict";a.exports=require("assert")},13233:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AgentConfig=void 0;class c{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(a){this.iPrivConfig=a}}b.AgentConfig=c},13319:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisTurn=void 0;let d=c(94705),e=c(65543),f=c(41686),g=c(94453),h=c(65133);class i{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,d.createNoDashGuid)(),this.privTurnDeferral=new d.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(a){this.privStreamId=a}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(a){this.privAudioOutputFormat=a}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){let a=new f.PropertyCollection;return a.setProperty(f.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),a}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(!this.audioOutputFormat.hasHeader)return this.getAllReceivedAudio();{let a=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(a),this.privReceivedAudioWithHeader}}startNewSynthesis(a,b,c,d){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=a,this.privRawText=b,this.privIsSSML=c,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==d&&(this.privTurnAudioDestination=d,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new h.SynthesisTriggeredEvent(this.requestId,void 0,void 0===d?void 0:d.id()))}onPreConnectionStart(a){this.privAuthFetchEventId=a,this.onEvent(new h.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(a){a&&this.onComplete()}onConnectionEstablishCompleted(a){if(200===a){this.onEvent(new h.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}403===a&&this.onComplete()}onServiceResponseMessage(a){let b=JSON.parse(a);this.streamId=b.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(a){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new d.Deferred;let b=JSON.parse(a);b.webrtc&&(this.privWebRTCSDP=b.webrtc.connectionString)}onAudioChunkReceived(a){this.isSynthesizing&&(this.privAudioOutputStream.write(a),this.privBytesReceived+=a.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(a))}onTextBoundaryEvent(a){this.updateTextOffset(a.Data.text.Text,a.Type)}onVisemeMetadataReceived(a){void 0!==a.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=a.Data.AnimationChunk)}onSessionEnd(a){this.privAudioDuration=a.Data.Offset}async constructSynthesisResult(){let a=await this.getAllReceivedAudioWithHeader();return new f.SpeechSynthesisResult(this.requestId,f.ResultReason.SynthesizingAudioCompleted,a,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){let a=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",a}onEvent(a){d.Events.instance.onEvent(a)}static isXmlTag(a){return a.length>=2&&"<"===a[0]&&">"===a[a.length-1]}updateTextOffset(a,b){b===g.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(a,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+a.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!i.isXmlTag(a)&&this.updateTextOffset(a,b))):(this.privSentenceOffset=this.privRawText.indexOf(a,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+a.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!i.isXmlTag(a)&&this.updateTextOffset(a,b)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch(a){this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(a){return this.privRawText.indexOf("<",a+1)>this.privRawText.indexOf(">",a+1)}}b.SynthesisTurn=i},13936:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationRecognizer=void 0;let d=c(35961),e=c(38786),f=c(94705),g=c(32169),h=c(87470),i=c(41686);class j extends i.Recognizer{constructor(a,b,c){let e=a;h.Contracts.throwIfNull(e,"speechConfig"),super(b,e.properties,c||new d.TranslationConnectionFactory,a.tokenCredential),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&h.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),h.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),h.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(a,b,c){let e=a;return b.properties.mergeTo(e.properties),b.properties.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===d.AutoDetectSourceLanguagesOpenRangeOptionName&&e.properties.setProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new j(a,c)}get speechRecognitionLanguage(){return h.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return h.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return h.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,a)}recognizeOnceAsync(a,b){h.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,f.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,b)}startContinuousRecognitionAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,b)}stopContinuousRecognitionAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),a,b)}removeTargetLanguage(a){if(h.Contracts.throwIfNullOrUndefined(a,"language to be removed"),void 0!==this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){let b=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c=b.indexOf(a);c>-1&&(b.splice(c,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,b.join(",")),this.updateLanguages(b))}}addTargetLanguage(a){h.Contracts.throwIfNullOrUndefined(a,"language to be added");let b=[];void 0!==this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(b=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")).includes(a)||(b.push(a),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,b.join(","))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,a),b=[a]),this.updateLanguages(b)}close(a,b){h.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,f.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}onConnection(){}async dispose(a){!this.privDisposedTranslationRecognizer&&(this.privDisposedTranslationRecognizer=!0,a&&(await this.implRecognizerStop(),await super.dispose(a)))}createRecognizerConfig(a){return new d.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,b,c,e){let f=c;return new d.TranslationServiceRecognizer(a,b,f,e,this)}updateLanguages(a){let b=g.Connection.fromRecognizer(this);b&&(b.setMessageProperty("speech.context","translationcontext",{to:a}),b.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:a})))}}b.TranslationRecognizer=j},14601:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationRequestSession=void 0;let d=c(94705);class e{constructor(a){this.privIsDisposed=!1,this.privDetachables=[],this.privSessionId=a,this.privRequestId=(0,d.createNoDashGuid)(),this.privRequestCompletionDeferral=new d.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(a,b){this.privSessionId=b}onAuthCompleted(a){a&&this.onComplete()}onConnectionEstablishCompleted(a){200!==a&&403===a&&this.onComplete()}onServiceTurnEndResponse(a){a?this.privRequestId=(0,d.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed)for(let a of(this.privIsDisposed=!0,this.privDetachables))await a.detach()}onComplete(){}}b.ConversationRequestSession=e},14985:a=>{"use strict";a.exports=require("dns")},15884:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BaseAudioPlayer=void 0;let d=c(29016),e=c(41686),f=c(57645);class g{constructor(a){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===a&&(a=e.AudioStreamFormat.getDefaultInputFormat()),this.init(a)}playAudioSample(a,b,c){try{this.ensureInitializedContext();let c=this.formatAudioData(a),d=new Float32Array(this.samples.length+c.length);d.set(this.samples,0),d.set(c,this.samples.length),this.samples=d,b&&b()}catch(a){c&&c(a)}}stopAudio(a,b){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{a&&a()},a=>{b&&b(a)}),this.audioContext=null)}init(a){this.audioFormat=a,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();let a=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},a)}}createAudioContext(){this.audioContext=f.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(a){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(a),128);case 16:return this.formatArrayBuffer(new Int16Array(a),32768);case 32:return this.formatArrayBuffer(new Int32Array(a),0x80000000);default:throw new d.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(a,b){let c=new Float32Array(a.length);for(let d=0;d<a.length;d++)c[d]=a[d]/b;return c}updateAudioBuffer(){if(0===this.samples.length)return;let a=this.audioFormat.channels,b=this.audioContext.createBufferSource(),c=this.samples.length/a,d=this.audioContext.createBuffer(a,c,this.audioFormat.samplesPerSec);for(let b=0;b<a;b++){let c=b,e=d.getChannelData(b);for(let b=0;b<this.samples.length;b++,c+=a)e[b]=this.samples[c]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),b.buffer=d,b.connect(this.gainNode),b.start(this.startTime),this.startTime+=d.duration,this.samples=new Float32Array}async playAudio(a){null===this.audioContext&&this.createAudioContext();let b=this.audioContext.createBufferSource(),c=this.audioContext.destination;await this.audioContext.decodeAudioData(a,a=>{b.buffer=a,b.connect(c),b.start(0)})}}b.BaseAudioPlayer=g},16766:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranscriptionResult=void 0;let d=c(41686);class e extends d.RecognitionResult{constructor(a,b,c,d,e,f,g,h,i,j,k){super(a,b,c,d,e,f,g,i,j,k),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}}b.ConversationTranscriptionResult=e},16832:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AutoDetectSourceLanguageConfig=void 0;let d=c(35961),e=c(87470),f=c(41686),g=c(67997);class h{constructor(){this.privProperties=new f.PropertyCollection,this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=g.LanguageIdMode.AtStart}static fromOpenRange(){let a=new h;return a.properties.setProperty(f.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,d.AutoDetectSourceLanguagesOpenRangeOptionName),a.properties.setProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");let b=new h;return b.properties.setProperty(f.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),b}static fromSourceLanguageConfigs(a){if(a.length<1)throw Error("Expected non-empty SourceLanguageConfig array.");let b=new h,c=[];return a.forEach(a=>{if(c.push(a.language),void 0!==a.endpointId&&""!==a.endpointId){let c=a.language+f.PropertyId.SpeechServiceConnection_EndpointId.toString();b.properties.setProperty(c,a.endpointId)}}),b.properties.setProperty(f.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),b}get properties(){return this.privProperties}set mode(a){a===g.LanguageIdMode.Continuous?(this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(f.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}}b.AutoDetectSourceLanguageConfig=h},17096:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Stream=void 0;let d=c(29016),e=c(10977),f=c(61357);class g{constructor(a){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=a||(0,e.createNoDashGuid)(),this.privReaderQueue=new f.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(a){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(a)}catch(a){}}read(){if(this.privIsReadEnded)throw new d.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async a=>((void 0===a||a.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),a))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new f.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new d.InvalidOperationError("Stream closed")}}b.Stream=g},17477:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SendingAgentContextMessageEvent=b.DialogEvent=void 0;let d=c(19991);class e extends d.PlatformEvent{constructor(a,b=d.EventType.Info){super(a,b)}}b.DialogEvent=e;class f extends e{constructor(a){super("SendingAgentContextMessageEvent"),this.privAgentConfig=a}get agentConfig(){return this.privAgentConfig}}b.SendingAgentContextMessageEvent=f},17528:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CancellationEventArgsBase=void 0;let d=c(41686);class e extends d.RecognitionEventArgs{constructor(a,b,c,d,e){super(d,e),this.privReason=a,this.privErrorDetails=b,this.privErrorCode=c}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}b.CancellationEventArgsBase=e},17529:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},17739:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RestConfigBase=void 0;class c{static get requestOptions(){return c.privDefaultRequestOptions}static get configParams(){return c.privDefaultParams}static get restErrors(){return c.privRestErrors}}b.RestConfigBase=c,c.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},c.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},c.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},18479:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranslationEventArgs=void 0;let d=c(41686);class e extends d.RecognitionEventArgs{constructor(a,b,c){super(b,c),this.privResult=a}get result(){return this.privResult}}b.ConversationTranslationEventArgs=e},18487:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ReplayableAudioNode=void 0;class c{constructor(a,b){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=a,this.privBytesPerSecond=b}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){let a=Math.round((this.privReplayOffset-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7);0!=a%2&&a++;let b=0;for(;b<this.privBuffers.length&&a>=this.privBuffers[b].chunk.buffer.byteLength;)a-=this.privBuffers[b++].chunk.buffer.byteLength;if(b<this.privBuffers.length){let c=this.privBuffers[b].chunk.buffer.slice(a);return this.privReplayOffset+=c.byteLength/this.privBytesPerSecond*1e7,b===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:c,isEnd:!1,timeReceived:this.privBuffers[b].chunk.timeReceived})}}return this.privAudioNode.read().then(a=>(a&&a.buffer&&(this.privBuffers.push(new d(a,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=a.buffer.byteLength),a))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(a){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=a;let b=Math.round((a-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7),c=0;for(;c<this.privBuffers.length&&b>=this.privBuffers[c].chunk.buffer.byteLength;)b-=this.privBuffers[c++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(a-b/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(c)}findTimeAtOffset(a){if(a<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(let b of this.privBuffers){let c=b.byteOffset/this.privBytesPerSecond*1e7,d=c+b.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(a>=c&&a<=d)return b.chunk.timeReceived}return 0}}b.ReplayableAudioNode=c;class d{constructor(a,b,c){this.chunk=a,this.serial=b,this.byteOffset=c}}},18648:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranscriberConnectionFactory=void 0;let d=c(9403),e=c(41686),f=c(35961),g=c(8941),h=c(35961),i=c(89393),j=c(1255);class k extends g.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}async create(a,b,c){let f=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0),k=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),l=g.ConnectionFactoryBase.getHostSuffix(k),m=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+k+".stt.speech"+l),n={},o=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),p=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(o?f&&-1!==f.search(j.QueryParameterNames.CustomSpeechDeploymentId)||(n[j.QueryParameterNames.CustomSpeechDeploymentId]=o):p&&(!f||-1===f.search(j.QueryParameterNames.Language))&&(n[j.QueryParameterNames.Language]=p),void 0!==a.autoDetectSourceLanguages&&(n[j.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(a,n,f),f){let a=new URL(f),b=a.pathname;(""===b||"/"===b)&&(a.pathname=this.universalUri,f=await g.ConnectionFactoryBase.getRedirectUrlFromEndpoint(a.toString()))}f||(f=`${m}${this.universalUri}`);let q={};void 0!==b.token&&""!==b.token&&(q[b.headerName]=b.token),q[i.HeaderNames.ConnectionId]=c;let r="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),s=new d.WebsocketConnection(f,n,q,new h.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),r,c),t=s.uri;return a.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,t),s}setV2UrlParams(a,b,c){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,j.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,j.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,j.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,j.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,j.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,j.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,j.QueryParameterNames.StableIntermediateThreshold]]).forEach((d,e)=>{this.setUrlParameter(e,d,a,b,c)});let d=JSON.parse(a.parameters.getProperty(f.ServicePropertiesPropertyName,"{}"));Object.keys(d).forEach(a=>{b[a]=d[a]})}}b.ConversationTranscriberConnectionFactory=k},18660:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranscriberRecognizer=void 0;let d=c(94705),e=c(87470),f=c(41686),g=c(35961),h=c(38786);class i extends f.Recognizer{constructor(a,b){let c=a;e.Contracts.throwIfNull(c,"speechTranslationConfig");let d=b;e.Contracts.throwIfNull(d,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,f.PropertyId[f.PropertyId.SpeechServiceConnection_RecoLanguage]),super(b,c.properties,new g.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(f.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){e.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){e.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,b){(0,d.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(h.RecognitionMode.Conversation),a,b)}stopContinuousRecognitionAsync(a,b){(0,d.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),a,b)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,b){let c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,b)}async pushMeetingEvent(a,b){let c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,b)}async enforceAudioGating(){let a=this.audioConfig,b=(await a.format).channels;if(1===b){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==b)throw Error(`Unsupported audio configuration: Detected ${b}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(b,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(b,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(b,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(b,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(b,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new g.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,b,c,d){let e=c;return new g.TranscriptionServiceRecognizer(a,b,e,d,this)}}b.TranscriberRecognizer=i},18685:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SimpleSpeechPhrase=void 0;let d=c(35961);class e{constructor(a,b=0){this.privSimpleSpeechPhrase=JSON.parse(a),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(b)}static fromJSON(a,b){return new e(a,b)}updateOffset(a){this.privSimpleSpeechPhrase.Offset+=a}asJson(){let a={...this.privSimpleSpeechPhrase};return JSON.stringify({...a,RecognitionStatus:d.RecognitionStatus[a.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(a){return"string"==typeof a?d.RecognitionStatus[a]:"number"==typeof a?a:void 0}}b.SimpleSpeechPhrase=e},19037:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisVisemeEventArgs=void 0;class c{constructor(a,b,c){this.privAudioOffset=a,this.privVisemeId=b,this.privAnimation=c}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}b.SpeechSynthesisVisemeEventArgs=c},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19207:a=>{"use strict";a.exports=(a,b=process.argv)=>{let c=a.startsWith("-")?"":1===a.length?"-":"--",d=b.indexOf(c+a),e=b.indexOf("--");return -1!==d&&(-1===e||d<e)}},19562:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InternalParticipants=b.ConversationTranslatorMessageTypes=b.ConversationTranslatorCommandTypes=b.ParticipantsListEventArgs=b.ParticipantEventArgs=b.ParticipantAttributeEventArgs=b.MuteAllEventArgs=b.LockRoomEventArgs=b.ConversationReceivedTranslationEventArgs=b.TranscriberRecognizer=b.ConversationRecognizerFactory=b.ConversationConnectionConfig=b.ConversationManager=void 0;var d=c(3511);Object.defineProperty(b,"ConversationManager",{enumerable:!0,get:function(){return d.ConversationManager}});var e=c(7360);Object.defineProperty(b,"ConversationConnectionConfig",{enumerable:!0,get:function(){return e.ConversationConnectionConfig}});var f=c(21838);Object.defineProperty(b,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return f.ConversationRecognizerFactory}});var g=c(18660);Object.defineProperty(b,"TranscriberRecognizer",{enumerable:!0,get:function(){return g.TranscriberRecognizer}});var h=c(63239);Object.defineProperty(b,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return h.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(b,"LockRoomEventArgs",{enumerable:!0,get:function(){return h.LockRoomEventArgs}}),Object.defineProperty(b,"MuteAllEventArgs",{enumerable:!0,get:function(){return h.MuteAllEventArgs}}),Object.defineProperty(b,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return h.ParticipantAttributeEventArgs}}),Object.defineProperty(b,"ParticipantEventArgs",{enumerable:!0,get:function(){return h.ParticipantEventArgs}}),Object.defineProperty(b,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return h.ParticipantsListEventArgs}});var i=c(7268);Object.defineProperty(b,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return i.ConversationTranslatorCommandTypes}}),Object.defineProperty(b,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return i.ConversationTranslatorMessageTypes}}),Object.defineProperty(b,"InternalParticipants",{enumerable:!0,get:function(){return i.InternalParticipants}})},19771:a=>{"use strict";a.exports=require("process")},19991:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.PlatformEvent=b.EventType=void 0;let e=c(10977);!function(a){a[a.Debug=0]="Debug",a[a.Info=1]="Info",a[a.Warning=2]="Warning",a[a.Error=3]="Error",a[a.None=4]="None"}(d=b.EventType||(b.EventType={}));class f{constructor(a,b){this.privName=a,this.privEventId=(0,e.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=b,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}b.PlatformEvent=f},20020:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ResultReason=void 0,function(a){a[a.NoMatch=0]="NoMatch",a[a.Canceled=1]="Canceled",a[a.RecognizingSpeech=2]="RecognizingSpeech",a[a.RecognizedSpeech=3]="RecognizedSpeech",a[a.RecognizedKeyword=4]="RecognizedKeyword",a[a.RecognizingIntent=5]="RecognizingIntent",a[a.RecognizedIntent=6]="RecognizedIntent",a[a.TranslatingSpeech=7]="TranslatingSpeech",a[a.TranslatedSpeech=8]="TranslatedSpeech",a[a.SynthesizingAudio=9]="SynthesizingAudio",a[a.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",a[a.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",a[a.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",a[a.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",a[a.RecognizedSpeakers=14]="RecognizedSpeakers",a[a.RecognizedSpeaker=15]="RecognizedSpeaker",a[a.ResetVoiceProfile=16]="ResetVoiceProfile",a[a.DeletedVoiceProfile=17]="DeletedVoiceProfile",a[a.VoicesListRetrieved=18]="VoicesListRetrieved",a[a.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",a[a.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",a[a.TranslatedInstantMessage=21]="TranslatedInstantMessage",a[a.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(c=b.ResultReason||(b.ResultReason={}))},20112:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MeetingTranscriptionCanceledEventArgs=void 0;let d=c(17528);class e extends d.CancellationEventArgsBase{}b.MeetingTranscriptionCanceledEventArgs=e},20637:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionState=void 0,function(a){a[a.None=0]="None",a[a.Connected=1]="Connected",a[a.Connecting=2]="Connecting",a[a.Disconnected=3]="Disconnected"}(c=b.ConnectionState||(b.ConnectionState={}))},21079:(a,b,c)=>{"use strict";let d=c(65916);d.createWebSocketStream=c(81971),d.Server=c(88278),d.Receiver=c(72482),d.Sender=c(77662),a.exports=d},21177:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LogLevel=void 0;let d=c(94705);Object.defineProperty(b,"LogLevel",{enumerable:!0,get:function(){return d.EventType}})},21651:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ServiceTelemetryListener=void 0;let d=c(94705),e=c(29256);class f{constructor(a,b,c){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=a,this.privAudioSourceId=b,this.privAudioNodeId=c,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(a){a>0&&this.privPhraseLatencies.push(Date.now()-a)}hypothesisReceived(a){a>0&&this.privHypothesisLatencies.push(Date.now()-a)}onEvent(a){if(!this.privIsDisposed&&(a instanceof e.RecognitionTriggeredEvent&&a.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:a.eventTime,Name:"ListeningTrigger",Start:a.eventTime}),a instanceof d.AudioStreamNodeAttachingEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=a.eventTime),a instanceof d.AudioStreamNodeAttachedEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=a.eventTime),a instanceof d.AudioSourceErrorEvent&&a.audioSourceId===this.privAudioSourceId&&!this.privMicMetric&&(this.privMicMetric={End:a.eventTime,Error:a.error,Name:"Microphone",Start:this.privMicStartTime}),a instanceof d.AudioStreamNodeErrorEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&!this.privMicMetric&&(this.privMicMetric={End:a.eventTime,Error:a.error,Name:"Microphone",Start:this.privMicStartTime}),a instanceof d.AudioStreamNodeDetachedEvent&&a.audioSourceId===this.privAudioSourceId&&a.audioNodeId===this.privAudioNodeId&&!this.privMicMetric&&(this.privMicMetric={End:a.eventTime,Name:"Microphone",Start:this.privMicStartTime}),a instanceof e.ConnectingToServiceEvent&&a.requestId===this.privRequestId&&(this.privConnectionId=a.sessionId),a instanceof d.ConnectionStartEvent&&a.connectionId===this.privConnectionId&&(this.privConnectionStartTime=a.eventTime),a instanceof d.ConnectionEstablishedEvent&&a.connectionId===this.privConnectionId&&!this.privConnectionEstablishMetric&&(this.privConnectionEstablishMetric={End:a.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime}),a instanceof d.ConnectionEstablishErrorEvent&&a.connectionId===this.privConnectionId&&!this.privConnectionEstablishMetric&&(this.privConnectionEstablishMetric={End:a.eventTime,Error:this.getConnectionError(a.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime}),a instanceof d.ConnectionMessageReceivedEvent&&a.connectionId===this.privConnectionId&&a.message&&a.message.headers&&a.message.headers.path)){this.privReceivedMessages[a.message.headers.path]||(this.privReceivedMessages[a.message.headers.path]=[]);let b=50;this.privReceivedMessages[a.message.headers.path].length<b&&this.privReceivedMessages[a.message.headers.path].push(a.networkReceivedTime)}}getTelemetry(){let a=[];this.privListeningTriggerMetric&&a.push(this.privListeningTriggerMetric),this.privMicMetric&&a.push(this.privMicMetric),this.privConnectionEstablishMetric&&a.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&a.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&a.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});let b=JSON.stringify({Metrics:a,ReceivedMessages:this.privReceivedMessages});return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],b}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(a){switch(a){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+a.toString()}}}b.ServiceTelemetryListener=f},21820:a=>{"use strict";a.exports=require("os")},21838:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranslatorRecognizer=b.ConversationRecognizerFactory=void 0;let d=c(35961),e=c(94705),f=c(87470),g=c(41686),h=c(33430),i=c(4568);class j{static fromConfig(a,b,c){return new k(a,b,c)}}b.ConversationRecognizerFactory=j;class k extends g.Recognizer{constructor(a,b,c){let d=b;f.Contracts.throwIfNull(d,"speechConfig");let i=a;f.Contracts.throwIfNull(i,"conversationImpl"),super(c,d.properties,new h.ConversationConnectionFactory),this.privConversation=i,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=g.Connection.fromRecognizer(this),"on"===this.privProperties.getProperty(g.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):"undefined"!=typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(a){this.privConnection.connected=a}set disconnected(a){this.privConnection.disconnected=a}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfNullOrWhitespace(a,"token"),this.privReco.conversationTranslatorToken=a,this.resetConversationTimeout(),this.privReco.connectAsync(b,c)}catch(a){if(c)if(a instanceof Error){let b=a;c(b.name+": "+b.message)}else c(a)}}disconnect(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{a&&a()},a=>{b&&b(a)})}catch(a){if(b)if(a instanceof Error){let c=a;b(c.name+": "+c.message)}else b(a);this.dispose(!0).catch(a=>{e.Events.instance.onEvent(new e.BackgroundEvent(a))})}}sendRequest(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(a,b,c)}catch(a){if(c)if(a instanceof Error){let b=a;c(b.name+": "+b.message)}else c(a);this.dispose(!0).catch(a=>{e.Events.instance.onEvent(new e.BackgroundEvent(a))})}}onToken(a){this.privConversation.onToken(a)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(a){!this.privIsDisposed&&a&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(a))}createRecognizerConfig(a){return new d.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,b,c,d){let e=c;return new i.ConversationServiceAdapter(a,b,e,d,this)}sendMessage(a,b,c){((a,b,c)=>{void 0!==a?a.then(()=>{try{b&&b()}catch(a){c&&c(`'Unhandled error on promise callback: ${a}'`)}},a=>{try{c&&c(a)}catch(a){}}):c&&c("Null promise")})(this.privReco.sendMessageAsync(a),b,c),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}}b.ConversationTranslatorRecognizer=k},22739:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceInfo=b.SynthesisVoiceType=b.SynthesisVoiceGender=void 0,function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"}(c=b.SynthesisVoiceGender||(b.SynthesisVoiceGender={})),function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"}(d=b.SynthesisVoiceType||(b.SynthesisVoiceType={}));let e={[c[c.Neutral]]:c.Neutral,[c[c.Male]]:c.Male,[c[c.Female]]:c.Female},f={Neural:d.OnlineNeural,NeuralHD:d.OnlineNeuralHD};class g{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=f[a.VoiceType]||d.Unknown,this.privGender=e[a.Gender]||c.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(let b of a.StyleList)this.privStyleList.push(b);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList]),a.VoiceTag&&(this.privVoiceTag=a.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}b.VoiceInfo=g},22850:function(a,b,c){"use strict";var d,e=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.RestMessageAdapter=b.RestRequestType=void 0;let f=e(c(86553)),g=c(94705);!function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"}(d=b.RestRequestType||(b.RestRequestType={}));class h{constructor(a){if(!a)throw new g.ArgumentNullError("configParams");this.privHeaders=a.headers,this.privIgnoreCache=a.ignoreCache}static extractHeaderValue(a,b){let c="";try{let d=b.trim().split(/[\r\n]+/),e={};d.forEach(a=>{let b=a.split(": "),c=b.shift().toLowerCase(),d=b.join(": ");e[c]=d}),c=e[a.toLowerCase()]}catch(a){}return c}set options(a){this.privHeaders=a.headers,this.privIgnoreCache=a.ignoreCache}setHeaders(a,b){this.privHeaders[a]=b}request(a,b,c={},e=null){let h=new g.Deferred,i=a===d.File?"POST":a,j=(a,b={})=>{let c=a;return{data:JSON.stringify(b),headers:JSON.stringify(a.headers),json:b,ok:a.statusCode>=200&&a.statusCode<300,status:a.statusCode,statusText:b.error?b.error.message:c.statusText?c.statusText:c.statusMessage}},k=e=>{(0,f.default)(b,i,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(c)?"":`?${this.queryParams(c)}`,e).then(async b=>{if(a===d.Delete||204===b.statusCode)h.resolve(j(b));else try{let a=await b.json();h.resolve(j(b,a))}catch{h.resolve(j(b))}}).catch(a=>{h.reject(a)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),a===d.Post&&e&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),k(e),h.promise}queryParams(a={}){return Object.keys(a).map(b=>encodeURIComponent(b)+"="+encodeURIComponent(a[b])).join("&")}}b.RestMessageAdapter=h},22945:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IntentServiceRecognizer=void 0;let d=c(94705),e=c(41686),f=c(35961);class g extends f.ServiceRecognizerBase{constructor(a,b,c,d,e){super(a,b,c,d,e),this.privIntentRecognizer=e,this.privIntentDataSent=!1,d.recognitionEndpointVersion="1"}setIntents(a,b){this.privAddedLmIntents=a,this.privUmbrellaIntent=b,this.privIntentDataSent=!0}processTypeSpecificMessages(a){let b,c,g=!1,h=new e.PropertyCollection;switch(a.messageType===d.MessageType.Text&&h.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"speech.hypothesis":let i=f.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);if(b=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,i.Text,i.Duration,i.Offset,i.Language,i.LanguageDetectionConfidence,void 0,i.asJson(),h),this.privRequestSession.onHypothesis(b.offset),c=new e.IntentRecognitionEventArgs(b,i.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,c)}catch(a){}g=!0;break;case"speech.phrase":let j=f.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);b=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,f.EnumTranslation.implTranslateRecognitionResult(j.RecognitionStatus),j.DisplayText,j.Duration,j.Offset,j.Language,j.LanguageDetectionConfidence,void 0,j.asJson(),h),c=new e.IntentRecognitionEventArgs(b,b.offset,this.privRequestSession.sessionId);let k=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,c)}catch(a){}if(this.privSuccessCallback){try{this.privSuccessCallback(b)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||e.ResultReason.NoMatch===c.result.reason?(this.privRequestSession.onPhraseRecognized(c.offset+c.result.duration),k()):this.privPendingIntentArgs=c,g=!0;break;case"response":if(c=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===c){if(""===a.textBody)return;c=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}let l=f.IntentResponse.fromJSON(a.textBody);if(null!==l&&l.topScoringIntent&&l.topScoringIntent.intent){let b=this.privAddedLmIntents[l.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(b=this.privUmbrellaIntent),b){let d=void 0===b||void 0===b.intentName?l.topScoringIntent.intent:b.intentName,f=c.result.reason;void 0!==d&&(f=e.ResultReason.RecognizedIntent);let g=void 0!==c.result.properties?c.result.properties:new e.PropertyCollection;g.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,a.textBody),c=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(d,c.result.resultId,f,c.result.text,c.result.duration,c.result.offset,void 0,void 0,c.result.errorDetails,c.result.json,g),c.offset,c.sessionId)}}if(this.privRequestSession.onPhraseRecognized(c.offset+c.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,c)}catch(a){}if(this.privSuccessCallback){try{this.privSuccessCallback(c.result)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}g=!0}let m=new d.Deferred;return m.resolve(g),m.promise}cancelRecognition(a,b,c,d,g){let h=new e.PropertyCollection;if(h.setProperty(f.CancellationErrorCodePropertyName,e.CancellationErrorCode[d]),this.privIntentRecognizer.canceled){let b=new e.IntentRecognitionCanceledEventArgs(c,g,d,void 0,void 0,a);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,b)}catch{}}if(this.privSuccessCallback){let a=new e.IntentRecognitionResult(void 0,b,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,g,void 0,h);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}}b.IntentServiceRecognizer=g},23100:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyInfo=void 0;let d=c(41686);class e{constructor(a,b,c,d){this.privProxyHostName=a,this.privProxyPort=b,this.privProxyUserName=c,this.privProxyPassword=d}static fromParameters(a){return new e(a.getProperty(d.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(a.getProperty(d.PropertyId.SpeechServiceConnection_ProxyPort),10),a.getProperty(d.PropertyId.SpeechServiceConnection_ProxyUserName),a.getProperty(d.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(a){return this.fromParameters(a.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}b.ProxyInfo=e},23127:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ParticipantChangedReason=void 0,function(a){a[a.JoinedConversation=0]="JoinedConversation",a[a.LeftConversation=1]="LeftConversation",a[a.Updated=2]="Updated"}(c=b.ParticipantChangedReason||(b.ParticipantChangedReason={}))},23247:(a,b,c)=>{var d=c(91645),e=c(34631),f=c(79551),g=c(12412),h=c(46358),i=c(28354).inherits,j=c(91268)("https-proxy-agent");function k(a){if(!(this instanceof k))return new k(a);if("string"==typeof a&&(a=f.parse(a)),!a)throw Error("an HTTP(S) proxy server `host` and `port` must be specified!");j("creating new HttpsProxyAgent instance: %o",a),h.call(this,a);var b=Object.assign({},a);this.secureProxy=!!b.protocol&&/^https:?$/i.test(b.protocol),b.host=b.hostname||b.host,b.port=+b.port||(this.secureProxy?443:80),!this.secureProxy||"ALPNProtocols"in b||(b.ALPNProtocols=["http 1.1"]),b.host&&b.path&&(delete b.path,delete b.pathname),this.proxy=b}function l(a){a.resume()}function m(a,b){return!!(!b&&80===a||b&&443===a)}a.exports=k,i(k,h),k.prototype.callback=function(a,b,c){var f,h=this.proxy;f=this.secureProxy?e.connect(h):d.connect(h);var i=[],k=0;function n(){var a=f.read();a?s(a):f.once("readable",n)}function o(){f.removeListener("end",q),f.removeListener("error",r),f.removeListener("close",p),f.removeListener("readable",n)}function p(a){j("onclose had error %o",a)}function q(){j("onend")}function r(a){o(),c(a)}function s(g){i.push(g),k+=g.length;var h=Buffer.concat(i,k),m=h.toString("ascii");if(!~m.indexOf("\r\n\r\n")){j("have not received end of HTTP headers yet..."),n();return}var p=m.substring(0,m.indexOf("\r\n")),q=+p.split(" ")[1];if(j("got proxy server response: %o",p),200==q){var r=f;i=h=null,b.secureEndpoint&&(j("upgrading proxy-connected socket to TLS connection: %o",b.host),b.socket=f,b.servername=b.servername||b.host,b.host=null,b.hostname=null,b.port=null,r=e.connect(b)),o(),a.once("socket",l),c(null,r)}else o(),f.destroy(),(f=new d.Socket).readable=!0,i=h,a.once("socket",t),c(null,f)}function t(a){j("replaying proxy buffer for failed request"),g(a.listenerCount("data")>0),a.push(i),i=null}f.on("error",r),f.on("close",p),f.on("end",q),n();var u="CONNECT "+(b.host+":")+b.port+" HTTP/1.1\r\n",v=Object.assign({},h.headers);h.auth&&(v["Proxy-Authorization"]="Basic "+Buffer.from(h.auth).toString("base64"));var w=b.host;m(b.port,b.secureEndpoint)||(w+=":"+b.port),v.Host=w,v.Connection="close",Object.keys(v).forEach(function(a){u+=a+": "+v[a]+"\r\n"}),f.write(u+"\r\n")}},23253:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranslator=b.SpeechState=void 0;let e=c(35961),f=c(47488),g=c(94705),h=c(87470),i=c(41686),j=c(31071),k=c(63169);!function(a){a[a.Inactive=0]="Inactive",a[a.Connecting=1]="Connecting",a[a.Connected=2]="Connected"}(d=b.SpeechState||(b.SpeechState={}));class l extends i.TranslationRecognizer{constructor(a,b,c,e){super(a,b,new f.ConversationTranslatorConnectionFactory(e)),this.privSpeechState=d.Inactive,c&&(this.privTranslator=c,this.sessionStarted=()=>{this.privSpeechState=d.Connected},this.sessionStopped=()=>{this.privSpeechState=d.Inactive},this.recognizing=(a,b)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,b)},this.recognized=async(a,b)=>{b.result?.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(b.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,b)},this.canceled=async()=>{if(this.privSpeechState!==d.Inactive)try{await this.cancelSpeech()}catch(a){this.privSpeechState=d.Inactive}})}get state(){return this.privSpeechState}set state(a){this.privSpeechState=a}set authentication(a){this.privReco.authentication=a}onConnection(){this.privSpeechState=d.Connected}async onCancelSpeech(){this.privSpeechState=d.Inactive,await this.cancelSpeech()}fireCancelEvent(a){try{if(this.privTranslator.canceled){let b=new k.ConversationTranslationCanceledEventArgs(i.CancellationReason.Error,a,i.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,b)}}catch(a){}}async cancelSpeech(){try{this.stopContinuousRecognitionAsync(),await this.privReco?.disconnect(),this.privSpeechState=d.Inactive}catch(a){}}}class m extends k.ConversationCommon{constructor(a){super(a),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new i.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!!this.privConversation.isConnected&&!!this.privCTRecognizer&&!this.privIsSpeaking&&this.privCTRecognizer.state!==d.Connected&&this.privCTRecognizer.state!==d.Connecting&&!this.privConversation.isMutedByHost}onToken(a){this.privCTRecognizer.authentication=a}setServiceProperty(a,b){let c=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=b,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}joinConversationAsync(a,b,c,d,f){try{if("string"==typeof a){h.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","conversation id")),h.Contracts.throwIfNullOrWhitespace(b,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(Error(this.privErrors.permissionDeniedStart),f);let g=c;for(let a of((null==g||""===g)&&(g=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=i.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(i.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(g),this.privSpeechTranslationConfig.setProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage],g),this.privSpeechTranslationConfig.setProperty(i.PropertyId[i.PropertyId.ConversationTranslator_Name],b),[i.PropertyId.SpeechServiceConnection_Host,i.PropertyId.ConversationTranslator_Host,i.PropertyId.SpeechServiceConnection_Endpoint,i.PropertyId.SpeechServiceConnection_ProxyHostName,i.PropertyId.SpeechServiceConnection_ProxyPassword,i.PropertyId.SpeechServiceConnection_ProxyPort,i.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"])){let b=this.privProperties.getProperty(a);if(b){let c="string"==typeof a?a:i.PropertyId[a];this.privSpeechTranslationConfig.setProperty(c,b)}}let k=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(let a of Object.keys(k))this.privSpeechTranslationConfig.setServiceProperty(a,k[a],i.ServicePropertyChannel.UriQueryParameter);this.privConversation=new j.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(a,b,g,a=>{a||this.handleError(Error(this.privErrors.permissionDeniedConnect),f),this.privSpeechTranslationConfig.authorizationToken=a,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(d,f)},a=>{this.handleError(a,f)})},a=>{this.handleError(a,f)})}else"object"==typeof a?(h.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","conversation id")),h.Contracts.throwIfNullOrWhitespace(b,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(i.PropertyId.ConversationTranslator_Name,b),this.privConversation=a,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,h.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),h.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=a.config,this.handleCallback(c,d)):this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),d)}catch(a){this.handleError(a,"string"==typeof c?f:d)}}leaveConversationAsync(a,b){(0,g.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),a,b)}sendTextMessageAsync(a,b,c){try{h.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),h.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}",a)),this.privConversation.sendTextMessageAsync(a,b,c)}catch(a){this.handleError(a,c)}}startTranscribingAsync(a,b){(0,g.marshalPromiseToCallbacks)((async()=>{try{h.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),h.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&await this.connectTranslatorRecognizer(),h.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(Error(this.privErrors.permissionDeniedSend),b),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(a){throw this.privIsSpeaking=!1,await this.cancelSpeech(),a}})(),a,b)}stopTranscribingAsync(a,b){(0,g.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking)return void await this.cancelSpeech();this.privIsSpeaking=!1,await new Promise((a,b)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(a,b)})}catch(a){await this.cancelSpeech()}})(),a,b)}isDisposed(){return this.privIsDisposed}dispose(a,b,c){(0,g.marshalPromiseToCallbacks)((async()=>{(!this.isDisposed||this.privIsSpeaking)&&(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),b,c)}async cancelSpeech(){try{this.privIsSpeaking=!1,await this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch(a){}}async connectTranslatorRecognizer(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=i.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key],"");let a=()=>this.privConversation;this.privCTRecognizer=new l(this.privSpeechTranslationConfig,this.privAudioConfig,this,a)}catch(a){throw await this.cancelSpeech(),a}}startContinuousRecognition(){return new Promise((a,b)=>{this.privCTRecognizer.startContinuousRecognitionAsync(a,b)})}}b.ConversationTranslator=m},23506:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.NextAction=void 0,function(a){a.None="None",a.Translate="Translate"}(c=b.NextAction||(b.NextAction={}))},23755:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.WebsocketConnection=void 0;let d=c(94705),e=c(3673);class f{constructor(a,b,c,f,g,h=!1,i){if(this.privIsDisposed=!1,!a)throw new d.ArgumentNullError("uri");if(!f)throw new d.ArgumentNullError("messageFormatter");this.privMessageFormatter=f;let j="",k=0;if(b){for(let c in b)if(c){j+=0===k&&-1===a.indexOf("?")?"?":"&",j+=encodeURIComponent(c);let d=b[c];d&&(d=encodeURIComponent(d),j+=`=${d}`),k++}}if(c){for(let b in c)if(b){j+=0===k&&-1===a.indexOf("?")?"?":"&";let d=encodeURIComponent(c[b]);j+=`${b}=${d}`,k++}}this.privUri=a+j,this.privId=i||(0,d.createNoDashGuid)(),this.privConnectionMessageAdapter=new e.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,g,c,h)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(a){return this.privConnectionMessageAdapter.send(a)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}b.WebsocketConnection=f},23765:a=>{"use strict";class b{constructor(a,b){this.target=b,this.type=a}}class c extends b{constructor(a,b){super("message",b),this.data=a}}class d extends b{constructor(a,b,c){super("close",c),this.wasClean=c._closeFrameReceived&&c._closeFrameSent,this.reason=b,this.code=a}}class e extends b{constructor(a){super("open",a)}}class f extends b{constructor(a,b){super("error",b),this.message=a.message,this.error=a}}a.exports={addEventListener(a,b,g){if("function"!=typeof b)return;function h(a){b.call(this,new c(a,this))}function i(a,c){b.call(this,new d(a,c,this))}function j(a){b.call(this,new f(a,this))}function k(){b.call(this,new e(this))}let l=g&&g.once?"once":"on";"message"===a?(h._listener=b,this[l](a,h)):"close"===a?(i._listener=b,this[l](a,i)):"error"===a?(j._listener=b,this[l](a,j)):"open"===a?(k._listener=b,this[l](a,k)):this[l](a,b)},removeEventListener(a,b){let c=this.listeners(a);for(let d=0;d<c.length;d++)(c[d]===b||c[d]._listener===b)&&this.removeListener(a,c[d])}}},23844:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MicAudioSource=b.AudioWorkletSourceURLPropertyName=void 0;let d=c(35961),e=c(94705),f=c(57645);b.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class g{constructor(a,b,c,d){this.privRecorder=a,this.deviceId=b,this.privStreams={},this.privOutputChunkSize=g.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||(0,e.createNoDashGuid)(),this.privEvents=new e.EventSource,this.privMediaStream=d||null,this.privIsClosing=!1}get format(){return Promise.resolve(g.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new e.Deferred;try{this.createAudioContext()}catch(a){if(a instanceof Error){let b=a;this.privInitializeDeferral.reject(b.name+": "+b.message)}else this.privInitializeDeferral.reject(a);return this.privInitializeDeferral.promise}let a=window.navigator,b=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(b=(b,c,d)=>{a.mediaDevices.getUserMedia(b).then(c).catch(d)}),b){let a=()=>{this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new e.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):b({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},a=>{this.privMediaStream=a,this.onEvent(new e.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},a=>{let b=`Error occurred during microphone initialization: ${a}`;this.privInitializeDeferral.reject(b),this.onEvent(new e.AudioSourceErrorEvent(this.privId,b))})};"suspended"===this.privContext.state?this.privContext.resume().then(a).catch(a=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${a}`)}):a()}else{let a="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(a),this.onEvent(new e.AudioSourceErrorEvent(a,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(b=>(this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(b.readEnded(),delete this.privStreams[a],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>b.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(let a in this.privStreams)if(a){let b=this.privStreams[a];b&&b.close()}this.onEvent(new e.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:g.AUDIOFORMAT.bitsPerSample,channelcount:g.AUDIOFORMAT.channels,connectivity:d.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:g.AUDIOFORMAT.samplesPerSec,type:d.type.Microphones}))}setProperty(a,c){if(a===b.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(c);else throw Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){let a="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;let b=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===b)return Promise.resolve(this.privMicrophoneLabel);let c=new e.Deferred;return navigator.mediaDevices.enumerateDevices().then(a=>{for(let c of a)if(c.deviceId===b){this.privMicrophoneLabel=c.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();let b=new e.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=b;try{this.privRecorder.record(this.privContext,this.privMediaStream,b)}catch(b){throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,a,b)),b}return b}onEvent(a){this.privEvents.onEvent(a),e.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=f.AudioStreamFormatImpl.getAudioContext(g.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&await this.privContext.suspend()}}b.MicAudioSource=g,g.AUDIOFORMAT=f.AudioStreamFormat.getDefaultInputFormat()},23919:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},24020:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AudioStreamNodeErrorEvent=b.AudioStreamNodeDetachedEvent=b.AudioStreamNodeAttachedEvent=b.AudioStreamNodeAttachingEvent=b.AudioStreamNodeEvent=b.AudioSourceErrorEvent=b.AudioSourceOffEvent=b.AudioSourceReadyEvent=b.AudioSourceInitializingEvent=b.AudioSourceEvent=void 0;let d=c(19991);class e extends d.PlatformEvent{constructor(a,b,c=d.EventType.Info){super(a,c),this.privAudioSourceId=b}get audioSourceId(){return this.privAudioSourceId}}b.AudioSourceEvent=e;class f extends e{constructor(a){super("AudioSourceInitializingEvent",a)}}b.AudioSourceInitializingEvent=f;class g extends e{constructor(a){super("AudioSourceReadyEvent",a)}}b.AudioSourceReadyEvent=g;class h extends e{constructor(a){super("AudioSourceOffEvent",a)}}b.AudioSourceOffEvent=h;class i extends e{constructor(a,b){super("AudioSourceErrorEvent",a,d.EventType.Error),this.privError=b}get error(){return this.privError}}b.AudioSourceErrorEvent=i;class j extends e{constructor(a,b,c){super(a,b),this.privAudioNodeId=c}get audioNodeId(){return this.privAudioNodeId}}b.AudioStreamNodeEvent=j;class k extends j{constructor(a,b){super("AudioStreamNodeAttachingEvent",a,b)}}b.AudioStreamNodeAttachingEvent=k;class l extends j{constructor(a,b){super("AudioStreamNodeAttachedEvent",a,b)}}b.AudioStreamNodeAttachedEvent=l;class m extends j{constructor(a,b){super("AudioStreamNodeDetachedEvent",a,b)}}b.AudioStreamNodeDetachedEvent=m;class n extends j{constructor(a,b,c){super("AudioStreamNodeErrorEvent",a,b),this.privError=c}get error(){return this.privError}}b.AudioStreamNodeErrorEvent=n},24397:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionMessageEventArgs=void 0;class c{constructor(a){this.privConnectionMessage=a}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}b.ConnectionMessageEventArgs=c},24674:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IntentRecognitionCanceledEventArgs=void 0;let d=c(41686);class e extends d.IntentRecognitionEventArgs{constructor(a,b,c,d,e,f){super(d,e,f),this.privReason=a,this.privErrorDetails=b,this.privErrorCode=c}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}b.IntentRecognitionCanceledEventArgs=e},24757:a=>{"use strict";let b=new Set(["json","buffer","string"]);a.exports=a=>(...c)=>{let d,e,f,g=new Set,h="";return c.forEach(a=>{if("string"==typeof a)if(a.toUpperCase()===a)if(d)throw Error(`Can't set method to ${a}, already set to ${d}.`);else d=a;else if(a.startsWith("http:")||a.startsWith("https:"))h=a;else if(b.has(a))e=a;else throw Error(`Unknown encoding, ${a}`);else if("number"==typeof a)g.add(a);else if("object"==typeof a)if(Array.isArray(a)||a instanceof Set)a.forEach(a=>g.add(a));else{if(f)throw Error("Cannot set headers twice.");f=a}else throw Error(`Unknown type: ${typeof a}`)}),d||(d="GET"),0===g.size&&g.add(200),a(g,d,e,f,h)}},24851:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceProfileEnrollmentCancellationDetails=b.VoiceProfileEnrollmentResult=void 0;let d=c(35961),e=c(41686);class f{constructor(a,b,c){this.privReason=a,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?b&&(this.privDetails=JSON.parse(b),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=c,this.privProperties.setProperty(d.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(a){let b=[];for(let c of a.value){let a=new f("enrolling"===c.enrollmentStatus.toLowerCase()?e.ResultReason.EnrollingVoiceProfile:"enrolled"===c.enrollmentStatus.toLowerCase()?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,null,null);a.privDetails=this.getIdentificationDetails(c),b.push(a)}return b}static FromVerificationProfileList(a){let b=[];for(let c of a.value){let a=new f("enrolling"===c.enrollmentStatus.toLowerCase()?e.ResultReason.EnrollingVoiceProfile:"enrolled"===c.enrollmentStatus.toLowerCase()?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,null,null);a.privDetails=this.getVerificationDetails(c),b.push(a)}return b}static getIdentificationDetails(a){return{audioLength:a.audioLength?parseFloat(a.audioLength):0,audioSpeechLength:a.audioSpeechLength?parseFloat(a.audioSpeechLength):0,enrollmentStatus:a.enrollmentStatus,enrollmentsCount:a.enrollmentsCount||0,enrollmentsLength:a.enrollmentsLength?parseFloat(a.enrollmentsLength):0,enrollmentsSpeechLength:a.enrollmentsSpeechLength?parseFloat(a.enrollmentsSpeechLength):0,profileId:a.profileId||a.identificationProfileId,remainingEnrollmentsSpeechLength:a.remainingEnrollmentsSpeechLength?parseFloat(a.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(a){return{audioLength:a.audioLength?parseFloat(a.audioLength):0,audioSpeechLength:a.audioSpeechLength?parseFloat(a.audioSpeechLength):0,enrollmentStatus:a.enrollmentStatus,enrollmentsCount:a.enrollmentsCount,enrollmentsLength:a.enrollmentsLength?parseFloat(a.enrollmentsLength):0,enrollmentsSpeechLength:a.enrollmentsSpeechLength?parseFloat(a.enrollmentsSpeechLength):0,profileId:a.profileId||a.verificationProfileId,remainingEnrollmentsCount:a.remainingEnrollments||a.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:a.remainingEnrollmentsSpeechLength?parseFloat(a.remainingEnrollmentsSpeechLength):0}}}b.VoiceProfileEnrollmentResult=f;class g extends e.CancellationDetailsBase{constructor(a,b,c){super(a,b,c)}static fromResult(a){let b=e.CancellationReason.Error,c=e.CancellationErrorCode.NoError;return a.properties&&(c=e.CancellationErrorCode[a.properties.getProperty(d.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new g(b,a.errorDetails,c)}}b.VoiceProfileEnrollmentCancellationDetails=g},25199:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceServiceRecognizer=void 0;let d=c(9403),e=c(94705),f=c(41686),g=c(35961),h=c(42436);class i extends g.ServiceRecognizerBase{constructor(a,b,c,d,f){super(a,b,c,d,f),this.privDeferralMap=new e.DeferralMap,this.privSpeakerAudioSource=c,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(a){this.privSpeakerAudioSource=a}processTypeSpecificMessages(a){let b=!1,c=new f.PropertyCollection;switch(a.messageType===e.MessageType.Text&&c.setProperty(f.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"speaker.profiles":let d=JSON.parse(a.textBody);switch(d.operation.toLowerCase()){case"create":this.handleCreateResponse(d,a.requestId);break;case"delete":case"reset":this.handleResultResponse(d,a.requestId);break;case"fetch":let g=JSON.parse(a.textBody);this.handleFetchResponse(g,a.requestId)}b=!0;break;case"speaker.phrases":let h=JSON.parse(a.textBody);this.handlePhrasesResponse(h,a.requestId),b=!0;break;case"speaker.profile.enrollment":let i=JSON.parse(a.textBody),j=new f.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(i.enrollment?i.enrollment.enrollmentStatus:i.status.statusCode),i.enrollment?JSON.stringify(i.enrollment):void 0,i.status.reason);this.privDeferralMap.getId(a.requestId)&&this.privDeferralMap.complete(a.requestId,j),this.privRequestSession.onSpeechEnded(),b=!0}let k=new e.Deferred;return k.resolve(b),k.promise}cancelRecognition(a,b,c,d,e){new f.PropertyCollection().setProperty(g.CancellationErrorCodePropertyName,f.CancellationErrorCode[d]);let h=new f.VoiceProfileEnrollmentResult(f.ResultReason.Canceled,e,e);this.privDeferralMap.getId(b)&&this.privDeferralMap.complete(b,h)}async createProfile(a,b){this.voiceProfileType=a.toString();let c=this.connectImpl();try{let d=new e.Deferred;return await c,await this.sendCreateProfile(d,a,b),this.receiveMessage(),d.promise}catch(a){throw a}}async resetProfile(a){return this.voiceProfileType=a.profileType.toString(),this.sendCommonRequest("reset",a.profileType,a)}async deleteProfile(a){return this.voiceProfileType=a.profileType.toString(),this.sendCommonRequest("delete",a.profileType,a)}async retrieveEnrollmentResult(a){return this.voiceProfileType=a.profileType.toString(),this.privExpectedProfileId=a.profileId,this.sendCommonRequest("fetch",a.profileType,a)}async getAllProfiles(a){return this.voiceProfileType=a.toString(),this.sendCommonRequest("fetch",a)}async getActivationPhrases(a,b){this.voiceProfileType=a.toString();let c=this.connectImpl();try{let d=new e.Deferred;return await c,await this.sendPhrasesRequest(d,a,b),this.receiveMessage(),d.promise}catch(a){throw a}}async enrollProfile(a){this.voiceProfileType=a.profileType.toString();let b=new e.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(f.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let c=this.connectImpl(),g=this.sendPreAudioMessages(a,b),h=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),i=await this.privSpeakerAudioSource.format,j=await this.privSpeakerAudioSource.deviceInfo,k=new d.ReplayableAudioNode(h,i.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(k,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:j};try{await c,await g}catch(a){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,f.CancellationReason.Error,f.CancellationErrorCode.ConnectionFailure,a)}let l=new f.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.receiveMessage(),this.sendAudio(k).then(()=>{},a=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,f.CancellationReason.Error,f.CancellationErrorCode.RuntimeError,a)}),b.promise}async sendPreAudioMessages(a,b){let c=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,b),await this.sendBaseRequest(c,"enroll",this.scenarioFrom(a.profileType),a)}async sendPhrasesRequest(a,b,c){let d=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,a);let f={locale:c,scenario:this.scenarioFrom(b)};return d.send(new h.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(f)))}async sendCreateProfile(a,b,c){let d=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,a);let g={locale:c,number:"1",scenario:b===f.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":b===f.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"};return d.send(new h.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(g)))}async sendCommonRequest(a,b,c){let d=this.connectImpl();try{let f=new e.Deferred;this.privRequestSession.onSpeechContext(),await d;let g=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,f),await this.sendBaseRequest(g,a,this.scenarioFrom(b),c),this.receiveMessage(),f.promise}catch(a){throw a}}async sendBaseRequest(a,b,c,d){let f={scenario:c};return d?f.profileIds=[d.profileId]:f.maxPageSize=-1,a.send(new h.SpeechConnectionMessage(e.MessageType.Text,`speaker.profile.${b}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(f)))}extractSpeakerContext(a){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:a.profileIds,scenario:a.scenario}}handlePhrasesResponse(a,b){if(this.privDeferralMap.getId(b))if("success"!==a.status.statusCode.toLowerCase()){let c=f.ResultReason.Canceled,d=new f.VoiceProfilePhraseResult(c,a.status.statusCode,a.passPhraseType,[]);this.privDeferralMap.complete(b,d)}else if(a.phrases&&a.phrases.length>0){let c=f.ResultReason.EnrollingVoiceProfile,d=new f.VoiceProfilePhraseResult(c,a.status.statusCode,a.passPhraseType,a.phrases);this.privDeferralMap.complete(b,d)}else throw Error("Voice Profile get activation phrases failed, no phrases received");else throw Error(`Voice Profile get activation phrases request for requestID ${b} not found`)}handleCreateResponse(a,b){if(a.profiles&&a.profiles.length>0)if(this.privDeferralMap.getId(b)){let c=a.profiles.map(a=>a.profileId);this.privDeferralMap.complete(b,c)}else throw Error(`Voice Profile create request for requestID ${b} not found`);else throw Error("Voice Profile create failed, no profile id received")}handleResultResponse(a,b){if(this.privDeferralMap.getId(b)){let c="delete"===a.operation.toLowerCase()?f.ResultReason.DeletedVoiceProfile:f.ResultReason.ResetVoiceProfile,d="success"===a.status.statusCode.toLowerCase()?c:f.ResultReason.Canceled,e=new f.VoiceProfileResult(d,`statusCode: ${a.status.statusCode}, errorDetails: ${a.status.reason}`);this.privDeferralMap.complete(b,e)}else throw Error(`Voice Profile create request for requestID ${b} not found`)}handleFetchResponse(a,b){if(this.privDeferralMap.getId(b)&&a.profiles[0]){if(this.privExpectedProfileId&&1===a.profiles.length&&a.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;let c=a.profiles[0],d=new f.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(c.enrollmentStatus),JSON.stringify(c),a.status.reason);this.privDeferralMap.complete(b,d)}else if(a.profiles.length>0){let c=a.profiles,d=[];for(let b of c)d.push(new f.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(b.enrollmentStatus),JSON.stringify(b),a.status.reason));this.privDeferralMap.complete(b,d)}}else throw Error(`Voice Profile fetch request for requestID ${b} not found`)}enrollmentReasonFrom(a){switch(a.toLowerCase()){case"enrolled":return f.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return f.ResultReason.Canceled;default:return f.ResultReason.EnrollingVoiceProfile}}scenarioFrom(a){return a===f.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":a===f.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}}b.VoiceServiceRecognizer=i},26147:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RequestSession=void 0;let d=c(94705),e=c(29256),f=c(21651);class g{constructor(a){this.privIsDisposed=!1,this.privDetachables=[],this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=a,this.privRequestId=(0,d.createNoDashGuid)(),this.privAudioNodeId=(0,d.createNoDashGuid)(),this.privTurnDeferral=new d.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(a){this.privServiceTelemetryListener&&this.privDetachables.push(a.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new f.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new e.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(a,b){this.privAudioNode=a,this.privIsAudioNodeDetached=!1,b?await this.onComplete():this.onEvent(new e.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(a,b){this.privAuthFetchEventId=a,this.privSessionId=b,this.onEvent(new e.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(a){a&&await this.onComplete()}async onConnectionEstablishCompleted(a,b){if(200===a){this.onEvent(new e.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}403===a&&await this.onComplete()}async onServiceTurnEndResponse(a){this.privTurnDeferral.resolve(),!a||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,d.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new d.Deferred}onHypothesis(a){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(a)))}onPhraseRecognized(a){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(a)),this.onServiceRecognized(a)}onServiceRecognized(a){this.privLastRecoOffset=a,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(a),this.privConnectionAttempts=0}onAudioSent(a){this.privBytesSent+=a,this.privRecognitionBytesSent+=a}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){for(let a of(this.privIsDisposed=!0,this.privDetachables))await a.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(a){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(a),d.Events.instance.onEvent(a)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){!this.privIsAudioNodeDetached&&(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}b.RequestSession=g},26418:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationCommon=void 0;class c{constructor(a){this.privAudioConfig=a}handleCallback(a,b){if(a){try{a()}catch(a){b&&b(a)}a=void 0}}handleError(a,b){if(b)if(a instanceof Error){let c=a;b(c.name+": "+c.message)}else b(a)}}b.ConversationCommon=c},26668:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.SpeakerRecognitionCancellationDetails=b.SpeakerRecognitionResult=b.SpeakerRecognitionResultType=void 0;let e=c(35961),f=c(41686);!function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"}(d=b.SpeakerRecognitionResultType||(b.SpeakerRecognitionResultType={}));class g{constructor(a,b=f.ResultReason.RecognizedSpeaker,c=f.CancellationErrorCode.NoError,g=""){this.privProperties=new f.PropertyCollection;let h="TextIndependentIdentification"===a.scenario?d.Identify:d.Verify;this.privReason=b,this.privReason!==f.ResultReason.Canceled?h===d.Identify?(this.privProfileId=a.identificationResult.identifiedProfile.profileId,this.privScore=a.identificationResult.identifiedProfile.score,this.privReason=f.ResultReason.RecognizedSpeakers):(this.privScore=a.verificationResult.score,"accept"!==a.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=f.ResultReason.NoMatch),void 0!==a.verificationResult.profileId&&""!==a.verificationResult.profileId&&(this.privProfileId=a.verificationResult.profileId)):(this.privErrorDetails=g,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,f.CancellationErrorCode[c])),this.privProperties.setProperty(f.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(a))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}b.SpeakerRecognitionResult=g;class h extends f.CancellationDetailsBase{constructor(a,b,c){super(a,b,c)}static fromResult(a){let b=f.CancellationReason.Error,c=f.CancellationErrorCode.NoError;return a.properties&&(c=f.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,f.CancellationErrorCode[f.CancellationErrorCode.NoError])]),new h(b,a.errorDetails,c)}}b.SpeakerRecognitionCancellationDetails=h},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},26956:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AudioOutputConfigImpl=b.AudioConfigImpl=b.AudioConfig=void 0;let d=c(9403),e=c(87470),f=c(41686),g=c(80695),h=c(95456),i=c(65543);class j{static fromDefaultMicrophoneInput(){let a=new d.PcmRecorder(!0);return new k(new d.MicAudioSource(a))}static fromMicrophoneInput(a){let b=new d.PcmRecorder(!0);return new k(new d.MicAudioSource(b,a))}static fromWavFileInput(a,b="unnamedBuffer.wav"){return new k(new d.FileAudioSource(a,b))}static fromStreamInput(a){if(a instanceof f.PullAudioInputStreamCallback)return new k(new h.PullAudioInputStreamImpl(a));if(a instanceof f.AudioInputStream)return new k(a);if("undefined"!=typeof MediaStream&&a instanceof MediaStream){let b=new d.PcmRecorder(!1);return new k(new d.MicAudioSource(b,null,null,a))}throw Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new l(new f.SpeakerAudioDestination)}static fromSpeakerOutput(a){if(void 0===a)return j.fromDefaultSpeakerOutput();if(a instanceof f.SpeakerAudioDestination)return new l(a);throw Error("Not Supported Type")}static fromAudioFileOutput(a){return new l(new g.AudioFileWriter(a))}static fromStreamOutput(a){if(a instanceof f.PushAudioOutputStreamCallback)return new l(new i.PushAudioOutputStreamImpl(a));if(a instanceof f.PushAudioOutputStream||a instanceof f.PullAudioOutputStream)return new l(a);throw Error("Not Supported Type")}}b.AudioConfig=j;class k extends j{constructor(a){super(),this.privSource=a}get format(){return this.privSource.format}close(a,b){this.privSource.turnOff().then(()=>{a&&a()},a=>{b&&b(a)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(a){return this.privSource.attach(a)}detach(a){return this.privSource.detach(a)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(a,b){if(e.Contracts.throwIfNull(b,"value"),void 0!==this.privSource.setProperty)this.privSource.setProperty(a,b);else throw Error("This AudioConfig instance does not support setting properties.")}getProperty(a,b){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(a,b);throw Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}b.AudioConfigImpl=k;class l extends j{constructor(a){super(),this.privDestination=a}set format(a){this.privDestination.format=a}write(a){this.privDestination.write(a)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw Error("This AudioConfig instance does not support getting properties.")}}b.AudioOutputConfigImpl=l},27259:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RecognitionResult=void 0;class c{constructor(a,b,c,d,e,f,g,h,i,j){this.privResultId=a,this.privReason=b,this.privText=c,this.privDuration=d,this.privOffset=e,this.privLanguage=f,this.privLanguageDetectionConfidence=g,this.privErrorDetails=h,this.privJson=i,this.privProperties=j}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}b.RecognitionResult=c},27575:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MeetingImpl=b.Meeting=void 0;let d=c(35961),e=c(94705),f=c(87470),g=c(41686);class h{constructor(){return}static createMeetingAsync(a,b,c,h){if(f.Contracts.throwIfNullOrUndefined(a,d.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),f.Contracts.throwIfNullOrUndefined(a.region,d.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),f.Contracts.throwIfNull(b,"meetingId"),0===b.length)throw Error("meetingId cannot be empty");a.subscriptionKey||a.getProperty(g.PropertyId[g.PropertyId.SpeechServiceAuthorization_Token])||f.Contracts.throwIfNullOrUndefined(a.subscriptionKey,d.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let j=new i(a,b);return(0,e.marshalPromiseToCallbacks)((async()=>{})(),c,h),j}}b.Meeting=h;class i extends h{constructor(a,b){super(),this.privErrors=d.ConversationConnectionConfig.restErrors,this.onConnected=a=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,a)}catch(a){}},this.onDisconnected=a=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,a)}catch(a){}finally{this.close(!1)}},this.onCanceled=(a,b)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,b)}catch(a){}},this.onParticipantUpdateCommandReceived=(a,b)=>{try{let a=this.privParticipants.getParticipant(b.id);if(void 0!==a){switch(b.key){case d.ConversationTranslatorCommandTypes.changeNickname:a.displayName=b.value;break;case d.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=b.value;break;case d.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=b.value;break;case d.ConversationTranslatorCommandTypes.setMute:a.isMuted=b.value;break;case d.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=b.value}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.Updated,[this.toParticipant(a)],b.sessionId))}}catch(a){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(a,b)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=!a.isHost&&b.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.Updated,this.toParticipants(!1),b.sessionId))}catch(a){}},this.onParticipantJoinCommandReceived=(a,b)=>{try{let a=this.privParticipants.addOrUpdateParticipant(b.participant);void 0!==a&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],b.sessionId))}catch(a){}},this.onParticipantLeaveCommandReceived=(a,b)=>{try{let a=this.privParticipants.getParticipant(b.participant.id);void 0!==a&&(this.privParticipants.deleteParticipant(b.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],b.sessionId)))}catch(a){}},this.onTranslationReceived=(a,b)=>{try{switch(b.command){case d.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new g.ConversationTranslationEventArgs(b.payload,void 0,b.sessionId));break;case d.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new g.ConversationTranslationEventArgs(b.payload,void 0,b.sessionId));break;case d.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new g.ConversationTranslationEventArgs(b.payload,void 0,b.sessionId))}}catch(a){}},this.onParticipantsListReceived=(a,b)=>{try{if(void 0!==b.sessionToken&&null!==b.sessionToken&&(this.privRoom.token=b.sessionToken),this.privParticipants.participants=[...b.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),b.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(g.PropertyId.ConversationTranslator_Name);void 0!==a&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch(a){}},this.onConversationExpiration=(a,b)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,b)}catch(a){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new g.PropertyCollection,this.privManager=new d.ConversationManager,a.getProperty(g.PropertyId[g.PropertyId.SpeechServiceConnection_RecoLanguage])||a.setProperty(g.PropertyId[g.PropertyId.SpeechServiceConnection_RecoLanguage],d.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=a.getProperty(g.PropertyId[g.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=b,this.privConfig=a;let c=a;f.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privIsConnected=!1,this.privParticipants=new d.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return!this.privParticipants.me?.isHost&&this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){let a=this.meetingId,b=this.participants.map(a=>({id:a.id,preferredLanguage:a.preferredLanguage,voice:a.voice})),c={};for(let a of d.ConversationConnectionConfig.transcriptionEventKeys){let b=this.properties.getProperty(a,"");""!==b&&(c[a]=b)}return{id:a,participants:b,meetingProperties:c}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(a){f.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),this.privToken=a}createMeetingAsync(a,b){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),b),this.privManager.createOrJoin(this.privProperties,void 0,c=>{c||this.handleError(Error(this.privErrors.permissionDeniedConnect),b),this.privRoom=c,this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}startMeetingAsync(a,b){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),b),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}addParticipantAsync(a,b,c){f.Contracts.throwIfNullOrUndefined(a,"Participant"),(0,e.marshalPromiseToCallbacks)(this.addParticipantImplAsync(a),b,c)}joinMeetingAsync(a,b,c,d,e){try{f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","conversationId")),f.Contracts.throwIfNullOrWhitespace(b,this.privErrors.invalidArgs.replace("{arg}","nickname")),f.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,a,a=>{f.Contracts.throwIfNullOrUndefined(a,this.privErrors.permissionDeniedConnect),this.privRoom=a,this.privConfig.authorizationToken=a.cognitiveSpeechAuthToken,d&&d(a.cognitiveSpeechAuthToken)},a=>{this.handleError(a,e)})}catch(a){this.handleError(a,e)}}deleteMeetingAsync(a,b){(0,e.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),a,b)}async deleteMeetingImplAsync(){f.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),f.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(a,b){(0,e.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),a,b)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}muteAllParticipantsAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}muteParticipantAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.me.isHost||this.me.id===a||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c);let d=this.privParticipants.getParticipantIndex(a);-1===d&&this.handleError(Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!0),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}removeParticipantAsync(a,b,c){try{if(f.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&a.hasOwnProperty("id"))(0,e.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(a),b,c);else{f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),c);let d="";"string"==typeof a?d=a:a.hasOwnProperty("id")?d=a.id:a.hasOwnProperty("userId")&&(d=a.userId),f.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","userId"));let e=this.participants.findIndex(a=>a.id===d);-1===e&&this.handleError(Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(d),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}}catch(a){this.handleError(a,c)}}unlockMeetingAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}unmuteAllParticipantsAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}unmuteParticipantAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.me.isHost||this.me.id===a||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c);let d=this.privParticipants.getParticipantIndex(a);-1===d&&this.handleError(Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!1),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}sendTextMessageAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","message")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),a.length>this.privTextMessageMaxLength&&this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","message length")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(a),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}setTranslatedLanguagesAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfArrayEmptyOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","languages")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(a),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}changeNicknameAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","nickname")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(a),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(a){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await a.enforceAudioGating(),this.privTranscriberRecognizer=a,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(a){if(void 0!==this.privParticipants.addOrUpdateParticipant(a)&&this.privTranscriberRecognizer){let b=this.meetingInfo;return b.participants=[a],this.privTranscriberRecognizer.pushMeetingEvent(b,"join")}}removeParticipantImplAsync(a){this.privParticipants.deleteParticipant(a.id);let b=this.meetingInfo;return b.participants=[a],this.privTranscriberRecognizer.pushMeetingEvent(b,"leave")}async close(a){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(a){throw a}a&&this.dispose()}handleCallback(a,b){if(a){try{a()}catch(a){b&&b(a)}a=void 0}}handleError(a,b){if(b)if(a instanceof Error){let c=a;b(c.name+": "+c.message)}else b(a)}toParticipants(a){let b=this.privParticipants.participants.map(a=>this.toParticipant(a));return a?b:b.filter(a=>!1===a.isHost)}toParticipant(a){return new g.Participant(a.id,a.avatar,a.displayName,a.isHost,a.isMuted,a.isUsingTts,a.preferredLanguage,a.voice)}getMuteAllCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMuteCommand(a,b){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setMute,participantId:a,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:b})}getLockCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getEjectCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),f.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.ejectParticipant,participantId:a,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getChangeNicknameCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),f.Contracts.throwIfNullOrWhitespace(a,"nickname"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.changeNickname,nickname:a,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMessageCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),f.Contracts.throwIfNullOrWhitespace(a,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:a,type:d.ConversationTranslatorMessageTypes.instantMessage})}}b.MeetingImpl=i},27702:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationSynthesisEnd=void 0;let d=c(35961);class e{constructor(a){this.privSynthesisEnd=JSON.parse(a),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=d.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=d.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(a){return new e(a)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}b.TranslationSynthesisEnd=e},27910:a=>{"use strict";a.exports=require("stream")},28130:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranslationCanceledEventArgs=void 0;let d=c(17528);class e extends d.CancellationEventArgsBase{}b.ConversationTranslationCanceledEventArgs=e},28354:a=>{"use strict";a.exports=require("util")},28536:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SourceLanguageConfig=void 0;let d=c(87470);class e{constructor(a,b){d.Contracts.throwIfNullOrUndefined(a,"language"),this.privLanguage=a,this.privEndpointId=b}static fromLanguage(a,b){return new e(a,b)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}b.SourceLanguageConfig=e},28538:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ActivityReceivedEventArgs=void 0;class c{constructor(a,b){this.privActivity=a,this.privAudioStream=b}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}b.ActivityReceivedEventArgs=c},28863:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CancellationDetailsBase=void 0;class c{constructor(a,b,c){this.privReason=a,this.privErrorDetails=b,this.privErrorCode=c}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}b.CancellationDetailsBase=c},28999:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g,metadata:()=>f});var d=c(37413),e=c(80899);let f={title:"Shadow Learning | OneCup English",description:"Practice shadowing technique for English pronunciation and listening skills"};function g(){return(0,d.jsx)(e.default,{})}},29016:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ObjectDisposedError=b.InvalidOperationError=b.ArgumentNullError=void 0;class c extends Error{constructor(a){super(a),this.name="ArgumentNull",this.message=a}}b.ArgumentNullError=c;class d extends Error{constructor(a){super(a),this.name="InvalidOperation",this.message=a}}b.InvalidOperationError=d;class e extends Error{constructor(a,b){super(b),this.name=a+"ObjectDisposed",this.message=b}}b.ObjectDisposedError=e},29021:a=>{"use strict";a.exports=require("fs")},29256:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.RecognitionEndedEvent=b.RecognitionCompletionStatus=b.RecognitionStartedEvent=b.ConnectingToServiceEvent=b.ListeningStartedEvent=b.RecognitionTriggeredEvent=b.SpeechRecognitionEvent=void 0;let e=c(94705);class f extends e.PlatformEvent{constructor(a,b,c,d=e.EventType.Info){super(a,d),this.privRequestId=b,this.privSessionId=c}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}b.SpeechRecognitionEvent=f;class g extends f{constructor(a,b,c,d){super("RecognitionTriggeredEvent",a,b),this.privAudioSourceId=c,this.privAudioNodeId=d}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}b.RecognitionTriggeredEvent=g;class h extends f{constructor(a,b,c,d){super("ListeningStartedEvent",a,b),this.privAudioSourceId=c,this.privAudioNodeId=d}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}b.ListeningStartedEvent=h;class i extends f{constructor(a,b,c){super("ConnectingToServiceEvent",a,c),this.privAuthFetchEventid=b}get authFetchEventid(){return this.privAuthFetchEventid}}b.ConnectingToServiceEvent=i;class j extends f{constructor(a,b,c,d,e){super("RecognitionStartedEvent",a,e),this.privAudioSourceId=b,this.privAudioNodeId=c,this.privAuthFetchEventId=d}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}b.RecognitionStartedEvent=j,function(a){a[a.Success=0]="Success",a[a.AudioSourceError=1]="AudioSourceError",a[a.AudioSourceTimeout=2]="AudioSourceTimeout",a[a.AuthTokenFetchError=3]="AuthTokenFetchError",a[a.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",a[a.UnAuthorized=5]="UnAuthorized",a[a.ConnectTimeout=6]="ConnectTimeout",a[a.ConnectError=7]="ConnectError",a[a.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",a[a.UnknownError=9]="UnknownError"}(d=b.RecognitionCompletionStatus||(b.RecognitionCompletionStatus={}));class k extends f{constructor(a,b,c,f,g,h,i,j){super("RecognitionEndedEvent",a,g,i===d.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=b,this.privAudioNodeId=c,this.privAuthFetchEventId=f,this.privStatus=i,this.privError=j,this.privServiceTag=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}b.RecognitionEndedEvent=k},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29515:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationRecognitionCanceledEventArgs=void 0;class c{constructor(a,b,c,d,e){this.privCancelReason=b,this.privErrorDetails=c,this.privResult=e,this.privSessionId=a,this.privErrorCode=d}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}b.TranslationRecognitionCanceledEventArgs=c},30110:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DialogServiceAdapter=void 0;let d=c(9403),e=c(17477),f=c(94705),g=c(10340),h=c(41686),i=c(77574),j=c(35961),k=c(31582),l=c(30859),m=c(33847),n=c(42436);class o extends j.ServiceRecognizerBase{constructor(a,b,c,d,e){super(a,b,c,d,e),this.privEvents=new f.EventSource,this.privDialogServiceConnector=e,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new i.DialogServiceTurnStateManager,this.recognizeOverride=(a,b,c)=>this.listenOnce(a,b,c),this.postConnectImplOverride=a=>this.dialogConnectImpl(a),this.configConnectionOverride=a=>this.configConnection(a),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=c,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(a=>{"ConnectionClosedEvent"===a.name&&(this.terminateMessageLoop=!0)})}async sendMessage(a){let b=(0,f.createGuid)(),c=(0,f.createNoDashGuid)(),d=JSON.stringify({context:{interactionId:b},messagePayload:JSON.parse(a),version:.5}),e=await this.fetchConnection();await e.send(new n.SpeechConnectionMessage(f.MessageType.Text,"agent",c,"application/json",d))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(a){let b,c,d=new h.PropertyCollection;switch(a.messageType===f.MessageType.Text&&d.setProperty(h.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"speech.phrase":let e=j.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(e.Offset+e.Duration),e.RecognitionStatus!==j.RecognitionStatus.TooManyRequests&&e.RecognitionStatus!==j.RecognitionStatus.Error){let a=this.fireEventForResult(e,d);if(this.privLastResult=a.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,a)}catch(a){}}c=!0;break;case"speech.hypothesis":let g=j.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);b=new h.SpeechRecognitionResult(this.privRequestSession.requestId,h.ResultReason.RecognizingSpeech,g.Text,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,void 0,void 0,g.asJson(),d),this.privRequestSession.onHypothesis(g.Offset);let i=new h.SpeechRecognitionEventArgs(b,g.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,i)}catch(a){}c=!0;break;case"speech.keyword":let k=j.SpeechKeyword.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);b=new h.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===k.Status?h.ResultReason.RecognizedKeyword:h.ResultReason.NoMatch,k.Text,k.Duration,k.Offset,void 0,void 0,void 0,void 0,k.asJson(),d),"Accepted"!==k.Status&&(this.privLastResult=b);let l=new h.SpeechRecognitionEventArgs(b,b.duration,b.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,l)}catch(a){}c=!0;break;case"audio":{let b=a.requestId.toUpperCase(),c=this.privTurnStateManager.GetTurn(b);try{a.binaryBody?c.audioStream.write(a.binaryBody):c.endAudioStream()}catch(a){}}c=!0;break;case"response":this.handleResponseMessage(a),c=!0}let m=new f.Deferred;return m.resolve(c),m.promise}async cancelRecognition(a,b,c,d,e){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){let b=new h.PropertyCollection;b.setProperty(j.CancellationErrorCodePropertyName,h.CancellationErrorCode[d]);let f=new h.SpeechRecognitionCanceledEventArgs(c,e,d,void 0,a);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,f)}catch{}if(this.privSuccessCallback){let a=new h.SpeechRecognitionResult(void 0,h.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,e,void 0,b);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(a,b,c){this.privRecognizerConfig.recognitionMode=a,this.privSuccessCallback=b,this.privErrorCallback=c,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(h.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let e=this.connectImpl(),f=this.sendPreAudioMessages(),g=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),i=await this.privDialogAudioSource.format,j=await this.privDialogAudioSource.deviceInfo,k=new d.ReplayableAudioNode(g,i.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(k,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:j};try{await e,await f}catch(a){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.ConnectionFailure,a),Promise.resolve()}let l=new h.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.sendAudio(k).then(()=>{},async a=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.RuntimeError,a)})}dialogConnectImpl(a){return this.privConnectionLoop=this.startMessageLoop(),a}receiveDialogMessageOverride(){let a=new f.Deferred,b=async()=>{try{let c=this.isDisposed(),d=!this.isDisposed()&&this.terminateMessageLoop;if(c||d)return void a.resolve(void 0);let e=await this.fetchConnection(),g=await e.read();if(!g)return b();let i=n.SpeechConnectionMessage.fromConnectionMessage(g);switch(i.path.toLowerCase()){case"turn.start":{let a=i.requestId.toUpperCase(),b=this.privRequestSession.requestId.toUpperCase();a!==b?this.privTurnStateManager.StartTurn(a):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":let k=j.SpeechDetected.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset),l=new h.RecognitionEventArgs(k.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,l);break;case"speech.enddetected":let m;m=i.textBody.length>0?i.textBody:"{ Offset: 0 }";let o=j.SpeechDetected.fromJSON(m,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(o.Offset);let p=new h.RecognitionEventArgs(o.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,p);break;case"turn.end":{let a=i.requestId.toUpperCase(),b=this.privRequestSession.requestId.toUpperCase();if(a!==b)this.privTurnStateManager.CompleteTurn(a);else{let a=new h.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,a),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{!await this.processTypeSpecificMessages(i)&&this.serviceEvents&&this.serviceEvents.onEvent(new f.ServiceEvent(i.path.toLowerCase(),i.textBody))}catch(a){}}return b()}catch(b){this.terminateMessageLoop=!0,a.resolve()}};return b().catch(a=>{f.Events.instance.onEvent(new f.BackgroundEvent(a))}),a.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(a){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.RuntimeError,a)}return Promise.resolve()}async configConnection(a){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(a,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(a),a)}async sendPreAudioMessages(){let a=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(a,!0),await this.sendAgentContext(a),await this.sendWaveHeader(a)}sendAgentConfig(a){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(h.PropertyId.Conversation_DialogType)===h.DialogServiceConfig.DialogTypes.CustomCommands){let a=this.agentConfig.get();a.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(a)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));let b=this.agentConfig.toJsonString();return this.agentConfigSent=!0,a.send(new n.SpeechConnectionMessage(f.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",b))}}sendAgentContext(a){let b=JSON.stringify({channelData:"",context:{interactionId:(0,f.createGuid)()},messagePayload:this.privDialogServiceConnector.properties.getProperty(h.PropertyId.Conversation_Speech_Activity_Template),version:.5});return a.send(new n.SpeechConnectionMessage(f.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",b))}fireEventForResult(a,b){let c=j.EnumTranslation.implTranslateRecognitionResult(a.RecognitionStatus),d=new h.SpeechRecognitionResult(this.privRequestSession.requestId,c,a.DisplayText,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,a.asJson(),b);return new h.SpeechRecognitionEventArgs(d,a.Offset,this.privRequestSession.sessionId)}handleResponseMessage(a){let b=JSON.parse(a.textBody);switch(b.messageType.toLowerCase()){case"message":let c=a.requestId.toUpperCase(),d=k.ActivityPayloadResponse.fromJSON(a.textBody),e=this.privTurnStateManager.GetTurn(c);if(d.conversationId){let a=this.agentConfig.get();a.botInfo.conversationId=d.conversationId,this.agentConfig.set(a)}let i=e.processActivityPayload(d,g.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),j=new h.ActivityReceivedEventArgs(d.messagePayload,i);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,j)}catch(a){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new h.TurnStatusReceivedEventArgs(a.textBody))}catch(a){}break;default:f.Events.instance.onEvent(new f.BackgroundEvent(`Unexpected response of type ${b.messageType}. Ignoring.`))}}onEvent(a){this.privEvents.onEvent(a),f.Events.instance.onEvent(a)}addKeywordContextData(){let a=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===a)return;let b=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),c=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),d=a.split(";"),e=void 0===b?[]:b.split(";"),f=void 0===c?[]:c.split(";"),g=[];for(let a=0;a<d.length;a++){let b={text:d[a]};a<e.length&&(b.startOffset=Number(e[a])),a<f.length&&(b.duration=Number(f[a])),g.push(b)}this.speechContext.getContext().invocationSource=l.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:g,onReject:{action:m.OnRejectAction.EndOfTurn},type:m.KeywordDetectionType.StartTrigger}]}}b.DialogServiceAdapter=o},30484:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BotFrameworkConfig=void 0;let d=c(87470),e=c(85112),f=c(41686);class g extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(a,b,c){d.Contracts.throwIfNullOrWhitespace(a,"subscription"),d.Contracts.throwIfNullOrWhitespace(b,"region");let g=new e.DialogServiceConfigImpl;return g.setProperty(f.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),g.setProperty(f.PropertyId.SpeechServiceConnection_Key,a),g.setProperty(f.PropertyId.SpeechServiceConnection_Region,b),c&&g.setProperty(f.PropertyId.Conversation_ApplicationId,c),g}static fromAuthorizationToken(a,b,c){d.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),d.Contracts.throwIfNullOrWhitespace(b,"region");let g=new e.DialogServiceConfigImpl;return g.setProperty(f.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),g.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,a),g.setProperty(f.PropertyId.SpeechServiceConnection_Region,b),c&&g.setProperty(f.PropertyId.Conversation_ApplicationId,c),g}static fromHost(a,b,c){d.Contracts.throwIfNullOrUndefined(a,"host");let g=a instanceof URL?a:new URL(`wss://${a}.convai.speech.azure.us`);d.Contracts.throwIfNullOrUndefined(g,"resolvedHost");let h=new e.DialogServiceConfigImpl;return h.setProperty(f.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),h.setProperty(f.PropertyId.SpeechServiceConnection_Host,g.toString()),void 0!==b&&h.setProperty(f.PropertyId.SpeechServiceConnection_Key,b),h}static fromEndpoint(a,b){d.Contracts.throwIfNull(a,"endpoint");let c=new e.DialogServiceConfigImpl;return c.setProperty(f.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(f.PropertyId.SpeechServiceConnection_Endpoint,a.toString()),void 0!==b&&c.setProperty(f.PropertyId.SpeechServiceConnection_Key,b),c}}b.BotFrameworkConfig=g},30678:(a,b,c)=>{let d=c(83997),e=c(28354);b.init=l,b.log=i,b.formatArgs=g,b.save=j,b.load=k,b.useColors=f,b.destroy=e.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),b.colors=[6,2,3,4,5,1];try{let a=c(39228);a&&(a.stderr||a).level>=2&&(b.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(a){}function f(){return"colors"in b.inspectOpts?!!b.inspectOpts.colors:d.isatty(process.stderr.fd)}function g(b){let{namespace:c,useColors:d}=this;if(d){let d=this.color,e="\x1b[3"+(d<8?d:"8;5;"+d),f=`  ${e};1m${c} \u001B[0m`;b[0]=f+b[0].split("\n").join("\n"+f),b.push(e+"m+"+a.exports.humanize(this.diff)+"\x1b[0m")}else b[0]=h()+c+" "+b[0]}function h(){return b.inspectOpts.hideDate?"":new Date().toISOString()+" "}function i(...a){return process.stderr.write(e.formatWithOptions(b.inspectOpts,...a)+"\n")}function j(a){a?process.env.DEBUG=a:delete process.env.DEBUG}function k(){return process.env.DEBUG}function l(a){a.inspectOpts={};let c=Object.keys(b.inspectOpts);for(let d=0;d<c.length;d++)a.inspectOpts[c[d]]=b.inspectOpts[c[d]]}b.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,b)=>{let c=b.substring(6).toLowerCase().replace(/_([a-z])/g,(a,b)=>b.toUpperCase()),d=process.env[b];return d=!!/^(yes|on|true|enabled)$/i.test(d)||!/^(no|off|false|disabled)$/i.test(d)&&("null"===d?null:Number(d)),a[c]=d,a},{}),a.exports=c(96211)(b);let{formatters:m}=a.exports;m.o=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts).split("\n").map(a=>a.trim()).join(" ")},m.O=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts)}},30817:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ParticipantPayloadResponse=b.ParticipantsListPayloadResponse=void 0;let c=a=>JSON.parse(a),d=a=>JSON.parse(a);class e{constructor(a){this.privParticipantsPayloadResponse=c(a)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(a){return new e(a)}}b.ParticipantsListPayloadResponse=e;class f{constructor(a){this.privParticipantPayloadResponse=d(a)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(a){return new f(a)}}b.ParticipantPayloadResponse=f},30859:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.InvocationSource=void 0,function(a){a.None="None",a.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(c=b.InvocationSource||(b.InvocationSource={}))},31071:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationImpl=b.Conversation=void 0;let d=c(35961),e=c(94705),f=c(87470),g=c(41686);class h{constructor(){return}static createConversationAsync(a,b,c,h){let j,k,l;return f.Contracts.throwIfNullOrUndefined(a,d.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),f.Contracts.throwIfNullOrUndefined(a.region,d.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),a.subscriptionKey||a.getProperty(g.PropertyId[g.PropertyId.SpeechServiceAuthorization_Token])||f.Contracts.throwIfNullOrUndefined(a.subscriptionKey,d.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof b?(j=new i(a,b),(0,e.marshalPromiseToCallbacks)((async()=>{})(),c,h)):(j=new i(a),k=b,l=c,j.createConversationAsync(()=>{k&&k()},a=>{l&&l(a)})),j}}b.Conversation=h;class i extends h{constructor(a,b){if(super(),this.privErrors=d.ConversationConnectionConfig.restErrors,this.onConnected=a=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,a)}catch(a){}},this.onDisconnected=a=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,a)}catch(a){}finally{this.close(!1)}},this.onCanceled=(a,b)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,b)}catch(a){}},this.onParticipantUpdateCommandReceived=(a,b)=>{try{let a=this.privParticipants.getParticipant(b.id);if(void 0!==a){switch(b.key){case d.ConversationTranslatorCommandTypes.changeNickname:a.displayName=b.value;break;case d.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=b.value;break;case d.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=b.value;break;case d.ConversationTranslatorCommandTypes.setMute:a.isMuted=b.value;break;case d.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=b.value}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.Updated,[this.toParticipant(a)],b.sessionId))}}catch(a){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(a,b)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=!a.isHost&&b.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.Updated,this.toParticipants(!1),b.sessionId))}catch(a){}},this.onParticipantJoinCommandReceived=(a,b)=>{try{let a=this.privParticipants.addOrUpdateParticipant(b.participant);void 0!==a&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],b.sessionId))}catch(a){}},this.onParticipantLeaveCommandReceived=(a,b)=>{try{let a=this.privParticipants.getParticipant(b.participant.id);void 0!==a&&(this.privParticipants.deleteParticipant(b.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],b.sessionId)))}catch(a){}},this.onTranslationReceived=(a,b)=>{try{switch(b.command){case d.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new g.ConversationTranslationEventArgs(b.payload,void 0,b.sessionId));break;case d.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new g.ConversationTranslationEventArgs(b.payload,void 0,b.sessionId));break;case d.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new g.ConversationTranslationEventArgs(b.payload,void 0,b.sessionId))}}catch(a){}},this.onParticipantsListReceived=(a,b)=>{try{if(void 0!==b.sessionToken&&null!==b.sessionToken&&(this.privRoom.token=b.sessionToken),this.privParticipants.participants=[...b.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new g.ConversationParticipantsChangedEventArgs(g.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),b.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(g.PropertyId.ConversationTranslator_Name);void 0!==a&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch(a){}},this.onConversationExpiration=(a,b)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,b)}catch(a){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new g.PropertyCollection,this.privManager=new d.ConversationManager,a.getProperty(g.PropertyId[g.PropertyId.SpeechServiceConnection_RecoLanguage])||a.setProperty(g.PropertyId[g.PropertyId.SpeechServiceConnection_RecoLanguage],d.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=a.getProperty(g.PropertyId[g.PropertyId.SpeechServiceConnection_RecoLanguage]),b)this.privConversationId=b;else{0===a.targetLanguages.length&&a.addTargetLanguage(this.privLanguage),a.getProperty(g.PropertyId[g.PropertyId.SpeechServiceResponse_ProfanityOption])||a.setProfanity(g.ProfanityOption.Masked);let b=a.getProperty(g.PropertyId[g.PropertyId.ConversationTranslator_Name]);null==b&&(b="Host"),f.Contracts.throwIfNullOrTooLong(b,"nickname",50),f.Contracts.throwIfNullOrTooShort(b,"nickname",2),a.setProperty(g.PropertyId[g.PropertyId.ConversationTranslator_Name],b)}this.privConfig=a;let c=a;f.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privIsConnected=!1,this.privParticipants=new d.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return!this.privParticipants.me?.isHost&&this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){let a=this.conversationId,b=this.participants.map(a=>({id:a.id,preferredLanguage:a.preferredLanguage,voice:a.voice})),c={};for(let a of d.ConversationConnectionConfig.transcriptionEventKeys){let b=this.properties.getProperty(a,"");""!==b&&(c[a]=b)}return{id:a,participants:b,conversationProperties:c}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(a){f.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),this.privToken=a}set conversationTranslator(a){this.privConversationTranslator=a}onToken(a){this.privConversationTranslator.onToken(a)}createConversationAsync(a,b){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),b),this.privManager.createOrJoin(this.privProperties,void 0,c=>{c||this.handleError(Error(this.privErrors.permissionDeniedConnect),b),this.privRoom=c,this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}startConversationAsync(a,b){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),b),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=d.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}addParticipantAsync(a,b,c){f.Contracts.throwIfNullOrUndefined(a,"Participant"),(0,e.marshalPromiseToCallbacks)(this.addParticipantImplAsync(a),b,c)}joinConversationAsync(a,b,c,d,e){try{f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","conversationId")),f.Contracts.throwIfNullOrWhitespace(b,this.privErrors.invalidArgs.replace("{arg}","nickname")),f.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,a,a=>{f.Contracts.throwIfNullOrUndefined(a,this.privErrors.permissionDeniedConnect),this.privRoom=a,this.privConfig.authorizationToken=a.cognitiveSpeechAuthToken,d&&d(a.cognitiveSpeechAuthToken)},a=>{this.handleError(a,e)})}catch(a){this.handleError(a,e)}}deleteConversationAsync(a,b){(0,e.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),a,b)}async deleteConversationImplAsync(){f.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),f.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(a,b){(0,e.marshalPromiseToCallbacks)(this.endConversationImplAsync(),a,b)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}muteAllParticipantsAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}muteParticipantAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.me.isHost||this.me.id===a||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c);let d=this.privParticipants.getParticipantIndex(a);-1===d&&this.handleError(Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!0),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}removeParticipantAsync(a,b,c){try{if(f.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&a.hasOwnProperty("id"))(0,e.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(a),b,c);else{f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),c);let d="";"string"==typeof a?d=a:a.hasOwnProperty("id")?d=a.id:a.hasOwnProperty("userId")&&(d=a.userId),f.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","userId"));let e=this.participants.findIndex(a=>a.id===d);-1===e&&this.handleError(Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(d),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}}catch(a){this.handleError(a,c)}}unlockConversationAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}unmuteAllParticipantsAsync(a,b){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),b),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(a,b)},a=>{this.handleError(a,b)})}catch(a){this.handleError(a,b)}}unmuteParticipantAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.me.isHost||this.me.id===a||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c);let d=this.privParticipants.getParticipantIndex(a);-1===d&&this.handleError(Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!1),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}sendTextMessageAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","message")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),a.length>this.privTextMessageMaxLength&&this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","message length")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(a),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}setTranslatedLanguagesAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfArrayEmptyOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","languages")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(a),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}changeNicknameAsync(a,b,c){try{f.Contracts.throwIfDisposed(this.privIsDisposed),f.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),f.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","nickname")),f.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(a),()=>{this.handleCallback(b,c)},a=>{this.handleError(a,c)})}catch(a){this.handleError(a,c)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(a){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await a.enforceAudioGating(),this.privTranscriberRecognizer=a,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(a){if(void 0!==this.privParticipants.addOrUpdateParticipant(a)&&this.privTranscriberRecognizer){let b=this.conversationInfo;return b.participants=[a],this.privTranscriberRecognizer.pushConversationEvent(b,"join")}}removeParticipantImplAsync(a){this.privParticipants.deleteParticipant(a.id);let b=this.conversationInfo;return b.participants=[a],this.privTranscriberRecognizer.pushConversationEvent(b,"leave")}async close(a){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(a){throw a}a&&this.dispose()}handleCallback(a,b){if(a){try{a()}catch(a){b&&b(a)}a=void 0}}handleError(a,b){if(b)if(a instanceof Error){let c=a;b(c.name+": "+c.message)}else b(a)}toParticipants(a){let b=this.privParticipants.participants.map(a=>this.toParticipant(a));return a?b:b.filter(a=>!1===a.isHost)}toParticipant(a){return new g.Participant(a.id,a.avatar,a.displayName,a.isHost,a.isMuted,a.isUsingTts,a.preferredLanguage,a.voice)}getMuteAllCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMuteCommand(a,b){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setMute,participantId:a,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:b})}getLockCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getEjectCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.ejectParticipant,participantId:a,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getChangeNicknameCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(a,"nickname"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:d.ConversationTranslatorCommandTypes.changeNickname,nickname:a,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:d.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMessageCommand(a){return f.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),f.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),f.Contracts.throwIfNullOrWhitespace(a,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:a,type:d.ConversationTranslatorMessageTypes.instantMessage})}}b.ConversationImpl=i},31193:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IntentResponse=void 0;class c{constructor(a){""===a?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(a)}static fromJSON(a){return new c(a)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}b.IntentResponse=c},31556:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PushAudioOutputStreamCallback=void 0;class c{}b.PushAudioOutputStreamCallback=c},31582:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.MessageDataStreamType=b.ActivityPayloadResponse=void 0;class d{constructor(a){this.privActivityResponse=JSON.parse(a)}static fromJSON(a){return new d(a)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}b.ActivityPayloadResponse=d,function(a){a[a.None=0]="None",a[a.TextToSpeechAudio=1]="TextToSpeechAudio"}(c=b.MessageDataStreamType||(b.MessageDataStreamType={}))},31911:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.OutputFormat=void 0,function(a){a[a.Simple=0]="Simple",a[a.Detailed=1]="Detailed"}(c=b.OutputFormat||(b.OutputFormat={}))},32169:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Connection=void 0;let d=c(35961),e=c(94705),f=c(52066),g=c(87470),h=c(41686);class i{static fromRecognizer(a){let b=a.internalData,c=new i;return c.privInternalData=b,c.setupEvents(),c}static fromSynthesizer(a){let b=a.internalData,c=new i;return c.privInternalData=b,c.setupEvents(),c}openConnection(a,b){(0,e.marshalPromiseToCallbacks)(this.privInternalData.connect(),a,b)}closeConnection(a,b){if(this.privInternalData instanceof d.SynthesisAdapterBase)throw Error("Disconnecting a synthesizer's connection is currently not supported");(0,e.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),a,b)}setMessageProperty(a,b,c){if(g.Contracts.throwIfNullOrWhitespace(b,"propertyName"),this.privInternalData instanceof d.ServiceRecognizerBase)if("speech.context"!==a.toLowerCase())throw Error("Only speech.context message property sets are currently supported for recognizer");else this.privInternalData.speechContext.getContext()[b]=c;else if(this.privInternalData instanceof d.SynthesisAdapterBase)if("synthesis.context"!==a.toLowerCase())throw Error("Only synthesis.context message property sets are currently supported for synthesizer");else this.privInternalData.synthesisContext.setSection(b,c)}sendMessageAsync(a,b,c,d){(0,e.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(a,b),c,d)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(a=>{"ConnectionEstablishedEvent"===a.name?this.connected&&this.connected(new h.ConnectionEventArgs(a.connectionId)):"ConnectionClosedEvent"===a.name?this.disconnected&&this.disconnected(new h.ConnectionEventArgs(a.connectionId)):"ConnectionMessageSentEvent"===a.name?this.messageSent&&this.messageSent(new h.ConnectionMessageEventArgs(new f.ConnectionMessageImpl(a.message))):"ConnectionMessageReceivedEvent"===a.name&&this.messageReceived&&this.messageReceived(new h.ConnectionMessageEventArgs(new f.ConnectionMessageImpl(a.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(a=>{this.receivedServiceMessage&&this.receivedServiceMessage(new h.ServiceEventArgs(a.jsonString,a.name))})}}b.Connection=i},32274:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},33430:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationConnectionFactory=void 0;let d=c(9403),e=c(94705),f=c(87470),g=c(41686),h=c(8941),i=c(7360),j=c(520);class k extends h.ConnectionFactoryBase{create(a,b,c){let h=a.parameters.getProperty(g.PropertyId.ConversationTranslator_Host,i.ConversationConnectionConfig.host),k=a.parameters.getProperty(g.PropertyId.ConversationTranslator_CorrelationId,(0,e.createGuid)()),l=`wss://${h}${i.ConversationConnectionConfig.webSocketPath}`,m=a.parameters.getProperty(g.PropertyId.ConversationTranslator_Token,void 0);f.Contracts.throwIfNullOrUndefined(m,"token");let n={};n[i.ConversationConnectionConfig.configParams.apiVersion]=i.ConversationConnectionConfig.apiVersion,n[i.ConversationConnectionConfig.configParams.token]=m,n[i.ConversationConnectionConfig.configParams.correlationId]=k;let o="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new d.WebsocketConnection(l,n,{},new j.ConversationWebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),o,c))}}b.ConversationConnectionFactory=k},33847:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.OnRejectAction=b.KeywordDetectionType=void 0,function(a){a.StartTrigger="StartTrigger"}(c=b.KeywordDetectionType||(b.KeywordDetectionType={})),function(a){a.EndOfTurn="EndOfTurn",a.Continue="Continue"}(d=b.OnRejectAction||(b.OnRejectAction={}))},33873:a=>{"use strict";a.exports=require("path")},34081:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DeferralMap=void 0;class c{constructor(){this.privMap={}}add(a,b){this.privMap[a]=b}getId(a){return this.privMap[a]}complete(a,b){try{this.privMap[a].resolve(b)}catch(b){this.privMap[a].reject(b)}finally{this.privMap[a]=void 0}}}b.DeferralMap=c},34631:a=>{"use strict";a.exports=require("tls")},35961:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.AutoDetectSourceLanguagesOpenRangeOptionName=b.ForceDictationPropertyName=b.ServicePropertiesPropertyName=b.CancellationErrorCodePropertyName=b.OutputFormatPropertyName=b.SpeechSynthesisAdapter=b.AvatarSynthesisAdapter=void 0,e(c(55576),b),e(c(88933),b),e(c(62117),b),e(c(23919),b),e(c(50069),b),e(c(50082),b),e(c(9728),b),e(c(29256),b),e(c(8874),b),e(c(9038),b),e(c(98420),b),e(c(73407),b),e(c(70982),b),e(c(67406),b),e(c(18648),b),e(c(94595),b),e(c(90635),b),e(c(10238),b),e(c(98298),b),e(c(2444),b),e(c(27702),b),e(c(40023),b),e(c(88776),b),e(c(74228),b),e(c(74124),b),e(c(65100),b),e(c(67587),b),e(c(36829),b),e(c(6930),b),e(c(68477),b),e(c(2807),b),e(c(18685),b),e(c(7565),b),e(c(22945),b),e(c(31193),b),e(c(67008),b),e(c(26147),b),e(c(6487),b),e(c(62271),b),e(c(30110),b),e(c(13233),b),e(c(19562),b),e(c(94453),b),e(c(13319),b),e(c(68800),b);var f=c(63948);Object.defineProperty(b,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return f.AvatarSynthesisAdapter}});var g=c(4367);Object.defineProperty(b,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return g.SpeechSynthesisAdapter}}),e(c(36003),b),e(c(47462),b),e(c(45233),b),e(c(48546),b),e(c(79738),b),e(c(25199),b),e(c(88325),b),b.OutputFormatPropertyName="OutputFormat",b.CancellationErrorCodePropertyName="CancellationErrorCode",b.ServicePropertiesPropertyName="ServiceProperties",b.ForceDictationPropertyName="ForceDictation",b.AutoDetectSourceLanguagesOpenRangeOptionName="UND"},36003:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisRestAdapter=void 0;let d=c(9403),e=c(41686),f=c(8941),g=c(89393);class h{constructor(a,b){let c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){let b=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),d=f.ConnectionFactoryBase.getHostSuffix(b);c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${b}.tts.speech${d}`)}this.privUri=`${c}/cognitiveservices/voices/list`;let g=d.RestConfigBase.requestOptions;this.privRestAdapter=new d.RestMessageAdapter(g),this.privAuthentication=b}getVoicesList(a){return this.privRestAdapter.setHeaders(g.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(a=>(this.privRestAdapter.setHeaders(a.headerName,a.token),this.privRestAdapter.request(d.RestRequestType.Get,this.privUri)))}}b.SynthesisRestAdapter=h},36092:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.NextAction=void 0,function(a){a.Recognize="Recognize",a.None="None"}(c=b.NextAction||(b.NextAction={}))},36388:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ServicePropertyChannel=void 0,function(a){a[a.UriQueryParameter=0]="UriQueryParameter"}(c=b.ServicePropertyChannel||(b.ServicePropertyChannel={}))},36440:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ProfanityOption=void 0,function(a){a[a.Masked=0]="Masked",a[a.Removed=1]="Removed",a[a.Raw=2]="Raw"}(c=b.ProfanityOption||(b.ProfanityOption={}))},36534:(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=c(57738);function e(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),e=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,e),e+=d.length}return e<b?c.slice(0,e):c}function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){let c=a.length;for(let d=0;d<c;d++)a[d]^=b[3&d]}function h(a){return a.byteLength===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}function i(a){let b;return(i.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=Buffer.from(a):ArrayBuffer.isView(a)?b=Buffer.from(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),i.readOnly=!1),b)}try{let b=c(57104),d=b.BufferUtil||b;a.exports={concat:e,mask(a,b,c,e,g){g<48?f(a,b,c,e,g):d.mask(a,b,c,e,g)},toArrayBuffer:h,toBuffer:i,unmask(a,b){a.length<32?g(a,b):d.unmask(a,b)}}}catch(b){a.exports={concat:e,mask:f,toArrayBuffer:h,toBuffer:i,unmask:g}}},36632:(a,b,c)=>{function d(){let a;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function e(a){try{a?b.storage.setItem("debug",a):b.storage.removeItem("debug")}catch(a){}}function f(){let a;try{a=b.storage.getItem("debug")}catch(a){}return!a&&"undefined"!=typeof process&&"env"in process&&(a=process.env.DEBUG),a}function g(){try{return localStorage}catch(a){}}b.formatArgs=function b(b){if(b[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+b[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;b.splice(1,0,c,"color: inherit");let d=0,e=0;b[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(e=d))}),b.splice(e,0,c)},b.save=e,b.load=f,b.useColors=d,b.storage=g(),b.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),b.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],b.log=console.debug||console.log||(()=>{}),a.exports=c(96211)(b);let{formatters:h}=a.exports;h.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},36829:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechServiceRecognizer=void 0;let d=c(41686),e=c(35961);class f extends e.ServiceRecognizerBase{constructor(a,b,c,d,e){super(a,b,c,d,e),this.privSpeechRecognizer=e}async processTypeSpecificMessages(a){let b,c=new d.PropertyCollection,f=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let g=e.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(d.PropertyId.SpeechServiceResponse_JsonResult,g.asJson()),b=new d.SpeechRecognitionResult(this.privRequestSession.requestId,d.ResultReason.RecognizingSpeech,g.Text,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,void 0,void 0,g.asJson(),c),this.privRequestSession.onHypothesis(g.Offset);let h=new d.SpeechRecognitionEventArgs(b,g.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,h)}catch(a){}f=!0;break;case"speech.phrase":let i=e.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(d.PropertyId.SpeechServiceResponse_JsonResult,i.asJson());let j=e.EnumTranslation.implTranslateRecognitionResult(i.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(i.Offset+i.Duration),d.ResultReason.Canceled===j){let a=e.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus),b=e.EnumTranslation.implTranslateCancelErrorCode(i.RecognitionStatus);await this.cancelRecognitionLocal(a,b,e.EnumTranslation.implTranslateErrorDetails(b))}else{if(i.RecognitionStatus===e.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===d.OutputFormat[d.OutputFormat.Simple])b=new d.SpeechRecognitionResult(this.privRequestSession.requestId,j,i.DisplayText,i.Duration,i.Offset,i.Language,i.LanguageDetectionConfidence,void 0,void 0,i.asJson(),c);else{let f=e.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(d.PropertyId.SpeechServiceResponse_JsonResult,f.asJson()),b=new d.SpeechRecognitionResult(this.privRequestSession.requestId,j,f.RecognitionStatus===e.RecognitionStatus.Success?f.NBest[0].Display:"",f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,void 0,void 0,f.asJson(),c)}let f=new d.SpeechRecognitionEventArgs(b,b.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,f)}catch(a){}if(this.privSuccessCallback){try{this.privSuccessCallback(b)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}f=!0}return f}cancelRecognition(a,b,c,f,g){let h=new d.PropertyCollection;if(h.setProperty(e.CancellationErrorCodePropertyName,d.CancellationErrorCode[f]),this.privSpeechRecognizer.canceled){let b=new d.SpeechRecognitionCanceledEventArgs(c,g,f,void 0,a);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,b)}catch{}}if(this.privSuccessCallback){let a=new d.SpeechRecognitionResult(b,d.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,h);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}}b.SpeechServiceRecognizer=f},37548:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},38128:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Participant=b.User=void 0;let d=c(41686);class e{constructor(a){this.privUserId=a}get userId(){return this.privUserId}}b.User=e;class f{constructor(a,b,c,e,f,g,h,i){this.privId=a,this.privAvatar=b,this.privDisplayName=c,this.privIsHost=e,this.privIsMuted=f,this.privIsUsingTts=g,this.privPreferredLanguage=h,this.privVoice=i,this.privProperties=new d.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(a,b,c){return new f(a,"",a,!1,!1,!1,b,c)}}b.Participant=f},38198:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceProfile=void 0;class c{constructor(a,b){this.privId=a,this.privProfileType=b}get profileId(){return this.privId}get profileType(){return this.privProfileType}}b.VoiceProfile=c},38341:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},38426:a=>{"use strict";let b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function c(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}a.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let d,e,f=Object.create(null);if(void 0===a||""===a)return f;let g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=0;for(;m<a.length;m++){let n=a.charCodeAt(m);if(void 0===d)if(-1===l&&1===b[n])-1===k&&(k=m);else if(32===n||9===n)-1===l&&-1!==k&&(l=m);else if(59===n||44===n){if(-1===k)throw SyntaxError(`Unexpected character at index ${m}`);-1===l&&(l=m);let b=a.slice(k,l);44===n?(c(f,b,g),g=Object.create(null)):d=b,k=l=-1}else throw SyntaxError(`Unexpected character at index ${m}`);else if(void 0===e)if(-1===l&&1===b[n])-1===k&&(k=m);else if(32===n||9===n)-1===l&&-1!==k&&(l=m);else if(59===n||44===n){if(-1===k)throw SyntaxError(`Unexpected character at index ${m}`);-1===l&&(l=m),c(g,a.slice(k,l),!0),44===n&&(c(f,d,g),g=Object.create(null),d=void 0),k=l=-1}else if(61===n&&-1!==k&&-1===l)e=a.slice(k,m),k=l=-1;else throw SyntaxError(`Unexpected character at index ${m}`);else if(i){if(1!==b[n])throw SyntaxError(`Unexpected character at index ${m}`);-1===k?k=m:h||(h=!0),i=!1}else if(j)if(1===b[n])-1===k&&(k=m);else if(34===n&&-1!==k)j=!1,l=m;else if(92===n)i=!0;else throw SyntaxError(`Unexpected character at index ${m}`);else if(34===n&&61===a.charCodeAt(m-1))j=!0;else if(-1===l&&1===b[n])-1===k&&(k=m);else if(-1!==k&&(32===n||9===n))-1===l&&(l=m);else if(59===n||44===n){if(-1===k)throw SyntaxError(`Unexpected character at index ${m}`);-1===l&&(l=m);let b=a.slice(k,l);h&&(b=b.replace(/\\/g,""),h=!1),c(g,e,b),44===n&&(c(f,d,g),g=Object.create(null),d=void 0),e=void 0,k=l=-1}else throw SyntaxError(`Unexpected character at index ${m}`)}if(-1===k||j)throw SyntaxError("Unexpected end of input");-1===l&&(l=m);let n=a.slice(k,l);return void 0===d?c(f,n,g):(void 0===e?c(g,n,!0):h?c(g,e,n.replace(/\\/g,"")):c(g,e,n),c(f,d,g)),f}}},38679:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MeetingTranscriptionEventArgs=b.ConversationTranscriptionEventArgs=b.SpeechRecognitionEventArgs=void 0;let d=c(41686);class e extends d.RecognitionEventArgs{constructor(a,b,c){super(b,c),this.privResult=a}get result(){return this.privResult}}b.SpeechRecognitionEventArgs=e;class f extends d.RecognitionEventArgs{constructor(a,b,c){super(b,c),this.privResult=a}get result(){return this.privResult}}b.ConversationTranscriptionEventArgs=f;class g extends e{}b.MeetingTranscriptionEventArgs=g},38786:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.RecognitionMode=void 0,function(a){a.Interactive="Interactive",a.Dictation="Dictation",a.Conversation="Conversation",a.None="None"}(c=b.RecognitionMode||(b.RecognitionMode={}))},39110:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeakerVerificationModel=void 0;let d=c(87470),e=c(41686);class f{constructor(a){if(d.Contracts.throwIfNullOrUndefined(a,"VoiceProfile"),a.profileType===e.VoiceProfileType.TextIndependentIdentification)throw Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=a}static fromProfile(a){return new f(a)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}}b.SpeakerVerificationModel=f},39170:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeakerRecognizer=void 0;let d=c(35961),e=c(87470),f=c(41686);class g extends f.Recognizer{constructor(a,b){e.Contracts.throwIfNullOrUndefined(a,"speechConfig");let c=a;e.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(b,c.properties,new d.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=b,e.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=c.properties}get authorizationToken(){return this.properties.getProperty(f.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}async recognizeOnceAsync(a){return e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(a)}async close(){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(a){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();let b=await this.privReco.recognizeSpeaker(a);return await this.implRecognizerStop(),b}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(a){return new d.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,b,c,e){let f=c;return new d.SpeakerServiceRecognizer(a,b,f,e,this)}async dispose(a){!this.privDisposedSpeakerRecognizer&&a&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(a))}}b.SpeakerRecognizer=g},39228:(a,b,c)=>{"use strict";let d,e=c(21820),f=c(83997),g=c(19207),{env:h}=process;function i(a){return 0!==a&&{level:a,hasBasic:!0,has256:a>=2,has16m:a>=3}}function j(a,b){if(0===d)return 0;if(g("color=16m")||g("color=full")||g("color=truecolor"))return 3;if(g("color=256"))return 2;if(a&&!b&&void 0===d)return 0;let c=d||0;if("dumb"===h.TERM)return c;if("win32"===process.platform){let a=e.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in h)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(a=>a in h)||"codeship"===h.CI_NAME?1:c;if("TEAMCITY_VERSION"in h)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(h.TEAMCITY_VERSION);if("truecolor"===h.COLORTERM)return 3;if("TERM_PROGRAM"in h){let a=parseInt((h.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(h.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(h.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(h.TERM)||"COLORTERM"in h?1:c}g("no-color")||g("no-colors")||g("color=false")||g("color=never")?d=0:(g("color")||g("colors")||g("color=true")||g("color=always"))&&(d=1),"FORCE_COLOR"in h&&(d="true"===h.FORCE_COLOR?1:"false"===h.FORCE_COLOR?0:0===h.FORCE_COLOR.length?1:Math.min(parseInt(h.FORCE_COLOR,10),3)),a.exports={supportsColor:function(a){return i(j(a,a&&a.isTTY))},stdout:i(j(!0,f.isatty(1))),stderr:i(j(!0,f.isatty(2)))}},39993:a=>{"use strict";let b=a=>null!==a&&"object"==typeof a&&"function"==typeof a.pipe;b.writable=a=>b(a)&&!1!==a.writable&&"function"==typeof a._write&&"object"==typeof a._writableState,b.readable=a=>b(a)&&!1!==a.readable&&"function"==typeof a._read&&"object"==typeof a._readableState,b.duplex=a=>b.writable(a)&&b.readable(a),b.transform=a=>b.duplex(a)&&"function"==typeof a._transform,a.exports=b},40023:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationHypothesis=void 0;let d=c(87470),e=c(61951);class f{constructor(a,b){this.privTranslationHypothesis=a,this.privTranslationHypothesis.Offset+=b,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(a,b){return new f(JSON.parse(a),b)}static fromTranslationResponse(a,b){d.Contracts.throwIfNullOrUndefined(a,"translationHypothesis");let c=a.SpeechHypothesis;return a.SpeechHypothesis=void 0,c.Translation=a,new f(c,b)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}asJson(){let a={...this.privTranslationHypothesis};return void 0!==a.Translation?JSON.stringify({...a,TranslationStatus:e.TranslationStatus[a.Translation.TranslationStatus]}):JSON.stringify(a)}mapTranslationStatus(a){return"string"==typeof a?e.TranslationStatus[a]:"number"==typeof a?a:void 0}}b.TranslationHypothesis=f},40136:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AvatarSynthesizer=void 0;let d=c(10238),e=c(35961),f=c(94705),g=c(10340),h=c(41686),i=c(87470),j=c(41587);class k extends h.Synthesizer{constructor(a,b){super(a),i.Contracts.throwIfNullOrUndefined(b,"avatarConfig"),this.privConnectionFactory=new d.SpeechSynthesisConnectionFactory,this.privAvatarConfig=b,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=g.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(h.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(a){i.Contracts.throwIfNullOrUndefined(a,"peerConnection"),this.privIceServers=a.getConfiguration().iceServers,i.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");let b=new f.Deferred;a.onicegatheringstatechange=()=>{f.Events.instance.onEvent(new f.PlatformEvent("peer connection: ice gathering state: "+a.iceGatheringState,f.EventType.Debug)),"complete"===a.iceGatheringState&&(f.Events.instance.onEvent(new f.PlatformEvent("peer connection: ice gathering complete.",f.EventType.Info)),b.resolve())},a.onicecandidate=a=>{a.candidate?f.Events.instance.onEvent(new f.PlatformEvent("peer connection: ice candidate: "+a.candidate.candidate,f.EventType.Debug)):(f.Events.instance.onEvent(new f.PlatformEvent("peer connection: ice candidate: complete",f.EventType.Debug)),b.resolve())},setTimeout(()=>{"complete"!==a.iceGatheringState&&(f.Events.instance.onEvent(new f.PlatformEvent("peer connection: ice gathering timeout.",f.EventType.Warning)),b.resolve())},2e3);let c=await a.createOffer();await a.setLocalDescription(c),await b.promise,f.Events.instance.onEvent(new f.PlatformEvent("peer connection: got local SDP.",f.EventType.Info)),this.privProperties.setProperty(h.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(a.localDescription));let d=await this.speak("",!1);if(d.reason!==h.ResultReason.SynthesizingAudioCompleted)return new h.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);let e=new RTCSessionDescription(JSON.parse(atob(d.properties.getProperty(h.PropertyId.TalkingAvatarService_WebRTC_SDP))));return await a.setRemoteDescription(e),new h.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(a){let b=await this.speak(a,!1);return new h.SynthesisResult(b.resultId,b.reason,b.errorDetails,b.properties)}async speakSsmlAsync(a){let b=await this.speak(a,!0);return new h.SynthesisResult(b.resultId,b.reason,b.errorDetails,b.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return i.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(a,b,c){return new e.AvatarSynthesisAdapter(a,b,c,this,this.privAvatarConfig)}createRestSynthesisAdapter(a,b){}createSynthesizerConfig(a){let b=super.createSynthesizerConfig(a);return b.avatarEnabled=!0,b}async speak(a,b){let c=(0,f.createNoDashGuid)(),d=new f.Deferred;return this.synthesisRequestQueue.enqueue(new j.SynthesisRequest(c,a,b,a=>{d.resolve(a),this.privSynthesizing=!1,this.adapterSpeak()},a=>{d.reject(a),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}}b.AvatarSynthesizer=k},40406:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.PhraseResultOutputType=void 0,function(a){a.Always="Always",a.None="None"}(c=b.PhraseResultOutputType||(b.PhraseResultOutputType={}))},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},41587:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisRequest=b.Synthesizer=void 0;let d=c(35961),e=c(94705),f=c(87470),g=c(41686);class h{constructor(a){let b=a;f.Contracts.throwIfNull(b,"speechConfig"),this.privProperties=b.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue,this.tokenCredential=a.tokenCredential}get authorizationToken(){return this.properties.getProperty(g.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){f.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(g.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(g.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===d.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(a){let b={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"},c=this.properties.getProperty(g.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),d=this.properties.getProperty(g.PropertyId.SpeechServiceConnection_SynthVoice,""),e=h.XMLEncode(a);return this.autoDetectSourceLanguage?c="en-US":d=d||b[c],d&&(e=`<voice name='${d}'>${e}</voice>`),e=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${c}'>${e}</speak>`}async dispose(a){this.privDisposed||(a&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;let a=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(a.text,a.isSSML,a.requestId,a.cb,a.err,a.dataStream)}}createSynthesizerConfig(a){return new d.SynthesizerConfig(a,this.privProperties)}implCommonSynthesizeSetup(){let a="undefined"!=typeof window?"Browser":"Node",b="unknown",c="unknown";"undefined"!=typeof navigator&&(a=a+"/"+navigator.platform,b=navigator.userAgent,c=navigator.appVersion);let e=this.createSynthesizerConfig(new d.SpeechServiceConfig(new d.Context(new d.OS(a,b,c)))),f=this.privProperties.getProperty(g.PropertyId.SpeechServiceConnection_Key,void 0),h=f&&""!==f?new d.CognitiveSubscriptionKeyAuthentication(f):this.tokenCredential?new d.CognitiveTokenAuthentication(async()=>{try{let a=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return a?.token??""}catch(a){throw a}},async()=>{try{let a=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return a?.token??""}catch(a){throw a}}):new d.CognitiveTokenAuthentication(()=>Promise.resolve(this.privProperties.getProperty(g.PropertyId.SpeechServiceAuthorization_Token,void 0)),()=>Promise.resolve(this.privProperties.getProperty(g.PropertyId.SpeechServiceAuthorization_Token,void 0)));this.privAdapter=this.createSynthesisAdapter(h,this.privConnectionFactory,e),this.privRestAdapter=this.createRestSynthesisAdapter(h,e)}static XMLEncode(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}b.Synthesizer=h;class i{constructor(a,b,c,d,e,f){this.requestId=a,this.text=b,this.isSSML=c,this.cb=d,this.err=e,this.dataStream=f}}b.SynthesisRequest=i},41686:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionEventArgs=b.CancellationErrorCode=b.CancellationDetails=b.CancellationDetailsBase=b.IntentRecognitionCanceledEventArgs=b.TranslationRecognitionCanceledEventArgs=b.NoMatchDetails=b.NoMatchReason=b.Translations=b.TranslationRecognizer=b.VoiceProfileType=b.IntentRecognizer=b.SpeechRecognizer=b.Recognizer=b.PropertyId=b.PropertyCollection=b.SpeechTranslationConfigImpl=b.SpeechTranslationConfig=b.SpeechConfigImpl=b.SpeechConfig=b.ResultReason=b.TranslationSynthesisResult=b.TranslationRecognitionResult=b.TranslationSynthesisEventArgs=b.TranslationRecognitionEventArgs=b.SpeechRecognitionCanceledEventArgs=b.MeetingTranscriptionEventArgs=b.ConversationTranscriptionEventArgs=b.SpeechRecognitionEventArgs=b.LanguageUnderstandingModel=b.IntentRecognitionResult=b.SpeechRecognitionResult=b.RecognitionResult=b.IntentRecognitionEventArgs=b.OutputFormat=b.RecognitionEventArgs=b.SessionEventArgs=b.KeywordRecognitionModel=b.PushAudioOutputStreamCallback=b.PullAudioInputStreamCallback=b.CancellationReason=b.PushAudioOutputStream=b.PullAudioOutputStream=b.AudioOutputStream=b.PushAudioInputStream=b.PullAudioInputStream=b.AudioInputStream=b.AudioFormatTag=b.AudioStreamFormat=b.AudioConfig=void 0,b.SpeechSynthesisEventArgs=b.SpeechSynthesisResult=b.SynthesisResult=b.SpeechSynthesizer=b.SpeechSynthesisOutputFormat=b.Synthesizer=b.User=b.ParticipantChangedReason=b.Participant=b.MeetingTranscriber=b.Meeting=b.ConversationTranscriptionResult=b.ConversationTranscriber=b.ConversationTranslator=b.ConversationTranslationResult=b.ConversationTranslationEventArgs=b.ConversationTranslationCanceledEventArgs=b.ConversationParticipantsChangedEventArgs=b.ConversationExpirationEventArgs=b.Conversation=b.SpeakerRecognitionCancellationDetails=b.SpeakerRecognitionResultType=b.SpeakerRecognitionResult=b.SourceLanguageConfig=b.AutoDetectSourceLanguageResult=b.AutoDetectSourceLanguageConfig=b.SpeakerVerificationModel=b.SpeakerIdentificationModel=b.SpeakerRecognizer=b.VoiceProfileClient=b.VoiceProfilePhraseResult=b.VoiceProfileCancellationDetails=b.VoiceProfileResult=b.VoiceProfileEnrollmentCancellationDetails=b.VoiceProfileEnrollmentResult=b.VoiceProfile=b.ConnectionMessage=b.ConnectionMessageEventArgs=b.BaseAudioPlayer=b.ProfanityOption=b.ServicePropertyChannel=b.TurnStatusReceivedEventArgs=b.ActivityReceivedEventArgs=b.DialogServiceConnector=b.CustomCommandsConfig=b.BotFrameworkConfig=b.DialogServiceConfig=b.PhraseListGrammar=b.Connection=b.ServiceEventArgs=void 0,b.LogLevel=b.Diagnostics=b.AvatarWebRTCConnectionResult=b.Coordinate=b.AvatarVideoFormat=b.AvatarSynthesizer=b.AvatarEventArgs=b.AvatarConfig=b.LanguageIdMode=b.PronunciationAssessmentResult=b.PronunciationAssessmentConfig=b.PronunciationAssessmentGranularity=b.PronunciationAssessmentGradingSystem=b.MeetingTranscriptionCanceledEventArgs=b.ConversationTranscriptionCanceledEventArgs=b.SpeakerAudioDestination=b.VoiceInfo=b.SynthesisVoiceType=b.SynthesisVoiceGender=b.SynthesisVoicesResult=b.SpeechSynthesisBoundaryType=b.SpeechSynthesisVisemeEventArgs=b.SpeechSynthesisBookmarkEventArgs=b.SpeechSynthesisWordBoundaryEventArgs=void 0;var d=c(26956);Object.defineProperty(b,"AudioConfig",{enumerable:!0,get:function(){return d.AudioConfig}});var e=c(57645);Object.defineProperty(b,"AudioStreamFormat",{enumerable:!0,get:function(){return e.AudioStreamFormat}}),Object.defineProperty(b,"AudioFormatTag",{enumerable:!0,get:function(){return e.AudioFormatTag}});var f=c(95456);Object.defineProperty(b,"AudioInputStream",{enumerable:!0,get:function(){return f.AudioInputStream}}),Object.defineProperty(b,"PullAudioInputStream",{enumerable:!0,get:function(){return f.PullAudioInputStream}}),Object.defineProperty(b,"PushAudioInputStream",{enumerable:!0,get:function(){return f.PushAudioInputStream}});var g=c(65543);Object.defineProperty(b,"AudioOutputStream",{enumerable:!0,get:function(){return g.AudioOutputStream}}),Object.defineProperty(b,"PullAudioOutputStream",{enumerable:!0,get:function(){return g.PullAudioOutputStream}}),Object.defineProperty(b,"PushAudioOutputStream",{enumerable:!0,get:function(){return g.PushAudioOutputStream}});var h=c(87098);Object.defineProperty(b,"CancellationReason",{enumerable:!0,get:function(){return h.CancellationReason}});var i=c(84768);Object.defineProperty(b,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return i.PullAudioInputStreamCallback}});var j=c(31556);Object.defineProperty(b,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return j.PushAudioOutputStreamCallback}});var k=c(44262);Object.defineProperty(b,"KeywordRecognitionModel",{enumerable:!0,get:function(){return k.KeywordRecognitionModel}});var l=c(95160);Object.defineProperty(b,"SessionEventArgs",{enumerable:!0,get:function(){return l.SessionEventArgs}});var m=c(61977);Object.defineProperty(b,"RecognitionEventArgs",{enumerable:!0,get:function(){return m.RecognitionEventArgs}});var n=c(31911);Object.defineProperty(b,"OutputFormat",{enumerable:!0,get:function(){return n.OutputFormat}});var o=c(94287);Object.defineProperty(b,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return o.IntentRecognitionEventArgs}});var p=c(27259);Object.defineProperty(b,"RecognitionResult",{enumerable:!0,get:function(){return p.RecognitionResult}});var q=c(54409);Object.defineProperty(b,"SpeechRecognitionResult",{enumerable:!0,get:function(){return q.SpeechRecognitionResult}});var r=c(54161);Object.defineProperty(b,"IntentRecognitionResult",{enumerable:!0,get:function(){return r.IntentRecognitionResult}});var s=c(54064);Object.defineProperty(b,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return s.LanguageUnderstandingModel}});var t=c(38679);Object.defineProperty(b,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return t.SpeechRecognitionEventArgs}}),Object.defineProperty(b,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return t.ConversationTranscriptionEventArgs}}),Object.defineProperty(b,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return t.MeetingTranscriptionEventArgs}});var u=c(92234);Object.defineProperty(b,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return u.SpeechRecognitionCanceledEventArgs}});var v=c(95930);Object.defineProperty(b,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return v.TranslationRecognitionEventArgs}});var w=c(42381);Object.defineProperty(b,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return w.TranslationSynthesisEventArgs}});var x=c(44166);Object.defineProperty(b,"TranslationRecognitionResult",{enumerable:!0,get:function(){return x.TranslationRecognitionResult}});var y=c(98519);Object.defineProperty(b,"TranslationSynthesisResult",{enumerable:!0,get:function(){return y.TranslationSynthesisResult}});var z=c(20020);Object.defineProperty(b,"ResultReason",{enumerable:!0,get:function(){return z.ResultReason}});var A=c(2033);Object.defineProperty(b,"SpeechConfig",{enumerable:!0,get:function(){return A.SpeechConfig}}),Object.defineProperty(b,"SpeechConfigImpl",{enumerable:!0,get:function(){return A.SpeechConfigImpl}});var B=c(99054);Object.defineProperty(b,"SpeechTranslationConfig",{enumerable:!0,get:function(){return B.SpeechTranslationConfig}}),Object.defineProperty(b,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return B.SpeechTranslationConfigImpl}});var C=c(67460);Object.defineProperty(b,"PropertyCollection",{enumerable:!0,get:function(){return C.PropertyCollection}});var D=c(8997);Object.defineProperty(b,"PropertyId",{enumerable:!0,get:function(){return D.PropertyId}});var E=c(83911);Object.defineProperty(b,"Recognizer",{enumerable:!0,get:function(){return E.Recognizer}});var F=c(81489);Object.defineProperty(b,"SpeechRecognizer",{enumerable:!0,get:function(){return F.SpeechRecognizer}});var G=c(4857);Object.defineProperty(b,"IntentRecognizer",{enumerable:!0,get:function(){return G.IntentRecognizer}});var H=c(76830);Object.defineProperty(b,"VoiceProfileType",{enumerable:!0,get:function(){return H.VoiceProfileType}});var I=c(13936);Object.defineProperty(b,"TranslationRecognizer",{enumerable:!0,get:function(){return I.TranslationRecognizer}});var J=c(99413);Object.defineProperty(b,"Translations",{enumerable:!0,get:function(){return J.Translations}});var K=c(84585);Object.defineProperty(b,"NoMatchReason",{enumerable:!0,get:function(){return K.NoMatchReason}});var L=c(52683);Object.defineProperty(b,"NoMatchDetails",{enumerable:!0,get:function(){return L.NoMatchDetails}});var M=c(29515);Object.defineProperty(b,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return M.TranslationRecognitionCanceledEventArgs}});var N=c(24674);Object.defineProperty(b,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return N.IntentRecognitionCanceledEventArgs}});var O=c(28863);Object.defineProperty(b,"CancellationDetailsBase",{enumerable:!0,get:function(){return O.CancellationDetailsBase}});var P=c(87510);Object.defineProperty(b,"CancellationDetails",{enumerable:!0,get:function(){return P.CancellationDetails}});var Q=c(54018);Object.defineProperty(b,"CancellationErrorCode",{enumerable:!0,get:function(){return Q.CancellationErrorCode}});var R=c(61616);Object.defineProperty(b,"ConnectionEventArgs",{enumerable:!0,get:function(){return R.ConnectionEventArgs}});var S=c(60121);Object.defineProperty(b,"ServiceEventArgs",{enumerable:!0,get:function(){return S.ServiceEventArgs}});var T=c(32169);Object.defineProperty(b,"Connection",{enumerable:!0,get:function(){return T.Connection}});var U=c(84283);Object.defineProperty(b,"PhraseListGrammar",{enumerable:!0,get:function(){return U.PhraseListGrammar}});var V=c(85112);Object.defineProperty(b,"DialogServiceConfig",{enumerable:!0,get:function(){return V.DialogServiceConfig}});var W=c(30484);Object.defineProperty(b,"BotFrameworkConfig",{enumerable:!0,get:function(){return W.BotFrameworkConfig}});var X=c(75538);Object.defineProperty(b,"CustomCommandsConfig",{enumerable:!0,get:function(){return X.CustomCommandsConfig}});var Y=c(49447);Object.defineProperty(b,"DialogServiceConnector",{enumerable:!0,get:function(){return Y.DialogServiceConnector}});var Z=c(28538);Object.defineProperty(b,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Z.ActivityReceivedEventArgs}});var $=c(76710);Object.defineProperty(b,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return $.TurnStatusReceivedEventArgs}});var _=c(36388);Object.defineProperty(b,"ServicePropertyChannel",{enumerable:!0,get:function(){return _.ServicePropertyChannel}});var aa=c(36440);Object.defineProperty(b,"ProfanityOption",{enumerable:!0,get:function(){return aa.ProfanityOption}});var ab=c(15884);Object.defineProperty(b,"BaseAudioPlayer",{enumerable:!0,get:function(){return ab.BaseAudioPlayer}});var ac=c(24397);Object.defineProperty(b,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ac.ConnectionMessageEventArgs}});var ad=c(52066);Object.defineProperty(b,"ConnectionMessage",{enumerable:!0,get:function(){return ad.ConnectionMessage}});var ae=c(38198);Object.defineProperty(b,"VoiceProfile",{enumerable:!0,get:function(){return ae.VoiceProfile}});var af=c(24851);Object.defineProperty(b,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return af.VoiceProfileEnrollmentResult}}),Object.defineProperty(b,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return af.VoiceProfileEnrollmentCancellationDetails}});var ag=c(50347);Object.defineProperty(b,"VoiceProfileResult",{enumerable:!0,get:function(){return ag.VoiceProfileResult}}),Object.defineProperty(b,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return ag.VoiceProfileCancellationDetails}});var ah=c(8882);Object.defineProperty(b,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ah.VoiceProfilePhraseResult}});var ai=c(92525);Object.defineProperty(b,"VoiceProfileClient",{enumerable:!0,get:function(){return ai.VoiceProfileClient}});var aj=c(39170);Object.defineProperty(b,"SpeakerRecognizer",{enumerable:!0,get:function(){return aj.SpeakerRecognizer}});var ak=c(51077);Object.defineProperty(b,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return ak.SpeakerIdentificationModel}});var al=c(39110);Object.defineProperty(b,"SpeakerVerificationModel",{enumerable:!0,get:function(){return al.SpeakerVerificationModel}});var am=c(16832);Object.defineProperty(b,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return am.AutoDetectSourceLanguageConfig}});var an=c(66947);Object.defineProperty(b,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return an.AutoDetectSourceLanguageResult}});var ao=c(28536);Object.defineProperty(b,"SourceLanguageConfig",{enumerable:!0,get:function(){return ao.SourceLanguageConfig}});var ap=c(26668);Object.defineProperty(b,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return ap.SpeakerRecognitionResult}}),Object.defineProperty(b,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return ap.SpeakerRecognitionResultType}}),Object.defineProperty(b,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return ap.SpeakerRecognitionCancellationDetails}});var aq=c(63169);Object.defineProperty(b,"Conversation",{enumerable:!0,get:function(){return aq.Conversation}}),Object.defineProperty(b,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return aq.ConversationExpirationEventArgs}}),Object.defineProperty(b,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return aq.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(b,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return aq.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(b,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return aq.ConversationTranslationEventArgs}}),Object.defineProperty(b,"ConversationTranslationResult",{enumerable:!0,get:function(){return aq.ConversationTranslationResult}}),Object.defineProperty(b,"ConversationTranslator",{enumerable:!0,get:function(){return aq.ConversationTranslator}}),Object.defineProperty(b,"ConversationTranscriber",{enumerable:!0,get:function(){return aq.ConversationTranscriber}}),Object.defineProperty(b,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return aq.ConversationTranscriptionResult}}),Object.defineProperty(b,"Meeting",{enumerable:!0,get:function(){return aq.Meeting}}),Object.defineProperty(b,"MeetingTranscriber",{enumerable:!0,get:function(){return aq.MeetingTranscriber}}),Object.defineProperty(b,"Participant",{enumerable:!0,get:function(){return aq.Participant}}),Object.defineProperty(b,"ParticipantChangedReason",{enumerable:!0,get:function(){return aq.ParticipantChangedReason}}),Object.defineProperty(b,"User",{enumerable:!0,get:function(){return aq.User}});var ar=c(41587);Object.defineProperty(b,"Synthesizer",{enumerable:!0,get:function(){return ar.Synthesizer}});var as=c(43551);Object.defineProperty(b,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return as.SpeechSynthesisOutputFormat}});var at=c(49913);Object.defineProperty(b,"SpeechSynthesizer",{enumerable:!0,get:function(){return at.SpeechSynthesizer}});var au=c(70438);Object.defineProperty(b,"SynthesisResult",{enumerable:!0,get:function(){return au.SynthesisResult}});var av=c(4592);Object.defineProperty(b,"SpeechSynthesisResult",{enumerable:!0,get:function(){return av.SpeechSynthesisResult}});var aw=c(6948);Object.defineProperty(b,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return aw.SpeechSynthesisEventArgs}});var ax=c(56622);Object.defineProperty(b,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return ax.SpeechSynthesisWordBoundaryEventArgs}});var ay=c(81916);Object.defineProperty(b,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return ay.SpeechSynthesisBookmarkEventArgs}});var az=c(19037);Object.defineProperty(b,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return az.SpeechSynthesisVisemeEventArgs}});var aA=c(57003);Object.defineProperty(b,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return aA.SpeechSynthesisBoundaryType}});var aB=c(43413);Object.defineProperty(b,"SynthesisVoicesResult",{enumerable:!0,get:function(){return aB.SynthesisVoicesResult}});var aC=c(22739);Object.defineProperty(b,"SynthesisVoiceGender",{enumerable:!0,get:function(){return aC.SynthesisVoiceGender}}),Object.defineProperty(b,"SynthesisVoiceType",{enumerable:!0,get:function(){return aC.SynthesisVoiceType}}),Object.defineProperty(b,"VoiceInfo",{enumerable:!0,get:function(){return aC.VoiceInfo}});var aD=c(85763);Object.defineProperty(b,"SpeakerAudioDestination",{enumerable:!0,get:function(){return aD.SpeakerAudioDestination}});var aE=c(70278);Object.defineProperty(b,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return aE.ConversationTranscriptionCanceledEventArgs}});var aF=c(20112);Object.defineProperty(b,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return aF.MeetingTranscriptionCanceledEventArgs}});var aG=c(89521);Object.defineProperty(b,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return aG.PronunciationAssessmentGradingSystem}});var aH=c(11668);Object.defineProperty(b,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return aH.PronunciationAssessmentGranularity}});var aI=c(57060);Object.defineProperty(b,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return aI.PronunciationAssessmentConfig}});var aJ=c(72935);Object.defineProperty(b,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return aJ.PronunciationAssessmentResult}});var aK=c(67997);Object.defineProperty(b,"LanguageIdMode",{enumerable:!0,get:function(){return aK.LanguageIdMode}});var aL=c(52526);Object.defineProperty(b,"AvatarConfig",{enumerable:!0,get:function(){return aL.AvatarConfig}});var aM=c(64411);Object.defineProperty(b,"AvatarEventArgs",{enumerable:!0,get:function(){return aM.AvatarEventArgs}});var aN=c(40136);Object.defineProperty(b,"AvatarSynthesizer",{enumerable:!0,get:function(){return aN.AvatarSynthesizer}});var aO=c(53986);Object.defineProperty(b,"AvatarVideoFormat",{enumerable:!0,get:function(){return aO.AvatarVideoFormat}}),Object.defineProperty(b,"Coordinate",{enumerable:!0,get:function(){return aO.Coordinate}});var aP=c(99028);Object.defineProperty(b,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return aP.AvatarWebRTCConnectionResult}});var aQ=c(62805);Object.defineProperty(b,"Diagnostics",{enumerable:!0,get:function(){return aQ.Diagnostics}});var aR=c(21177);Object.defineProperty(b,"LogLevel",{enumerable:!0,get:function(){return aR.LogLevel}})},42248:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b};Object.defineProperty(b,"__esModule",{value:!0}),b.ConsoleLoggingListener=void 0;let g=f(c(29021)),h=c(21177),i=c(87470);class j{constructor(a=h.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=a}set logPath(a){i.Contracts.throwIfNullOrUndefined(g.openSync,"\nFile System access not available"),this.privLogPath=a}set enableConsoleOutput(a){this.privEnableConsoleOutput=a}onEvent(a){if(a.eventType>=this.privLogLevelFilter){let b=this.toString(a);if(this.logCallback&&this.logCallback(b),this.privLogPath&&g.writeFileSync(this.privLogPath,b+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(a.eventType){case h.LogLevel.Debug:console.debug(b);break;case h.LogLevel.Info:console.info(b);break;case h.LogLevel.Warning:console.warn(b);break;case h.LogLevel.Error:console.error(b);break;default:console.log(b)}}}toString(a){let b=[`${a.eventTime}`,`${a.name}`],c=a;for(let d in c)if(d&&a.hasOwnProperty(d)&&"eventTime"!==d&&"eventType"!==d&&"eventId"!==d&&"name"!==d&&"constructor"!==d){let a=c[d],e="<NULL>";null!=a&&(e="number"==typeof a||"string"==typeof a?a.toString():JSON.stringify(a)),b.push(`${d}: ${e}`)}return b.join(" | ")}}b.ConsoleLoggingListener=j},42381:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationSynthesisEventArgs=void 0;let d=c(41686);class e extends d.SessionEventArgs{constructor(a,b){super(b),this.privResult=a}get result(){return this.privResult}}b.TranslationSynthesisEventArgs=e},42413:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CommandResponsePayload=void 0;let c=a=>JSON.parse(a);class d{constructor(a){this.privCommandResponse=c(a)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(a){return new d(a)}}b.CommandResponsePayload=d},42436:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechConnectionMessage=void 0;let d=c(94705),e=c(89393);class f extends d.ConnectionMessage{constructor(a,b,c,f,g,h,i,j){if(!b)throw new d.ArgumentNullError("path");if(!c)throw new d.ArgumentNullError("requestId");let k={};if(k[e.HeaderNames.Path]=b,k[e.HeaderNames.RequestId]=c,k[e.HeaderNames.RequestTimestamp]=new Date().toISOString(),f&&(k[e.HeaderNames.ContentType]=f),h&&(k[e.HeaderNames.RequestStreamId]=h),i)for(let a in i)a&&(k[a]=i[a]);j?super(a,g,k,j):super(a,g,k),this.privPath=b,this.privRequestId=c,this.privContentType=f,this.privStreamId=h,this.privAdditionalHeaders=i}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(a){let b=null,c=null,d=null,g=null,h={};if(a.headers)for(let f in a.headers)f&&(f.toLowerCase()===e.HeaderNames.Path.toLowerCase()?b=a.headers[f]:f.toLowerCase()===e.HeaderNames.RequestId.toLowerCase()?c=a.headers[f]:f.toLowerCase()===e.HeaderNames.ContentType.toLowerCase()?d=a.headers[f]:f.toLowerCase()===e.HeaderNames.RequestStreamId.toLowerCase()?g=a.headers[f]:h[f]=a.headers[f]);return new f(a.messageType,b,c,d,a.body,g,h,a.id)}}b.SpeechConnectionMessage=f},43413:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisVoicesResult=void 0;let d=c(41686);class e extends d.SynthesisResult{constructor(a,b,c){if(Array.isArray(b))for(let c of(super(a,d.ResultReason.VoicesListRetrieved,void 0,new d.PropertyCollection),this.privVoices=[],b))this.privVoices.push(new d.VoiceInfo(c));else super(a,d.ResultReason.Canceled,c||"Error information unavailable",new d.PropertyCollection)}get voices(){return this.privVoices}}b.SynthesisVoicesResult=e},43551:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisOutputFormat=void 0,function(a){a[a.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",a[a.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",a[a.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",a[a.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",a[a.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",a[a.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",a[a.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",a[a.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",a[a.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",a[a.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",a[a.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",a[a.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",a[a.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",a[a.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",a[a.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",a[a.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",a[a.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",a[a.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",a[a.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",a[a.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",a[a.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",a[a.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",a[a.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",a[a.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",a[a.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",a[a.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",a[a.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",a[a.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",a[a.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",a[a.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",a[a.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",a[a.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",a[a.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",a[a.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",a[a.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",a[a.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",a[a.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",a[a.AmrWb16000Hz=37]="AmrWb16000Hz",a[a.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(c=b.SpeechSynthesisOutputFormat||(b.SpeechSynthesisOutputFormat={}))},44166:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationRecognitionResult=void 0;let d=c(41686);class e extends d.SpeechRecognitionResult{constructor(a,b,c,d,e,f,g,h,i,j,k){super(b,c,d,e,f,g,h,void 0,i,j,k),this.privTranslations=a}static fromSpeechRecognitionResult(a){return new e(void 0,a.resultId,a.reason,a.text,a.duration,a.offset,a.language,a.languageDetectionConfidence,a.errorDetails,a.json,a.properties)}get translations(){return this.privTranslations}}b.TranslationRecognitionResult=e},44262:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.KeywordRecognitionModel=void 0;let d=c(87470);class e{constructor(){this.privDisposed=!1;return}static fromFile(a){throw d.Contracts.throwIfFileDoesNotExist(a,"fileName"),Error("Not yet implemented.")}static fromStream(a){throw d.Contracts.throwIfNull(a,"file"),Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}b.KeywordRecognitionModel=e},45233:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisContext=void 0;let d=c(41686);class e{constructor(){this.privContext={}}setSection(a,b){this.privContext[a]=b}set audioOutputFormat(a){this.privAudioOutputFormat=a}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(a){let b=this.buildSynthesisContext(a);this.setSection("synthesis",b)}buildSynthesisContext(a){return{audio:{metadataOptions:{bookmarkEnabled:!!a?.bookmarkReached,punctuationBoundaryEnabled:a?.properties.getProperty(d.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!a?.wordBoundary),sentenceBoundaryEnabled:a?.properties.getProperty(d.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!a?.visemeReceived,wordBoundaryEnabled:a?.properties.getProperty(d.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!a?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:a?.autoDetectSourceLanguage}}}}b.SynthesisContext=e},45352:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OCSPCacheUpdateErrorEvent=b.OCSPResponseRetrievedEvent=b.OCSPCacheFetchErrorEvent=b.OCSPVerificationFailedEvent=b.OCSPCacheHitEvent=b.OCSPCacheEntryNeedsRefreshEvent=b.OCSPCacheEntryExpiredEvent=b.OCSPWSUpgradeStartedEvent=b.OCSPStapleReceivedEvent=b.OCSPCacheUpdateCompleteEvent=b.OCSPDiskCacheStoreEvent=b.OCSPMemoryCacheStoreEvent=b.OCSPCacheUpdateNeededEvent=b.OCSPDiskCacheHitEvent=b.OCSPCacheMissEvent=b.OCSPMemoryCacheHitEvent=b.OCSPEvent=void 0;let d=c(19991);class e extends d.PlatformEvent{constructor(a,b,c){super(a,b),this.privSignature=c}}b.OCSPEvent=e;class f extends e{constructor(a){super("OCSPMemoryCacheHitEvent",d.EventType.Debug,a)}}b.OCSPMemoryCacheHitEvent=f;class g extends e{constructor(a){super("OCSPCacheMissEvent",d.EventType.Debug,a)}}b.OCSPCacheMissEvent=g;class h extends e{constructor(a){super("OCSPDiskCacheHitEvent",d.EventType.Debug,a)}}b.OCSPDiskCacheHitEvent=h;class i extends e{constructor(a){super("OCSPCacheUpdateNeededEvent",d.EventType.Debug,a)}}b.OCSPCacheUpdateNeededEvent=i;class j extends e{constructor(a){super("OCSPMemoryCacheStoreEvent",d.EventType.Debug,a)}}b.OCSPMemoryCacheStoreEvent=j;class k extends e{constructor(a){super("OCSPDiskCacheStoreEvent",d.EventType.Debug,a)}}b.OCSPDiskCacheStoreEvent=k;class l extends e{constructor(a){super("OCSPCacheUpdateCompleteEvent",d.EventType.Debug,a)}}b.OCSPCacheUpdateCompleteEvent=l;class m extends e{constructor(){super("OCSPStapleReceivedEvent",d.EventType.Debug,"")}}b.OCSPStapleReceivedEvent=m;class n extends e{constructor(a){super("OCSPWSUpgradeStartedEvent",d.EventType.Debug,a)}}b.OCSPWSUpgradeStartedEvent=n;class o extends e{constructor(a,b){super("OCSPCacheEntryExpiredEvent",d.EventType.Debug,a),this.privExpireTime=b}}b.OCSPCacheEntryExpiredEvent=o;class p extends e{constructor(a,b,c){super("OCSPCacheEntryNeedsRefreshEvent",d.EventType.Debug,a),this.privExpireTime=c,this.privStartTime=b}}b.OCSPCacheEntryNeedsRefreshEvent=p;class q extends e{constructor(a,b,c){super("OCSPCacheHitEvent",d.EventType.Debug,a),this.privExpireTime=c,this.privExpireTimeString=new Date(c).toLocaleDateString(),this.privStartTime=b,this.privStartTimeString=new Date(b).toLocaleTimeString()}}b.OCSPCacheHitEvent=q;class r extends e{constructor(a,b){super("OCSPVerificationFailedEvent",d.EventType.Debug,a),this.privError=b}}b.OCSPVerificationFailedEvent=r;class s extends e{constructor(a,b){super("OCSPCacheFetchErrorEvent",d.EventType.Debug,a),this.privError=b}}b.OCSPCacheFetchErrorEvent=s;class t extends e{constructor(a){super("OCSPResponseRetrievedEvent",d.EventType.Debug,a)}}b.OCSPResponseRetrievedEvent=t;class u extends e{constructor(a,b){super("OCSPCacheUpdateErrorEvent",d.EventType.Debug,a),this.privError=b}}b.OCSPCacheUpdateErrorEvent=u},45977:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionRedirectEvent=b.ConnectionMessageSentEvent=b.ConnectionMessageReceivedEvent=b.ConnectionEstablishErrorEvent=b.ConnectionErrorEvent=b.ConnectionClosedEvent=b.ConnectionEstablishedEvent=b.ConnectionStartEvent=b.ConnectionEvent=b.ServiceEvent=void 0;let d=c(19991);class e extends d.PlatformEvent{constructor(a,b,c=d.EventType.Info){super(a,c),this.privJsonResult=b}get jsonString(){return this.privJsonResult}}b.ServiceEvent=e;class f extends d.PlatformEvent{constructor(a,b,c=d.EventType.Info){super(a,c),this.privConnectionId=b}get connectionId(){return this.privConnectionId}}b.ConnectionEvent=f;class g extends f{constructor(a,b,c){super("ConnectionStartEvent",a),this.privUri=b,this.privHeaders=c}get uri(){return this.privUri}get headers(){return this.privHeaders}}b.ConnectionStartEvent=g;class h extends f{constructor(a){super("ConnectionEstablishedEvent",a)}}b.ConnectionEstablishedEvent=h;class i extends f{constructor(a,b,c){super("ConnectionClosedEvent",a,d.EventType.Debug),this.privReason=c,this.privStatusCode=b}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}b.ConnectionClosedEvent=i;class j extends f{constructor(a,b,c){super("ConnectionErrorEvent",a,d.EventType.Debug),this.privMessage=b,this.privType=c}get message(){return this.privMessage}get type(){return this.privType}}b.ConnectionErrorEvent=j;class k extends f{constructor(a,b,c){super("ConnectionEstablishErrorEvent",a,d.EventType.Error),this.privStatusCode=b,this.privReason=c}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}b.ConnectionEstablishErrorEvent=k;class l extends f{constructor(a,b,c){super("ConnectionMessageReceivedEvent",a),this.privNetworkReceivedTime=b,this.privMessage=c}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}b.ConnectionMessageReceivedEvent=l;class m extends f{constructor(a,b,c){super("ConnectionMessageSentEvent",a),this.privNetworkSentTime=b,this.privMessage=c}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}b.ConnectionMessageSentEvent=m;class n extends f{constructor(a,b,c,e){super("ConnectionRedirectEvent",a,d.EventType.Info),this.privRedirectUrl=b,this.privOriginalUrl=c,this.privContext=e}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}b.ConnectionRedirectEvent=n},46358:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};let e=c(94735),f=d(c(95386));function g(a){return!!a&&"function"==typeof a.addRequest}function h(a){return!!a&&"function"==typeof a.addRequest}function i(){let{stack:a}=Error();return"string"==typeof a&&a.split("\n").some(a=>-1!==a.indexOf("(https.js:"))}function j(a,b){return new j.Agent(a,b)}!function(a){class b extends e.EventEmitter{constructor(a,b){super(),this.promisifiedCallback=void 0;let c=b;"function"==typeof a?this.callback=a:a&&(c=a),this.timeout=null,c&&"number"==typeof c.timeout&&(this.timeout=c.timeout),this.options=c||{},this.maxFreeSockets=1,this.maxSockets=1,this.sockets=[],this.requests=[]}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:i()?443:80}set defaultPort(a){this.explicitDefaultPort=a}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:i()?"https:":"http:"}set protocol(a){this.explicitProtocol=a}callback(a,b,c){throw Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(a,b){let c=Object.assign({},b);"boolean"!=typeof c.secureEndpoint&&(c.secureEndpoint=i()),null==c.host&&(c.host="localhost"),null==c.port&&(c.port=c.secureEndpoint?443:80);let d=Object.assign(Object.assign({},this.options),c);d.host&&d.path&&delete d.path,delete d.agent,delete d.hostname,delete d._defaultAgent,delete d.defaultPort,delete d.createConnection,a._last=!0,a.shouldKeepAlive=!1;let e=!1,j=null,k=this.timeout,l=this.freeSocket;function m(b){a._hadError||(a.emit("error",b),a._hadError=!0)}function n(){j=null,e=!0;let a=Error(`A "socket" was not created for HTTP request before ${k}ms`);a.code="ETIMEOUT",m(a)}function o(a){e||(null!==j&&(clearTimeout(j),j=null),m(a))}function p(b){let c;function f(){l(c,d)}if(!e){if(null!=j&&(clearTimeout(j),j=null),g(b)||h(b))return void b.addRequest(a,d);if(b){(c=b).on("free",f),a.onSocket(c);return}m(Error(`no Duplex stream was returned to agent-base for \`${a.method} ${a.path}\``))}}if("function"!=typeof this.callback)return void m(Error("`callback` is not defined"));this.promisifiedCallback||(this.callback.length>=3?this.promisifiedCallback=f.default(this.callback):this.promisifiedCallback=this.callback),"number"==typeof k&&k>0&&(j=setTimeout(n,k)),"port"in d&&"number"!=typeof d.port&&(d.port=Number(d.port));try{Promise.resolve(this.promisifiedCallback(a,d)).then(p,o)}catch(a){Promise.reject(a).catch(o)}}freeSocket(a,b){a.destroy()}destroy(){}}a.Agent=b}(j||(j={})),j.prototype=j.Agent.prototype,a.exports=j},47232:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StringUtils=void 0;class c{static formatString(a,b){if(!a)return"";if(!b)return a;let c="",d="",e=a=>{c+=a},f=a=>{d+=a},g=e;for(let h=0;h<a.length;h++){let i=a[h],j=h+1<a.length?a[h+1]:"";switch(i){case"{":"{"===j?(g("{"),h++):g=f;break;case"}":"}"===j?(g("}"),h++):(b.hasOwnProperty(d)&&(c+=b[d]),g=e,d="");break;default:g(i)}}return c}}b.StringUtils=c},47462:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesizerConfig=b.SynthesisServiceType=void 0;let e=c(35961);!function(a){a[a.Standard=0]="Standard",a[a.Custom=1]="Custom"}(d=b.SynthesisServiceType||(b.SynthesisServiceType={}));class f{constructor(a,b){this.privSynthesisServiceType=d.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=a||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=b}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(a){this.privSynthesisServiceType=a}set synthesisVideoSection(a){this.privSpeechServiceConfig.Context.synthesis={video:a}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}b.SynthesizerConfig=f},47488:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranslatorConnectionFactory=void 0;let d=c(9403),e=c(47232),f=c(87470),g=c(41686),h=c(89393),i=c(1255),j=c(8941),k=c(35961);class l extends j.ConnectionFactoryBase{constructor(a){super(),f.Contracts.throwIfNullOrUndefined(a,"convGetter"),this.privConvGetter=a}create(a,b,c){let f="TRUE"===a.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),m=this.privConvGetter().room,n=m.cognitiveSpeechRegion||a.parameters.getProperty(g.PropertyId.SpeechServiceConnection_Region,""),o={hostSuffix:j.ConnectionFactoryBase.getHostSuffix(n),path:l.CTS_VIRT_MIC_PATH,region:encodeURIComponent(n)};o[i.QueryParameterNames.Language]=encodeURIComponent(a.parameters.getProperty(g.PropertyId.SpeechServiceConnection_RecoLanguage,"")),o[i.QueryParameterNames.CtsMeetingId]=encodeURIComponent(m.roomId),o[i.QueryParameterNames.CtsDeviceId]=encodeURIComponent(m.participantId),o[i.QueryParameterNames.CtsIsParticipant]=m.isHost?"":"&"+i.QueryParameterNames.CtsIsParticipant;let p="",q={},r={};if(f){(p=a.parameters.getProperty(g.PropertyId.SpeechServiceConnection_Endpoint))||(p="wss://"+a.parameters.getProperty(g.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}");let b=new URL(p=e.StringUtils.formatString(p,o));b.searchParams.forEach((a,b)=>{q[b]=a}),new k.TranscriberConnectionFactory().setQueryParams(q,a,p),q[i.QueryParameterNames.CtsMeetingId]=o[i.QueryParameterNames.CtsMeetingId],q[i.QueryParameterNames.CtsDeviceId]=o[i.QueryParameterNames.CtsDeviceId],m.isHost||(q[i.QueryParameterNames.CtsIsParticipant]=""),i.QueryParameterNames.Format in q||(q[i.QueryParameterNames.Format]="simple"),b.searchParams.forEach((a,c)=>{b.searchParams.set(c,q[c]),delete q[c]}),p=b.toString()}else{let b=new k.TranslationConnectionFactory;p=b.getEndpointUrl(a,!0),p=e.StringUtils.formatString(p,o),b.setQueryParams(q,a,p)}r[h.HeaderNames.ConnectionId]=c,r[d.RestConfigBase.configParams.token]=m.token,b.token&&(r[b.headerName]=b.token);let s="TRUE"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return Promise.resolve(new d.WebsocketConnection(p,q,r,new k.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),s,c))}}b.ConversationTranslatorConnectionFactory=l,l.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"},47725:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},48213:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DialogServiceTurnState=void 0;let d=c(10340),e=c(65543),f=c(31582);class g{constructor(a,b){this.privRequestId=b,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=a,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(a,b){return a.messageDataStreamType===f.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=e.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==b?b:d.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}b.DialogServiceTurnState=g},48546:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeakerRecognitionConfig=void 0;let d=c(35961);class e{constructor(a,b){this.privContext=a||new d.Context(null),this.privParameters=b}get parameters(){return this.privParameters}get Context(){return this.privContext}}b.SpeakerRecognitionConfig=e},48993:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.OnUnknownAction=void 0,function(a){a.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",a.None="None"}(c=b.OnUnknownAction||(b.OnUnknownAction={}))},49e3:(a,b,c)=>{"use strict";function d(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999}function e(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}try{let b=c(90305);"object"==typeof b&&(b=b.Validation.isValidUTF8),a.exports={isValidStatusCode:d,isValidUTF8:a=>a.length<150?e(a):b(a)}}catch(b){a.exports={isValidStatusCode:d,isValidUTF8:e}}},49447:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DialogServiceConnector=void 0;let d=c(3791),e=c(35961),f=c(38786),g=c(94705),h=c(87470),i=c(41686),j=c(8997);class k extends i.Recognizer{constructor(a,b){let c=a;h.Contracts.throwIfNull(a,"dialogConfig"),super(b,c.properties,new d.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=c.properties.clone();let e=this.buildAgentConfig();this.privReco.agentConfig.set(e)}connect(a,b){(0,g.marshalPromiseToCallbacks)(this.privReco.connect(),a,b)}disconnect(a,b){(0,g.marshalPromiseToCallbacks)(this.privReco.disconnect(),a,b)}get authorizationToken(){return this.properties.getProperty(j.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){h.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(j.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(j.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(a){this.properties.setProperty(j.PropertyId.Conversation_Speech_Activity_Template,a)}listenOnceAsync(a,b){if(this.isTurnComplete){h.Contracts.throwIfDisposed(this.privIsDisposed);let c=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;let a=new g.Deferred;await this.privReco.recognize(f.RecognitionMode.Conversation,a.resolve,a.reject);let b=await a.promise;return await this.implRecognizerStop(),b})();c.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,g.marshalPromiseToCallbacks)(c.finally(()=>{this.isTurnComplete=!0}),a,b)}}sendActivityAsync(a,b,c){(0,g.marshalPromiseToCallbacks)(this.privReco.sendMessage(a),b,c)}close(a,b){h.Contracts.throwIfDisposed(this.privIsDisposed),(0,g.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}async dispose(a){!this.privIsDisposed&&a&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,b,c,d){let f=c;return new e.DialogServiceAdapter(a,b,f,d,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(j.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(j.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(j.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(j.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}b.DialogServiceConnector=k},49691:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),new(c(35961)).AgentConfig,e(c(41686),b)},49695:(a,b,c)=>{"use strict";let d,e=c(74075),f=c(36534),g=c(73123),{kStatusCode:h,NOOP:i}=c(57738),j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");class p{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",s),this._inflate.on("data",r)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("error",i),this._deflate.on("data",q)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=a.slice(0,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}function q(a){this[n].push(a),this[l]+=a.length}function r(a){if(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)return void this[n].push(a);this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",r),this.reset()}function s(a){this[k]._inflate=null,a[h]=1007,this[m](a)}a.exports=p},49791:a=>{function b(a){this.dict=a||{}}b.prototype.set=function(a,b,c){if("object"==typeof a)for(var d in a)this.set(d,a[d],b);else{void 0===c&&(c=!0);var e=this.has(a);return!c&&e?this.dict[e]=this.dict[e]+","+b:this.dict[e||a]=b,e}},b.prototype.has=function(a){for(var b=Object.keys(this.dict),a=a.toLowerCase(),c=0;c<b.length;c++)if(b[c].toLowerCase()===a)return b[c];return!1},b.prototype.get=function(a){a=a.toLowerCase();var b,c,d=this.dict;return Object.keys(d).forEach(function(e){c=e.toLowerCase(),a===c&&(b=d[e])}),b},b.prototype.swap=function(a){var b=this.has(a);if(b!==a){if(!b)throw Error('There is no header than matches "'+a+'"');this.dict[a]=this.dict[b],delete this.dict[b]}},b.prototype.del=function(a){var b=this.has(a);return delete this.dict[b||a]},a.exports=function(a){return new b(a)},a.exports.httpify=function(a,c){var d=new b(c);return a.setHeader=function(a,b,c){if(void 0!==b)return d.set(a,b,c)},a.hasHeader=function(a){return d.has(a)},a.getHeader=function(a){return d.get(a)},a.removeHeader=function(a){return d.del(a)},a.headers=d.dict,d}},49815:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionOpenResponse=void 0;class c{constructor(a,b){this.privStatusCode=a,this.privReason=b}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}b.ConnectionOpenResponse=c},49913:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesizer=void 0;let d=c(35961),e=c(94705),f=c(80695),g=c(10340),h=c(65543),i=c(87470),j=c(41686),k=c(41587);class l extends j.Synthesizer{constructor(a,b){super(a),null!==b&&(void 0===b?this.audioConfig="undefined"==typeof window?void 0:j.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=b),this.privConnectionFactory=new d.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(a,b,c){let d=a;return b.properties.mergeTo(d.properties),new l(a,c)}speakTextAsync(a,b,c,d){this.speakImpl(a,!1,b,c,d)}speakSsmlAsync(a,b,c,d){this.speakImpl(a,!0,b,c,d)}async getVoicesAsync(a=""){return this.getVoices(a)}close(a,b){i.Contracts.throwIfDisposed(this.privDisposed),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}get internalData(){return this.privAdapter}createSynthesisAdapter(a,b,c){return new d.SpeechSynthesisAdapter(a,b,c,this,this.audioConfig)}createRestSynthesisAdapter(a,b){return new d.SynthesisRestAdapter(b,a)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=g.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(j.SpeechSynthesisOutputFormat[this.properties.getProperty(j.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(a,b,c,d,g){try{let l;i.Contracts.throwIfDisposed(this.privDisposed);let m=(0,e.createNoDashGuid)();l=g instanceof j.PushAudioOutputStreamCallback?new h.PushAudioOutputStreamImpl(g):g instanceof j.PullAudioOutputStream?g:void 0!==g?new f.AudioFileWriter(g):void 0,this.synthesisRequestQueue.enqueue(new k.SynthesisRequest(m,a,b,a=>{if(this.privSynthesizing=!1,c)try{c(a)}catch(a){d&&d(a)}c=void 0,this.adapterSpeak().catch(()=>{})},a=>{d&&d(a)},l)),this.adapterSpeak().catch(()=>{})}catch(a){if(d)if(a instanceof Error){let b=a;d(b.name+": "+b.message)}else d(a);this.dispose(!0).catch(()=>{})}}async getVoices(a){let b=(0,e.createNoDashGuid)(),c=await this.privRestAdapter.getVoicesList(b);if(!(c.ok&&Array.isArray(c.json)))return new j.SynthesisVoicesResult(b,void 0,`Error: ${c.status}: ${c.statusText}`);{let d=c.json;return a&&a.length>0&&(d=d.filter(b=>!!b.Locale&&b.Locale.toLowerCase()===a.toLowerCase())),new j.SynthesisVoicesResult(b,d,void 0)}}}b.SpeechSynthesizer=l},50069:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},50082:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IntentConnectionFactory=void 0;let d=c(9403),e=c(41686),f=c(8941),g=c(35961),h=c(89393);class i extends f.ConnectionFactoryBase{create(a,b,c){let i=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!i){let b=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),c=f.ConnectionFactoryBase.getHostSuffix(b);i=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+b+".sr.speech"+c)+"/speech/recognition/interactive/cognitiveservices/v1"}let j={format:"simple",language:a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(a,j,i);let k={};void 0!==b.token&&""!==b.token&&(k[b.headerName]=b.token),k[h.HeaderNames.ConnectionId]=c,a.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,i);let l="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new d.WebsocketConnection(i,j,k,new g.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),l,c))}getSpeechRegionFromIntentRegion(a){switch(a){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return a}}}b.IntentConnectionFactory=i},50347:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceProfileCancellationDetails=b.VoiceProfileResult=void 0;let d=c(35961),e=c(87470),f=c(41686);class g{constructor(a,b){this.privReason=a,this.privProperties=new f.PropertyCollection,a===f.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(b,"statusText"),this.privErrorDetails=b,this.privProperties.setProperty(d.CancellationErrorCodePropertyName,f.CancellationErrorCode[f.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}}b.VoiceProfileResult=g;class h extends f.CancellationDetailsBase{constructor(a,b,c){super(a,b,c)}static fromResult(a){let b=f.CancellationReason.Error,c=f.CancellationErrorCode.NoError;return a.properties&&(c=f.CancellationErrorCode[a.properties.getProperty(d.CancellationErrorCodePropertyName,f.CancellationErrorCode[f.CancellationErrorCode.NoError])]),new h(b,a.errorDetails,c)}}b.VoiceProfileCancellationDetails=h},51077:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeakerIdentificationModel=void 0;let d=c(87470),e=c(41686);class f{constructor(a){if(this.privVoiceProfiles=[],this.privProfileIds=[],d.Contracts.throwIfNullOrUndefined(a,"VoiceProfiles"),0===a.length)throw Error("Empty Voice Profiles array");for(let b of a){if(b.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw Error("Identification model can only be created from Identification profile: "+b.profileId);this.privVoiceProfiles.push(b),this.privProfileIds.push(b.profileId)}}static fromProfiles(a){return new f(a)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}}b.SpeakerIdentificationModel=f},52066:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionMessageImpl=b.ConnectionMessage=void 0;let d=c(89393),e=c(94705),f=c(67460),g=c(8997);class h{}b.ConnectionMessage=h;class i{constructor(a){this.privConnectionMessage=a,this.privProperties=new f.PropertyCollection,this.privConnectionMessage.headers[d.HeaderNames.ConnectionId]&&this.privProperties.setProperty(g.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[d.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(a=>{this.privProperties.setProperty(a,this.privConnectionMessage.headers[a])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(a=>"path"===a.toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}b.ConnectionMessageImpl=i},52526:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AvatarConfig=void 0;let d=c(87470),e=c(41686);class f{constructor(a,b,c){this.privCustomized=!1,this.privUseBuiltInVoice=!1,d.Contracts.throwIfNullOrWhitespace(a,"character"),this.character=a,this.style=b,void 0===c&&(c=new e.AvatarVideoFormat),this.videoFormat=c}get customized(){return this.privCustomized}set customized(a){this.privCustomized=a}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(a){this.privUseBuiltInVoice=a}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(a){this.privBackgroundColor=a}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(a){this.privBackgroundImage=a}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(a){this.privRemoteIceServers=a}}b.AvatarConfig=f},52683:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NoMatchDetails=void 0;let d=c(35961),e=c(41686);class f{constructor(a){this.privReason=a}static fromResult(a){let b=d.SimpleSpeechPhrase.fromJSON(a.json,0),c=e.NoMatchReason.NotRecognized;switch(b.RecognitionStatus){case d.RecognitionStatus.BabbleTimeout:c=e.NoMatchReason.InitialBabbleTimeout;break;case d.RecognitionStatus.InitialSilenceTimeout:c=e.NoMatchReason.InitialSilenceTimeout;break;default:c=e.NoMatchReason.NotRecognized}return new f(c)}get reason(){return this.privReason}}b.NoMatchDetails=f},52887:(a,b,c)=>{"use strict";let d=c(8152);d.from=(a,b)=>{if(a instanceof DataView)return a;if(a instanceof ArrayBuffer)return new DataView(a);if("string"==typeof a){if(b){if("base64"===b)return new DataView(Uint8Array.from(atob(a),a=>a.charCodeAt(0)).buffer)}else b="utf-8";if("utf-8"!==b)throw Error("Browser support for encodings other than utf-8 not implemented");return new DataView(new TextEncoder().encode(a).buffer)}if("object"==typeof a&&ArrayBuffer.isView(a))if(a.byteLength===a.buffer.byteLength)return new DataView(a.buffer);else return new DataView(a.buffer,a.byteOffset,a.byteLength);throw Error("Unkown type. Cannot convert to ArrayBuffer")},d.toString=(a,b)=>{let c=String.fromCharCode(...new Uint8Array((a=d(a,b)).buffer,a.byteOffset,a.byteLength));return"base64"===b?btoa(c):c},d.native=(a,b)=>a instanceof Uint8Array?a:new Uint8Array((a=d.from(a,b)).buffer,a.byteOffset,a.byteLength),a.exports=d},53986:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AvatarVideoFormat=b.Coordinate=void 0;class c{constructor(a,b){this.x=a,this.y=b}}b.Coordinate=c;class d{constructor(a="H264",b=2e6,c=1920,d=1080){this.codec=a,this.bitrate=b,this.width=c,this.height=d}setCropRange(a,b){this.cropRange={bottomRight:b,topLeft:a}}}b.AvatarVideoFormat=d},54018:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.CancellationErrorCode=void 0,function(a){a[a.NoError=0]="NoError",a[a.AuthenticationFailure=1]="AuthenticationFailure",a[a.BadRequestParameters=2]="BadRequestParameters",a[a.TooManyRequests=3]="TooManyRequests",a[a.ConnectionFailure=4]="ConnectionFailure",a[a.ServiceTimeout=5]="ServiceTimeout",a[a.ServiceError=6]="ServiceError",a[a.RuntimeError=7]="RuntimeError",a[a.Forbidden=8]="Forbidden"}(c=b.CancellationErrorCode||(b.CancellationErrorCode={}))},54064:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LanguageUnderstandingModelImpl=b.LanguageUnderstandingModel=void 0;let d=c(87470);class e{constructor(){return}static fromEndpoint(a){d.Contracts.throwIfNull(a,"uri"),d.Contracts.throwIfNullOrWhitespace(a.hostname,"uri");let b=new f,c=a.host.indexOf(".");if(-1===c)throw Error("Could not determine region from endpoint");b.region=a.host.substr(0,c);let e=a.pathname.lastIndexOf("/")+1;if(-1===e)throw Error("Could not determine appId from endpoint");if(b.appId=a.pathname.substr(e),b.subscriptionKey=a.searchParams.get("subscription-key"),void 0===b.subscriptionKey)throw Error("Could not determine subscription key from endpoint");return b}static fromAppId(a){d.Contracts.throwIfNullOrWhitespace(a,"appId");let b=new f;return b.appId=a,b}static fromSubscription(a,b,c){d.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),d.Contracts.throwIfNullOrWhitespace(b,"appId"),d.Contracts.throwIfNullOrWhitespace(c,"region");let e=new f;return e.appId=b,e.region=c,e.subscriptionKey=a,e}}b.LanguageUnderstandingModel=e;class f extends e{}b.LanguageUnderstandingModelImpl=f},54161:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IntentRecognitionResult=void 0;let d=c(41686);class e extends d.SpeechRecognitionResult{constructor(a,b,c,d,e,f,g,h,i,j,k){super(b,c,d,e,f,g,h,void 0,i,j,k),this.privIntentId=a}get intentId(){return this.privIntentId}}b.IntentRecognitionResult=e},54409:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechRecognitionResult=void 0;let d=c(41686);class e extends d.RecognitionResult{constructor(a,b,c,d,e,f,g,h,i,j,k){super(a,b,c,d,e,f,g,i,j,k),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}}b.SpeechRecognitionResult=e},55028:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationParticipantsChangedEventArgs=void 0;let d=c(41686);class e extends d.SessionEventArgs{constructor(a,b,c){super(c),this.privReason=a,this.privParticipant=b}get reason(){return this.privReason}get participants(){return this.privParticipant}}b.ConversationParticipantsChangedEventArgs=e},55511:a=>{"use strict";a.exports=require("crypto")},55576:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CognitiveSubscriptionKeyAuthentication=void 0;let d=c(94705),e=c(89393),f=c(62117);class g{constructor(a){if(!a)throw new d.ArgumentNullError("subscriptionKey");this.privAuthInfo=new f.AuthInfo(e.HeaderNames.AuthKey,a)}fetch(a){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(a){return Promise.resolve(this.privAuthInfo)}}b.CognitiveSubscriptionKeyAuthentication=g},55591:a=>{"use strict";a.exports=require("https")},56075:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.marshalPromiseToCallbacks=b.Sink=b.Deferred=b.PromiseResultEventSource=b.PromiseResult=b.PromiseState=void 0,function(a){a[a.None=0]="None",a[a.Resolved=1]="Resolved",a[a.Rejected=2]="Rejected"}(c=b.PromiseState||(b.PromiseState={}));class d{constructor(a){this.throwIfError=()=>{if(this.isError)throw this.error},a.on(a=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=a)},a=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=a)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}b.PromiseResult=d;class e{constructor(){this.setResult=a=>{this.privOnSetResult(a)},this.setError=a=>{this.privOnSetError(a)},this.on=(a,b)=>{this.privOnSetResult=a,this.privOnSetError=b}}}b.PromiseResultEventSource=e;class f{constructor(){this.resolve=a=>(this.privResolve(a),this),this.reject=a=>(this.privReject(a),this),this.privPromise=new Promise((a,b)=>{this.privResolve=a,this.privReject=b})}get promise(){return this.privPromise}}b.Deferred=f;class g{constructor(){this.privState=c.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new e,this.privPromiseResult=new d(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(a){if(this.privState!==c.None)throw Error("'Cannot resolve a completed promise'");this.privState=c.Resolved,this.privPromiseResultEvents.setResult(a);for(let b=0;b<this.privSuccessHandlers.length;b++)this.executeSuccessCallback(a,this.privSuccessHandlers[b],this.privErrorHandlers[b]);this.detachHandlers()}reject(a){if(this.privState!==c.None)throw Error("'Cannot reject a completed promise'");for(let b of(this.privState=c.Rejected,this.privPromiseResultEvents.setError(a),this.privErrorHandlers))this.executeErrorCallback(a,b);this.detachHandlers()}on(a,b){null==a&&(a=()=>{}),this.privState===c.None?(this.privSuccessHandlers.push(a),this.privErrorHandlers.push(b)):(this.privState===c.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,a,b):this.privState===c.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,b),this.detachHandlers())}executeSuccessCallback(a,b,c){try{b(a)}catch(a){this.executeErrorCallback(`'Unhandled callback error: ${a}'`,c)}}executeErrorCallback(a,b){if(b)try{b(a)}catch(b){throw Error(`'Unhandled callback error: ${b}. InnerError: ${a}'`)}else throw Error(`'Unhandled error: ${a}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}b.Sink=g,b.marshalPromiseToCallbacks=function(a,b,c){a.then(a=>{try{b&&b(a)}catch(a){if(c)try{if(a instanceof Error){let b=a;c(b.name+": "+b.message)}else c(a)}catch(a){}}},a=>{if(c)try{if(a instanceof Error){let b=a;c(b.name+": "+b.message)}else c(a)}catch(a){}})}},56217:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Timeout=void 0;class c{static load(){let a=new Map([[0,()=>{}]]),b=new Map,d=new Worker("data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'));return d.addEventListener("message",({data:d})=>{if(c.isCallNotification(d)){let{params:{timerId:c}}=d,e=a.get(c);if("number"==typeof e){let a=b.get(e);if(void 0===a||a!==c)throw Error("The timer is in an undefined state.")}else if(void 0!==e)e(),a.delete(c);else throw Error("The timer is in an undefined state.")}else if(c.isClearResponse(d)){let{id:c}=d,e=b.get(c);if(void 0===e)throw Error("The timer is in an undefined state.");b.delete(c),a.delete(e)}else{let{error:{message:a}}=d;throw Error(a)}}),{clearTimeout:c=>{let e=Math.random();b.set(e,c),a.set(c,e),d.postMessage({id:e,method:"clear",params:{timerId:c}})},setTimeout:(b,c)=>{let e=Math.random();return a.set(e,b),d.postMessage({id:null,method:"set",params:{delay:c,now:performance.now(),timerId:e}}),e}}}static loadWorkerTimers(){return()=>(null!==c.workerTimers||(c.workerTimers=c.load()),c.workerTimers)}static isCallNotification(a){return void 0!==a.method&&"call"===a.method}static isClearResponse(a){return null===a.error&&"number"==typeof a.id}}b.Timeout=c,c.workerTimers=null,c.clearTimeout=a=>c.timers().clearTimeout(a),c.setTimeout=(a,b)=>c.timers().setTimeout(a,b),c.timers=c.loadWorkerTimers()},56622:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisWordBoundaryEventArgs=void 0;class c{constructor(a,b,c,d,e,f){this.privAudioOffset=a,this.privDuration=b,this.privText=c,this.privWordLength=d,this.privTextOffset=e,this.privBoundaryType=f}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}b.SpeechSynthesisWordBoundaryEventArgs=c},57003:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisBoundaryType=void 0,function(a){a.Word="WordBoundary",a.Punctuation="PunctuationBoundary",a.Sentence="SentenceBoundary"}(c=b.SpeechSynthesisBoundaryType||(b.SpeechSynthesisBoundaryType={}))},57060:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PronunciationAssessmentConfig=void 0;let d=c(87470),e=c(41686);class f{constructor(a,b=e.PronunciationAssessmentGradingSystem.FivePoint,c=e.PronunciationAssessmentGranularity.Phoneme,f=!1){d.Contracts.throwIfNullOrUndefined(a,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,a),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[b]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[c]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(f))}static fromJSON(a){d.Contracts.throwIfNullOrUndefined(a,"json");let b=new f("");return b.privProperties=new e.PropertyCollection,b.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,a),b}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(a){this.updateJson();let b=a.internalData;b.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,b.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,b.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(a){d.Contracts.throwIfNullOrWhitespace(a,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,a)}set phonemeAlphabet(a){d.Contracts.throwIfNullOrWhitespace(a,"phonemeAlphabet"),this.privPhonemeAlphabet=a}set enableMiscue(a){let b=a?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,b)}get enableMiscue(){return"true"===this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(a){this.privNBestPhonemeCount=a}set enableProsodyAssessment(a){this.privEnableProsodyAssessment=a}enableContentAssessmentWithTopic(a){this.privContentAssessmentTopic=a}get properties(){return this.privProperties}updateJson(){let a=JSON.parse(this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}")),b=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);b&&(a.referenceText=b);let c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);c&&(a.gradingSystem=c);let d=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);d&&(a.granularity=d),this.privPhonemeAlphabet&&(a.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(a.nbestPhonemeCount=this.privNBestPhonemeCount),a.enableProsodyAssessment=this.privEnableProsodyAssessment,a.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(a.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(a))}}b.PronunciationAssessmentConfig=f},57104:()=>{},57645:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.AudioStreamFormatImpl=b.AudioStreamFormat=b.AudioFormatTag=void 0,function(a){a[a.PCM=1]="PCM",a[a.MuLaw=2]="MuLaw",a[a.Siren=3]="Siren",a[a.MP3=4]="MP3",a[a.SILKSkype=5]="SILKSkype",a[a.OGG_OPUS=6]="OGG_OPUS",a[a.WEBM_OPUS=7]="WEBM_OPUS",a[a.ALaw=8]="ALaw",a[a.FLAC=9]="FLAC",a[a.OPUS=10]="OPUS",a[a.AMR_WB=11]="AMR_WB",a[a.G722=12]="G722"}(c=b.AudioFormatTag||(b.AudioFormatTag={}));class d{static getDefaultInputFormat(){return e.getDefaultInputFormat()}static getWaveFormat(a,b,c,d){return new e(a,b,c,d)}static getWaveFormatPCM(a,b,c){return new e(a,b,c)}}b.AudioStreamFormat=d;class e extends d{constructor(a=16e3,b=16,d=1,e=c.PCM){super();let f=!0;switch(e){case c.PCM:this.formatTag=1;break;case c.ALaw:this.formatTag=6;break;case c.MuLaw:this.formatTag=7;break;default:f=!1}if(this.bitsPerSample=b,this.samplesPerSec=a,this.channels=d,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),f){this.privHeader=new ArrayBuffer(44);let a=new DataView(this.privHeader);this.setString(a,0,"RIFF"),a.setUint32(4,0,!0),this.setString(a,8,"WAVEfmt "),a.setUint32(16,16,!0),a.setUint16(20,this.formatTag,!0),a.setUint16(22,this.channels,!0),a.setUint32(24,this.samplesPerSec,!0),a.setUint32(28,this.avgBytesPerSec,!0),a.setUint16(32,this.channels*(this.bitsPerSample/8),!0),a.setUint16(34,this.bitsPerSample,!0),this.setString(a,36,"data"),a.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new e}static getAudioContext(a){let b=window.AudioContext||window.webkitAudioContext||!1;if(b)if(void 0!==a&&navigator.mediaDevices.getSupportedConstraints().sampleRate)return new b({sampleRate:a});else return new b;throw Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(a,b,c){for(let d=0;d<c.length;d++)a.setUint8(b+d,c.charCodeAt(d))}}b.AudioStreamFormatImpl=e},57738:a=>{"use strict";a.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},57769:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},58115:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TextResponsePayload=b.SpeechResponsePayload=void 0;let c=a=>JSON.parse(a),d=a=>JSON.parse(a);class e{constructor(a){this.privSpeechResponse=c(a)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(a){return new e(a)}}b.SpeechResponsePayload=e;class f{constructor(a){this.privTextResponse=d(a)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(a){return new f(a)}}b.TextResponsePayload=f},59647:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.SegmentationMode=void 0,function(a){a.Normal="Normal",a.Disabled="Disabled",a.Custom="Custom",a.Semantic="Semantic"}(c=b.SegmentationMode||(b.SegmentationMode={}))},60121:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ServiceEventArgs=void 0;let d=c(41686);class e extends d.SessionEventArgs{constructor(a,b,c){super(c),this.privJsonResult=a,this.privEventName=b}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}b.ServiceEventArgs=e},60233:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationExpirationEventArgs=void 0;let d=c(41686);class e extends d.SessionEventArgs{constructor(a,b){super(b),this.privExpirationTime=a}get expirationTime(){return this.privExpirationTime}}b.ConversationExpirationEventArgs=e},61357:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.Queue=void 0;let e=c(29016),f=c(77504),g=c(56075);!function(a){a[a.Dequeue=0]="Dequeue",a[a.Peek=1]="Peek"}(d||(d={}));class h{constructor(a){this.privPromiseStore=new f.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=a||new f.List,this.privDetachables=[],this.privSubscribers=new f.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(a){this.throwIfDispose(),this.enqueueFromPromise(new Promise(b=>b(a)))}enqueueFromPromise(a){this.throwIfDispose(),a.then(a=>{this.privList.add(a)},()=>{})}dequeue(){this.throwIfDispose();let a=new g.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:d.Dequeue}),this.drain()),a.promise}peek(){this.throwIfDispose();let a=new g.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:d.Peek}),this.drain()),a.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}async drainAndDispose(a,b){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=b,this.privIsDisposing=!0;let c=this.privSubscribers;if(c){for(;c.length()>0;)c.removeFirst().deferral.resolve(void 0);this.privSubscribers===c&&(this.privSubscribers=c)}for(let a of this.privDetachables)await a.detach();if(this.privPromiseStore.length()>0&&a){let b=[];return this.privPromiseStore.toArray().forEach(a=>{b.push(a)}),Promise.all(b).finally(()=>{this.privSubscribers=null,this.privList.forEach(b=>{a(b)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}}async dispose(a){await this.drainAndDispose(null,a)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;let a=this.privSubscribers,b=this.privList;if(a&&b){for(;b.length()>0&&a.length()>0&&!this.privIsDisposing;){let c=a.removeFirst();if(c.type===d.Peek)c.deferral.resolve(b.first());else{let a=b.removeFirst();c.deferral.resolve(a)}}this.privSubscribers===a&&(this.privSubscribers=a),this.privList===b&&(this.privList=b)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new e.InvalidOperationError(this.privDisposeReason);throw new e.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new e.InvalidOperationError("Queue disposing")}}b.Queue=h},61616:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionEventArgs=void 0;let d=c(41686);class e extends d.SessionEventArgs{}b.ConnectionEventArgs=e},61951:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationStatus=void 0,function(a){a[a.Success=0]="Success",a[a.Error=1]="Error"}(c=b.TranslationStatus||(b.TranslationStatus={}))},61977:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RecognitionEventArgs=void 0;let d=c(41686);class e extends d.SessionEventArgs{constructor(a,b){super(b),this.privOffset=a}get offset(){return this.privOffset}}b.RecognitionEventArgs=e},62117:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AuthInfo=void 0;class c{constructor(a,b){this.privHeaderName=a,this.privToken=b}get headerName(){return this.privHeaderName}get token(){return this.privToken}}b.AuthInfo=c},62271:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DynamicGrammarBuilder=void 0;let d=c(72762);class e{addPhrase(a){this.privPhrases||(this.privPhrases=[]),a instanceof Array?this.privPhrases=this.privPhrases.concat(a):this.privPhrases.push(a)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(a){this.privGrammars||(this.privGrammars=[]),a instanceof Array?this.privGrammars=this.privGrammars.concat(a):this.privGrammars.push(a)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;let a={};if(a.referenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){let b=[];this.privPhrases.forEach(a=>{b.push({text:a})}),a.groups=[{type:d.GroupType.Generic,items:b}]}return a}}b.DynamicGrammarBuilder=e},62805:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Diagnostics=void 0;let d=c(9403),e=c(94705);class f{static SetLoggingLevel(a){this.privListener=new d.ConsoleLoggingListener(a),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(a){if("undefined"==typeof window)this.privListener&&(this.privListener.logPath=a);else throw Error("File system logging not available in browser.")}static set onLogOutput(a){this.privListener&&(this.privListener.logCallback=a)}}b.Diagnostics=f,f.privListener=void 0},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63169:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranscriptionResult=b.MeetingTranscriber=b.MeetingTranscriptionCanceledEventArgs=b.MeetingImpl=b.Meeting=b.ParticipantChangedReason=b.User=b.Participant=b.ConversationTranscriber=b.ConversationTranslator=b.ConversationTranslationResult=b.ConversationTranslationEventArgs=b.ConversationTranslationCanceledEventArgs=b.ConversationParticipantsChangedEventArgs=b.ConversationExpirationEventArgs=b.ConversationCommon=b.ConversationImpl=b.Conversation=void 0;var d=c(31071);Object.defineProperty(b,"Conversation",{enumerable:!0,get:function(){return d.Conversation}}),Object.defineProperty(b,"ConversationImpl",{enumerable:!0,get:function(){return d.ConversationImpl}});var e=c(26418);Object.defineProperty(b,"ConversationCommon",{enumerable:!0,get:function(){return e.ConversationCommon}});var f=c(60233);Object.defineProperty(b,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return f.ConversationExpirationEventArgs}});var g=c(55028);Object.defineProperty(b,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return g.ConversationParticipantsChangedEventArgs}});var h=c(28130);Object.defineProperty(b,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return h.ConversationTranslationCanceledEventArgs}});var i=c(18479);Object.defineProperty(b,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return i.ConversationTranslationEventArgs}});var j=c(79793);Object.defineProperty(b,"ConversationTranslationResult",{enumerable:!0,get:function(){return j.ConversationTranslationResult}});var k=c(23253);Object.defineProperty(b,"ConversationTranslator",{enumerable:!0,get:function(){return k.ConversationTranslator}});var l=c(85748);Object.defineProperty(b,"ConversationTranscriber",{enumerable:!0,get:function(){return l.ConversationTranscriber}});var m=c(38128);Object.defineProperty(b,"Participant",{enumerable:!0,get:function(){return m.Participant}}),Object.defineProperty(b,"User",{enumerable:!0,get:function(){return m.User}});var n=c(23127);Object.defineProperty(b,"ParticipantChangedReason",{enumerable:!0,get:function(){return n.ParticipantChangedReason}});var o=c(27575);Object.defineProperty(b,"Meeting",{enumerable:!0,get:function(){return o.Meeting}}),Object.defineProperty(b,"MeetingImpl",{enumerable:!0,get:function(){return o.MeetingImpl}});var p=c(87659);Object.defineProperty(b,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return p.MeetingTranscriptionCanceledEventArgs}});var q=c(3740);Object.defineProperty(b,"MeetingTranscriber",{enumerable:!0,get:function(){return q.MeetingTranscriber}});var r=c(16766);Object.defineProperty(b,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return r.ConversationTranscriptionResult}})},63239:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationReceivedTranslationEventArgs=b.ParticipantsListEventArgs=b.ParticipantAttributeEventArgs=b.ParticipantEventArgs=b.LockRoomEventArgs=b.MuteAllEventArgs=void 0;let d=c(41686);class e extends d.SessionEventArgs{constructor(a,b){super(b),this.privIsMuted=a}get isMuted(){return this.privIsMuted}}b.MuteAllEventArgs=e;class f extends d.SessionEventArgs{constructor(a,b){super(b),this.privIsLocked=a}get isMuted(){return this.privIsLocked}}b.LockRoomEventArgs=f;class g extends d.SessionEventArgs{constructor(a,b){super(b),this.privParticipant=a}get participant(){return this.privParticipant}}b.ParticipantEventArgs=g;class h extends d.SessionEventArgs{constructor(a,b,c,d){super(d),this.privKey=b,this.privValue=c,this.privParticipantId=a}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}b.ParticipantAttributeEventArgs=h;class i extends d.SessionEventArgs{constructor(a,b,c,d,e,f,g,h,i){super(i),this.privRoomId=a,this.privSessionToken=b,this.privTranslateTo=c,this.privProfanityFilter=d,this.privRoomProfanityFilter=e,this.privIsRoomLocked=f,this.privIsRoomLocked=g,this.privParticipants=h}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}b.ParticipantsListEventArgs=i;class j{constructor(a,b,c){this.privPayload=b,this.privCommand=a,this.privSessionId=c}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}b.ConversationReceivedTranslationEventArgs=j},63259:(a,b,c)=>{"use strict";let d=c(55511),e=c(52887).from,f=c(8152);f.from=(a,b)=>a instanceof DataView?a:a instanceof ArrayBuffer?new DataView(a):("string"==typeof a&&(a=Buffer.from(a,b)),Buffer.isBuffer(a))?new DataView(a.buffer,a.byteOffset,a.byteLength):e(a,b),f.toString=(a,b)=>(a=f(a),Buffer.from(a.buffer,a.byteOffset,a.byteLength).toString(b)),f.native=(a,b)=>Buffer.isBuffer(a)?a:(a=f(a,b),Buffer.from(a.buffer,a.byteOffset,a.byteLength)),f._randomFill=d.randomFillSync,a.exports=f},63948:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AvatarSynthesisAdapter=void 0;let d=c(41686),e=c(35961);class f extends e.SynthesisAdapterBase{constructor(a,b,c,d,e){super(a,b,c,void 0),this.privAvatarSynthesizer=d,this.privSynthesizer=d,this.privAvatarConfig=e}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(d.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(a){if(this.privAvatarSynthesizer.avatarEventReceived){let b=new d.AvatarEventArgs(a.Data.Offset,a.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,b)}catch(a){}}}}b.AvatarSynthesisAdapter=f},64379:(a,b)=>{"use strict";var c,d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.TentativePhraseResultsOption=b.OutputFormat=b.PhraseExtension=b.PhraseOption=void 0,function(a){a.WordTimings="WordTimings",a.SNR="SNR",a.Pronunciation="Pronunciation",a.WordPronunciation="WordPronunciation",a.WordConfidence="WordConfidence",a.Words="Words",a.Sentiment="Sentiment",a.PronunciationAssessment="PronunciationAssessment",a.ContentAssessment="ContentAssessment",a.PhraseAMScore="PhraseAMScore",a.PhraseLMScore="PhraseLMScore",a.WordAMScore="WordAMScore",a.WordLMScore="WordLMScore",a.RuleTree="RuleTree",a.NBestTimings="NBestTimings",a.DecoderDiagnostics="DecoderDiagnostics",a.DisplayWordTimings="DisplayWordTimings",a.DisplayWords="DisplayWords"}(c=b.PhraseOption||(b.PhraseOption={})),function(a){a.Graph="Graph",a.Corrections="Corrections",a.Sentiment="Sentiment"}(d=b.PhraseExtension||(b.PhraseExtension={})),function(a){a.Simple="Simple",a.Detailed="Detailed"}(e=b.OutputFormat||(b.OutputFormat={})),function(a){a.None="None",a.Always="Always"}(f=b.TentativePhraseResultsOption||(b.TentativePhraseResultsOption={}))},64411:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.AvatarEventArgs=b.AvatarEventTypes=void 0,function(a){a.SwitchedToSpeaking="SwitchedToSpeaking",a.SwitchedToIdle="SwitchedToIdle",a.SessionClosed="SessionClosed"}(c=b.AvatarEventTypes||(b.AvatarEventTypes={}));class d{constructor(a,b){this.privOffset=a,this.privDescription=b}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}b.AvatarEventArgs=d},64842:(a,b,c)=>{"use strict";c.d(b,{default:()=>a4});var d=c(60687),e=c(43210),f=c.n(e),g=c(4529),h=c(49691),i=c(75535),j=c(83503);let k={primary:"#3c2e26",primaryDark:"#2c1810",primaryLight:"#5d4037",accent:"#d4a574",success:"#4e7c59",warning:"#c17817",error:"#a8423f",background:"#faf8f6",surface:"#ffffff",text:{primary:"#2c1810",secondary:"#3c2e26",muted:"#8d6e63",inverse:"#ffffff"},border:{light:"#e8ddd4",medium:"#d7c7b8",dark:"#a69080"},shadow:{sm:"0 1px 3px rgba(44, 24, 16, 0.1), 0 1px 2px rgba(44, 24, 16, 0.06)",md:"0 4px 6px rgba(44, 24, 16, 0.07), 0 2px 4px rgba(44, 24, 16, 0.06)",lg:"0 10px 15px rgba(44, 24, 16, 0.1), 0 4px 6px rgba(44, 24, 16, 0.05)",xl:"0 20px 25px rgba(44, 24, 16, 0.1), 0 10px 10px rgba(44, 24, 16, 0.04)"}},l=g.Ay.div.withConfig({componentId:"sc-960caaf-0"})(['width:100%;padding:2rem 0rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;display:flex;flex-direction:column;align-items:center;gap:2rem;max-width:960px;margin:0 auto;min-height:100vh;']);g.Ay.h1.withConfig({componentId:"sc-960caaf-1"})(["color:",";width:100%;text-align:center;font-size:2.5rem;font-weight:700;margin:0;background:linear-gradient( 135deg,",","," );-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-0.02em;@media (max-width:768px){font-size:2rem;}"],k.text.primary,k.primary,k.primaryLight);let m=g.Ay.button.withConfig({componentId:"sc-960caaf-2"})(["display:inline-flex;align-items:center;justify-content:center;padding:0.75rem 1.5rem;font-size:0.875rem;font-weight:600;background:linear-gradient(135deg,",",",");color:",";border:none;border-radius:12px;cursor:pointer;transition:all 0.2s cubic-bezier(0.4,0,0.2,1);box-shadow:",';position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient( 135deg,',","," );opacity:0;transition:opacity 0.2s ease;}&:hover:not(:disabled){transform:translateY(-2px);box-shadow:",";&::before{opacity:1;}}&:active:not(:disabled){transform:translateY(0);box-shadow:",";}&:disabled{background:",";color:",";cursor:not-allowed;transform:none;box-shadow:none;&::before{display:none;}}span{position:relative;z-index:1;}"],k.primary,k.primaryDark,k.text.inverse,k.shadow.sm,k.primaryLight,k.accent,k.shadow.lg,k.shadow.md,k.border.medium,k.text.muted),n=g.Ay.div.withConfig({componentId:"sc-960caaf-3"})(["margin:1.5rem 0;padding:1.5rem;border-radius:16px;line-height:2;font-size:1.1rem;transition:transform 0.2s ease,box-shadow 0.2s ease;&:hover{transform:translateY(-2px);}"]),o=g.Ay.div.withConfig({componentId:"sc-960caaf-4"})(["display:inline-flex;flex-direction:column;align-items:center;margin:0 1px;vertical-align:top;position:relative;"]),p=g.Ay.span.withConfig({componentId:"sc-960caaf-5"})(["font-size:0.7em;color:",";margin-top:2px;line-height:1;font-weight:500;"],k.text.muted),q=g.Ay.span.withConfig({componentId:"sc-960caaf-6"})(["color:",";font-weight:600;padding:4px 2px;border-radius:0;margin:0 1px;transition:all 0.2s ease;text-decoration:",";font-style:",";opacity:",";"," "," &:hover{transform:scale(1.05);}"],a=>{if(a.isOmitted)return k.error;switch(a.color){case"green":return k.success;case"orange":return k.warning;case"red":return k.error;default:return k.text.muted}},a=>a.isOmitted?"line-through":"none",a=>a.isOmitted||a.isInserted?"italic":"normal",a=>a.isOmitted?.85:1,a=>a.hasUnexpectedBreak&&`
    border-bottom: 3px dotted ${k.warning};
    padding-bottom: 1px; 
  `,a=>a.hasMissingBreak&&`
    border-bottom: 3px dashed ${k.primaryLight};
    padding-bottom: 1px;
  `),r=g.Ay.p.withConfig({componentId:"sc-960caaf-7"})(["color:",";width:100%;text-align:center;font-weight:500;padding:1rem;background:","10;border:1px solid ","30;border-radius:12px;margin:1rem 0;box-shadow:",";"],k.error,k.error,k.error,k.shadow.sm),s=g.Ay.div.withConfig({componentId:"sc-960caaf-8"})(["display:inline-block;width:20px;height:20px;border:2px solid ",";border-radius:50%;border-top-color:",";animation:spin 1s ease-in-out infinite;margin-right:0.5rem;@keyframes spin{to{transform:rotate(360deg);}}"],k.border.light,k.primary),t=g.Ay.div.withConfig({componentId:"sc-960caaf-9"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;gap:1rem;.spinner{width:40px;height:40px;border:3px solid ",";border-radius:50%;border-top-color:",";animation:spin 1s ease-in-out infinite;}.text{font-size:1.1rem;color:",";font-weight:500;}@keyframes spin{to{transform:rotate(360deg);}}"],k.border.light,k.primary,k.text.secondary),u=g.Ay.div.withConfig({componentId:"sc-960caaf-10"})(["margin-bottom:2rem;width:100%;aspect-ratio:16 / 9;position:relative;border-radius:20px;overflow:hidden;box-shadow:",";background:linear-gradient(135deg,",",",");border:1px solid ",";transition:transform 0.3s ease,box-shadow 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:",",0 0 0 1px ","20;}iframe{width:100%;height:100%;border:none;border-radius:20px;}"],k.shadow.xl,k.background,k.surface,k.border.light,k.shadow.xl,k.primary),v=g.Ay.div.withConfig({componentId:"sc-960caaf-11"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.75rem 1rem;border-radius:12px;font-size:0.875rem;font-weight:500;margin-top:0.5rem;border:1px solid;",""],a=>{switch(a.type){case"success":return`
          background: ${k.success}10;
          border-color: ${k.success}30;
          color: ${k.success};
        `;case"warning":return`
          background: ${k.warning}10;
          border-color: ${k.warning}30;
          color: ${k.warning};
        `;case"error":return`
          background: ${k.error}10;
          border-color: ${k.error}30;
          color: ${k.error};
        `;default:return`
          background: ${k.primary}10;
          border-color: ${k.primary}30;
          color: ${k.primary};
        `}}),w=g.Ay.div.withConfig({componentId:"sc-960caaf-12"})(["font-size:1.15rem;line-height:1.7;margin-bottom:1rem;color:",";font-weight:400;letter-spacing:0.01em;"],k.text.primary),x=g.Ay.div.withConfig({shouldForwardProp:a=>"isOpen"!==a}).withConfig({componentId:"sc-2f039401-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:",";visibility:",";transition:opacity 0.3s ease,visibility 0.3s ease;"],a=>+!!a.isOpen,a=>a.isOpen?"visible":"hidden"),y=g.Ay.div.withConfig({componentId:"sc-2f039401-1"})(["background:",";border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,0.2);padding:1.8rem;max-width:90%;width:450px;position:relative;transform:scale(1);transition:transform 0.3s ease;border-left:5px solid ",";border:1px solid ",";overflow-y:auto;max-height:90vh;@media (max-width:768px){padding:1.5rem;width:80%;max-height:80vh;}@media (max-width:480px){padding:1.2rem;width:90%;max-height:75vh;}"],k.background,k.accent,k.border.light),z=g.Ay.button.withConfig({componentId:"sc-2f039401-2"})(["position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:",";cursor:pointer;width:2.1rem;height:2.1rem;padding:0;line-height:1;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;@media (max-width:768px){top:0.8rem;right:0.8rem;width:2rem;height:2rem;}&:hover{color:",";background:",";}"],k.text.muted,k.primary,k.border.light),A=g.Ay.div.withConfig({componentId:"sc-2f039401-3"})(["font-weight:bold;color:",";margin-bottom:1rem;font-size:1.5rem;padding-bottom:0.7rem;border-bottom:1px solid ",";"],k.primary,k.border.light),B=g.Ay.div.withConfig({componentId:"sc-2f039401-4"})(["color:",';font-family:"Apple SD Gothic Neo","Noto Sans KR",sans-serif;line-height:1.6;white-space:pre-line;font-size:1rem;'],k.text.secondary),C=g.Ay.div.withConfig({componentId:"sc-2f039401-5"})(["color:",";font-style:italic;padding:1rem 0;display:flex;align-items:center;justify-content:center;min-height:100px;"],k.text.muted),D=g.Ay.div.withConfig({componentId:"sc-2f039401-6"})(["margin-bottom:1.5rem;"]),E=g.Ay.div.withConfig({componentId:"sc-2f039401-7"})(["font-size:1rem;font-weight:600;color:",";margin-bottom:0.5rem;"],k.primary),F=g.Ay.details.withConfig({componentId:"sc-2f039401-8"})(["margin-top:1rem;summary{font-size:0.95rem;font-weight:600;cursor:pointer;list-style:none;margin:0;padding:0;&:hover{color:",";}}ul{padding-left:1.2rem;margin:0.5rem 0;list-style:disc;font-size:0.9rem;color:",";}"],k.primaryDark,k.text.secondary),G=({modalState:a,onClose:b})=>(0,d.jsx)(x,{isOpen:a.isOpen,onClick:b,children:(0,d.jsxs)(y,{onClick:a=>a.stopPropagation(),children:[(0,d.jsx)(z,{onClick:b,children:"\xd7"}),(0,d.jsx)(A,{children:a.word}),!a.isLoading||a.apiData||a.gptDefinition?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(D,{children:a.isLoading&&!a.gptDefinition?(0,d.jsx)(C,{children:"GPT 뜻풀이 검색 중..."}):a.gptDefinition?(0,d.jsx)(B,{children:a.gptDefinition}):(0,d.jsx)(B,{children:"한국어 뜻풀이를 가져오지 못했습니다."})}),a.isLoading&&!a.apiData?(0,d.jsx)(C,{children:"Loading English definitions from API..."}):a.apiData&&Array.isArray(a.apiData)&&a.apiData.length>0?(0,d.jsxs)(F,{children:[(0,d.jsx)("summary",{children:"\uD83D\uDCD6 영어 사전 확인하기"}),a.apiData.map((b,c)=>(0,d.jsxs)("div",{style:{marginTop:"1rem",borderBottom:c<a.apiData.length-1?"1px solid #eee":"none",paddingBottom:c<a.apiData.length-1?"1rem":"0"},children:[b.phonetics&&b.phonetics.filter(a=>a.text).length>0&&(0,d.jsxs)(D,{children:[(0,d.jsx)(E,{style:{fontSize:"0.9rem"},children:"Pronunciation"}),b.phonetics.map((a,b)=>a.text&&(0,d.jsx)("div",{style:{marginBottom:"0.3rem",display:"flex",alignItems:"center"},children:a.audio&&(0,d.jsx)("audio",{controls:!0,src:a.audio,style:{height:"30px",minWidth:"100%"}})},`phonetic-${b}`))]}),b.meanings&&b.meanings.length>0&&(0,d.jsxs)(D,{children:[(0,d.jsx)(E,{style:{fontSize:"0.9rem"},children:"Meanings"}),b.meanings.map((a,b)=>(0,d.jsxs)("div",{style:{marginBottom:"0.8rem"},children:[(0,d.jsx)(B,{style:{fontWeight:"bold",color:k.primaryDark},children:a.partOfSpeech}),a.definitions&&a.definitions.length>0&&(0,d.jsx)("ul",{style:{marginTop:"0.3rem",paddingLeft:"0px",listStyleType:"disc"},children:a.definitions.map((a,b)=>(0,d.jsxs)("li",{style:{marginBottom:"0.4rem"},children:[a.definition,a.example&&(0,d.jsxs)("div",{style:{fontStyle:"italic",color:k.text.muted,fontSize:"0.9em",marginLeft:"0px",overflowWrap:"break-word",wordBreak:"break-word"},children:['e.g. "',a.example,'"']}),a.synonyms&&a.synonyms.length>0&&(0,d.jsxs)("div",{style:{fontSize:"0.85em",color:k.text.secondary,marginTop:"0.2rem",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,d.jsx)("strong",{children:"Synonyms:"})," ",a.synonyms.join(", ")]}),a.antonyms&&a.antonyms.length>0&&(0,d.jsxs)("div",{style:{fontSize:"0.85em",color:k.text.secondary,marginTop:"0.2rem",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,d.jsx)("strong",{children:"Antonyms:"})," ",a.antonyms.join(", ")]})]},`def-${b}`))}),a.synonyms&&a.synonyms.length>0&&(0,d.jsxs)("div",{style:{fontSize:"0.85em",color:k.text.secondary,marginTop:"0.3rem",paddingLeft:"0px",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,d.jsx)("strong",{children:"Synonyms:"})," ",a.synonyms.join(", ")]}),a.antonyms&&a.antonyms.length>0&&(0,d.jsxs)("div",{style:{fontSize:"0.85em",color:k.text.secondary,marginTop:"0.3rem",paddingLeft:"0px",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,d.jsx)("strong",{children:"Antonyms:"})," ",a.antonyms.join(", ")]})]},`meaning-${b}`))]}),b.sourceUrls&&b.sourceUrls.length>0&&(0,d.jsx)(D,{children:(0,d.jsx)(E,{style:{fontSize:"0.9rem"},children:"Source: Wikitionary"})})]},`entry-${c}`))]}):a.apiData&&"No Definitions Found"===a.apiData.title?(0,d.jsxs)(C,{children:['No English definitions found for "',a.word,'" via API.']}):!a.isLoading&&(0,d.jsxs)(C,{children:['Could not load English definitions for "',a.word,'".']})]}):(0,d.jsx)(C,{children:"뜻풀이 및 영어 정의 검색 중..."})]})}),H=a=>void 0===a?"gray":a>=80?"green":a>=60?"orange":"red",I=a=>{try{let b=new URL(a),c=null;if("youtu.be"===b.hostname)c=b.pathname.substring(1);else if("www.youtube.com"===b.hostname||"youtube.com"===b.hostname)if("/embed"===b.pathname){let a=b.pathname.split("/").pop();c=void 0!==a?a:null}else"/watch"===b.pathname&&(c=b.searchParams.get("v"));if(c){let a=new URL(`https://www.youtube.com/embed/${c}`);return a.searchParams.set("enablejsapi","1"),b.searchParams.forEach((b,c)=>{let d=c.toLowerCase();["v","feature","si","enablejsapi"].includes(d)||a.searchParams.set(c,b)}),a.toString()}return console.warn("Could not extract videoId from URL:",a),null}catch(a){return console.error("Error parsing YouTube URL for embed:",a),null}},J=({sentence:a,index:b})=>{console.log("[RenderDebug] Original Sentence Text:",a.text);let c=a.text.trim().split(/\s+/),e=a.assessmentResult?.detailResult?.Words||[];if(!a.isAssessmentFinalized)return(0,d.jsxs)(n,{children:[(0,d.jsx)(w,{children:a.text}),a.isAssessing&&(0,d.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:k.text.muted},children:(0,d.jsxs)("i",{children:['Recording... Recognized so far: "',a.recognizedText||"",'"']})}),!a.isAssessing&&a.recognizedText&&(0,d.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:k.text.muted},children:(0,d.jsxs)("i",{children:['Processing... Recognized: "',a.recognizedText||"",'"']})})]});if(!a.assessmentResult)return(0,d.jsxs)(n,{children:[(0,d.jsx)(w,{children:a.text}),(0,d.jsx)("p",{style:{color:k.error,fontSize:"0.9rem"},children:"Assessment data is missing after finalization."}),a.audioUrl&&(0,d.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,d.jsx)("audio",{id:`sentence-audio-${b}`,controls:!0,src:a.audioUrl,style:{width:"100%"}})})]});let g=[],h=0,i=0,j=c.length,l=a=>a.toLowerCase().replace(/[.,!?;:'"()[\]{}]|…/g,"");for(;h<e.length&&e[h]?.PronunciationAssessment?.ErrorType==="Insertion";){let a=e[h],b=a.PronunciationAssessment?.AccuracyScore,c=`Word: ${a.Word}
Error: Insertion
Accuracy: ${void 0!==b?b.toFixed(0)+"%":"N/A"}`;g.push((0,d.jsxs)(f().Fragment,{children:[(0,d.jsx)(q,{color:"gray",title:"Marker for inserted text",style:{fontStyle:"italic",marginRight:"0.2em"},isInserted:!0,children:"[\xa0\xa0]"}),(0,d.jsx)(o,{children:(0,d.jsx)(q,{color:H(b),isOmitted:!1,isInserted:!0,title:c,children:a.Word})},`insertion-text-score-prefix-${h}`)," "]},`insertion-prefix-${h}`)),h++}c.forEach((a,b)=>{let c=null,j=!1,k=l(a);if(console.log(`[RenderDebug] Original[${b}]: '${a}' (Normalized: '${k}')`),h<e.length){let a=e[h],b=l(a.Word),d=a.PronunciationAssessment?.ErrorType;console.log(`[RenderDebug] Azure[${h}]: '${a.Word}' (Normalized: '${b}'), Type: ${d}`);let f=!1;"Insertion"!==d&&k===b?(f=!0,c=a,j=!0):"Omission"===d&&k===b&&(f=!0,c=a,j=!0),console.log(`[RenderDebug] Comparison: normalizedOriginal('${k}') === normalizedAzure('${b}') ==> ${f}`)}if(c){console.log(`[RenderDebug] Matched: '${a}' with Azure's '${c.Word}'. ErrorType: ${c.PronunciationAssessment?.ErrorType}`);let e=c.PronunciationAssessment,f=e?.AccuracyScore,h=e?.ErrorType,j="Omission"===h,k="UnexpectedBreak"===h,l="MissingBreak"===h,m=c.Word;j&&(m=`[${c.Word}]`);let n=`Word: ${c.Word}
Error: ${h||"None"}
Accuracy: ${void 0!==f?f.toFixed(0)+"%":"N/A"}`;!j&&i++,g.push((0,d.jsxs)(o,{children:[(0,d.jsx)(q,{color:H(f),isOmitted:j,isInserted:!1,hasUnexpectedBreak:k,hasMissingBreak:l,title:n,children:m}),!j&&(0,d.jsx)(p,{color:H(f),children:void 0!==f?Math.round(f):"?"})]},`word-score-${b}`))}else{console.log(`[RenderDebug] Omission: '${a}' was not found in Azure words or was implicitly omitted.`);let c=`Word: ${a}
Error: Omission (implicit)
Accuracy: N/A`;g.push((0,d.jsx)(o,{children:(0,d.jsxs)(q,{color:"gray",isOmitted:!0,isInserted:!1,title:c,children:["[",a,"]"]})},`omission-${b}`))}for(j&&h++;h<e.length&&e[h]?.PronunciationAssessment?.ErrorType==="Insertion";){let a=e[h],b=a.PronunciationAssessment?.AccuracyScore,c=`Word: ${a.Word}
Error: Insertion
Accuracy: ${void 0!==b?b.toFixed(0)+"%":"N/A"}`;g.push((0,d.jsxs)(f().Fragment,{children:[" ",(0,d.jsx)(q,{color:"gray",title:"Marker for inserted text",style:{fontStyle:"italic",marginRight:"0.2em"},isInserted:!0,children:"[\xa0\xa0]"}),(0,d.jsx)(o,{children:(0,d.jsx)(q,{color:H(b),isOmitted:!1,isInserted:!0,title:c,children:a.Word})},`insertion-text-score-${h}`)]},`insertion-${h}`)),h++}g.push((0,d.jsx)("span",{children:" "},`space-${b}`))});let m=Math.round(i/j*100);return(0,d.jsxs)(n,{children:[(0,d.jsx)("div",{style:{marginBottom:"1rem",fontSize:"1.05rem",lineHeight:"1.7"},children:g}),(0,d.jsxs)("div",{style:{marginTop:"0.75rem",fontSize:"0.875rem",color:k.text.muted},children:["Completeness: ",m,"% (",i,"/",j," words spoken)"]}),a.audioUrl&&(0,d.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,d.jsx)("audio",{id:`sentence-audio-${b}`,controls:!0,src:a.audioUrl,style:{width:"100%"}})})]})};var K=c(73104),L=c.n(K);function M(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function N(a){if(Array.isArray(a))return a}function O(a,b,c){return(b=X(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function P(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f,g,h=[],i=!0,j=!1;try{if(f=(c=c.call(a)).next,0===b){if(Object(c)!==c)return;i=!1}else for(;!(i=(d=f.call(c)).done)&&(h.push(d.value),h.length!==b);i=!0);}catch(a){j=!0,e=a}finally{try{if(!i&&null!=c.return&&(g=c.return(),Object(g)!==g))return}finally{if(j)throw e}}return h}}function Q(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function S(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?R(Object(c),!0).forEach(function(b){O(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):R(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function T(a,b){if(null==a)return{};var c,d,e=U(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],b.includes(c)||({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function U(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(b.includes(d))continue;c[d]=a[d]}return c}function V(a,b){return N(a)||P(a,b)||Y(a,b)||Q()}function W(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}function X(a){var b=W(a,"string");return"symbol"==typeof b?b:b+""}function Y(a,b){if(a){if("string"==typeof a)return M(a,b);var c=({}).toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?M(a,b):void 0}}var Z=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],$=function(a,b){var c=a.animationData,d=a.loop,g=a.autoplay,h=a.initialSegment,i=a.onComplete,j=a.onLoopComplete,k=a.onEnterFrame,l=a.onSegmentStart,m=a.onConfigReady,n=a.onDataReady,o=a.onDataFailed,p=a.onLoadedImages,q=a.onDOMLoaded,r=a.onDestroy;a.lottieRef,a.renderer,a.name,a.assetsPath,a.rendererSettings;var s=T(a,Z),t=V((0,e.useState)(!1),2),u=t[0],v=t[1],w=(0,e.useRef)(),x=(0,e.useRef)(null),y=function(){var a;null==(a=w.current)||a.play()},z=function(){var a;null==(a=w.current)||a.stop()},A=function(){var a;null==(a=w.current)||a.pause()},B=function(a){var b;null==(b=w.current)||b.setSpeed(a)},C=function(a,b){var c;null==(c=w.current)||c.goToAndPlay(a,b)},D=function(a,b){var c;null==(c=w.current)||c.goToAndStop(a,b)},E=function(a){var b;null==(b=w.current)||b.setDirection(a)},F=function(a,b){var c;null==(c=w.current)||c.playSegments(a,b)},G=function(a){var b;null==(b=w.current)||b.setSubframe(a)},H=function(a){var b;return null==(b=w.current)?void 0:b.getDuration(a)},I=function(){var a;null==(a=w.current)||a.destroy(),w.current=void 0},J=function(){var b,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(x.current){null==(b=w.current)||b.destroy();var d=S(S(S({},a),c),{},{container:x.current});return w.current=L().loadAnimation(d),v(!!w.current),function(){var a;null==(a=w.current)||a.destroy(),w.current=void 0}}};return(0,e.useEffect)(function(){var a=J();return function(){return null==a?void 0:a()}},[c,d]),(0,e.useEffect)(function(){w.current&&(w.current.autoplay=!!g)},[g]),(0,e.useEffect)(function(){if(w.current){if(!h)return void w.current.resetSegments(!0);Array.isArray(h)&&h.length&&((w.current.currentRawFrame<h[0]||w.current.currentRawFrame>h[1])&&(w.current.currentRawFrame=h[0]),w.current.setSegment(h[0],h[1]))}},[h]),(0,e.useEffect)(function(){var a=[{name:"complete",handler:i},{name:"loopComplete",handler:j},{name:"enterFrame",handler:k},{name:"segmentStart",handler:l},{name:"config_ready",handler:m},{name:"data_ready",handler:n},{name:"data_failed",handler:o},{name:"loaded_images",handler:p},{name:"DOMLoaded",handler:q},{name:"destroy",handler:r}].filter(function(a){return null!=a.handler});if(a.length){var b=a.map(function(a){var b;return null==(b=w.current)||b.addEventListener(a.name,a.handler),function(){var b;null==(b=w.current)||b.removeEventListener(a.name,a.handler)}});return function(){b.forEach(function(a){return a()})}}},[i,j,k,l,m,n,o,p,q,r]),{View:f().createElement("div",S({style:b,ref:x},s)),play:y,stop:z,pause:A,setSpeed:B,goToAndStop:D,goToAndPlay:C,setDirection:E,playSegments:F,setSubframe:G,getDuration:H,destroy:I,animationContainerRef:x,animationLoaded:u,animationItem:w.current}};function _(a){var b=a.getBoundingClientRect(),c=b.top,d=b.height;return(window.innerHeight-c)/(window.innerHeight+d)}function aa(a,b,c){var d=a.getBoundingClientRect(),e=d.top;return{x:(b-d.left)/d.width,y:(c-e)/d.height}}var ab=function(a){var b=a.wrapperRef,c=a.animationItem,d=a.mode,f=a.actions;(0,e.useEffect)(function(){var a=b.current;if(a&&c&&f.length){c.stop();var e=function(){var b=null,d=function(){var d=_(a),e=f.find(function(a){var b=a.visibility;return b&&d>=b[0]&&d<=b[1]});if(e){if("seek"===e.type&&e.visibility&&2===e.frames.length){var g=e.frames[0]+Math.ceil((d-e.visibility[0])/(e.visibility[1]-e.visibility[0])*e.frames[1]);c.goToAndStop(g-c.firstFrame-1,!0)}"loop"===e.type&&(null===b||b!==e.frames?(c.playSegments(e.frames,!0),b=e.frames):c.isPaused&&(c.playSegments(e.frames,!0),b=e.frames)),"play"===e.type&&c.isPaused&&(c.resetSegments(!0),c.play()),"stop"===e.type&&c.goToAndStop(e.frames[0]-c.firstFrame-1,!0)}};return document.addEventListener("scroll",d),function(){document.removeEventListener("scroll",d)}},g=function(){var b=function(b,d){var e=b,g=d;if(-1!==e&&-1!==g){var h=aa(a,e,g);e=h.x,g=h.y}var i=f.find(function(a){var b=a.position;return b&&Array.isArray(b.x)&&Array.isArray(b.y)?e>=b.x[0]&&e<=b.x[1]&&g>=b.y[0]&&g<=b.y[1]:!(!b||Number.isNaN(b.x)||Number.isNaN(b.y))&&e===b.x&&g===b.y});if(i){if("seek"===i.type&&i.position&&Array.isArray(i.position.x)&&Array.isArray(i.position.y)&&2===i.frames.length){var j=(e-i.position.x[0])/(i.position.x[1]-i.position.x[0]),k=(g-i.position.y[0])/(i.position.y[1]-i.position.y[0]);c.playSegments(i.frames,!0),c.goToAndStop(Math.ceil((j+k)/2*(i.frames[1]-i.frames[0])),!0)}"loop"===i.type&&c.playSegments(i.frames,!0),"play"===i.type&&(c.isPaused&&c.resetSegments(!1),c.playSegments(i.frames)),"stop"===i.type&&c.goToAndStop(i.frames[0],!0)}},d=function(a){b(a.clientX,a.clientY)},e=function(){b(-1,-1)};return a.addEventListener("mousemove",d),a.addEventListener("mouseout",e),function(){a.removeEventListener("mousemove",d),a.removeEventListener("mouseout",e)}};switch(d){case"scroll":return e();case"cursor":return g()}}},[d,c])},ac=function(a){var b=a.actions,c=a.mode,d=a.lottieObj,e=d.animationItem,f=d.View;return ab({actions:b,animationItem:e,mode:c,wrapperRef:d.animationContainerRef}),f},ad=["style","interactivity"],ae=function(a){var b,c,d,f=a.style,g=a.interactivity,h=$(T(a,ad),f),i=h.View,j=h.play,k=h.stop,l=h.pause,m=h.setSpeed,n=h.goToAndStop,o=h.goToAndPlay,p=h.setDirection,q=h.playSegments,r=h.setSubframe,s=h.getDuration,t=h.destroy,u=h.animationContainerRef,v=h.animationLoaded,w=h.animationItem;return(0,e.useEffect)(function(){a.lottieRef&&(a.lottieRef.current={play:j,stop:k,pause:l,setSpeed:m,goToAndPlay:o,goToAndStop:n,setDirection:p,playSegments:q,setSubframe:r,getDuration:s,destroy:t,animationContainerRef:u,animationLoaded:v,animationItem:w})},[null==(b=a.lottieRef)?void 0:b.current]),ac({lottieObj:{View:i,play:j,stop:k,pause:l,setSpeed:m,goToAndStop:n,goToAndPlay:o,setDirection:p,playSegments:q,setSubframe:r,getDuration:s,destroy:t,animationContainerRef:u,animationLoaded:v,animationItem:w},actions:null!=(c=null==g?void 0:g.actions)?c:[],mode:null!=(d=null==g?void 0:g.mode)?d:"scroll"})};let af=g.Ay.div.withConfig({shouldForwardProp:a=>"isOpen"!==a}).withConfig({componentId:"sc-ca033323-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:",";visibility:",";transition:opacity 0.3s ease,visibility 0.3s ease;"],a=>+!!a.isOpen,a=>a.isOpen?"visible":"hidden"),ag=g.Ay.div.withConfig({componentId:"sc-ca033323-1"})(["background:linear-gradient( 135deg,"," 0%,"," 100% );border-radius:20px;padding:2.5rem;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:",";border:1px solid ",";position:relative;transform:scale(0.9);transition:transform 0.3s ease;",'[data-open="true"] &{transform:scale(1);}'],k.surface,k.background,k.shadow.xl,k.border.light,af),ah=g.Ay.div.withConfig({componentId:"sc-ca033323-2"})(["text-align:center;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid ",";"],k.border.light),ai=g.Ay.h2.withConfig({componentId:"sc-ca033323-3"})(["font-size:1.8rem;font-weight:700;background:linear-gradient(135deg,",",",");-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;"],k.primary,k.accent),aj=g.Ay.p.withConfig({componentId:"sc-ca033323-4"})(["font-size:1.1rem;color:",";margin:0;line-height:1.6;"],k.text.secondary),ak=g.Ay.div.withConfig({componentId:"sc-ca033323-5"})(["display:flex;flex-direction:column;gap:1rem;margin-bottom:2rem;"]),al=g.Ay.button.withConfig({componentId:"sc-ca033323-6"})(["display:flex;align-items:center;justify-content:center;padding:1.5rem 2rem;font-size:1.1rem;font-weight:600;border-radius:16px;border:2px solid;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;"," &:active{transform:translateY(0);}span{position:relative;z-index:1;}"],a=>"primary"===a.variant?`
        background: linear-gradient(135deg, ${k.primary}, ${k.primaryDark});
        color: ${k.text.inverse};
        border-color: ${k.primary};
        
        &::before {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: linear-gradient(135deg, ${k.primaryLight}, ${k.accent});
          opacity: 0;
          transition: opacity 0.3s ease;
        }
        
        &:hover {
          transform: translateY(-2px);
          box-shadow: ${k.shadow.lg};
          
          &::before {
            opacity: 1;
          }
        }
      `:`
        background: ${k.surface};
        color: ${k.text.primary};
        border-color: ${k.border.medium};
        
        &:hover {
          background: ${k.background};
          border-color: ${k.primary};
          transform: translateY(-2px);
          box-shadow: ${k.shadow.md};
        }
      `),am=g.Ay.button.withConfig({componentId:"sc-ca033323-7"})(["position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:",";cursor:pointer;transition:color 0.2s ease;&:hover{color:",";}"],k.text.muted,k.text.primary),an=({isOpen:a,onClose:b,onAIChat:c,onFinish:e})=>(0,d.jsx)(af,{isOpen:a,"data-open":a,onClick:b,children:(0,d.jsxs)(ag,{onClick:a=>a.stopPropagation(),children:[(0,d.jsx)(am,{onClick:b,children:"✕"}),(0,d.jsxs)(ah,{children:[(0,d.jsx)(ai,{children:"\uD83C\uDF89 학습 완료!"}),(0,d.jsxs)(aj,{children:["오늘 쉐도잉 학습을 완료하셨습니다.",(0,d.jsx)("br",{}),"다음 중 어떻게 마무리하고 싶으세요?"]})]}),(0,d.jsxs)(ak,{children:[(0,d.jsx)(al,{variant:"primary",onClick:c,children:(0,d.jsx)("span",{children:"\uD83D\uDCAC 오늘 학습한 내용에 대해 AI와 이야기하기"})}),(0,d.jsx)(al,{variant:"secondary",onClick:e,children:(0,d.jsx)("span",{children:"✅ 그냥 끝내기"})})]})]})}),ao=(0,g.i7)(["0%,100%{transform:translateY(0px);}50%{transform:translateY(-10px);}"]),ap=(0,g.i7)(["0%,100%{opacity:1;}50%{opacity:0.7;}"]),aq=(0,g.i7)(["0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}"]),ar=g.Ay.div.withConfig({componentId:"sc-f26742f6-0"})(["max-width:900px;margin:0 auto;padding:2rem;background:linear-gradient( 135deg,"," 0%,"," 50%,"," 100% );border-radius:24px;box-shadow:",",0 0 40px rgba(60,46,38,0.1),inset 0 1px 0 rgba(255,255,255,0.1);border:1px solid ",';position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient( 90deg,',",",","," );background-size:200% 100%;animation:"," 3s ease infinite;}"],k.surface,k.background,k.surface,k.shadow.xl,k.border.light,k.primary,k.accent,k.primary,aq),as=g.Ay.div.withConfig({componentId:"sc-f26742f6-1"})(["position:relative;width:120px;height:120px;pointer-events:none;z-index:5;margin:0 auto 1rem auto;"]),at=g.Ay.div.withConfig({componentId:"sc-f26742f6-2"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-bottom:3rem;padding-bottom:2rem;border-bottom:2px solid ",";position:relative;"],k.border.light),au=g.Ay.h1.withConfig({componentId:"sc-f26742f6-3"})(["font-size:2.8rem;font-weight:800;background:linear-gradient( 135deg,"," 0%,"," 30%,"," 60%,"," 100% );background-size:300% 300%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;animation:"," 4s ease infinite;letter-spacing:-0.02em;"],k.primary,k.accent,k.primaryLight,k.primary,aq),av=g.Ay.p.withConfig({componentId:"sc-f26742f6-4"})(["font-size:1.5rem;color:",";margin:20px 0;font-weight:500;"],k.text.muted),aw=g.Ay.div.withConfig({componentId:"sc-f26742f6-5"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:3rem;"]),ax=g.Ay.div.withConfig({componentId:"sc-f26742f6-6"})(["background:",";border:2px solid ",";border-radius:20px;padding:2rem 1.5rem;text-align:center;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;animation:",' 3s ease-in-out infinite;&::before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:',";transform:rotate(-45deg);transition:all 0.6s ease;opacity:0;}&:hover{transform:translateY(-8px) scale(1.02);box-shadow:",",0 20px 40px rgba(60,46,38,0.15);border-color:",";&::before{opacity:1;animation:"," 2s linear infinite;}}&:nth-child(2){animation-delay:0.2s;}&:nth-child(3){animation-delay:0.4s;}&:nth-child(4){animation-delay:0.6s;}"],a=>a.highlight?`linear-gradient(135deg, 
          ${k.primary}15 0%, 
          ${k.accent}10 50%, 
          ${k.primary}15 100%)`:`linear-gradient(135deg, 
          ${k.surface} 0%, 
          ${k.background} 100%)`,a=>a.highlight?k.primary:k.border.light,ao,a=>a.highlight?`linear-gradient(45deg, transparent, ${k.primary}20, transparent)`:"none",k.shadow.xl,k.primary,aq),ay=g.Ay.div.withConfig({componentId:"sc-f26742f6-7"})(["font-size:3rem;font-weight:800;background:linear-gradient(135deg,",",",");-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;position:relative;z-index:2;"],k.primary,k.accent),az=g.Ay.div.withConfig({componentId:"sc-f26742f6-8"})(["font-size:0.95rem;color:",";font-weight:600;text-transform:uppercase;letter-spacing:1px;position:relative;z-index:2;"],k.text.muted),aA=g.Ay.div.withConfig({componentId:"sc-f26742f6-9"})(["margin-bottom:3rem;padding:1.5rem;border-radius:16px;background:linear-gradient( 135deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 100% );backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);"]),aB=g.Ay.h2.withConfig({componentId:"sc-f26742f6-10"})(["font-size:1.6rem;font-weight:700;color:",';margin-bottom:1.5rem;display:flex;align-items:center;gap:0.75rem;&::before{content:"";width:6px;height:32px;background:linear-gradient(180deg,',",",");border-radius:3px;box-shadow:0 2px 8px rgba(60,46,38,0.3);}"],k.text.primary,k.primary,k.accent),aC=g.Ay.div.withConfig({componentId:"sc-f26742f6-11"})(["width:100%;height:16px;background:linear-gradient( 90deg,",",",' );border-radius:8px;overflow:hidden;position:relative;box-shadow:inset 0 2px 4px rgba(0,0,0,0.1);&::after{content:"";position:absolute;top:0;left:0;height:100%;width:',"%;background:",';border-radius:8px;transition:width 0.8s cubic-bezier(0.4,0,0.2,1);position:relative;&::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient( 90deg,transparent,rgba(255,255,255,0.3),transparent );animation:'," 2s ease infinite;}}"],k.border.light,k.border.medium,a=>a.percentage,a=>a.color?a.color:a.percentage>=80?`linear-gradient(90deg, ${k.success}, #6fd46f)`:a.percentage>=60?`linear-gradient(90deg, ${k.warning}, #f4c430)`:`linear-gradient(90deg, ${k.error}, #ff6b6b)`,aq),aD=g.Ay.div.withConfig({componentId:"sc-f26742f6-12"})(["background:linear-gradient( 135deg,"," 0%,"," 100% );border:1px solid ",';border-radius:16px;padding:2rem;margin-bottom:1rem;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient( 90deg,transparent,rgba(60,46,38,0.05),transparent );transition:left 0.6s ease;}&:hover{transform:translateY(-4px);box-shadow:',";border-color:","50;&::before{left:100%;}}"],k.surface,k.background,k.border.light,k.shadow.lg,k.primary),aE=g.Ay.h4.withConfig({componentId:"sc-f26742f6-13"})(["font-size:1.2rem;font-weight:700;background:linear-gradient( 135deg,",","," );-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;"],k.text.primary,k.primary),aF=g.Ay.p.withConfig({componentId:"sc-f26742f6-14"})(["color:",";line-height:1.7;margin-bottom:1rem;font-weight:500;"],k.text.secondary),aG=g.Ay.div.withConfig({componentId:"sc-f26742f6-15"})(["display:flex;flex-wrap:wrap;gap:0.75rem;"]),aH=g.Ay.span.withConfig({componentId:"sc-f26742f6-16"})(["padding:0.5rem 1rem;border-radius:25px;font-size:0.9rem;font-weight:600;background:",";color:",";border:2px solid ",';transition:all 0.3s ease;position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient( 90deg,transparent,rgba(255,255,255,0.2),transparent );transition:left 0.4s ease;}&:hover{transform:translateY(-2px);&::before{left:100%;}}'],a=>a.score>=80?`linear-gradient(135deg, ${k.success}20, ${k.success}10)`:a.score>=60?`linear-gradient(135deg, ${k.warning}20, ${k.warning}10)`:`linear-gradient(135deg, ${k.error}20, ${k.error}10)`,a=>a.score>=80?k.success:a.score>=60?k.warning:k.error,a=>a.score>=80?`${k.success}40`:a.score>=60?`${k.warning}40`:`${k.error}40`),aI=g.Ay.div.withConfig({componentId:"sc-f26742f6-17"})(["background:linear-gradient( 135deg,","08 0%,","05 50%,","08 100% );border:2px solid ",'30;border-radius:20px;padding:2.5rem;margin-top:2rem;position:relative;overflow:hidden;&::before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient( 45deg,transparent,',"10,transparent );animation:"," 4s ease-in-out infinite;}"],k.primary,k.accent,k.primary,k.primary,k.primary,ap),aJ=g.Ay.h3.withConfig({componentId:"sc-f26742f6-18"})(["font-size:1.5rem;font-weight:700;background:linear-gradient(135deg,",",",`);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:1.5rem;display:flex;align-items:center;gap:0.75rem;position:relative;z-index:2;&::before{content:"💡";font-size:1.8rem;animation:`," 2s ease-in-out infinite;}"],k.primary,k.accent,ap),aK=g.Ay.ul.withConfig({componentId:"sc-f26742f6-19"})(["list-style:none;padding:0;margin:0;position:relative;z-index:2;"]),aL=g.Ay.li.withConfig({componentId:"sc-f26742f6-20"})(["padding:1rem 0;color:",`;line-height:1.7;display:flex;align-items:flex-start;gap:1rem;font-weight:500;transition:all 0.3s ease;&::before{content:"→";color:`,";font-weight:bold;font-size:1.2rem;margin-top:0.1rem;transition:transform 0.3s ease;}&:hover{transform:translateX(8px);&::before{transform:scale(1.2);}}"],k.text.secondary,k.primary),aM=g.Ay.button.withConfig({componentId:"sc-f26742f6-21"})(["margin-top:2rem;display:flex;width:100%;align-items:center;justify-content:center;padding:1rem 3rem;font-size:1rem;font-weight:700;background:linear-gradient(135deg,",",",");color:",";border:none;border-radius:20px;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);box-shadow:",';position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient( 135deg,',","," );opacity:0;transition:opacity 0.3s ease;}&:hover{transform:translateY(-4px) scale(1.02);box-shadow:",";&::before{opacity:1;}}&:active{transform:translateY(-2px) scale(1.01);}span{position:relative;z-index:1;}"],k.primary,k.primaryDark,k.text.inverse,k.shadow.lg,k.accent,k.primaryLight,k.shadow.xl),aN=({sentences:a})=>{let b,c,f,g,h,i,[j,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(null);(0,e.useEffect)(()=>{fetch("/animations/complete.json").then(a=>a.json()).then(a=>n(a)).catch(a=>console.error("Error loading animation:",a))},[]);let o=()=>{l(!1),console.log("AI Chat selected")},p=()=>{l(!1),console.log("Finish selected")},q=a.filter(a=>a.assessmentResult),r=0===q.length,s={totalSentences:8,avgPronunciation:82,avgAccuracy:85,avgFluency:78,avgCompleteness:83,wordIssues:[{word:"expectations",score:65,error:"Mispronunciation",count:2},{word:"resilience",score:58,error:"Accuracy",count:1},{word:"character",score:72,error:"Fluency",count:1},{word:"refine",score:68,error:"Pronunciation",count:1},{word:"company",score:74,error:"Accent",count:1},{word:"greatness",score:69,error:"Stress",count:1},{word:"train",score:76,error:"Speed",count:1}]};if(r)b=s.totalSentences,c=s.avgPronunciation,f=s.avgAccuracy,g=s.avgFluency,h=s.avgCompleteness,i=s.wordIssues;else{b=q.length,c=q.reduce((a,b)=>a+(b.assessmentResult?.pronunciationScore||0),0)/b,f=q.reduce((a,b)=>a+(b.assessmentResult?.accuracyScore||0),0)/b,g=q.reduce((a,b)=>a+(b.assessmentResult?.fluencyScore||0),0)/b,h=q.reduce((a,b)=>a+(b.assessmentResult?.completenessScore||0),0)/b;let a=[],d=new Map;q.forEach(a=>{(a.assessmentResult?.detailResult?.Words||[]).forEach(a=>{let b=a.PronunciationAssessment?.AccuracyScore||0,c=a.PronunciationAssessment?.ErrorType||"None";if(b<70||"None"!==c){let e=a.Word.toLowerCase();if(d.has(e)){let a=d.get(e);a.count++,a.score=Math.min(a.score,b)}else d.set(e,{word:a.Word,score:b,error:c,count:1})}})}),a.push(...Array.from(d.values())),a.sort((a,b)=>a.score-b.score),i=a}let t=[];c<70&&t.push({title:"전체적인 발음",description:"명확한 발음과 정확한 소리 생성에 집중하세요. 원어민 오디오와 함께 연습해보세요."}),g<70&&t.push({title:"말하기 유창성",description:"부드럽고 자연스러운 말의 리듬을 연습하세요. 매일 소리내어 읽기와 쉐도잉 연습을 해보세요."}),f<70&&t.push({title:"단어 정확성",description:"개별 단어의 정확한 발음에 집중하세요. 발음 기호를 가이드로 활용해보세요."}),r&&0===t.length&&t.push({title:"말하기 유창성",description:"부드럽고 자연스러운 말의 리듬을 연습하세요. 매일 소리내어 읽기와 쉐도잉 연습을 해보세요."});let u=(c+f+g+h)/4,v=u>=80;return(0,d.jsxs)(ar,{children:[(0,d.jsxs)(at,{children:[v&&m&&(0,d.jsx)(as,{children:(0,d.jsx)(ae,{animationData:m,loop:!0,style:{width:"100%",height:"100%"}})}),(0,d.jsx)(au,{children:"고생하셨습니다!"}),(0,d.jsx)(av,{children:r?"스터디 분석 결과":`총 ${b}개 문장 분석 결과`})]}),(0,d.jsxs)(aw,{children:[(0,d.jsxs)(ax,{highlight:!0,children:[(0,d.jsx)(ay,{children:Math.round(u)}),(0,d.jsx)(az,{children:"종합 점수"})]}),(0,d.jsxs)(ax,{children:[(0,d.jsx)(ay,{children:Math.round(c)}),(0,d.jsx)(az,{children:"발음"})]}),(0,d.jsxs)(ax,{children:[(0,d.jsx)(ay,{children:Math.round(f)}),(0,d.jsx)(az,{children:"정확성"})]}),(0,d.jsxs)(ax,{children:[(0,d.jsx)(ay,{children:Math.round(g)}),(0,d.jsx)(az,{children:"유창성"})]})]}),(0,d.jsxs)(aA,{children:[(0,d.jsx)(aB,{children:"\uD83D\uDCC8 세부 성과 분석"}),(0,d.jsxs)("div",{style:{display:"grid",gap:"1.5rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,d.jsx)("span",{style:{fontWeight:600},children:"발음 점수"}),(0,d.jsxs)("span",{style:{color:k.text.muted,fontWeight:600},children:[Math.round(c),"%"]})]}),(0,d.jsx)(aC,{percentage:c})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,d.jsx)("span",{style:{fontWeight:600},children:"정확성 점수"}),(0,d.jsxs)("span",{style:{color:k.text.muted,fontWeight:600},children:[Math.round(f),"%"]})]}),(0,d.jsx)(aC,{percentage:f})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,d.jsx)("span",{style:{fontWeight:600},children:"유창성 점수"}),(0,d.jsxs)("span",{style:{color:k.text.muted,fontWeight:600},children:[Math.round(g),"%"]})]}),(0,d.jsx)(aC,{percentage:g})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,d.jsx)("span",{style:{fontWeight:600},children:"완성도 점수"}),(0,d.jsxs)("span",{style:{color:k.text.muted,fontWeight:600},children:[Math.round(h),"%"]})]}),(0,d.jsx)(aC,{percentage:h})]})]})]}),i.length>0&&(0,d.jsxs)(aA,{children:[(0,d.jsx)(aB,{children:"\uD83C\uDFAF 집중 연습 단어"}),(0,d.jsx)("p",{style:{color:k.text.secondary,marginBottom:"1.5rem",fontSize:"1.1rem",lineHeight:"1.6"},children:"다음 단어들의 정확도가 낮게 나타났습니다. 이 단어들의 발음 연습에 집중해보세요:"}),(0,d.jsx)(aG,{children:i.slice(0,15).map((a,b)=>(0,d.jsxs)(aH,{score:a.score,children:[a.word," (",Math.round(a.score),"%)"]},b))})]}),t.length>0&&(0,d.jsxs)(aA,{children:[(0,d.jsx)(aB,{children:"\uD83D\uDCAA 개선이 필요한 영역"}),t.map((a,b)=>(0,d.jsxs)(aD,{children:[(0,d.jsx)(aE,{children:a.title}),(0,d.jsx)(aF,{children:a.description})]},b))]}),(0,d.jsxs)(aI,{children:[(0,d.jsx)(aJ,{children:"다음 단계 추천"}),(0,d.jsxs)(aK,{children:[u>=80?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aL,{children:"훌륭합니다! 높은 수준의 실력을 유지하기 위해 꾸준히 연습을 계속하세요."}),(0,d.jsx)(aL,{children:"더 어려운 콘텐츠에 도전하거나 말하기 속도와 자연스러움에 집중해보세요."}),(0,d.jsx)(aL,{children:"다양한 억양과 말하기 스타일을 연습하여 실력의 폭을 넓혀보세요."})]}):u>=60?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aL,{children:"좋은 진전입니다! 개선이 필요한 특정 단어와 소리에 집중해보세요."}),(0,d.jsx)(aL,{children:"일관성을 위해 매일 10-15분씩 쉐도잉 연습을 해보세요."}),(0,d.jsx)(aL,{children:"자신의 말하기를 녹음하고 원어민과 비교해보세요."})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aL,{children:"천천히 말하기부터 시작하여 각 단어의 명확한 발음에 집중하세요."}),(0,d.jsx)(aL,{children:"전체 문장으로 넘어가기 전에 기본적인 소리와 발음을 연습하세요."}),(0,d.jsx)(aL,{children:"발음 앱을 사용하거나 말하기 코치와 함께 개인별 맞춤 피드백을 받아보세요."})]}),(0,d.jsx)(aL,{children:"위에 강조된 단어들을 먼저 개별적으로 연습해보세요."}),(0,d.jsx)(aL,{children:"내일 다시 돌아와서 이 연습을 반복하여 향상 정도를 확인해보세요!"})]})]}),(0,d.jsx)(aM,{onClick:()=>l(!0),children:(0,d.jsx)("span",{children:"\uD83C\uDFAF 마무리하기"})}),j&&(0,d.jsx)(an,{isOpen:j,onClose:()=>l(!1),onAIChat:o,onFinish:p})]})},aO=g.Ay.div.withConfig({componentId:"sc-16eb6902-0"})(["width:100%;margin-top:1rem;background:",";border-radius:20px;line-height:1.8;text-align:left;padding:1.5rem;box-shadow:",";"],k.surface,k.shadow.sm),aP=g.Ay.span.withConfig({shouldForwardProp:a=>"isActive"!==a}).withConfig({componentId:"sc-16eb6902-1"})(["transition:all 0s cubic-bezier(0.4,0,0.2,1);background:",";color:",";font-weight:",';cursor:pointer;position:relative;padding:0.1em 0.1em;border-radius:4px;&::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:',";opacity:0;border-radius:8px;transition:opacity 0.2s ease;z-index:-1;}&:hover{&::before{opacity:",";}transform:",";}"],a=>a.isActive?"#fafa00":"transparent",a=>a.isActive?"#000000":k.text.secondary,a=>(a.isActive,"400"),k.primary,a=>a.isActive?"0":"0.1",a=>a.isActive?"none":"translateY(-1px)"),aQ=g.Ay.div.withConfig({componentId:"sc-16eb6902-2"})(["padding:2rem;border:1px solid ",";border-radius:20px;background:",";display:flex;flex-direction:column;gap:1.5rem;box-shadow:",';transition:all 0.3s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,',",",");transition:width 0.3s ease;}&:hover{transform:translateY(-4px);box-shadow:",";border-color:","30;&::before{width:8px;}}"],k.border.light,k.surface,k.shadow.md,k.primary,k.accent,k.shadow.xl,k.primary),aR=g.Ay.div.withConfig({componentId:"sc-16eb6902-3"})(["display:flex;align-items:center;gap:1rem;flex-wrap:wrap;"]),aS=g.Ay.div.withConfig({componentId:"sc-16eb6902-4"})(["width:100%;position:relative;overflow:hidden;"]),aT=g.Ay.div.withConfig({componentId:"sc-16eb6902-5"})(["display:flex;width:100%;min-height:400px;"]),aU=g.Ay.div.withConfig({shouldForwardProp:a=>"isActive"!==a}).withConfig({componentId:"sc-16eb6902-6"})(["width:100%;flex-shrink:0;display:",";animation:",";@keyframes slideIn{from{opacity:0;transform:translateX(20px);}to{opacity:1;transform:translateX(0);}}"],a=>a.isActive?"block":"none",a=>a.isActive?"slideIn 0.3s ease-out":"none"),aV=g.Ay.div.withConfig({componentId:"sc-16eb6902-7"})(["display:flex;align-items:center;justify-content:space-between;margin-top:1rem;gap:1rem;"]),aW=(0,g.Ay)(m).withConfig({componentId:"sc-16eb6902-8"})(["display:flex;align-items:center;gap:0.5rem;min-width:120px;&:disabled{opacity:0.5;}"]),aX=g.Ay.div.withConfig({componentId:"sc-16eb6902-9"})(["flex:1;height:8px;background:",";border-radius:4px;overflow:hidden;position:relative;"],k.border.light),aY=g.Ay.div.withConfig({shouldForwardProp:a=>"progress"!==a}).withConfig({componentId:"sc-16eb6902-10"})(["height:100%;width:","%;background:linear-gradient(90deg,",",",');border-radius:4px;transition:width 0.3s ease;position:relative;&::after{content:"";position:absolute;top:0;right:0;bottom:0;width:20px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3));animation:shimmer 2s infinite;}@keyframes shimmer{0%{transform:translateX(-20px);}100%{transform:translateX(20px);}}'],a=>a.progress,k.primary,k.accent),aZ=g.Ay.div.withConfig({componentId:"sc-16eb6902-11"})(["text-align:center;margin-top:0.5rem;font-size:0.875rem;color:",";font-weight:500;"],k.text.muted),a$=g.Ay.div.withConfig({componentId:"sc-16eb6902-12"})(["display:flex;align-items:center;justify-content:center;"]),a_=g.Ay.div.withConfig({shouldForwardProp:a=>"isActive"!==a&&"isCompleted"!==a}).withConfig({componentId:"sc-16eb6902-13"})(['display:flex;align-items:center;position:relative;&:not(:last-child){margin-right:2rem;&::after{content:"";position:absolute;right:-2rem;top:50%;transform:translateY(-50%);width:2rem;height:2px;background:',";transition:background 0.3s ease;}}"],a=>a.isCompleted?k.primary:k.border.light),a0=g.Ay.div.withConfig({shouldForwardProp:a=>"isActive"!==a&&"isCompleted"!==a}).withConfig({componentId:"sc-16eb6902-14"})(["width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1rem;transition:all 0.3s ease;cursor:pointer;position:relative;z-index:1;",""],a=>a.isActive?`
        background: linear-gradient(135deg, ${k.primary}, ${k.primaryDark});
        color: ${k.text.inverse};
        box-shadow: ${k.shadow.md};
        transform: scale(1.1);
      `:a.isCompleted?`
        background: ${k.primary};
        color: ${k.text.inverse};
        &:hover {
          transform: scale(1.05);
          box-shadow: ${k.shadow.sm};
        }
      `:`
        background: ${k.border.light};
        color: ${k.text.muted};
        &:hover {
          background: ${k.border.medium};
        }
      `),a1=g.Ay.div.withConfig({shouldForwardProp:a=>"isActive"!==a}).withConfig({componentId:"sc-16eb6902-15"})(["position:absolute;top:100%;left:50%;transform:translateX(-50%);margin-top:0.75rem;font-size:0.875rem;font-weight:700;color:",";white-space:nowrap;opacity:",";transition:opacity 0.3s ease;",":hover &{opacity:1;}"],a=>a.isActive?k.primary:k.text.muted,a=>+!!a.isActive,a_),a2=g.Ay.div.withConfig({componentId:"sc-16eb6902-16"})(["width:100%;margin-top:1rem;"]),a3=(0,g.Ay)(m).withConfig({componentId:"sc-16eb6902-17"})(["background:",";margin-bottom:1rem;&.active{background:",";}"],k.primaryDark,k.accent),a4=()=>{let[a,b]=(0,e.useState)(null),[c,g]=(0,e.useState)(null),[o,p]=(0,e.useState)(!0),[q,w]=(0,e.useState)(null),x=(0,e.useRef)(null),[y,z]=(0,e.useState)(!1),[A,B]=(0,e.useState)([]),[C,D]=(0,e.useState)(null),E=(0,e.useRef)(null),F=(0,e.useRef)(null),[H,K]=(0,e.useState)([]),[L,M]=(0,e.useState)(null),[N,O]=(0,e.useState)(!1),[P,Q]=(0,e.useState)(null),[R,S]=(0,e.useState)(0),[T,U]=(0,e.useState)(1),[V,W]=(0,e.useState)(!1),[X,Y]=(0,e.useState)({isOpen:!1,word:"",apiData:null,gptDefinition:"",isLoading:!1}),[Z]=(0,e.useState)([{id:"intern-1",text:"People with very high expectations have very low resilience.",blankIndex:7,originalWord:"low"},{id:"intern-2",text:"You want to train, you want to refine the character of your company.",blankIndex:7,originalWord:"refine"},{id:"intern-3",text:"Greatness comes from character.",blankIndex:3,originalWord:"character"}]),[$,_]=(0,e.useState)(0),[aa,ab]=(0,e.useState)(Z),[ac]=(0,e.useState)([{id:"word-1",word:"Resilience",inputMode:"write"},{id:"word-2",word:"Refine",inputMode:"write"},{id:"word-3",word:"Character",inputMode:"write"},{id:"word-4",word:"Setback",inputMode:"write"},{id:"word-5",word:"Ample",inputMode:"write"}]),[ad,ae]=(0,e.useState)(ac),[af,ag]=(0,e.useState)(0),[ah,ai]=(0,e.useState)("fill-blank"),aj=(0,e.useRef)(null),[ak,al]=(0,e.useState)(!1),[am,an]=(0,e.useState)(null),ao=(0,e.useRef)([]),[ap,aq]=(0,e.useState)(null),ar=(0,e.useRef)(null),as=(0,e.useRef)(ap),at=(0,e.useRef)(N),au=(0,e.useRef)(null),av=(0,e.useRef)(null),aw=(0,e.useRef)(null),ax=(0,e.useRef)(null),ay=process.env.NEXT_PUBLIC_AZURE_PRIMARY_KEY,az="koreacentral",aA=process.env.NEXT_PUBLIC_OPENAI_API_KEY,aB=[{id:1,name:"스크립트 공부",label:"Script Study"},{id:2,name:"쉐도잉",label:"Shadowing"},{id:3,name:"내재화",label:"Internalization"},{id:4,name:"분석",label:"Analysis"}],aC=()=>{if(null===R||0===H.length)return!1;let a=H[R];if(!a||!a.assessmentResult||!a.assessmentResult.detailResult)return!1;let b=a.text.trim().split(/\s+/),c=a.assessmentResult?.detailResult?.Words||[],d=70,e=0,f=a=>a.toLowerCase().replace(/[.,!?;:'"()[\]{}]|…/g,"");for(;e<c.length&&c[e]?.PronunciationAssessment?.ErrorType==="Insertion";)e++;for(let a of b){let b=null,g=!1,h=f(a);if(e<c.length){let a=c[e],d=f(a.Word),i=a.PronunciationAssessment?.ErrorType;"Insertion"!==i&&h===d?(b=a,"Omission"===i&&(g=!0),e++):"Omission"===i&&h===d&&(g=!0,e++)}if(g||!b)return!1;{let a=b.PronunciationAssessment?.AccuracyScore;if(void 0===a||a<d)return!1}for(;e<c.length&&c[e]?.PronunciationAssessment?.ErrorType==="Insertion";)e++}for(;e<c.length;)c[e]?.PronunciationAssessment?.ErrorType,e++;return!0};(0,e.useEffect)(()=>{as.current=ap},[ap]),(0,e.useEffect)(()=>{at.current=N},[N]);let aD=(0,e.useCallback)(I,[]);function aE(a,b){let c=new DataView(new ArrayBuffer(44+2*a.length));function d(a,b){for(let d=0;d<b.length;d++)c.setUint8(a+d,b.charCodeAt(d))}let e=1,f=16;d(0,"RIFF"),c.setUint32(4,36+2*a.length,!0),d(8,"WAVE"),d(12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,e,!0),c.setUint32(24,b,!0),c.setUint32(28,b*e*(f/8),!0),c.setUint16(32,f/8*e,!0),c.setUint16(34,f,!0),d(36,"data"),c.setUint32(40,2*a.length,!0);let g=44;for(let b=0;b<a.length;b++,g+=2){let d=Math.max(-1,Math.min(1,a[b]));c.setInt16(g,d<0?32768*d:32767*d,!0)}return new Blob([c],{type:"audio/wav"})}function aF(a){let b=a.byteLength/4,c=new Int16Array(b),d=new Float32Array(a);for(let a=0;a<b;a++)c[a]=32767*Math.max(-1,Math.min(1,d[a]));return c.buffer}(0,e.useEffect)(()=>{if(null!==P){let a=document.getElementById(`sentence-audio-${P}`);a&&a.play().catch(a=>{console.error("Autoplay failed:",a)}),Q(null)}},[P]),(0,e.useEffect)(()=>{let a=a=>{if(!a||0===a.length)return[];let b=[],c="",d=[],e=[".","?","!"];return a.forEach((f,g)=>{c+=(d.length>0?" ":"")+f.word,d.push(f);let h=f.word.charAt(f.word.length-1),i=e.includes(h),j=g===a.length-1;(i&&d.length>0||j&&d.length>0)&&(b.push({id:`sentence-${b.length}-${Date.now()}`,text:c.trim(),startTime:d[0].start,endTime:d[d.length-1].end,assessmentResult:null,isRecorded:!1,audioUrl:null,recognizedText:"",rawJson:"",isAssessmentFinalized:!1}),c="",d=[])}),b};return(async()=>{p(!0),w(null),B([]),K([]),D(null),z(!1),x.current&&"function"==typeof x.current.destroy&&(x.current.destroy(),x.current=null),F.current&&(clearInterval(F.current),F.current=null);try{let b=(0,i.H9)(j.db,"shadow","sample"),c=await (0,i.x7)(b);if(c.exists()){let b=c.data();if(b&&b.youtube_url){let a=I(b.youtube_url);a?g(a):w("Invalid YouTube URL in Firestore.")}else w("youtube_url field not found in Firestore document.");if(b&&b.audio_timestamps&&Array.isArray(b.audio_timestamps)){let c=b.audio_timestamps.sort((a,b)=>a.start-b.start);B(c),K(a(c))}else B([]),K([]),console.warn("audio_timestamps not found or not an array in Firestore.")}else w("Shadow learning content not found. Please ensure the 'shadow/sample' document exists in Firestore with youtube_url and audio_timestamps fields.")}catch(a){console.error("Firestore fetch error:",a),w(`Failed to load video data: ${a.message}`)}finally{p(!1)}})(),()=>{F.current&&clearInterval(F.current)}},[aD]),(0,e.useEffect)(()=>{if(!c||o||q){x.current&&"function"==typeof x.current.destroy&&(x.current.destroy(),x.current=null,z(!1)),F.current&&(clearInterval(F.current),F.current=null);return}let a=()=>{if(!x.current||"function"!=typeof x.current.getCurrentTime||0===A.length)return;let a=x.current.getCurrentTime(),b=null;for(let c=0;c<A.length;c++)if(a>=A[c].start&&a<=A[c].end){b=c;break}if(C!==b&&(D(b),null!==b&&E.current)){let a=E.current.children[b];a&&a.scrollIntoView({behavior:"smooth",block:"nearest"})}},b=()=>{z(!0)},d=b=>{b.data===window.YT.PlayerState.PLAYING?(F.current&&clearInterval(F.current),A.length>0&&(F.current=window.setInterval(a,250))):(F.current&&(clearInterval(F.current),F.current=null),(b.data===window.YT.PlayerState.PAUSED||b.data===window.YT.PlayerState.ENDED)&&A.length>0&&a())},e=()=>{x.current&&"function"==typeof x.current.destroy&&x.current.destroy(),x.current=new window.YT.Player("youtube-player-iframe",{events:{onReady:b,onStateChange:d}})};if(window.YT&&window.YT.Player)document.getElementById("youtube-player-iframe")&&e();else{window.onYouTubeIframeAPIReady=e;let a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";let b=document.getElementsByTagName("script")[0];b&&b.parentNode?b.parentNode.insertBefore(a,b):document.head.appendChild(a)}return()=>{delete window.onYouTubeIframeAPIReady,x.current&&"function"==typeof x.current.destroy&&x.current.destroy(),x.current=null,z(!1),F.current&&(clearInterval(F.current),F.current=null)}},[c,o,q,A.length]),(0,e.useEffect)(()=>()=>{ax.current&&ax.current.getTracks().forEach(a=>a.stop()),au.current&&"closed"!==au.current.state&&au.current.close().catch(console.warn),as.current&&(console.log("[Cleanup] Closing Azure Recognizer on unmount."),as.current.close()),ar.current&&(console.log("[Cleanup] Closing Azure PushStream on unmount."),ar.current.close())},[]);let aG=async a=>{if(N)return;let c=H[a];if(!c)return void b("Cannot find sentence to record.");b(null),M(a),O(!0),ao.current=[],K(b=>b.map((b,c)=>c===a?{...b,assessmentResult:null,audioUrl:null,assessmentError:null,recognizedText:"",rawJson:"",isAssessing:!0,isAssessmentFinalized:!1}:b));try{if(!ay||!az)throw Error("Azure Speech Key or Region is not configured.");let b=h.SpeechConfig.fromSubscription(ay,az);b.speechRecognitionLanguage="en-US",ar.current&&ar.current.close(),ar.current=h.AudioInputStream.createPushStream(h.AudioStreamFormat.getWaveFormatPCM(16e3,16,1));let d=h.AudioConfig.fromStreamInput(ar.current),e=new h.PronunciationAssessmentConfig(c.text,h.PronunciationAssessmentGradingSystem.HundredMark,h.PronunciationAssessmentGranularity.Phoneme,!0);e.enableProsodyAssessment=!0,e.enableMiscue=!0,as.current&&as.current.close();let f=new h.SpeechRecognizer(b,d);e.applyTo(f),f.recognizing=(b,c)=>{if(c.result.reason===h.ResultReason.RecognizingSpeech){let b=h.PronunciationAssessmentResult.fromResult(c.result);K(d=>d.map((d,e)=>e===a?{...d,recognizedText:c.result.text,assessmentResult:b,assessmentError:null,isAssessmentFinalized:!1}:d))}},f.recognized=(b,c)=>{if(console.log(`[Azure Recognized Event] Result reason: ${h.ResultReason[c.result.reason]}`),c.result.reason===h.ResultReason.RecognizedSpeech){console.log(`[Azure Recognized] Text: ${c.result.text}`);let b=h.PronunciationAssessmentResult.fromResult(c.result),d=c.result.properties.getProperty(h.PropertyId.SpeechServiceResponse_JsonResult);K(e=>e.map((e,f)=>f===a?{...e,assessmentResult:b,recognizedText:c.result.text,rawJson:d,isAssessing:!1,isAssessmentFinalized:!0}:e))}else c.result.reason===h.ResultReason.NoMatch?(console.warn("[Azure Recognized] NoMatch: Speech could not be recognized."),K(b=>b.map((b,c)=>c===a?{...b,assessmentError:"Speech could not be recognized by Azure.",isAssessing:!1,isAssessmentFinalized:!0}:b))):(console.log(`[Azure Recognized] Other reason: ${h.ResultReason[c.result.reason]}`),K(b=>b.map((b,c)=>c===a?{...b,isAssessing:!1,isAssessmentFinalized:!0}:b)))},f.canceled=(b,c)=>{console.error(`[Azure] CANCELED event. Reason: ${h.CancellationReason[c.reason]}`);let d="Azure CANCELED: Unknown reason";c.reason===h.CancellationReason.Error&&(d=`Azure CANCELED: ${c.errorDetails} (Code: ${c.errorCode})`,console.error(`[Azure] CANCELED: ErrorCode=${c.errorCode} ( ${h.CancellationErrorCode[c.errorCode]} )`),console.error(`[Azure] CANCELED: ErrorDetails=${c.errorDetails}`)),K(b=>b.map((b,c)=>c===a?{...b,assessmentError:d,isAssessing:!1,isAssessmentFinalized:!0}:b))},f.sessionStarted=(a,b)=>{console.log("[Azure] Session STARTED")},f.sessionStopped=(a,b)=>{console.log("[Azure] Session STOPPED"),ar.current&&(console.log("[Azure] Closing push stream on session stop."),ar.current.close())},await f.startContinuousRecognitionAsync(()=>{console.log("[Azure] Continuous recognition successfully started.")},b=>{console.error(`[Azure] Error starting Azure continuous recognition: ${b}`),K(c=>c.map((c,d)=>d===a?{...c,assessmentError:`Azure SDK Error starting recognition: ${b}`,isAssessing:!1,isAssessmentFinalized:!1}:c)),ar.current&&ar.current.close()}),aq(f),console.log("[Azure] Azure Recognizer instance created and recognition started."),K(b=>b.map((b,c)=>c===a?{...b,isAssessing:!0,assessmentResult:null,audioUrl:null,assessmentError:null,recognizedText:"",rawJson:"",isAssessmentFinalized:!1}:b)),au.current=new AudioContext({sampleRate:16e3}),await au.current.audioWorklet.addModule("/scripts/audio-processor.js"),ax.current=await navigator.mediaDevices.getUserMedia({audio:!0}),av.current=au.current.createMediaStreamSource(ax.current),aw.current=new AudioWorkletNode(au.current,"audio-processor",{processorOptions:{sampleRate:au.current.sampleRate}}),aw.current.port.onmessage=b=>{let c=b.data instanceof ArrayBuffer,d=c?b.data.byteLength:0;if(c&&d>0){let c=new Float32Array(b.data.slice(0));if(ao.current.push(c),ar.current&&as.current&&at.current&&d>0)try{let a=aF(b.data.slice(0));ar.current.write(a)}catch(b){console.error("[AudioWorklet] Error writing audio to Azure push stream:",b.toString()),K(b=>b.map((b,c)=>c===a?{...b,assessmentError:"Azure audio stream closed unexpectedly during write.",isAssessing:!1,isAssessmentFinalized:!0}:b))}}},av.current.connect(aw.current)}catch(d){console.error("Error starting sentence recording:",d);let c=d.message||"Failed to start recording.";b(c),K(b=>b.map((b,d)=>d===a?{...b,assessmentError:c,isAssessing:!1,isAssessmentFinalized:!0}:b)),O(!1),M(null),as.current&&as.current.close(),ar.current&&ar.current.close()}},aH=async()=>{if(!N||null===L)return void console.warn("Stop called but no active recording or sentence index.");let a=L;if(console.log(`[Stop] Attempting to stop recording for sentence index: ${a}`),as.current&&"function"==typeof as.current.stopContinuousRecognitionAsync){console.log("[Azure] Sending stopContinuousRecognitionAsync command.");try{await as.current.stopContinuousRecognitionAsync(()=>{console.log("[Azure] Continuous recognition stopped command sent successfully.")},a=>{console.error(`[Azure] Error SENDING stop continuous recognition: ${a}`)})}catch(a){console.error("[Azure] Exception during stopContinuousRecognitionAsync call:",a)}}else console.warn("[Azure] Recognizer or stopContinuousRecognitionAsync not available to stop.");if(aw.current&&(aw.current.port.onmessage=null,aw.current.disconnect(),aw.current=null,console.log("[WebAudio] AudioWorkletNode disconnected.")),av.current&&(av.current.disconnect(),av.current=null,console.log("[WebAudio] MicrophoneSourceNode disconnected.")),ax.current&&(ax.current.getTracks().forEach(a=>a.stop()),ax.current=null,console.log("[WebAudio] MediaStream tracks stopped.")),au.current&&"closed"!==au.current.state){try{await au.current.close(),console.log("[WebAudio] AudioContext closed.")}catch(a){console.warn("[WebAudio] Error closing AudioContext:",a)}au.current=null}let b=null;if(ao.current.length>0)try{let a=ao.current.reduce((a,b)=>a+b.length,0),c=new Float32Array(a),d=0;for(let a of ao.current)c.set(a,d),d+=a.length;let e=16e3,f=aE(c,e);b=URL.createObjectURL(f),console.log(`[WebAudio] Recorded audio URL created: ${b}`)}catch(b){console.error("Error encoding WAV:",b),K(b=>b.map((b,c)=>c===a?{...b,assessmentError:"Failed to process recorded audio."}:b))}ao.current=[],O(!1),M(null),K(c=>c.map((c,d)=>d===a?{...c,isAssessing:!1,audioUrl:b,isRecorded:!0,isAssessmentFinalized:!1}:c)),b&&(console.log(`[Autoplay] Triggering autoplay for sentence ${a}`),Q(a))},aI=async(a,b)=>{try{let c=process.env.NEXT_PUBLIC_OPENAI_API_KEY;if(!c)return"API 키가 설정되지 않았습니다.";let d="https://api.openai.com/v1/chat/completions",e=`다음 문장에서 '${a}'의 정의를 한국어로 제공해주세요. 단어의 의미를 문장의 맥락에 맞게 설명해주세요. 반드시 존대말로 작성해주세요.

문장: "${b}"

* 결과 형식:
뜻풀이: [문장 문맥에 맞는 단어 정의]
`,f=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:e}],temperature:.3,max_tokens:300})});if(!f.ok)throw Error(`HTTP error ${f.status}`);return(await f.json()).choices[0].message.content}catch(a){return console.error("GPT API Error:",a),`뜻풀이를 가져오는 중 오류가 발생했습니다: ${a}`}},aJ=async a=>{try{let b=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${a}`);if(!b.ok){if(404===b.status)return console.warn(`No definitions found for "${a}" from API.`),null;throw Error(`API error: ${b.status}`)}return await b.json()}catch(a){return console.error("Free Dictionary API Error:",a),null}},aK=(a,b,c)=>{try{let d=document.caretRangeFromPoint(b,c);if(!d)return{word:""};let e=a.closest(".transcript-text");if(!e)return{word:""};let f=e.textContent||"",g=d.startContainer,h=d.startOffset,i=0,j=-1,k=a=>{if(!(j>=0)){if(a===g){j=i+h;return}if(a.nodeType===Node.TEXT_NODE)i+=a.textContent?.length||0;else if(a.nodeType===Node.ELEMENT_NODE)for(let b of Array.from(a.childNodes))k(b)}};if(k(e),j<0)return{word:""};let l=j,m=j;for(;l>0&&" "!==f[l-1]&&"—"!==f[l-1];)l--;for(;m<f.length&&" "!==f[m]&&"—"!==f[m];)m++;let n=f.substring(l,m);return{word:n=n.replace(/[.,!?;:'"()[\]{}]|…/g,"").trim(),rect:(d.startContainer.nodeType===Node.TEXT_NODE?d.startContainer.parentElement:d.startContainer)?.getBoundingClientRect()||void 0}}catch(a){return console.error("Error extracting word from text:",a),{word:""}}},aL=async a=>{if(V)return;a.preventDefault(),a.stopPropagation();let b=a.target.closest(".transcript-text");if(!b)return;let c=b.textContent||"";if(!c)return;window.getSelection()?.removeAllRanges();let{word:d}=aK(b,a.clientX,a.clientY),e=a4(d);if(!e||e.length>30||e.split(/\s+/).length>1)return;let f=RegExp(`[^.!?]*\b${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\b[^.!?]*[.!?]`,"i"),g=c.match(f),h=g?g[0].trim():c;Y({isOpen:!0,word:e,apiData:null,gptDefinition:"",isLoading:!0}),document.body.style.overflow="hidden";try{let a=await aI(e,h),b=await aJ(e);Y(c=>({...c,gptDefinition:a,apiData:b,isLoading:!1}))}catch(a){console.error("Definition or API error:",a),Y(a=>({...a,gptDefinition:a.gptDefinition||"뜻풀이를 가져오는 중 오류가 발생했습니다.",apiData:null,isLoading:!1}))}},aM=()=>{W(!V)};(0,e.useEffect)(()=>{V||D(null)},[V]);let a4=a=>{let b=a.toLowerCase();return b.endsWith("ies")&&b.length>3?b.slice(0,-3)+"y":b.endsWith("s")&&!b.endsWith("ss")&&b.length>3?b.slice(0,-1):b},a5=(a,b)=>{let c=a.text.split(" "),e=[];return c.forEach((b,c)=>{c===a.blankIndex?e.push((0,d.jsx)("span",{style:{textDecoration:"underline",textDecorationStyle:"solid",textDecorationThickness:"2px",color:k.primary,fontWeight:"bold",minWidth:"100px",display:"inline-block",textAlign:"center",margin:"0 4px"},children:a.userResponse||"________"},`blank-${c}`)):e.push((0,d.jsx)("span",{style:{margin:"0 4px"},children:b},`word-${c}`))}),(0,d.jsxs)(n,{children:[(0,d.jsx)("div",{style:{fontSize:"1.2rem",lineHeight:"1.8",marginBottom:"1rem"},children:e}),a.isRecording&&(0,d.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:k.text.muted},children:(0,d.jsx)("i",{children:"Recording... Say a word to fill the blank"})}),a.userResponse&&(0,d.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:`1px solid ${k.border.light}`,fontSize:"0.9rem"},children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Your Answer:"}),' "',a.userResponse,'"']}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Original Word:"}),' "',a.originalWord,'"']}),void 0!==a.isCorrect&&(0,d.jsx)(v,{type:a.isCorrect?"success":"warning",children:a.isCorrect?"✓ Good! You used a different word.":"Try using a different word than the original."})]}),a.recordedAudioUrl&&(0,d.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,d.jsx)("audio",{id:`intern-audio-${b}`,controls:!0,src:a.recordedAudioUrl,style:{width:"100%"}})})]})},a6=async()=>{if(!aA)throw Error("OpenAI API key is not configured");let a=await fetch("https://api.openai.com/v1/realtime/transcription_sessions",{method:"POST",headers:{Authorization:`Bearer ${aA}`,"Content-Type":"application/json"}});if(!a.ok)throw Error(`Failed to get ephemeral token: ${a.status}`);return(await a.json()).client_secret},a7=async a=>{if(!ak){al(!0),an(a),ao.current=[],ab(b=>b.map((b,c)=>c===a?{...b,isRecording:!0,userResponse:"",transcriptionError:"",isCorrect:void 0}:b));try{let b=await a6(),c=new WebSocket(`wss://api.openai.com/v1/realtime?intent=transcription&authorization=Bearer+${b}`);aj.current=c,c.onopen=()=>{console.log("[OpenAI] WebSocket connected"),c.send(JSON.stringify({type:"transcription_session.update",input_audio_format:"pcm16",input_audio_transcription:{model:"gpt-4o-mini-transcribe",prompt:"",language:"en"},turn_detection:{type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:500},input_audio_noise_reduction:{type:"near_field"}}))},c.onmessage=b=>{let c=JSON.parse(b.data);if(console.log("[OpenAI] Received message:",c),"input_audio_buffer.committed"===c.type)console.log("[OpenAI] Audio buffer committed");else if("transcription.text.delta"===c.type)ab(b=>b.map((b,d)=>d===a?{...b,userResponse:c.text||""}:b));else if("transcription.text.done"===c.type){let b=c.text?.trim()||"",d=aa[a]?.originalWord,e=b.toLowerCase()!==d?.toLowerCase();ab(c=>c.map((c,d)=>d===a?{...c,userResponse:b,isCorrect:e,isRecording:!1}:c))}},c.onerror=b=>{console.error("[OpenAI] WebSocket error:",b),ab(b=>b.map((b,c)=>c===a?{...b,transcriptionError:"WebSocket connection error",isRecording:!1}:b))},c.onclose=()=>{console.log("[OpenAI] WebSocket closed"),al(!1),an(null)},au.current=new AudioContext({sampleRate:16e3}),await au.current.audioWorklet.addModule("/scripts/audio-processor.js"),ax.current=await navigator.mediaDevices.getUserMedia({audio:!0}),av.current=au.current.createMediaStreamSource(ax.current),aw.current=new AudioWorkletNode(au.current,"audio-processor",{processorOptions:{sampleRate:au.current.sampleRate}}),aw.current.port.onmessage=a=>{if(a.data instanceof ArrayBuffer&&a.data.byteLength>0){let b=new Float32Array(a.data.slice(0));if(ao.current.push(b),aj.current?.readyState===WebSocket.OPEN){let b=aF(a.data.slice(0)),c=btoa(String.fromCharCode(...Array.from(new Uint8Array(b))));aj.current.send(JSON.stringify({type:"input_audio_buffer.append",audio:c}))}}},av.current.connect(aw.current)}catch(b){console.error("Error starting OpenAI recording:",b),ab(c=>c.map((c,d)=>d===a?{...c,transcriptionError:b.message,isRecording:!1}:c)),al(!1),an(null)}}},a8=async()=>{if(!ak||null===am)return;let a=am;aw.current&&(aw.current.port.onmessage=null,aw.current.disconnect(),aw.current=null),av.current&&(av.current.disconnect(),av.current=null),ax.current&&(ax.current.getTracks().forEach(a=>a.stop()),ax.current=null),au.current&&"closed"!==au.current.state&&(await au.current.close(),au.current=null),aj.current&&(aj.current.close(),aj.current=null);let b=null;if(ao.current.length>0)try{let a=ao.current.reduce((a,b)=>a+b.length,0),c=new Float32Array(a),d=0;for(let a of ao.current)c.set(a,d),d+=a.length;let e=aE(c,16e3);b=URL.createObjectURL(e)}catch(a){console.error("Error encoding WAV:",a)}ao.current=[],al(!1),an(null),ab(c=>c.map((c,d)=>d===a?{...c,recordedAudioUrl:b,isRecording:!1}:c))},a9=(a,b)=>(0,d.jsxs)(n,{children:[(0,d.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,d.jsx)("h3",{style:{color:k.primary,fontSize:"2rem",margin:"1rem 0"},children:a.word}),(0,d.jsx)("p",{style:{color:k.text.secondary,fontSize:"1rem"},children:"Create a sentence using this word. You can write or speak your response."})]}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,d.jsx)(m,{onClick:()=>ba(b,"write"),style:{background:"write"===a.inputMode?`linear-gradient(135deg, ${k.primary}, ${k.primaryDark})`:k.border.medium,color:"write"===a.inputMode?k.text.inverse:k.text.muted},children:(0,d.jsx)("span",{children:"✏️ Write"})}),(0,d.jsx)(m,{onClick:()=>ba(b,"speak"),style:{background:"speak"===a.inputMode?`linear-gradient(135deg, ${k.primary}, ${k.primaryDark})`:k.border.medium,color:"speak"===a.inputMode?k.text.inverse:k.text.muted},children:(0,d.jsx)("span",{children:"\uD83C\uDFA4 Speak"})})]}),"write"===a.inputMode?(0,d.jsx)("div",{style:{marginBottom:"1rem"},children:(0,d.jsx)("textarea",{value:a.userSentence||"",onChange:a=>bb(b,a.target.value),placeholder:`Write a sentence using "${a.word}"...`,style:{width:"100%",minHeight:"100px",padding:"1rem",fontSize:"1rem",border:`1px solid ${k.border.medium}`,borderRadius:"8px",resize:"vertical",fontFamily:"inherit"}})}):(0,d.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{textAlign:"center",marginBottom:"1rem"},children:(0,d.jsx)(m,{onClick:()=>{a.isRecording?bd():bc(b)},disabled:ak&&!a.isRecording,children:(0,d.jsx)("span",{children:a.isRecording?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s,{}),"Stop Recording"]}):"\uD83C\uDFA4 Record Sentence"})})}),a.isRecording&&(0,d.jsx)("div",{style:{textAlign:"center",fontSize:"0.9rem",color:k.text.muted},children:(0,d.jsxs)("i",{children:['Recording... Speak your sentence using "',a.word,'"']})})]}),(a.userSentence||a.spokenSentence)&&(0,d.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:`1px solid ${k.border.light}`,fontSize:"0.95rem"},children:[(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Your Sentence:"})}),(0,d.jsxs)("div",{style:{background:k.background,padding:"1rem",borderRadius:"8px",margin:"0.5rem 0",fontStyle:"italic"},children:['"',"write"===a.inputMode?a.userSentence:a.spokenSentence,'"']}),a.userSentence||a.spokenSentence?(0,d.jsx)(v,{type:"success",children:"✓ Sentence created successfully!"}):null]}),a.recordedAudioUrl&&(0,d.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,d.jsx)("audio",{id:`creation-audio-${b}`,controls:!0,src:a.recordedAudioUrl,style:{width:"100%"}})}),a.transcriptionError&&(0,d.jsx)(v,{type:"error",children:a.transcriptionError})]}),ba=(a,b)=>{ae(c=>c.map((c,d)=>d===a?{...c,inputMode:b}:c))},bb=(a,b)=>{ae(c=>c.map((c,d)=>d===a?{...c,userSentence:b,isCompleted:b.trim().length>0}:c))},bc=async a=>{if(!ak){al(!0),an(a),ao.current=[],ae(b=>b.map((b,c)=>c===a?{...b,isRecording:!0,spokenSentence:"",transcriptionError:""}:b));try{let b=await a6(),c=new WebSocket(`wss://api.openai.com/v1/realtime?intent=transcription&authorization=Bearer+${b}`);aj.current=c,c.onopen=()=>{console.log("[OpenAI] WebSocket connected for sentence creation"),c.send(JSON.stringify({type:"transcription_session.update",input_audio_format:"pcm16",input_audio_transcription:{model:"gpt-4o-mini-transcribe",prompt:"",language:"en"},turn_detection:{type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:1e3},input_audio_noise_reduction:{type:"near_field"}}))},c.onmessage=b=>{let c=JSON.parse(b.data);if(console.log("[OpenAI] Received message for sentence creation:",c),"input_audio_buffer.committed"===c.type)console.log("[OpenAI] Audio buffer committed for sentence creation");else if("transcription.text.delta"===c.type)ae(b=>b.map((b,d)=>d===a?{...b,spokenSentence:c.text||""}:b));else if("transcription.text.done"===c.type){let b=c.text?.trim()||"";ae(c=>c.map((c,d)=>d===a?{...c,spokenSentence:b,isCompleted:b.length>0,isRecording:!1}:c))}},c.onerror=b=>{console.error("[OpenAI] WebSocket error for sentence creation:",b),ae(b=>b.map((b,c)=>c===a?{...b,transcriptionError:"WebSocket connection error",isRecording:!1}:b))},c.onclose=()=>{console.log("[OpenAI] WebSocket closed for sentence creation"),al(!1),an(null)},au.current=new AudioContext({sampleRate:16e3}),await au.current.audioWorklet.addModule("/scripts/audio-processor.js"),ax.current=await navigator.mediaDevices.getUserMedia({audio:!0}),av.current=au.current.createMediaStreamSource(ax.current),aw.current=new AudioWorkletNode(au.current,"audio-processor",{processorOptions:{sampleRate:au.current.sampleRate}}),aw.current.port.onmessage=a=>{if(a.data instanceof ArrayBuffer&&a.data.byteLength>0){let b=new Float32Array(a.data.slice(0));if(ao.current.push(b),aj.current?.readyState===WebSocket.OPEN){let b=aF(a.data.slice(0)),c=btoa(String.fromCharCode(...Array.from(new Uint8Array(b))));aj.current.send(JSON.stringify({type:"input_audio_buffer.append",audio:c}))}}},av.current.connect(aw.current)}catch(b){console.error("Error starting sentence creation recording:",b),ae(c=>c.map((c,d)=>d===a?{...c,transcriptionError:b.message,isRecording:!1}:c)),al(!1),an(null)}}},bd=async()=>{if(!ak||null===am)return;let a=am;aw.current&&(aw.current.port.onmessage=null,aw.current.disconnect(),aw.current=null),av.current&&(av.current.disconnect(),av.current=null),ax.current&&(ax.current.getTracks().forEach(a=>a.stop()),ax.current=null),au.current&&"closed"!==au.current.state&&(await au.current.close(),au.current=null),aj.current&&(aj.current.close(),aj.current=null);let b=null;if(ao.current.length>0)try{let a=ao.current.reduce((a,b)=>a+b.length,0),c=new Float32Array(a),d=0;for(let a of ao.current)c.set(a,d),d+=a.length;let e=aE(c,16e3);b=URL.createObjectURL(e)}catch(a){console.error("Error encoding WAV for sentence creation:",a)}ao.current=[],al(!1),an(null),ae(c=>c.map((c,d)=>d===a?{...c,recordedAudioUrl:b,isRecording:!1}:c))};return(0,d.jsxs)(l,{children:[(0,d.jsxs)(u,{children:[o&&(0,d.jsxs)(t,{children:[(0,d.jsx)("div",{className:"spinner"}),(0,d.jsx)("div",{className:"text",children:"Loading YouTube video..."})]}),q&&(0,d.jsxs)(r,{children:["Error loading video: ",q]}),!o&&!q&&c&&(0,d.jsx)("iframe",{id:"youtube-player-iframe",width:"100%",height:"100%",src:c,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),!o&&!q&&!c&&(0,d.jsx)(v,{type:"info",children:"YouTube video URL not available."})]}),(0,d.jsx)(a$,{children:aB.map((a,b)=>(0,d.jsxs)(a_,{isActive:T===a.id,isCompleted:T>a.id,children:[(0,d.jsx)(a0,{isActive:T===a.id,isCompleted:T>a.id,onClick:()=>U(a.id),children:a.id}),(0,d.jsx)(a1,{isActive:T===a.id,children:a.name})]},a.id))}),(0,d.jsxs)(a2,{children:[1===T&&!o&&!q&&A.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a3,{onClick:aM,className:V?"active":"",children:(0,d.jsx)("span",{children:V?"✕ 오디오 모드 해제":"\uD83C\uDFA7 오디오 모드"})}),(0,d.jsx)(aO,{ref:E,className:"transcript-text",onClick:aL,children:A.map((a,b)=>(0,d.jsxs)(f().Fragment,{children:[(0,d.jsx)(aP,{isActive:b===C,onClick:c=>{V&&x.current&&y&&(c.stopPropagation(),x.current.seekTo(a.start,!0),D(b))},children:a.word}),b<A.length-1&&" "]},`${a.word}-${b}-${a.start}`))})]}),2===T&&H.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aS,{children:(0,d.jsx)(aT,{children:H.map((a,b)=>(0,d.jsx)(aU,{isActive:b===R,children:(0,d.jsxs)(aQ,{children:[(0,d.jsx)(J,{sentence:a,index:b}),(0,d.jsx)(aR,{children:(0,d.jsx)(m,{onClick:()=>{N&&L===R?aH():N||aG(R)},disabled:N&&L!==R,children:(0,d.jsx)("span",{children:N&&L===R?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s,{}),"Stop Recording"]}):"Start Recording"})})}),a.assessmentError&&(0,d.jsx)(v,{type:"error",children:a.assessmentError})]})},a.id))})}),(0,d.jsxs)(aV,{children:[(0,d.jsx)(aW,{onClick:()=>S(Math.max(0,R-1)),disabled:0===R,children:(0,d.jsx)("span",{children:"← Previous"})}),(0,d.jsx)(aX,{children:(0,d.jsx)(aY,{progress:(R+1)/H.length*100})}),(0,d.jsx)(aW,{onClick:()=>S(Math.min(H.length-1,R+1)),disabled:R===H.length-1||!aC(),children:(0,d.jsx)("span",{children:"Next →"})})]}),(0,d.jsxs)(aZ,{children:["Sentence ",R+1," of ",H.length]})]}),3===T&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,d.jsx)(m,{onClick:()=>ai("fill-blank"),style:{background:"fill-blank"===ah?`linear-gradient(135deg, ${k.primary}, ${k.primaryDark})`:k.border.medium,color:"fill-blank"===ah?k.text.inverse:k.text.muted},children:(0,d.jsx)("span",{children:"Fill in the Blank"})}),(0,d.jsx)(m,{onClick:()=>ai("create-sentences"),style:{background:"create-sentences"===ah?`linear-gradient(135deg, ${k.primary}, ${k.primaryDark})`:k.border.medium,color:"create-sentences"===ah?k.text.inverse:k.text.muted},children:(0,d.jsx)("span",{children:"Create Sentences"})})]}),"fill-blank"===ah&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aS,{children:(0,d.jsx)(aT,{children:aa.map((a,b)=>(0,d.jsx)(aU,{isActive:b===$,children:(0,d.jsxs)(aQ,{children:[a5(a,b),(0,d.jsx)(aR,{children:(0,d.jsx)(m,{onClick:()=>{ak&&am===$?a8():ak||a7($)},disabled:ak&&am!==$,children:(0,d.jsx)("span",{children:ak&&am===$?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s,{}),"Stop Recording"]}):"Record Answer"})})}),a.transcriptionError&&(0,d.jsx)(v,{type:"error",children:a.transcriptionError})]})},a.id))})}),(0,d.jsxs)(aV,{children:[(0,d.jsx)(aW,{onClick:()=>_(Math.max(0,$-1)),disabled:0===$,children:(0,d.jsx)("span",{children:"← Previous"})}),(0,d.jsx)(aX,{children:(0,d.jsx)(aY,{progress:($+1)/aa.length*100})}),(0,d.jsx)(aW,{onClick:()=>_(Math.min(aa.length-1,$+1)),disabled:$===aa.length-1,children:(0,d.jsx)("span",{children:"Next →"})})]}),(0,d.jsxs)(aZ,{children:["Sentence ",$+1," of"," ",aa.length]})]}),"create-sentences"===ah&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aS,{children:(0,d.jsx)(aT,{children:ad.map((a,b)=>(0,d.jsx)(aU,{isActive:b===af,children:(0,d.jsx)(aQ,{children:a9(a,b)})},a.id))})}),(0,d.jsxs)(aV,{children:[(0,d.jsx)(aW,{onClick:()=>ag(Math.max(0,af-1)),disabled:0===af,children:(0,d.jsx)("span",{children:"← Previous"})}),(0,d.jsx)(aX,{children:(0,d.jsx)(aY,{progress:(af+1)/ad.length*100})}),(0,d.jsx)(aW,{onClick:()=>ag(Math.min(ad.length-1,af+1)),disabled:af===ad.length-1,children:(0,d.jsx)("span",{children:"Next →"})})]}),(0,d.jsxs)(aZ,{children:["Word ",af+1," of"," ",ad.length]})]})]}),4===T&&(0,d.jsx)(aN,{sentences:H})]}),a&&(0,d.jsx)(r,{children:a}),(0,d.jsx)(G,{modalState:X,onClose:()=>{Y(a=>({...a,isOpen:!1,apiData:null,gptDefinition:""})),document.body.style.overflow=""}})]})}},65100:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechHypothesis=void 0;class c{constructor(a,b){this.privSpeechHypothesis=JSON.parse(a),this.updateOffset(b)}static fromJSON(a,b){return new c(a,b)}updateOffset(a){this.privSpeechHypothesis.Offset+=a}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}b.SpeechHypothesis=c},65133:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisStartedEvent=b.ConnectingToSynthesisServiceEvent=b.SynthesisTriggeredEvent=b.SpeechSynthesisEvent=void 0;let d=c(94705);class e extends d.PlatformEvent{constructor(a,b,c=d.EventType.Info){super(a,c),this.privRequestId=b}get requestId(){return this.privRequestId}}b.SpeechSynthesisEvent=e;class f extends e{constructor(a,b,c){super("SynthesisTriggeredEvent",a),this.privSessionAudioDestinationId=b,this.privTurnAudioDestinationId=c}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}b.SynthesisTriggeredEvent=f;class g extends e{constructor(a,b){super("ConnectingToSynthesisServiceEvent",a),this.privAuthFetchEventId=b}get authFetchEventId(){return this.privAuthFetchEventId}}b.ConnectingToSynthesisServiceEvent=g;class h extends e{constructor(a,b){super("SynthesisStartedEvent",a),this.privAuthFetchEventId=b}get authFetchEventId(){return this.privAuthFetchEventId}}b.SynthesisStartedEvent=h},65543:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PushAudioOutputStreamImpl=b.PushAudioOutputStream=b.PullAudioOutputStreamImpl=b.PullAudioOutputStream=b.AudioOutputStream=void 0;let d=c(94705),e=c(87470),f=c(10340);class g{constructor(){return}static createPullStream(){return h.create()}}b.AudioOutputStream=g;class h extends g{static create(){return new i}}b.PullAudioOutputStream=h;class i extends h{constructor(){super(),this.privId=(0,d.createNoDashGuid)(),this.privStream=new d.Stream}set format(a){null==a&&(this.privFormat=f.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=a}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(a){let b=new Int8Array(a),c=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>a.byteLength)return b.set(this.privLastChunkView.slice(0,a.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(a.byteLength),Promise.resolve(a.byteLength);b.set(this.privLastChunkView),c=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;c<a.byteLength&&!this.privStream.isReadEnded;){let d=await this.privStream.read();if(void 0===d||d.isEnd)this.privStream.readEnded();else{let e;d.buffer.byteLength>a.byteLength-c?(e=d.buffer.slice(0,a.byteLength-c),this.privLastChunkView=new Int8Array(d.buffer.slice(a.byteLength-c))):e=d.buffer,b.set(new Int8Array(e),c),c+=e.byteLength}}return c}write(a){e.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}b.PullAudioOutputStreamImpl=i;class j extends g{constructor(){super()}static create(a){return new k(a)}}b.PushAudioOutputStream=j;class k extends j{constructor(a){super(),this.privId=(0,d.createNoDashGuid)(),this.privCallback=a}set format(a){}write(a){this.privCallback.write&&this.privCallback.write(a)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}b.PushAudioOutputStreamImpl=k},65916:(a,b,c)=>{"use strict";let d=c(94735),e=c(55591),f=c(81630),g=c(91645),h=c(34631),{randomBytes:i,createHash:j}=c(55511),{Readable:k}=c(27910),{URL:l}=c(79551),m=c(49695),n=c(72482),o=c(77662),{BINARY_TYPES:p,EMPTY_BUFFER:q,GUID:r,kStatusCode:s,kWebSocket:t,NOOP:u}=c(57738),{addEventListener:v,removeEventListener:w}=c(23765),{format:x,parse:y}=c(38426),{toBuffer:z}=c(36534),A=["CONNECTING","OPEN","CLOSING","CLOSED"],B=[8,13],C=3e4;class D extends d{constructor(a,b,c){super(),this._binaryType=p[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=D.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(b)?b=b.join(", "):"object"==typeof b&&null!==b&&(c=b,b=void 0),E(this,a,b,c)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(a){p.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(a){}get onerror(){}set onerror(a){}get onopen(){}set onopen(a){}get onmessage(){}set onmessage(a){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new n(this.binaryType,this._extensions,this._isServer,c);this._sender=new o(a,this._extensions),this._receiver=d,this._socket=a,d[t]=this,a[t]=this,d.on("conclude",K),d.on("drain",L),d.on("error",M),d.on("message",O),d.on("ping",P),d.on("pong",Q),a.setTimeout(0),a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",S),a.on("data",T),a.on("end",U),a.on("error",V),this._readyState=D.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=D.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[m.extensionName]&&this._extensions[m.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=D.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING){let a="WebSocket was closed before the connection was established";return I(this,this._req,a)}if(this.readyState===D.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=D.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),C)}}ping(a,b,c){if(this.readyState===D.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==D.OPEN)return void J(this,a,c);void 0===b&&(b=!this._isServer),this._sender.ping(a||q,b,c)}pong(a,b,c){if(this.readyState===D.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==D.OPEN)return void J(this,a,c);void 0===b&&(b=!this._isServer),this._sender.pong(a||q,b,c)}send(a,b,c){if(this.readyState===D.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==D.OPEN)return void J(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[m.extensionName]||(d.compress=!1),this._sender.send(a||q,d,c)}terminate(){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING){let a="WebSocket was closed before the connection was established";return I(this,this._req,a)}this._socket&&(this._readyState=D.CLOSING,this._socket.destroy())}}}function E(a,b,c,d){let g,h,k={protocolVersion:B[1],maxPayload:0x6400000,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...d,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!B.includes(k.protocolVersion))throw RangeError(`Unsupported protocol version: ${k.protocolVersion} (supported versions: ${B.join(", ")})`);b instanceof l?(g=b,a._url=b.href):(g=new l(b),a._url=b);let n="ws+unix:"===g.protocol;if(!g.host&&(!n||!g.pathname)){let b=Error(`Invalid URL: ${a.url}`);if(0!==a._redirects)return void F(a,b);throw b}let o="wss:"===g.protocol||"https:"===g.protocol,p=o?443:80,q=i(16).toString("base64"),s=o?e.get:f.get;if(k.createConnection=o?H:G,k.defaultPort=k.defaultPort||p,k.port=g.port||p,k.host=g.hostname.startsWith("[")?g.hostname.slice(1,-1):g.hostname,k.headers={"Sec-WebSocket-Version":k.protocolVersion,"Sec-WebSocket-Key":q,Connection:"Upgrade",Upgrade:"websocket",...k.headers},k.path=g.pathname+g.search,k.timeout=k.handshakeTimeout,k.perMessageDeflate&&(h=new m(!0!==k.perMessageDeflate?k.perMessageDeflate:{},!1,k.maxPayload),k.headers["Sec-WebSocket-Extensions"]=x({[m.extensionName]:h.offer()})),c&&(k.headers["Sec-WebSocket-Protocol"]=c),k.origin&&(k.protocolVersion<13?k.headers["Sec-WebSocket-Origin"]=k.origin:k.headers.Origin=k.origin),(g.username||g.password)&&(k.auth=`${g.username}:${g.password}`),n){let a=k.path.split(":");k.socketPath=a[0],k.path=a[1]}if(k.followRedirects){if(0===a._redirects){a._originalUnixSocket=n,a._originalSecure=o,a._originalHostOrSocketPath=n?k.socketPath:g.host;let b=d&&d.headers;if(d={...d,headers:{}},b)for(let[a,c]of Object.entries(b))d.headers[a.toLowerCase()]=c}else{let b=n?!!a._originalUnixSocket&&k.socketPath===a._originalHostOrSocketPath:!a._originalUnixSocket&&g.host===a._originalHostOrSocketPath;b&&(!a._originalSecure||o)||(delete k.headers.authorization,delete k.headers.cookie,b||delete k.headers.host,k.auth=void 0)}k.auth&&!d.headers.authorization&&(d.headers.authorization="Basic "+Buffer.from(k.auth).toString("base64"))}let t=a._req=s(k);k.timeout&&t.on("timeout",()=>{I(a,t,"Opening handshake has timed out")}),t.on("error",b=>{null===t||t.aborted||(t=a._req=null,F(a,b))}),t.on("response",e=>{let f=e.headers.location,g=e.statusCode;if(f&&k.followRedirects&&g>=300&&g<400){let e;if(++a._redirects>k.maxRedirects)return void I(a,t,"Maximum redirects exceeded");t.abort();try{e=new l(f,b)}catch(b){F(a,b);return}E(a,e,c,d)}else a.emit("unexpected-response",t,e)||I(a,t,`Unexpected server response: ${e.statusCode}`)}),t.on("upgrade",(b,d,e)=>{let f;if(a.emit("upgrade",b),a.readyState!==D.CONNECTING)return;t=a._req=null;let g=b.headers.upgrade;if(void 0===g||"websocket"!==g.toLowerCase())return void I(a,d,"Invalid Upgrade header");let i=j("sha1").update(q+r).digest("base64");if(b.headers["sec-websocket-accept"]!==i)return void I(a,d,"Invalid Sec-WebSocket-Accept header");let l=b.headers["sec-websocket-protocol"],n=(c||"").split(/, */);if(!c&&l?f="Server sent a subprotocol but none was requested":c&&!l?f="Server sent no subprotocol":l&&!n.includes(l)&&(f="Server sent an invalid subprotocol"),f)return void I(a,d,f);l&&(a._protocol=l);let o=b.headers["sec-websocket-extensions"];if(void 0!==o){let b;if(!h)return void I(a,d,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{b=y(o)}catch(b){I(a,d,"Invalid Sec-WebSocket-Extensions header");return}let c=Object.keys(b);if(c.length){if(1!==c.length||c[0]!==m.extensionName)return void I(a,d,"Server indicated an extension that was not requested");try{h.accept(b[m.extensionName])}catch(b){I(a,d,"Invalid Sec-WebSocket-Extensions header");return}a._extensions[m.extensionName]=h}}a.setSocket(d,e,k.maxPayload)})}function F(a,b){a._readyState=D.CLOSING,a.emit("error",b),a.emitClose()}function G(a){return a.path=a.socketPath,g.connect(a)}function H(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function I(a,b,c){a._readyState=D.CLOSING;let d=Error(c);Error.captureStackTrace(d,I),b.setHeader?(b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),b.once("abort",a.emitClose.bind(a)),a.emit("error",d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function J(a,b,c){if(b){let c=z(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}c&&c(Error(`WebSocket is not open: readyState ${a.readyState} (${A[a.readyState]})`))}function K(a,b){let c=this[t];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[t]&&(c._socket.removeListener("data",T),process.nextTick(R,c._socket),1005===a?c.close():c.close(a,b))}function L(){this[t]._socket.resume()}function M(a){let b=this[t];void 0!==b._socket[t]&&(b._socket.removeListener("data",T),process.nextTick(R,b._socket),b.close(a[s])),b.emit("error",a)}function N(){this[t].emitClose()}function O(a){this[t].emit("message",a)}function P(a){let b=this[t];b.pong(a,!b._isServer,u),b.emit("ping",a)}function Q(a){this[t].emit("pong",a)}function R(a){a.resume()}function S(){let a,b=this[t];this.removeListener("close",S),this.removeListener("data",T),this.removeListener("end",U),b._readyState=D.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[t]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",N),b._receiver.on("finish",N))}function T(a){this[t]._receiver.write(a)||this.pause()}function U(){let a=this[t];a._readyState=D.CLOSING,a._receiver.end(),this.end()}function V(){let a=this[t];this.removeListener("error",V),this.on("error",u),a&&(a._readyState=D.CLOSING,this.destroy())}Object.defineProperty(D,"CONNECTING",{enumerable:!0,value:A.indexOf("CONNECTING")}),Object.defineProperty(D.prototype,"CONNECTING",{enumerable:!0,value:A.indexOf("CONNECTING")}),Object.defineProperty(D,"OPEN",{enumerable:!0,value:A.indexOf("OPEN")}),Object.defineProperty(D.prototype,"OPEN",{enumerable:!0,value:A.indexOf("OPEN")}),Object.defineProperty(D,"CLOSING",{enumerable:!0,value:A.indexOf("CLOSING")}),Object.defineProperty(D.prototype,"CLOSING",{enumerable:!0,value:A.indexOf("CLOSING")}),Object.defineProperty(D,"CLOSED",{enumerable:!0,value:A.indexOf("CLOSED")}),Object.defineProperty(D.prototype,"CLOSED",{enumerable:!0,value:A.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(a=>{Object.defineProperty(D.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(D.prototype,`on${a}`,{enumerable:!0,get(){let b=this.listeners(a);for(let a=0;a<b.length;a++)if(b[a]._listener)return b[a]._listener},set(b){let c=this.listeners(a);for(let b=0;b<c.length;b++)c[b]._listener&&this.removeListener(a,c[b]);this.addEventListener(a,b)}})}),D.prototype.addEventListener=v,D.prototype.removeEventListener=w,a.exports=D},66422:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.NextAction=void 0,function(a){a.None="None",a.Synthesize="Synthesize"}(c=b.NextAction||(b.NextAction={}))},66947:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AutoDetectSourceLanguageResult=void 0;let d=c(87470);class e{constructor(a,b){d.Contracts.throwIfNullOrUndefined(a,"language"),d.Contracts.throwIfNullOrUndefined(b,"languageDetectionConfidence"),this.privLanguage=a,this.privLanguageDetectionConfidence=b}static fromResult(a){return new e(a.language,a.languageDetectionConfidence)}static fromConversationTranscriptionResult(a){return new e(a.language,a.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}b.AutoDetectSourceLanguageResult=e},67008:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},67220:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};let e=c(94735),f=d(c(91268)),g=d(c(6796)),h=f.default("agent-base");function i(a){return!!a&&"function"==typeof a.addRequest}function j(){let{stack:a}=Error();return"string"==typeof a&&a.split("\n").some(a=>-1!==a.indexOf("(https.js:")||-1!==a.indexOf("node:https:"))}function k(a,b){return new k.Agent(a,b)}!function(a){class b extends e.EventEmitter{constructor(a,b){super();let c=b;"function"==typeof a?this.callback=a:a&&(c=a),this.timeout=null,c&&"number"==typeof c.timeout&&(this.timeout=c.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:j()?443:80}set defaultPort(a){this.explicitDefaultPort=a}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:j()?"https:":"http:"}set protocol(a){this.explicitProtocol=a}callback(a,b,c){throw Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(a,b){let c=Object.assign({},b);"boolean"!=typeof c.secureEndpoint&&(c.secureEndpoint=j()),null==c.host&&(c.host="localhost"),null==c.port&&(c.port=c.secureEndpoint?443:80),null==c.protocol&&(c.protocol=c.secureEndpoint?"https:":"http:"),c.host&&c.path&&delete c.path,delete c.agent,delete c.hostname,delete c._defaultAgent,delete c.defaultPort,delete c.createConnection,a._last=!0,a.shouldKeepAlive=!1;let d=!1,e=null,f=c.timeout||this.timeout,k=b=>{a._hadError||(a.emit("error",b),a._hadError=!0)},l=()=>{e=null,d=!0;let a=Error(`A "socket" was not created for HTTP request before ${f}ms`);a.code="ETIMEOUT",k(a)},m=a=>{d||(null!==e&&(clearTimeout(e),e=null),k(a))},n=b=>{if(!d){if(null!=e&&(clearTimeout(e),e=null),i(b)){h("Callback returned another Agent instance %o",b.constructor.name),b.addRequest(a,c);return}if(b){b.once("free",()=>{this.freeSocket(b,c)}),a.onSocket(b);return}k(Error(`no Duplex stream was returned to agent-base for \`${a.method} ${a.path}\``))}};if("function"!=typeof this.callback)return void k(Error("`callback` is not defined"));this.promisifiedCallback||(this.callback.length>=3?(h("Converting legacy callback function to promise"),this.promisifiedCallback=g.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof f&&f>0&&(e=setTimeout(l,f)),"port"in c&&"number"!=typeof c.port&&(c.port=Number(c.port));try{h("Resolving socket for %o request: %o",c.protocol,`${a.method} ${a.path}`),Promise.resolve(this.promisifiedCallback(a,c)).then(n,m)}catch(a){Promise.reject(a).catch(m)}}freeSocket(a,b){h("Freeing socket %o %o",a.constructor.name,b),a.destroy()}destroy(){h("Destroying agent %o",this.constructor.name)}}a.Agent=b,a.prototype=a.Agent.prototype}(k||(k={})),a.exports=k},67406:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechConnectionFactory=void 0;let d=c(9403),e=c(35961),f=c(41686),g=c(8941),h=c(35961),i=c(89393),j=c(1255),k=c(38786);class l extends g.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(a,b,c){let l=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Endpoint,void 0),m=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Region,void 0),n=g.ConnectionFactoryBase.getHostSuffix(m),o=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Host,"wss://"+m+".stt.speech"+n),p={},q=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_EndpointId,void 0),r=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(q?l&&-1!==l.search(j.QueryParameterNames.CustomSpeechDeploymentId)||(p[j.QueryParameterNames.CustomSpeechDeploymentId]=q):r&&(!l||-1===l.search(j.QueryParameterNames.Language))&&(p[j.QueryParameterNames.Language]=r),l&&-1!==l.search(j.QueryParameterNames.Format)||(p[j.QueryParameterNames.Format]=a.parameters.getProperty(e.OutputFormatPropertyName,f.OutputFormat[f.OutputFormat.Simple]).toLowerCase()),void 0!==a.autoDetectSourceLanguages&&(p[j.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(a,p,l),l){let b=new URL(l),c=b.pathname;(""===c||"/"===c)&&(b.pathname=this.universalUri+a.recognitionEndpointVersion,l=await g.ConnectionFactoryBase.getRedirectUrlFromEndpoint(b.toString()))}if(!l)switch(a.recognitionMode){case k.RecognitionMode.Conversation:l="true"===a.parameters.getProperty(e.ForceDictationPropertyName,"false")?o+this.dictationRelativeUri:void 0!==a.recognitionEndpointVersion&&parseInt(a.recognitionEndpointVersion,10)>1?`${o}${this.universalUri}${a.recognitionEndpointVersion}`:o+this.conversationRelativeUri;break;case k.RecognitionMode.Dictation:l=o+this.dictationRelativeUri;break;default:l=void 0!==a.recognitionEndpointVersion&&parseInt(a.recognitionEndpointVersion,10)>1?`${o}${this.universalUri}${a.recognitionEndpointVersion}`:o+this.interactiveRelativeUri}let s={};void 0!==b.token&&""!==b.token&&(s[b.headerName]=b.token),s[i.HeaderNames.ConnectionId]=c,s.connectionId=c;let t="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),u=new d.WebsocketConnection(l,p,s,new h.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),t,c),v=u.uri;return a.parameters.setProperty(f.PropertyId.SpeechServiceConnection_Url,v),u}}b.SpeechConnectionFactory=l},67460:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PropertyCollection=void 0;let d=c(41686);class e{constructor(){this.privKeys=[],this.privValues=[]}getProperty(a,b){let c;c="string"==typeof a?a:d.PropertyId[a];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===c)return this.privValues[a];if(void 0!==b)return String(b)}setProperty(a,b){let c;c="string"==typeof a?a:d.PropertyId[a];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===c){this.privValues[a]=b;return}this.privKeys.push(c),this.privValues.push(b)}clone(){let a=new e;for(let b=0;b<this.privKeys.length;b++)a.privKeys.push(this.privKeys[b]),a.privValues.push(this.privValues[b]);return a}mergeTo(a){this.privKeys.forEach(b=>{if(void 0===a.getProperty(b,void 0)){let c=this.getProperty(b);a.setProperty(b,c)}})}get keys(){return this.privKeys}}b.PropertyCollection=e},67587:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechKeyword=void 0;class c{constructor(a,b){this.privSpeechKeyword=JSON.parse(a),this.privSpeechKeyword.Offset+=b}static fromJSON(a,b){return new c(a,b)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}}b.SpeechKeyword=c},67802:a=>{var b=1e3,c=6e4,d=36e5,e=864e5,f=6048e5,g=315576e5;function h(a){if(!((a=String(a)).length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(h){var i=parseFloat(h[1]),j=(h[2]||"ms").toLowerCase();switch(j){case"years":case"year":case"yrs":case"yr":case"y":return i*g;case"weeks":case"week":case"w":return i*f;case"days":case"day":case"d":return i*e;case"hours":case"hour":case"hrs":case"hr":case"h":return i*d;case"minutes":case"minute":case"mins":case"min":case"m":return i*c;case"seconds":case"second":case"secs":case"sec":case"s":return i*b;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function i(a){var f=Math.abs(a);return f>=e?Math.round(a/e)+"d":f>=d?Math.round(a/d)+"h":f>=c?Math.round(a/c)+"m":f>=b?Math.round(a/b)+"s":a+"ms"}function j(a){var f=Math.abs(a);return f>=e?k(a,f,e,"day"):f>=d?k(a,f,d,"hour"):f>=c?k(a,f,c,"minute"):f>=b?k(a,f,b,"second"):a+" ms"}function k(a,b,c,d){var e=b>=1.5*c;return Math.round(a/c)+" "+d+(e?"s":"")}a.exports=function(a,b){b=b||{};var c=typeof a;if("string"===c&&a.length>0)return h(a);if("number"===c&&isFinite(a))return b.long?j(a):i(a);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},67997:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.LanguageIdMode=void 0,function(a){a[a.AtStart=0]="AtStart",a[a.Continuous=1]="Continuous"}(c=b.LanguageIdMode||(b.LanguageIdMode={}))},68375:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TurnStatusResponsePayload=void 0;class c{constructor(a){this.privMessageStatusResponse=JSON.parse(a)}static fromJSON(a){return new c(a)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}b.TurnStatusResponsePayload=c},68477:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranscriptionServiceRecognizer=void 0;let d=c(94705),e=c(41686),f=c(35961),g=c(42436);class h extends f.ConversationServiceRecognizer{constructor(a,b,c,d,f){super(a,b,c,d,f),this.privTranscriberRecognizer=f,this.sendPrePayloadJSONOverride=a=>this.sendTranscriptionStartJSON(a),"true"===this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,b){if(this.privRequestSession.isRecognizing){let c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,b))}}async sendMeetingSpeechEventAsync(a,b){if(this.privRequestSession.isRecognizing){let c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,b))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,b,c){try{let d=new e.SpeechRecognitionEventArgs(a,b,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,d),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(a){}}handleRecognizingCallback(a,b,c){try{let d=new e.SpeechRecognitionEventArgs(a,b,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,d)}catch(a){}}cancelRecognition(a,b,c,d,g){let h=new e.PropertyCollection;if(h.setProperty(f.CancellationErrorCodePropertyName,e.CancellationErrorCode[d]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){let b=new e.MeetingTranscriptionCanceledEventArgs(c,g,d,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,b)}catch{}}}else if(this.privTranscriberRecognizer.canceled){let b=new e.ConversationTranscriptionCanceledEventArgs(c,g,d,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,b)}catch{}}if(this.privSuccessCallback){let a=new e.SpeechRecognitionResult(b,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,h);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){let b=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(b,"start");await this.sendSpeechEvent(a,c)}else{let b=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(b,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,b){let c=JSON.stringify(b);if(c)return a.send(new g.SpeechConnectionMessage(d.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,b){let c={id:"meeting",name:b,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,b){let c={id:"meeting",name:b,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}}b.TranscriptionServiceRecognizer=h},68800:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisAdapterBase=void 0;let d=c(94705),e=c(41686),f=c(35961),g=c(42436);class h{constructor(a,b,c,g){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new d.ArgumentNullError("authentication");if(!b)throw new d.ArgumentNullError("connectionFactory");if(!c)throw new d.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=b,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=g,this.privSynthesisTurn=new f.SynthesisTurn,this.privConnectionEvents=new d.EventSource,this.privServiceEvents=new d.EventSource,this.privSynthesisContext=new f.SynthesisContext,this.privAgentConfig=new f.AgentConfig,this.connectionEvents.attach(a=>{if("ConnectionClosedEvent"===a.name){let b=a;1e3!==b.statusCode&&this.cancelSynthesisLocal(e.CancellationReason.Error,1007===b.statusCode?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${b.reason} websocket error code: ${b.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=a),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){let b=await this.privConnectionConfigurationPromise;await b.dispose(a)}}async connect(){await this.connectImpl()}async sendNetworkMessage(a,b){let c="string"==typeof b?d.MessageType.Text:d.MessageType.Binary,e="string"==typeof b?"application/json":"";return(await this.fetchConnection()).send(new g.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,e,b))}async Speak(a,b,c,d,f,g){let h;if(h=b?a:this.privSynthesizer.buildSsml(a),void 0!==this.speakOverride)return this.speakOverride(h,c,d,f);this.privSuccessCallback=d,this.privErrorCallback=f,this.privSynthesisTurn.startNewSynthesis(c,a,b,g);try{await this.connectImpl();let a=await this.fetchConnection();await this.sendSynthesisContext(a),await this.sendSsmlMessage(a,h,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(a){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,a),Promise.reject(a)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new g.SpeechConnectionMessage(d.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,b,c,d){let g=new e.PropertyCollection;g.setProperty(f.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]);let h=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,d,g);if(this.onSynthesisCancelled(h),this.privSuccessCallback)try{this.privSuccessCallback(h)}catch{}}cancelSynthesisLocal(a,b,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,b,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{let a=await this.fetchConnection(),b=await a.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!b)if(!this.privSynthesisTurn.isSynthesizing)return;else return this.receiveMessage();let c=g.SpeechConnectionMessage.fromConnectionMessage(b);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":for(let a of f.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata)switch(a.Type){case f.MetadataType.WordBoundary:case f.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(a);let b=new e.SpeechSynthesisWordBoundaryEventArgs(a.Data.Offset,a.Data.Duration,a.Data.text.Text,a.Data.text.Length,a.Type===f.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,a.Data.text.BoundaryType);this.onWordBoundary(b);break;case f.MetadataType.Bookmark:let c=new e.SpeechSynthesisBookmarkEventArgs(a.Data.Offset,a.Data.Bookmark);this.onBookmarkReached(c);break;case f.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(a),a.Data.IsLastAnimation){let b=new e.SpeechSynthesisVisemeEventArgs(a.Data.Offset,a.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(b)}break;case f.MetadataType.AvatarSignal:this.onAvatarEvent(a);break;case f.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(a)}break;case"turn.end":let h;this.privSynthesisTurn.onServiceTurnEndResponse();try{h=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(h)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.onSynthesisCompleted(h);break;default:!this.processTypeSpecificMessages(c)&&this.privServiceEvents&&this.serviceEvents.onEvent(new d.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch(a){}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();let b=this.synthesisContext.toJSON();if(b)return a.send(new g.SpeechConnectionMessage(d.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",b))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then(a=>a.state()===d.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,d.createNoDashGuid)(),this.privConnectionId=(0,d.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);let b=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=b.then(async b=>{this.privSynthesisTurn.onAuthCompleted(!1);let c=await this.privConnectionFactory.create(this.privSynthesizerConfig,b,this.privConnectionId);c.events.attach(a=>{this.connectionEvents.onEvent(a)});let d=await c.open();return 200===d.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(d.statusCode),Promise.resolve(c)):403!==d.statusCode||a?(this.privSynthesisTurn.onConnectionEstablishCompleted(d.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${d.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${d.reason}`)):this.connectImpl(!0)},a=>{throw this.privSynthesisTurn.onAuthCompleted(!0),Error(a)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,b){if(b)return a.send(new g.SpeechConnectionMessage(d.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",b))}sendSsmlMessage(a,b,c){return a.send(new g.SpeechConnectionMessage(d.MessageType.Text,"ssml",c,"application/ssml+xml",b))}async fetchConnection(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(a=>a.state()===d.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){let a=await this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}}b.SynthesisAdapterBase=h,h.telemetryDataEnabled=!0},69387:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},70274:(a,b,c)=>{Promise.resolve().then(c.bind(c,64842))},70278:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranscriptionCanceledEventArgs=void 0;let d=c(17528);class e extends d.CancellationEventArgsBase{}b.ConversationTranscriptionCanceledEventArgs=e},70438:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisResult=void 0;class c{constructor(a,b,c,d){this.privResultId=a,this.privReason=b,this.privErrorDetails=c,this.privProperties=d}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}b.SynthesisResult=c},70553:(a,b,c)=>{"use strict";let d,e;c.r(b),c.d(b,{NIL:()=>B,parse:()=>s,stringify:()=>o,v1:()=>r,v3:()=>x,v4:()=>z,v5:()=>A,validate:()=>l,version:()=>C});var f=c(55511),g=c.n(f);let h=new Uint8Array(256),i=h.length;function j(){return i>h.length-16&&(g().randomFillSync(h),i=0),h.slice(i,i+=16)}let k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(a){return"string"==typeof a&&k.test(a)},m=[];for(let a=0;a<256;++a)m.push((a+256).toString(16).slice(1));function n(a,b=0){return m[a[b+0]]+m[a[b+1]]+m[a[b+2]]+m[a[b+3]]+"-"+m[a[b+4]]+m[a[b+5]]+"-"+m[a[b+6]]+m[a[b+7]]+"-"+m[a[b+8]]+m[a[b+9]]+"-"+m[a[b+10]]+m[a[b+11]]+m[a[b+12]]+m[a[b+13]]+m[a[b+14]]+m[a[b+15]]}let o=function(a,b=0){let c=n(a,b);if(!l(c))throw TypeError("Stringified UUID is invalid");return c},p=0,q=0,r=function(a,b,c){let f=b&&c||0,g=b||Array(16),h=(a=a||{}).node||d,i=void 0!==a.clockseq?a.clockseq:e;if(null==h||null==i){let b=a.random||(a.rng||j)();null==h&&(h=d=[1|b[0],b[1],b[2],b[3],b[4],b[5]]),null==i&&(i=e=(b[6]<<8|b[7])&16383)}let k=void 0!==a.msecs?a.msecs:Date.now(),l=void 0!==a.nsecs?a.nsecs:q+1,m=k-p+(l-q)/1e4;if(m<0&&void 0===a.clockseq&&(i=i+1&16383),(m<0||k>p)&&void 0===a.nsecs&&(l=0),l>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");p=k,q=l,e=i;let o=((0xfffffff&(k+=122192928e5))*1e4+l)%0x100000000;g[f++]=o>>>24&255,g[f++]=o>>>16&255,g[f++]=o>>>8&255,g[f++]=255&o;let r=k/0x100000000*1e4&0xfffffff;g[f++]=r>>>8&255,g[f++]=255&r,g[f++]=r>>>24&15|16,g[f++]=r>>>16&255,g[f++]=i>>>8|128,g[f++]=255&i;for(let a=0;a<6;++a)g[f+a]=h[a];return b||n(g)},s=function(a){let b;if(!l(a))throw TypeError("Invalid UUID");let c=new Uint8Array(16);return c[0]=(b=parseInt(a.slice(0,8),16))>>>24,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c[4]=(b=parseInt(a.slice(9,13),16))>>>8,c[5]=255&b,c[6]=(b=parseInt(a.slice(14,18),16))>>>8,c[7]=255&b,c[8]=(b=parseInt(a.slice(19,23),16))>>>8,c[9]=255&b,c[10]=(b=parseInt(a.slice(24,36),16))/0x10000000000&255,c[11]=b/0x100000000&255,c[12]=b>>>24&255,c[13]=b>>>16&255,c[14]=b>>>8&255,c[15]=255&b,c};function t(a){a=unescape(encodeURIComponent(a));let b=[];for(let c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b}let u="6ba7b810-9dad-11d1-80b4-00c04fd430c8",v="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function w(a,b,c){function d(a,d,e,f){var g;if("string"==typeof a&&(a=t(a)),"string"==typeof d&&(d=s(d)),(null==(g=d)?void 0:g.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+a.length);if(h.set(d),h.set(a,d.length),(h=c(h))[6]=15&h[6]|b,h[8]=63&h[8]|128,e){f=f||0;for(let a=0;a<16;++a)e[f+a]=h[a];return e}return n(h)}try{d.name=a}catch(a){}return d.DNS=u,d.URL=v,d}let x=w("v3",48,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),g().createHash("md5").update(a).digest()}),y={randomUUID:g().randomUUID},z=function(a,b,c){if(y.randomUUID&&!b&&!a)return y.randomUUID();let d=(a=a||{}).random||(a.rng||j)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){c=c||0;for(let a=0;a<16;++a)b[c+a]=d[a];return b}return n(d)},A=w("v5",80,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),g().createHash("sha1").update(a).digest()}),B="00000000-0000-0000-0000-000000000000",C=function(a){if(!l(a))throw TypeError("Invalid UUID");return parseInt(a.slice(14,15),16)}},70781:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FileAudioSource=void 0;let d=c(35961),e=c(94705),f=c(57645);class g{constructor(a,b,c){this.privStreams={},this.privHeaderEnd=44,this.privId=c||(0,e.createNoDashGuid)(),this.privEvents=new e.EventSource,this.privSource=a,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=a.name:this.privFilename=b||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){let a=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(a,"")),Promise.reject(a)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(a){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,a));let b=await this.upload(a);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,a)),Promise.resolve({detach:async()=>{b.readEnded(),delete this.privStreams[a],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)),await this.turnOff()},id:()=>a,read:()=>b.read()})}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)))}turnOff(){for(let a in this.privStreams)if(a){let b=this.privStreams[a];b&&!b.isClosed&&b.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(a=>Promise.resolve({bitspersample:a.bitsPerSample,channelcount:a.channels,connectivity:d.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:a.samplesPerSec,type:d.type.File}))}readHeader(){let a=4296,b=this.privSource.slice(0,a),c=new e.Deferred,d=b=>{let d=new DataView(b),e=a=>String.fromCharCode(d.getUint8(a),d.getUint8(a+1),d.getUint8(a+2),d.getUint8(a+3));if("RIFF"!==e(0))return void c.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==e(8)||"fmt "!==e(12))return void c.reject("Invalid WAV header in file, WAVEfmt was not found");let g=d.getInt32(16,!0),h=d.getUint16(22,!0),i=d.getUint32(24,!0),j=d.getUint16(34,!0),k=36+Math.max(g-16,0);for(;"data"!==e(k);k+=2)if(k>a-8)return void c.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=k+8,c.resolve(f.AudioStreamFormat.getWaveFormatPCM(i,j,h))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&b instanceof Blob){let a=new FileReader;a.onload=a=>{d(a.target.result)},a.readAsArrayBuffer(b)}else{let a=b;d(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}return c.promise}async upload(a){let b=b=>{let c=`Error occurred while processing '${this.privFilename}'. ${b}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,a,c)),Error(c)};try{await this.turnOn();let c=await this.privAudioFormatPromise,d=new e.ChunkedArrayBufferStream(c.avgBytesPerSec/10,a);this.privStreams[a]=d;let f=this.privSource.slice(this.privHeaderEnd),g=a=>{d.isClosed||(d.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()}),d.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&f instanceof Blob){let a=new FileReader;a.onerror=a=>b(a.toString()),a.onload=a=>{let b=a.target.result;g(b)},a.readAsArrayBuffer(f)}else{let a=f;g(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}return d}catch(a){b(a)}}onEvent(a){this.privEvents.onEvent(a),e.Events.instance.onEvent(a)}}b.FileAudioSource=g},70982:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.WebsocketMessageFormatter=void 0;let d=c(94705),e="\r\n";class f{toConnectionMessage(a){let b=new d.Deferred;try{if(a.messageType===d.MessageType.Text){let c=a.textContent,e={},f=null;if(c){let a=c.split("\r\n\r\n");a&&a.length>0&&(e=this.parseHeaders(a[0]),a.length>1&&(f=a[1]))}b.resolve(new d.ConnectionMessage(a.messageType,f,e,a.id))}else if(a.messageType===d.MessageType.Binary){let c=a.binaryContent,e={},f=null;if(!c||c.byteLength<2)throw Error("Invalid binary message format. Header length missing.");let g=new DataView(c),h=g.getInt16(0);if(c.byteLength<h+2)throw Error("Invalid binary message format. Header content missing.");let i="";for(let a=0;a<h;a++)i+=String.fromCharCode(g.getInt8(a+2));e=this.parseHeaders(i),c.byteLength>h+2&&(f=c.slice(2+h)),b.resolve(new d.ConnectionMessage(a.messageType,f,e,a.id))}}catch(a){b.reject(`Error formatting the message. Error: ${a}`)}return b.promise}fromConnectionMessage(a){let b=new d.Deferred;try{if(a.messageType===d.MessageType.Text){let c=`${this.makeHeaders(a)}${e}${a.textBody?a.textBody:""}`;b.resolve(new d.RawWebsocketMessage(d.MessageType.Text,c,a.id))}else if(a.messageType===d.MessageType.Binary){let c=this.makeHeaders(a),e=a.binaryBody,f=this.stringToArrayBuffer(c),g=new Int8Array(f),h=g.byteLength,i=new Int8Array(2+h+(e?e.byteLength:0));if(i[0]=h>>8&255,i[1]=255&h,i.set(g,2),e){let a=new Int8Array(e);i.set(a,2+h)}let j=i.buffer;b.resolve(new d.RawWebsocketMessage(d.MessageType.Binary,j,a.id))}}catch(a){b.reject(`Error formatting the message. ${a}`)}return b.promise}makeHeaders(a){let b="";if(a.headers)for(let c in a.headers)c&&(b+=`${c}: ${a.headers[c]}${e}`);return b}parseHeaders(a){let b={};if(a){let c=a.match(/[^\r\n]+/g);if(b){for(let a of c)if(a){let c=a.indexOf(":"),d=c>0?a.substr(0,c).trim().toLowerCase():a,e=c>0&&a.length>c+1?a.substr(c+1).trim():"";b[d]=e}}}return b}stringToArrayBuffer(a){let b=new ArrayBuffer(a.length),c=new DataView(b);for(let b=0;b<a.length;b++)c.setUint8(b,a.charCodeAt(b));return b}}b.WebsocketMessageFormatter=f},72142:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.Mode=void 0,function(a){a.None="None",a.Always="Always"}(c=b.Mode||(b.Mode={}))},72482:(a,b,c)=>{"use strict";let{Writable:d}=c(27910),e=c(49695),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=c(57738),{concat:j,toArrayBuffer:k,unmask:l}=c(36534),{isValidStatusCode:m,isValidUTF8:n}=c(49e3),o=0,p=1,q=2,r=3,s=4,t=5;class u extends d{constructor(a,b,c,d){super(),this._binaryType=a||f[0],this[i]=void 0,this._extensions=b||{},this._isServer=!!c,this._maxPayload=0|d,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=o,this._loop=!1}_write(a,b,c){if(8===this._opcode&&this._state==o)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=b.slice(a),b.slice(0,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=c.slice(a)),a-=c.length}while(a>0);return b}startLoop(a){let b;this._loop=!0;do switch(this._state){case o:b=this.getInfo();break;case p:b=this.getPayloadLength16();break;case q:b=this.getPayloadLength64();break;case r:this.getMask();break;case s:b=this.getData(a);break;default:this._loop=!1;return}while(this._loop);a(b)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let a=this.consume(2);if((48&a[0])!=0)return this._loop=!1,v(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let b=(64&a[0])==64;if(b&&!this._extensions[e.extensionName])return this._loop=!1,v(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(128&a[0])==128,this._opcode=15&a[0],this._payloadLength=127&a[1],0===this._opcode){if(b)return this._loop=!1,v(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,v(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,v(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=b}else{if(!(this._opcode>7)||!(this._opcode<11))return this._loop=!1,v(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,v(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(b)return this._loop=!1,v(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,v(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&a[1])==128,this._isServer){if(!this._masked)return this._loop=!1,v(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,v(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=p;else{if(127!==this._payloadLength)return this.haveLength();this._state=q}}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let a=this.consume(8),b=a.readUInt32BE(0);return b>2097151?(this._loop=!1,v(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*b+a.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,v(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=r:this._state=s}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=s}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&l(b,this._mask)}if(this._opcode>7)return this.controlMessage(b);if(this._compressed){this._state=t,this.decompress(b,a);return}return b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage()}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return b(v(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}let d=this.dataMessage();if(d)return b(d);this.startLoop(b)})}dataMessage(){if(this._fin){let a=this._messageLength,b=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let c;c="nodebuffer"===this._binaryType?j(b,a):"arraybuffer"===this._binaryType?k(j(b,a)):b,this.emit("message",c)}else{let c=j(b,a);if(!n(c))return this._loop=!1,v(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",c.toString())}}this._state=o}controlMessage(a){if(8===this._opcode)if(this._loop=!1,0===a.length)this.emit("conclude",1005,""),this.end();else{if(1===a.length)return v(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");let b=a.readUInt16BE(0);if(!m(b))return v(RangeError,`invalid status code ${b}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let c=a.slice(2);if(!n(c))return v(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",b,c.toString()),this.end()}else 9===this._opcode?this.emit("ping",a):this.emit("pong",a);this._state=o}}function v(a,b,c,d,e){let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,v),f.code=e,f[h]=d,f}a.exports=u},72714:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.LanguageIdDetectionPriority=b.LanguageIdDetectionMode=void 0,function(a){a.DetectAtAudioStart="DetectAtAudioStart",a.DetectContinuous="DetectContinuous",a.DetectSegments="DetectSegments"}(c=b.LanguageIdDetectionMode||(b.LanguageIdDetectionMode={})),function(a){a.Auto="Auto",a.PrioritizeLatency="PrioritizeLatency",a.PrioritizeAccuracy="PrioritizeAccuracy"}(d=b.LanguageIdDetectionPriority||(b.LanguageIdDetectionPriority={}))},72762:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.SubstringMatchType=b.GroupType=void 0,function(a){a.IntentText="IntentText",a.IntentEntity="IntentEntity",a.Generic="Generic",a.People="People",a.Place="Place",a.DynamicEntity="DynamicEntity"}(c=b.GroupType||(b.GroupType={})),function(a){a.None="None",a.LeftRooted="LeftRooted",a.PartialName="PartialName",a.MiddleOfSentence="MiddleOfSentence"}(d=b.SubstringMatchType||(b.SubstringMatchType={}))},72935:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PronunciationAssessmentResult=b.ContentAssessmentResult=void 0;let d=c(87470),e=c(41686);class f{constructor(a){this.privPronJson=a}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}b.ContentAssessmentResult=f;class g{constructor(a){let b=JSON.parse(a);d.Contracts.throwIfNullOrUndefined(b.NBest[0],"NBest"),this.privPronJson=b.NBest[0]}static fromResult(a){d.Contracts.throwIfNullOrUndefined(a,"result");let b=a.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return d.Contracts.throwIfNullOrUndefined(b,"json"),new g(b)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}get contentAssessmentResult(){if(void 0!==this.detailResult.ContentAssessment)return new f(this.detailResult)}}b.PronunciationAssessmentResult=g},73104:function(module,exports,__webpack_require__){"undefined"!=typeof navigator&&function(a,b){module.exports=b()}(0,function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(a){_useWebWorker=!!a},getWebWorker=function(){return _useWebWorker},setLocationHref=function(a){locationHref=a},getLocationHref=function(){return locationHref};function createTag(a){return document.createElement(a)}function extendPrototype(a,b){var c,d,e=a.length;for(c=0;c<e;c+=1)for(var f in d=a[c].prototype)Object.prototype.hasOwnProperty.call(d,f)&&(b.prototype[f]=d[f])}function getDescriptor(a,b){return Object.getOwnPropertyDescriptor(a,b)}function createProxyFunction(a){function b(){}return b.prototype=a,b}var audioControllerFactory=function(){function a(a){this.audios=[],this.audioFactory=a,this._volume=1,this._isMuted=!1}return a.prototype={addAudio:function(a){this.audios.push(a)},pause:function(){var a,b=this.audios.length;for(a=0;a<b;a+=1)this.audios[a].pause()},resume:function(){var a,b=this.audios.length;for(a=0;a<b;a+=1)this.audios[a].resume()},setRate:function(a){var b,c=this.audios.length;for(b=0;b<c;b+=1)this.audios[b].setRate(a)},createAudio:function(a){return this.audioFactory?this.audioFactory(a):window.Howl?new window.Howl({src:[a]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(a){this.audioFactory=a},setVolume:function(a){this._volume=a,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var a,b=this.audios.length;for(a=0;a<b;a+=1)this.audios[a].volume(!this._isMuted*this._volume)}},function(){return new a}}(),createTypedArray=function(){function a(a,b){var c,d=0,e=[];switch(a){case"int16":case"uint8c":c=1;break;default:c=1.1}for(d=0;d<b;d+=1)e.push(c);return e}function b(b,c){return"float32"===b?new Float32Array(c):"int16"===b?new Int16Array(c):"uint8c"===b?new Uint8ClampedArray(c):a(b,c)}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?b:a}();function createSizedArray(a){return Array.apply(null,{length:a})}function _typeof$6(a){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var a,b=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],c=b.length;for(a=0;a<c;a+=1)BMMath[b[a]]=Math[b[a]]}(),BMMath.random=Math.random,BMMath.abs=function(a){if("object"===_typeof$6(a)&&a.length){var b,c=createSizedArray(a.length),d=a.length;for(b=0;b<d;b+=1)c[b]=Math.abs(a[b]);return c}return Math.abs(a)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(a){_shouldRoundValues=!!a}function bmRnd(a){return _shouldRoundValues?Math.round(a):a}function styleDiv(a){a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.display="block",a.style.transformOrigin="0 0",a.style.webkitTransformOrigin="0 0",a.style.backfaceVisibility="visible",a.style.webkitBackfaceVisibility="visible",a.style.transformStyle="preserve-3d",a.style.webkitTransformStyle="preserve-3d",a.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(a,b,c,d){this.type=a,this.currentTime=b,this.totalTime=c,this.direction=d<0?-1:1}function BMCompleteEvent(a,b){this.type=a,this.direction=b<0?-1:1}function BMCompleteLoopEvent(a,b,c,d){this.type=a,this.currentLoop=c,this.totalLoops=b,this.direction=d<0?-1:1}function BMSegmentStartEvent(a,b,c){this.type=a,this.firstFrame=b,this.totalFrames=c}function BMDestroyEvent(a,b){this.type=a,this.target=b}function BMRenderFrameErrorEvent(a,b){this.type="renderFrameError",this.nativeError=a,this.currentTime=b}function BMConfigErrorEvent(a){this.type="configError",this.nativeError=a}function BMAnimationConfigErrorEvent(a,b){this.type=a,this.nativeError=b}var createElementID=function(){var a=0;return function(){return a+=1,idPrefix$1+"__lottie_element_"+a}}();function HSVtoRGB(a,b,c){var d,e,f,g,h,i,j,k;switch(g=Math.floor(6*a),h=6*a-g,i=c*(1-b),j=c*(1-h*b),k=c*(1-(1-h)*b),g%6){case 0:d=c,e=k,f=i;break;case 1:d=j,e=c,f=i;break;case 2:d=i,e=c,f=k;break;case 3:d=i,e=j,f=c;break;case 4:d=k,e=i,f=c;break;case 5:d=c,e=i,f=j}return[d,e,f]}function RGBtoHSV(a,b,c){var d,e=Math.max(a,b,c),f=Math.min(a,b,c),g=e-f,h=0===e?0:g/e,i=e/255;switch(e){case f:d=0;break;case a:d=(b-c+6*(b<c)*g)/(6*g);break;case b:d=(c-a+2*g)/(6*g);break;case c:d=(a-b+4*g)/(6*g)}return[d,h,i]}function addSaturationToRGB(a,b){var c=RGBtoHSV(255*a[0],255*a[1],255*a[2]);return c[1]+=b,c[1]>1?c[1]=1:c[1]<=0&&(c[1]=0),HSVtoRGB(c[0],c[1],c[2])}function addBrightnessToRGB(a,b){var c=RGBtoHSV(255*a[0],255*a[1],255*a[2]);return c[2]+=b,c[2]>1?c[2]=1:c[2]<0&&(c[2]=0),HSVtoRGB(c[0],c[1],c[2])}function addHueToRGB(a,b){var c=RGBtoHSV(255*a[0],255*a[1],255*a[2]);return c[0]+=b/360,c[0]>1?c[0]-=1:c[0]<0&&(c[0]+=1),HSVtoRGB(c[0],c[1],c[2])}var rgbToHex=function(){var a,b,c=[];for(a=0;a<256;a+=1)b=a.toString(16),c[a]=1===b.length?"0"+b:b;return function(a,b,d){return a<0&&(a=0),b<0&&(b=0),d<0&&(d=0),"#"+c[a]+c[b]+c[d]}}(),setSubframeEnabled=function(a){subframeEnabled=!!a},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(a){expressionsPlugin=a},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(a){expressionsInterfaces=a},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(a){defaultCurveSegments=a},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(a){idPrefix$1=a},getIdPrefix=function(){return idPrefix$1};function createNS(a){return document.createElementNS(svgNS,a)}function _typeof$5(a){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var dataManager=function(){var a,b,c=1,d=[],e={onmessage:function(){},postMessage:function(b){a({data:b})}},f={postMessage:function(a){e.onmessage({data:a})}};function g(b){if(window.Worker&&window.Blob&&getWebWorker()){var c=new Blob(["var _workerSelf = self; self.onmessage = ",b.toString()],{type:"text/javascript"});return new Worker(URL.createObjectURL(c))}return a=b,e}function h(){b||((b=g(function(a){function b(){function a(b,c){var g,h,i,j,k,l,n=b.length;for(h=0;h<n;h+=1)if("ks"in(g=b[h])&&!g.completed){if(g.completed=!0,g.hasMask){var o=g.masksProperties;for(i=0,j=o.length;i<j;i+=1)if(o[i].pt.k.i)f(o[i].pt.k);else for(k=0,l=o[i].pt.k.length;k<l;k+=1)o[i].pt.k[k].s&&f(o[i].pt.k[k].s[0]),o[i].pt.k[k].e&&f(o[i].pt.k[k].e[0])}0===g.ty?(g.layers=d(g.refId,c),a(g.layers,c)):4===g.ty?e(g.shapes):5===g.ty&&m(g)}}function b(b,c){if(b){var e=0,f=b.length;for(e=0;e<f;e+=1)1===b[e].t&&(b[e].data.layers=d(b[e].data.refId,c),a(b[e].data.layers,c))}}function c(a,b){for(var c=0,d=b.length;c<d;){if(b[c].id===a)return b[c];c+=1}return null}function d(a,b){var d=c(a,b);return d?d.layers.__used?JSON.parse(JSON.stringify(d.layers)):(d.layers.__used=!0,d.layers):null}function e(a){var b,c,d;for(b=a.length-1;b>=0;b-=1)if("sh"===a[b].ty)if(a[b].ks.k.i)f(a[b].ks.k);else for(c=0,d=a[b].ks.k.length;c<d;c+=1)a[b].ks.k[c].s&&f(a[b].ks.k[c].s[0]),a[b].ks.k[c].e&&f(a[b].ks.k[c].e[0]);else"gr"===a[b].ty&&e(a[b].it)}function f(a){var b,c=a.i.length;for(b=0;b<c;b+=1)a.i[b][0]+=a.v[b][0],a.i[b][1]+=a.v[b][1],a.o[b][0]+=a.v[b][0],a.o[b][1]+=a.v[b][1]}function g(a,b){var c=b?b.split("."):[100,100,100];return a[0]>c[0]||!(c[0]>a[0])&&(a[1]>c[1]||!(c[1]>a[1])&&(a[2]>c[2]||!(c[2]>a[2])&&null))}var h=function(){var a=[4,4,14];function b(a){var b=a.t.d;a.t.d={k:[{s:b,t:0}]}}function c(a){var c,d=a.length;for(c=0;c<d;c+=1)5===a[c].ty&&b(a[c])}return function(b){if(g(a,b.v)&&(c(b.layers),b.assets)){var d,e=b.assets.length;for(d=0;d<e;d+=1)b.assets[d].layers&&c(b.assets[d].layers)}}}(),i=function(){var a=[4,7,99];return function(b){if(b.chars&&!g(a,b.v)){var c,d=b.chars.length;for(c=0;c<d;c+=1){var f=b.chars[c];f.data&&f.data.shapes&&(e(f.data.shapes),f.data.ip=0,f.data.op=99999,f.data.st=0,f.data.sr=1,f.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},b.chars[c].t||(f.data.shapes.push({ty:"no"}),f.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),j=function(){var a=[5,7,15];function b(a){var b=a.t.p;"number"==typeof b.a&&(b.a={a:0,k:b.a}),"number"==typeof b.p&&(b.p={a:0,k:b.p}),"number"==typeof b.r&&(b.r={a:0,k:b.r})}function c(a){var c,d=a.length;for(c=0;c<d;c+=1)5===a[c].ty&&b(a[c])}return function(b){if(g(a,b.v)&&(c(b.layers),b.assets)){var d,e=b.assets.length;for(d=0;d<e;d+=1)b.assets[d].layers&&c(b.assets[d].layers)}}}(),k=function(){var a=[4,1,9];function b(a){var c,d,e,f=a.length;for(c=0;c<f;c+=1)if("gr"===a[c].ty)b(a[c].it);else if("fl"===a[c].ty||"st"===a[c].ty)if(a[c].c.k&&a[c].c.k[0].i)for(d=0,e=a[c].c.k.length;d<e;d+=1)a[c].c.k[d].s&&(a[c].c.k[d].s[0]/=255,a[c].c.k[d].s[1]/=255,a[c].c.k[d].s[2]/=255,a[c].c.k[d].s[3]/=255),a[c].c.k[d].e&&(a[c].c.k[d].e[0]/=255,a[c].c.k[d].e[1]/=255,a[c].c.k[d].e[2]/=255,a[c].c.k[d].e[3]/=255);else a[c].c.k[0]/=255,a[c].c.k[1]/=255,a[c].c.k[2]/=255,a[c].c.k[3]/=255}function c(a){var c,d=a.length;for(c=0;c<d;c+=1)4===a[c].ty&&b(a[c].shapes)}return function(b){if(g(a,b.v)&&(c(b.layers),b.assets)){var d,e=b.assets.length;for(d=0;d<e;d+=1)b.assets[d].layers&&c(b.assets[d].layers)}}}(),l=function(){var a=[4,4,18];function b(a){var c,d,e;for(c=a.length-1;c>=0;c-=1)if("sh"===a[c].ty)if(a[c].ks.k.i)a[c].ks.k.c=a[c].closed;else for(d=0,e=a[c].ks.k.length;d<e;d+=1)a[c].ks.k[d].s&&(a[c].ks.k[d].s[0].c=a[c].closed),a[c].ks.k[d].e&&(a[c].ks.k[d].e[0].c=a[c].closed);else"gr"===a[c].ty&&b(a[c].it)}function c(a){var c,d,e,f,g,h,i=a.length;for(d=0;d<i;d+=1){if((c=a[d]).hasMask){var j=c.masksProperties;for(e=0,f=j.length;e<f;e+=1)if(j[e].pt.k.i)j[e].pt.k.c=j[e].cl;else for(g=0,h=j[e].pt.k.length;g<h;g+=1)j[e].pt.k[g].s&&(j[e].pt.k[g].s[0].c=j[e].cl),j[e].pt.k[g].e&&(j[e].pt.k[g].e[0].c=j[e].cl)}4===c.ty&&b(c.shapes)}}return function(b){if(g(a,b.v)&&(c(b.layers),b.assets)){var d,e=b.assets.length;for(d=0;d<e;d+=1)b.assets[d].layers&&c(b.assets[d].layers)}}}();function m(a){0===a.t.a.length&&a.t.p}var n={};return n.completeData=function(c){c.__complete||(k(c),h(c),i(c),j(c),l(c),a(c.layers,c.assets),b(c.chars,c.assets),c.__complete=!0)},n.checkColors=k,n.checkChars=i,n.checkPathProperties=j,n.checkShapes=l,n.completeLayers=a,n}if(f.dataManager||(f.dataManager=b()),f.assetLoader||(f.assetLoader=function(){function a(a){var b=a.getResponseHeader("content-type");return b&&"json"===a.responseType&&-1!==b.indexOf("json")||a.response&&"object"===_typeof$5(a.response)?a.response:a.response&&"string"==typeof a.response?JSON.parse(a.response):a.responseText?JSON.parse(a.responseText):null}return{load:function(b,c,d,e){var f,g=new XMLHttpRequest;try{g.responseType="json"}catch(a){}g.onreadystatechange=function(){if(4===g.readyState)if(200===g.status)d(f=a(g));else try{f=a(g),d(f)}catch(a){e&&e(a)}};try{g.open("GET",b,!0)}catch(a){g.open("GET",c+"/"+b,!0)}g.send()}}}()),"loadAnimation"===a.data.type)f.assetLoader.load(a.data.path,a.data.fullPath,function(b){f.dataManager.completeData(b),f.postMessage({id:a.data.id,payload:b,status:"success"})},function(){f.postMessage({id:a.data.id,status:"error"})});else if("complete"===a.data.type){var c=a.data.animation;f.dataManager.completeData(c),f.postMessage({id:a.data.id,payload:c,status:"success"})}else"loadData"===a.data.type&&f.assetLoader.load(a.data.path,a.data.fullPath,function(b){f.postMessage({id:a.data.id,payload:b,status:"success"})},function(){f.postMessage({id:a.data.id,status:"error"})})})).onmessage=function(a){var b=a.data,c=b.id,e=d[c];d[c]=null,"success"===b.status?e.onComplete(b.payload):e.onError&&e.onError()})}function i(a,b){var e="processId_"+(c+=1);return d[e]={onComplete:a,onError:b},e}return{loadAnimation:function(a,c,d){h();var e=i(c,d);b.postMessage({type:"loadAnimation",path:a,fullPath:window.location.origin+window.location.pathname,id:e})},loadData:function(a,c,d){h();var e=i(c,d);b.postMessage({type:"loadData",path:a,fullPath:window.location.origin+window.location.pathname,id:e})},completeAnimation:function(a,c,d){h();var e=i(c,d);b.postMessage({type:"complete",animation:a,id:e})}}}(),ImagePreloader=function(){var a=function(){var a=createTag("canvas");a.width=1,a.height=1;var b=a.getContext("2d");return b.fillStyle="rgba(0,0,0,0)",b.fillRect(0,0,1,1),a}();function b(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function c(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function d(a,b,c){var d="";if(a.e)d=a.p;else if(b){var e=a.p;-1!==e.indexOf("images/")&&(e=e.split("/")[1]),d=b+e}else d=c+(a.u?a.u:"")+a.p;return d}function e(a){var b=0,c=setInterval((function(){(a.getBBox().width||b>500)&&(this._imageLoaded(),clearInterval(c)),b+=1}).bind(this),50)}function f(a){var b={assetData:a},c=d(a,this.assetsPath,this.path);return dataManager.loadData(c,(function(a){b.img=a,this._footageLoaded()}).bind(this),(function(){b.img={},this._footageLoaded()}).bind(this)),b}function g(){this._imageLoaded=b.bind(this),this._footageLoaded=c.bind(this),this.testImageLoaded=e.bind(this),this.createFootageData=f.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return g.prototype={loadAssets:function(a,b){this.imagesLoadedCb=b;var c,d=a.length;for(c=0;c<d;c+=1)a[c].layers||(a[c].t&&"seq"!==a[c].t?3===a[c].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(a[c]))):(this.totalImages+=1,this.images.push(this._createImageData(a[c]))))},setAssetsPath:function(a){this.assetsPath=a||""},setPath:function(a){this.path=a||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(a){for(var b=0,c=this.images.length;b<c;){if(this.images[b].assetData===a)return this.images[b].img;b+=1}return null},createImgData:function(b){var c=d(b,this.assetsPath,this.path),e=createTag("img");e.crossOrigin="anonymous",e.addEventListener("load",this._imageLoaded,!1),e.addEventListener("error",(function(){f.img=a,this._imageLoaded()}).bind(this),!1),e.src=c;var f={img:e,assetData:b};return f},createImageData:function(b){var c=d(b,this.assetsPath,this.path),e=createNS("image");isSafari?this.testImageLoaded(e):e.addEventListener("load",this._imageLoaded,!1),e.addEventListener("error",(function(){f.img=a,this._imageLoaded()}).bind(this),!1),e.setAttributeNS("http://www.w3.org/1999/xlink","href",c),this._elementHelper.append?this._elementHelper.append(e):this._elementHelper.appendChild(e);var f={img:e,assetData:b};return f},imageLoaded:b,footageLoaded:c,setCacheType:function(a,b){"svg"===a?(this._elementHelper=b,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},g}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(a,b){if(this._cbs[a])for(var c=this._cbs[a],d=0;d<c.length;d+=1)c[d](b)},addEventListener:function(a,b){return this._cbs[a]||(this._cbs[a]=[]),this._cbs[a].push(b),(function(){this.removeEventListener(a,b)}).bind(this)},removeEventListener:function(a,b){if(b){if(this._cbs[a]){for(var c=0,d=this._cbs[a].length;c<d;)this._cbs[a][c]===b&&(this._cbs[a].splice(c,1),c-=1,d-=1),c+=1;this._cbs[a].length||(this._cbs[a]=null)}}else this._cbs[a]=null}};var markerParser=function(){function a(a){for(var b,c=a.split("\r\n"),d={},e=0,f=0;f<c.length;f+=1)2===(b=c[f].split(":")).length&&(d[b[0]]=b[1].trim(),e+=1);if(0===e)throw Error();return d}return function(b){for(var c=[],d=0;d<b.length;d+=1){var e=b[d],f={time:e.tm,duration:e.dr};try{f.payload=JSON.parse(b[d].cm)}catch(c){try{f.payload=a(b[d].cm)}catch(a){f.payload={name:b[d].cm}}}c.push(f)}return c}}(),ProjectInterface=function(){function a(a){this.compositions.push(a)}return function(){function b(a){for(var b=0,c=this.compositions.length;b<c;){if(this.compositions[b].data&&this.compositions[b].data.nm===a)return this.compositions[b].prepareFrame&&this.compositions[b].data.xt&&this.compositions[b].prepareFrame(this.currentFrame),this.compositions[b].compInterface;b+=1}return null}return b.compositions=[],b.currentFrame=0,b.registerComposition=a,b}}(),renderers={},registerRenderer=function(a,b){renderers[a]=b};function getRenderer(a){return renderers[a]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var a in renderers)if(renderers[a])return a;return""}function _typeof$4(a){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(a){(a.wrapper||a.container)&&(this.wrapper=a.wrapper||a.container);var b="svg";a.animType?b=a.animType:a.renderer&&(b=a.renderer);var c=getRenderer(b);this.renderer=new c(this,a.rendererSettings),this.imagePreloader.setCacheType(b,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=b,""===a.loop||null===a.loop||void 0===a.loop||!0===a.loop?this.loop=!0:!1===a.loop?this.loop=!1:this.loop=parseInt(a.loop,10),this.autoplay=!("autoplay"in a)||a.autoplay,this.name=a.name?a.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(a,"autoloadSegments")||a.autoloadSegments,this.assetsPath=a.assetsPath,this.initialSegment=a.initialSegment,a.audioFactory&&this.audioController.setAudioFactory(a.audioFactory),a.animationData?this.setupAnimation(a.animationData):a.path&&(-1!==a.path.lastIndexOf("\\")?this.path=a.path.substr(0,a.path.lastIndexOf("\\")+1):this.path=a.path.substr(0,a.path.lastIndexOf("/")+1),this.fileName=a.path.substr(a.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(a.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(a){dataManager.completeAnimation(a,this.configAnimation)},AnimationItem.prototype.setData=function(a,b){b&&"object"!==_typeof$4(b)&&(b=JSON.parse(b));var c={wrapper:a,animationData:b},d=a.attributes;c.path=d.getNamedItem("data-animation-path")?d.getNamedItem("data-animation-path").value:d.getNamedItem("data-bm-path")?d.getNamedItem("data-bm-path").value:d.getNamedItem("bm-path")?d.getNamedItem("bm-path").value:"",c.animType=d.getNamedItem("data-anim-type")?d.getNamedItem("data-anim-type").value:d.getNamedItem("data-bm-type")?d.getNamedItem("data-bm-type").value:d.getNamedItem("bm-type")?d.getNamedItem("bm-type").value:d.getNamedItem("data-bm-renderer")?d.getNamedItem("data-bm-renderer").value:d.getNamedItem("bm-renderer")?d.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var e=d.getNamedItem("data-anim-loop")?d.getNamedItem("data-anim-loop").value:d.getNamedItem("data-bm-loop")?d.getNamedItem("data-bm-loop").value:d.getNamedItem("bm-loop")?d.getNamedItem("bm-loop").value:"";"false"===e?c.loop=!1:"true"===e?c.loop=!0:""!==e&&(c.loop=parseInt(e,10)),c.autoplay="false"!==(d.getNamedItem("data-anim-autoplay")?d.getNamedItem("data-anim-autoplay").value:d.getNamedItem("data-bm-autoplay")?d.getNamedItem("data-bm-autoplay").value:!d.getNamedItem("bm-autoplay")||d.getNamedItem("bm-autoplay").value),c.name=d.getNamedItem("data-name")?d.getNamedItem("data-name").value:d.getNamedItem("data-bm-name")?d.getNamedItem("data-bm-name").value:d.getNamedItem("bm-name")?d.getNamedItem("bm-name").value:"","false"===(d.getNamedItem("data-anim-prerender")?d.getNamedItem("data-anim-prerender").value:d.getNamedItem("data-bm-prerender")?d.getNamedItem("data-bm-prerender").value:d.getNamedItem("bm-prerender")?d.getNamedItem("bm-prerender").value:"")&&(c.prerender=!1),c.path?this.setParams(c):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(a){a.op>this.animationData.op&&(this.animationData.op=a.op,this.totalFrames=Math.floor(a.op-this.animationData.ip));var b,c,d=this.animationData.layers,e=d.length,f=a.layers,g=f.length;for(c=0;c<g;c+=1)for(b=0;b<e;){if(d[b].id===f[c].id){d[b]=f[c];break}b+=1}if((a.chars||a.fonts)&&(this.renderer.globalData.fontManager.addChars(a.chars),this.renderer.globalData.fontManager.addFonts(a.fonts,this.renderer.globalData.defs)),a.assets)for(b=0,e=a.assets.length;b<e;b+=1)this.animationData.assets.push(a.assets[b]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(a){this.animationData=a;var b=getExpressionsPlugin();b&&b.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var a=this.animationData.segments;if(!a||0===a.length||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var b=a.shift();this.timeCompleted=b.time*this.frameRate;var c=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(c,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(a){if(this.renderer)try{this.animationData=a,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(a),a.assets||(a.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(a.assets),this.markers=markerParser(a.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(a){this.triggerConfigError(a)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var a=getExpressionsPlugin();a&&a.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(a,b){var c="number"==typeof a?a:void 0,d="number"==typeof b?b:void 0;this.renderer.updateContainerSize(c,d)},AnimationItem.prototype.setSubframe=function(a){this.isSubframeEnabled=!!a},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(a){this.triggerRenderFrameError(a)}},AnimationItem.prototype.play=function(a){(!a||this.name===a)&&!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(a){a&&this.name!==a||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(a){a&&this.name!==a||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(a){a&&this.name!==a||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(a){for(var b,c=0;c<this.markers.length;c+=1)if((b=this.markers[c]).payload&&b.payload.name===a)return b;return null},AnimationItem.prototype.goToAndStop=function(a,b,c){if(!c||this.name===c){var d=Number(a);if(isNaN(d)){var e=this.getMarkerData(a);e&&this.goToAndStop(e.time,!0)}else b?this.setCurrentRawFrameValue(a):this.setCurrentRawFrameValue(a*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(a,b,c){if(!c||this.name===c){var d=Number(a);if(isNaN(d)){var e=this.getMarkerData(a);e&&(e.duration?this.playSegments([e.time,e.time+e.duration],!0):this.goToAndStop(e.time,!0))}else this.goToAndStop(d,b,c);this.play()}},AnimationItem.prototype.advanceTime=function(a){if(!0!==this.isPaused&&!1!==this.isLoaded){var b=this.currentRawFrame+a*this.frameModifier,c=!1;b>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?b>=this.totalFrames?(this.playCount+=1,this.checkSegments(b%this.totalFrames)||(this.setCurrentRawFrameValue(b%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(b):this.checkSegments(b>this.totalFrames?b%this.totalFrames:0)||(c=!0,b=this.totalFrames-1):b<0?this.checkSegments(b%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&!0!==this.loop)?(this.setCurrentRawFrameValue(this.totalFrames+b%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(c=!0,b=0)):this.setCurrentRawFrameValue(b),c&&(this.setCurrentRawFrameValue(b),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(a,b){this.playCount=0,a[1]<a[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=a[0]-a[1],this.timeCompleted=this.totalFrames,this.firstFrame=a[1],this.setCurrentRawFrameValue(this.totalFrames-.001-b)):a[1]>a[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=a[1]-a[0],this.timeCompleted=this.totalFrames,this.firstFrame=a[0],this.setCurrentRawFrameValue(.001+b)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(a,b){var c=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<a?c=a:this.currentRawFrame+this.firstFrame>b&&(c=b-a)),this.firstFrame=a,this.totalFrames=b-a,this.timeCompleted=this.totalFrames,-1!==c&&this.goToAndStop(c,!0)},AnimationItem.prototype.playSegments=function(a,b){if(b&&(this.segments.length=0),"object"===_typeof$4(a[0])){var c,d=a.length;for(c=0;c<d;c+=1)this.segments.push(a[c])}else this.segments.push(a);this.segments.length&&b&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(a){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),a&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(a){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),a),!0)},AnimationItem.prototype.destroy=function(a){(!a||this.name===a)&&this.renderer&&(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(a){this.currentRawFrame=a,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(a){this.playSpeed=a,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(a){this.playDirection=a<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(a){this.loop=a},AnimationItem.prototype.setVolume=function(a,b){b&&this.name!==b||this.audioController.setVolume(a)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(a){a&&this.name!==a||this.audioController.mute()},AnimationItem.prototype.unmute=function(a){a&&this.name!==a||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(a){var b="";if(a.e)b=a.p;else if(this.assetsPath){var c=a.p;-1!==c.indexOf("images/")&&(c=c.split("/")[1]),b=this.assetsPath+c}else b=this.path+(a.u?a.u:"")+a.p;return b},AnimationItem.prototype.getAssetData=function(a){for(var b=0,c=this.assets.length;b<c;){if(a===this.assets[b].id)return this.assets[b];b+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(a){return a?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(a,b,c){try{this.renderer.getElementByPath(a).updateDocumentData(b,c)}catch(a){}},AnimationItem.prototype.trigger=function(a){if(this._cbs&&this._cbs[a])switch(a){case"enterFrame":this.triggerEvent(a,new BMEnterFrameEvent(a,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(a,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(a,new BMCompleteLoopEvent(a,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(a,new BMCompleteEvent(a,this.frameMult));break;case"segmentStart":this.triggerEvent(a,new BMSegmentStartEvent(a,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(a,new BMDestroyEvent(a,this));break;default:this.triggerEvent(a)}"enterFrame"===a&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(a,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===a&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(a,this.loop,this.playCount,this.frameMult)),"complete"===a&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(a,this.frameMult)),"segmentStart"===a&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(a,this.firstFrame,this.totalFrames)),"destroy"===a&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(a,this))},AnimationItem.prototype.triggerRenderFrameError=function(a){var b=new BMRenderFrameErrorEvent(a,this.currentFrame);this.triggerEvent("error",b),this.onError&&this.onError.call(this,b)},AnimationItem.prototype.triggerConfigError=function(a){var b=new BMConfigErrorEvent(a,this.currentFrame);this.triggerEvent("error",b),this.onError&&this.onError.call(this,b)};var animationManager=function(){var a={},b=[],c=0,d=0,e=0,f=!0,g=!1;function h(a){for(var c=0,e=a.target;c<d;)b[c].animation===e&&(b.splice(c,1),c-=1,d-=1,e.isPaused||l()),c+=1}function i(a,c){if(!a)return null;for(var e=0;e<d;){if(b[e].elem===a&&null!==b[e].elem)return b[e].animation;e+=1}var f=new AnimationItem;return m(f,a),f.setData(a,c),f}function j(){var a,c=b.length,d=[];for(a=0;a<c;a+=1)d.push(b[a].animation);return d}function k(){e+=1,A()}function l(){e-=1}function m(a,c){a.addEventListener("destroy",h),a.addEventListener("_active",k),a.addEventListener("_idle",l),b.push({elem:c,animation:a}),d+=1}function n(a){var b=new AnimationItem;return m(b,null),b.setParams(a),b}function o(a,c){var e;for(e=0;e<d;e+=1)b[e].animation.setSpeed(a,c)}function p(a,c){var e;for(e=0;e<d;e+=1)b[e].animation.setDirection(a,c)}function q(a){var c;for(c=0;c<d;c+=1)b[c].animation.play(a)}function r(a){var h,i=a-c;for(h=0;h<d;h+=1)b[h].animation.advanceTime(i);c=a,e&&!g?window.requestAnimationFrame(r):f=!0}function s(a){c=a,window.requestAnimationFrame(r)}function t(a){var c;for(c=0;c<d;c+=1)b[c].animation.pause(a)}function u(a,c,e){var f;for(f=0;f<d;f+=1)b[f].animation.goToAndStop(a,c,e)}function v(a){var c;for(c=0;c<d;c+=1)b[c].animation.stop(a)}function w(a){var c;for(c=0;c<d;c+=1)b[c].animation.togglePause(a)}function x(a){var c;for(c=d-1;c>=0;c-=1)b[c].animation.destroy(a)}function y(a,b,c){var d,e=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),f=e.length;for(d=0;d<f;d+=1)c&&e[d].setAttribute("data-bm-type",c),i(e[d],a);if(b&&0===f){c||(c="svg");var g=document.getElementsByTagName("body")[0];g.innerText="";var h=createTag("div");h.style.width="100%",h.style.height="100%",h.setAttribute("data-bm-type",c),g.appendChild(h),i(h,a)}}function z(){var a;for(a=0;a<d;a+=1)b[a].animation.resize()}function A(){!g&&e&&f&&(window.requestAnimationFrame(s),f=!1)}function B(){g=!0}function C(){g=!1,A()}function D(a,c){var e;for(e=0;e<d;e+=1)b[e].animation.setVolume(a,c)}function E(a){var c;for(c=0;c<d;c+=1)b[c].animation.mute(a)}function F(a){var c;for(c=0;c<d;c+=1)b[c].animation.unmute(a)}return a.registerAnimation=i,a.loadAnimation=n,a.setSpeed=o,a.setDirection=p,a.play=q,a.pause=t,a.stop=v,a.togglePause=w,a.searchAnimations=y,a.resize=z,a.goToAndStop=u,a.destroy=x,a.freeze=B,a.unfreeze=C,a.setVolume=D,a.mute=E,a.unmute=F,a.getRegisteredAnimations=j,a}(),BezierFactory=function(){var a={};a.getBezierEasing=c;var b={};function c(a,c,d,e,f){var g=f||("bez_"+a+"_"+c+"_"+d+"_"+e).replace(/\./g,"p");if(b[g])return b[g];var h=new r([a,c,d,e]);return b[g]=h,h}var d=4,e=.001,f=1e-7,g=10,h=11,i=.1,j="function"==typeof Float32Array;function k(a,b){return 1-3*b+3*a}function l(a,b){return 3*b-6*a}function m(a){return 3*a}function n(a,b,c){return((k(b,c)*a+l(b,c))*a+m(b))*a}function o(a,b,c){return 3*k(b,c)*a*a+2*l(b,c)*a+m(b)}function p(a,b,c,d,e){var h,i,j=0;do(h=n(i=b+(c-b)/2,d,e)-a)>0?c=i:b=i;while(Math.abs(h)>f&&++j<g);return i}function q(a,b,c,e){for(var f=0;f<d;++f){var g=o(b,c,e);if(0===g)break;var h=n(b,c,e)-a;b-=h/g}return b}function r(a){this._p=a,this._mSampleValues=j?new Float32Array(h):Array(h),this._precomputed=!1,this.get=this.get.bind(this)}return r.prototype={get:function(a){var b=this._p[0],c=this._p[1],d=this._p[2],e=this._p[3];return(this._precomputed||this._precompute(),b===c&&d===e)?a:0===a?0:1===a?1:n(this._getTForX(a),c,e)},_precompute:function(){var a=this._p[0],b=this._p[1],c=this._p[2],d=this._p[3];this._precomputed=!0,(a!==b||c!==d)&&this._calcSampleValues()},_calcSampleValues:function(){for(var a=this._p[0],b=this._p[2],c=0;c<h;++c)this._mSampleValues[c]=n(c*i,a,b)},_getTForX:function(a){for(var b=this._p[0],c=this._p[2],d=this._mSampleValues,f=0,g=1,j=h-1;g!==j&&d[g]<=a;++g)f+=i;var k=f+(a-d[--g])/(d[g+1]-d[g])*i,l=o(k,b,c);return l>=e?q(a,k,b,c):0===l?k:p(a,f,f+i,b,c)}},a}(),pooling=function(){return{double:function(a){return a.concat(createSizedArray(a.length))}}}(),poolFactory=function(){return function(a,b,c){var d=0,e=a,f=createSizedArray(e);return{newElement:function(){var a;return d?(d-=1,a=f[d]):a=b(),a},release:function(a){d===e&&(f=pooling.double(f),e*=2),c&&c(a),f[d]=a,d+=1}}}}(),bezierLengthPool=function(){return poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})}(),segmentsLengthPool=function(){return poolFactory(8,function(){return{lengths:[],totalLength:0}},function(a){var b,c=a.lengths.length;for(b=0;b<c;b+=1)bezierLengthPool.release(a.lengths[b]);a.lengths.length=0})}();function bezFunction(){var a=Math;function b(a,b,c,d,e,f){var g=a*d+b*e+c*f-e*d-f*a-c*b;return g>-.001&&g<.001}function c(c,d,e,f,g,h,i,j,k){if(0===e&&0===h&&0===k)return b(c,d,f,g,i,j);var l,m=a.sqrt(a.pow(f-c,2)+a.pow(g-d,2)+a.pow(h-e,2)),n=a.sqrt(a.pow(i-c,2)+a.pow(j-d,2)+a.pow(k-e,2)),o=a.sqrt(a.pow(i-f,2)+a.pow(j-g,2)+a.pow(k-h,2));return(l=m>n?m>o?m-n-o:o-n-m:o>n?o-n-m:n-m-o)>-1e-4&&l<1e-4}var d=function(){return function(a,b,c,d){var e,f,g,h,i,j,k=getDefaultCurveSegments(),l=0,m=[],n=[],o=bezierLengthPool.newElement();for(e=0,g=c.length;e<k;e+=1){for(f=0,i=e/(k-1),j=0;f<g;f+=1)h=bmPow(1-i,3)*a[f]+3*bmPow(1-i,2)*i*c[f]+3*(1-i)*bmPow(i,2)*d[f]+bmPow(i,3)*b[f],m[f]=h,null!==n[f]&&(j+=bmPow(m[f]-n[f],2)),n[f]=m[f];j&&(l+=j=bmSqrt(j)),o.percents[e]=i,o.lengths[e]=l}return o.addedLength=l,o}}();function e(a){var b,c=segmentsLengthPool.newElement(),e=a.c,f=a.v,g=a.o,h=a.i,i=a._length,j=c.lengths,k=0;for(b=0;b<i-1;b+=1)j[b]=d(f[b],f[b+1],g[b],h[b+1]),k+=j[b].addedLength;return e&&i&&(j[b]=d(f[b],f[0],g[b],h[0]),k+=j[b].addedLength),c.totalLength=k,c}function f(a){this.segmentLength=0,this.points=Array(a)}function g(a,b){this.partialLength=a,this.point=b}var h=function(){var a={};return function(c,d,e,h){var i=(c[0]+"_"+c[1]+"_"+d[0]+"_"+d[1]+"_"+e[0]+"_"+e[1]+"_"+h[0]+"_"+h[1]).replace(/\./g,"p");if(!a[i]){var j,k,l,m,n,o,p,q=getDefaultCurveSegments(),r=0,s=null;2===c.length&&(c[0]!==d[0]||c[1]!==d[1])&&b(c[0],c[1],d[0],d[1],c[0]+e[0],c[1]+e[1])&&b(c[0],c[1],d[0],d[1],d[0]+h[0],d[1]+h[1])&&(q=2);var t=new f(q);for(j=0,l=e.length;j<q;j+=1){for(k=0,p=createSizedArray(l),n=j/(q-1),o=0;k<l;k+=1)m=bmPow(1-n,3)*c[k]+3*bmPow(1-n,2)*n*(c[k]+e[k])+3*(1-n)*bmPow(n,2)*(d[k]+h[k])+bmPow(n,3)*d[k],p[k]=m,null!==s&&(o+=bmPow(p[k]-s[k],2));r+=o=bmSqrt(o),t.points[j]=new g(o,p),s=p}t.segmentLength=r,a[i]=t}return a[i]}}();function i(a,b){var c=b.percents,d=b.lengths,e=c.length,f=bmFloor((e-1)*a),g=a*b.addedLength,h=0;if(f===e-1||0===f||g===d[f])return c[f];for(var i=d[f]>g?-1:1,j=!0;j;)if(d[f]<=g&&d[f+1]>g?(h=(g-d[f])/(d[f+1]-d[f]),j=!1):f+=i,f<0||f>=e-1){if(f===e-1)return c[f];j=!1}return c[f]+(c[f+1]-c[f])*h}function j(b,c,d,e,f,g){var h=i(f,g),j=1-h;return[a.round((j*j*j*b[0]+(h*j*j+j*h*j+j*j*h)*d[0]+(h*h*j+j*h*h+h*j*h)*e[0]+h*h*h*c[0])*1e3)/1e3,a.round((j*j*j*b[1]+(h*j*j+j*h*j+j*j*h)*d[1]+(h*h*j+j*h*h+h*j*h)*e[1]+h*h*h*c[1])*1e3)/1e3]}var k=createTypedArray("float32",8);return{getSegmentsLength:e,getNewSegment:function(b,c,d,e,f,g,h){f<0?f=0:f>1&&(f=1);var j,l=i(f,h),m=i(g=g>1?1:g,h),n=b.length,o=1-l,p=1-m,q=o*o*o,r=l*o*o*3,s=l*l*o*3,t=l*l*l,u=o*o*p,v=l*o*p+o*l*p+o*o*m,w=l*l*p+o*l*m+l*o*m,x=l*l*m,y=o*p*p,z=l*p*p+o*m*p+o*p*m,A=l*m*p+o*m*m+l*p*m,B=l*m*m,C=p*p*p,D=m*p*p+p*m*p+p*p*m,E=m*m*p+p*m*m+m*p*m,F=m*m*m;for(j=0;j<n;j+=1)k[4*j]=a.round((q*b[j]+r*d[j]+s*e[j]+t*c[j])*1e3)/1e3,k[4*j+1]=a.round((u*b[j]+v*d[j]+w*e[j]+x*c[j])*1e3)/1e3,k[4*j+2]=a.round((y*b[j]+z*d[j]+A*e[j]+B*c[j])*1e3)/1e3,k[4*j+3]=a.round((C*b[j]+D*d[j]+E*e[j]+F*c[j])*1e3)/1e3;return k},getPointInSegment:j,buildBezierData:h,pointOnLine2D:b,pointOnLine3D:c}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(a,b){var c,d,e,f,g,h=this.offsetTime;"multidimensional"===this.propType&&(q=createTypedArray("float32",this.pv.length));for(var i=b.lastIndex,j=i,k=this.keyframes.length-1,l=!0;l;){if(r=this.keyframes[j],s=this.keyframes[j+1],j===k-1&&a>=s.t-h){r.h&&(r=s),i=0;break}if(s.t-h>a){i=j;break}j<k-1?j+=1:(i=0,l=!1)}t=this.keyframesMetadata[j]||{};var m=s.t-h,n=r.t-h;if(r.to){t.bezierData||(t.bezierData=bez.buildBezierData(r.s,s.s||r.e,r.to,r.ti));var o=t.bezierData;if(a>=m||a<n){var p=a>=m?o.points.length-1:0;for(u=0,v=o.points[p].point.length;u<v;u+=1)q[u]=o.points[p].point[u]}else{t.__fnct?y=t.__fnct:t.__fnct=y=BezierFactory.getBezierEasing(r.o.x,r.o.y,r.i.x,r.i.y,r.n).get;var q,r,s,t,u,v,w,x,y,z,A,B=y((a-n)/(m-n)),C=o.segmentLength*B,D=b.lastFrame<a&&b._lastKeyframeIndex===j?b._lastAddedLength:0;for(x=b.lastFrame<a&&b._lastKeyframeIndex===j?b._lastPoint:0,l=!0,w=o.points.length;l;){if(D+=o.points[x].partialLength,0===C||0===B||x===o.points.length-1){for(u=0,v=o.points[x].point.length;u<v;u+=1)q[u]=o.points[x].point[u];break}if(C>=D&&C<D+o.points[x+1].partialLength){for(u=0,A=(C-D)/o.points[x+1].partialLength,v=o.points[x].point.length;u<v;u+=1)q[u]=o.points[x].point[u]+(o.points[x+1].point[u]-o.points[x].point[u])*A;break}x<w-1?x+=1:l=!1}b._lastPoint=x,b._lastAddedLength=D-o.points[x].partialLength,b._lastKeyframeIndex=j}}else if(k=r.s.length,z=s.s||r.e,this.sh&&1!==r.h)a>=m?(q[0]=z[0],q[1]=z[1],q[2]=z[2]):a<=n?(q[0]=r.s[0],q[1]=r.s[1],q[2]=r.s[2]):quaternionToEuler(q,slerp(createQuaternion(r.s),createQuaternion(z),(a-n)/(m-n)));else for(j=0;j<k;j+=1)1!==r.h&&(a>=m?B=1:a<n?B=0:(r.o.x.constructor===Array?(t.__fnct||(t.__fnct=[]),t.__fnct[j]?y=t.__fnct[j]:(c=void 0===r.o.x[j]?r.o.x[0]:r.o.x[j],d=void 0===r.o.y[j]?r.o.y[0]:r.o.y[j],e=void 0===r.i.x[j]?r.i.x[0]:r.i.x[j],f=void 0===r.i.y[j]?r.i.y[0]:r.i.y[j],y=BezierFactory.getBezierEasing(c,d,e,f).get,t.__fnct[j]=y)):t.__fnct?y=t.__fnct:(c=r.o.x,d=r.o.y,e=r.i.x,f=r.i.y,y=BezierFactory.getBezierEasing(c,d,e,f).get,r.keyframeMetadata=y),B=y((a-n)/(m-n)))),z=s.s||r.e,g=1===r.h?r.s[j]:r.s[j]+(z[j]-r.s[j])*B,"multidimensional"===this.propType?q[j]=g:q=g;return b.lastIndex=i,q}function slerp(a,b,c){var d,e,f,g,h,i=[],j=a[0],k=a[1],l=a[2],m=a[3],n=b[0],o=b[1],p=b[2],q=b[3];return(e=j*n+k*o+l*p+m*q)<0&&(e=-e,n=-n,o=-o,p=-p,q=-q),1-e>1e-6?(f=Math.sin(d=Math.acos(e)),g=Math.sin((1-c)*d)/f,h=Math.sin(c*d)/f):(g=1-c,h=c),i[0]=g*j+h*n,i[1]=g*k+h*o,i[2]=g*l+h*p,i[3]=g*m+h*q,i}function quaternionToEuler(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=Math.atan2(2*d*f-2*c*e,1-2*d*d-2*e*e),h=Math.asin(2*c*d+2*e*f),i=Math.atan2(2*c*f-2*d*e,1-2*c*c-2*e*e);a[0]=g/degToRads,a[1]=h/degToRads,a[2]=i/degToRads}function createQuaternion(a){var b=a[0]*degToRads,c=a[1]*degToRads,d=a[2]*degToRads,e=Math.cos(b/2),f=Math.cos(c/2),g=Math.cos(d/2),h=Math.sin(b/2),i=Math.sin(c/2),j=Math.sin(d/2),k=e*f*g-h*i*j;return[h*i*g+e*f*j,h*f*g+e*i*j,e*i*g-h*f*j,k]}function getValueAtCurrentTime(){var a=this.comp.renderedFrame-this.offsetTime,b=this.keyframes[0].t-this.offsetTime,c=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(a===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=c&&a>=c||this._caching.lastFrame<b&&a<b))){this._caching.lastFrame>=a&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var d=this.interpolateValue(a,this._caching);this.pv=d}return this._caching.lastFrame=a,this.pv}function setVValue(a){var b;if("unidimensional"===this.propType)b=a*this.mult,mathAbs(this.v-b)>1e-5&&(this.v=b,this._mdf=!0);else for(var c=0,d=this.v.length;c<d;)b=a[c]*this.mult,mathAbs(this.v[c]-b)>1e-5&&(this.v[c]=b,this._mdf=!0),c+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length){if(this.lock)return void this.setVValue(this.pv);this.lock=!0,this._mdf=this._isFirstFrame;var a,b=this.effectsSequence.length,c=this.kf?this.pv:this.data.k;for(a=0;a<b;a+=1)c=this.effectsSequence[a](c);this.setVValue(c),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(a){this.effectsSequence.push(a),this.container.addDynamicProperty(this)}function ValueProperty(a,b,c,d){this.propType="unidimensional",this.mult=c||1,this.data=b,this.v=c?b.k*c:b.k,this.pv=b.k,this._mdf=!1,this.elem=a,this.container=d,this.comp=a.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(a,b,c,d){this.propType="multidimensional",this.mult=c||1,this.data=b,this._mdf=!1,this.elem=a,this.container=d,this.comp=a.comp,this.k=!1,this.kf=!1,this.frameId=-1;var e,f=b.k.length;for(e=0,this.v=createTypedArray("float32",f),this.pv=createTypedArray("float32",f),this.vel=createTypedArray("float32",f);e<f;e+=1)this.v[e]=b.k[e]*this.mult,this.pv[e]=b.k[e];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(a,b,c,d){this.propType="unidimensional",this.keyframes=b.k,this.keyframesMetadata=[],this.offsetTime=a.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=b,this.mult=c||1,this.elem=a,this.container=d,this.comp=a.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(a,b,c,d){this.propType="multidimensional";var e,f,g,h,i,j=b.k.length;for(e=0;e<j-1;e+=1)b.k[e].to&&b.k[e].s&&b.k[e+1]&&b.k[e+1].s&&(f=b.k[e].s,g=b.k[e+1].s,h=b.k[e].to,i=b.k[e].ti,(2===f.length&&(f[0]!==g[0]||f[1]!==g[1])&&bez.pointOnLine2D(f[0],f[1],g[0],g[1],f[0]+h[0],f[1]+h[1])&&bez.pointOnLine2D(f[0],f[1],g[0],g[1],g[0]+i[0],g[1]+i[1])||3===f.length&&(f[0]!==g[0]||f[1]!==g[1]||f[2]!==g[2])&&bez.pointOnLine3D(f[0],f[1],f[2],g[0],g[1],g[2],f[0]+h[0],f[1]+h[1],f[2]+h[2])&&bez.pointOnLine3D(f[0],f[1],f[2],g[0],g[1],g[2],g[0]+i[0],g[1]+i[1],g[2]+i[2]))&&(b.k[e].to=null,b.k[e].ti=null),f[0]===g[0]&&f[1]===g[1]&&0===h[0]&&0===h[1]&&0===i[0]&&0===i[1]&&(2===f.length||f[2]===g[2]&&0===h[2]&&0===i[2])&&(b.k[e].to=null,b.k[e].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=b,this.keyframes=b.k,this.keyframesMetadata=[],this.offsetTime=a.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=c||1,this.elem=a,this.container=d,this.comp=a.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var k=b.k[0].s.length;for(e=0,this.v=createTypedArray("float32",k),this.pv=createTypedArray("float32",k);e<k;e+=1)this.v[e]=initFrame,this.pv[e]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",k)},this.addEffect=addEffect}var PropertyFactory=function(){return{getProp:function(a,b,c,d,e){var f;if(b.sid&&(b=a.globalData.slotManager.getProp(b)),b.k.length)if("number"==typeof b.k[0])f=new MultiDimensionalProperty(a,b,d,e);else switch(c){case 0:f=new KeyframedValueProperty(a,b,d,e);break;case 1:f=new KeyframedMultidimensionalProperty(a,b,d,e)}else f=new ValueProperty(a,b,d,e);return f.effectsSequence.length&&e.addDynamicProperty(f),f}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(a){-1===this.dynamicProperties.indexOf(a)&&(this.dynamicProperties.push(a),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var a,b=this.dynamicProperties.length;for(a=0;a<b;a+=1)this.dynamicProperties[a].getValue(),this.dynamicProperties[a]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(a){this.container=a,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){return poolFactory(8,function(){return createTypedArray("float32",2)})}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(a,b){this.c=a,this.setLength(b);for(var c=0;c<b;)this.v[c]=pointPool.newElement(),this.o[c]=pointPool.newElement(),this.i[c]=pointPool.newElement(),c+=1},ShapePath.prototype.setLength=function(a){for(;this._maxLength<a;)this.doubleArrayLength();this._length=a},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(a,b,c,d,e){var f;switch(this._length=Math.max(this._length,d+1),this._length>=this._maxLength&&this.doubleArrayLength(),c){case"v":f=this.v;break;case"i":f=this.i;break;case"o":f=this.o;break;default:f=[]}f[d]&&(!f[d]||e)||(f[d]=pointPool.newElement()),f[d][0]=a,f[d][1]=b},ShapePath.prototype.setTripleAt=function(a,b,c,d,e,f,g,h){this.setXYAt(a,b,"v",g,h),this.setXYAt(c,d,"o",g,h),this.setXYAt(e,f,"i",g,h)},ShapePath.prototype.reverse=function(){var a,b=new ShapePath;b.setPathData(this.c,this._length);var c=this.v,d=this.o,e=this.i,f=0;this.c&&(b.setTripleAt(c[0][0],c[0][1],e[0][0],e[0][1],d[0][0],d[0][1],0,!1),f=1);var g=this._length-1,h=this._length;for(a=f;a<h;a+=1)b.setTripleAt(c[g][0],c[g][1],e[g][0],e[g][1],d[g][0],d[g][1],a,!1),g-=1;return b},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function a(a){var c,d=b.newElement(),e=void 0===a._length?a.v.length:a._length;for(d.setLength(e),d.c=a.c,c=0;c<e;c+=1)d.setTripleAt(a.v[c][0],a.v[c][1],a.o[c][0],a.o[c][1],a.i[c][0],a.i[c][1],c);return d}var b=poolFactory(4,function(){return new ShapePath},function(a){var b,c=a._length;for(b=0;b<c;b+=1)pointPool.release(a.v[b]),pointPool.release(a.i[b]),pointPool.release(a.o[b]),a.v[b]=null,a.i[b]=null,a.o[b]=null;a._length=0,a.c=!1});return b.clone=a,b}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(a){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=a,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var a;for(a=0;a<this._length;a+=1)shapePool.release(this.shapes[a]);this._length=0};var shapeCollectionPool=function(){var a={newShapeCollection:e,release:f},b=0,c=4,d=createSizedArray(4);function e(){var a;return b?(b-=1,a=d[b]):a=new ShapeCollection,a}function f(a){var e,f=a._length;for(e=0;e<f;e+=1)shapePool.release(a.shapes[e]);a._length=0,b===c&&(d=pooling.double(d),c*=2),d[b]=a,b+=1}return a}(),ShapePropertyFactory=function(){var a=-999999;function b(a,b,c){var d=c.lastIndex,e=this.keyframes;if(a<e[0].t-this.offsetTime)f=e[0].s[0],h=!0,d=0;else if(a>=e[e.length-1].t-this.offsetTime)f=e[e.length-1].s?e[e.length-1].s[0]:e[e.length-2].e[0],h=!0;else{for(var f,g,h,i,j,k,l,m,n,o,p,q,r,s=d,t=e.length-1,u=!0;u&&(o=e[s],!((p=e[s+1]).t-this.offsetTime>a));)s<t-1?s+=1:u=!1;q=this.keyframesMetadata[s]||{},h=1===o.h,d=s,h||(a>=p.t-this.offsetTime?m=1:a<o.t-this.offsetTime?m=0:(q.__fnct?r=q.__fnct:q.__fnct=r=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y).get,m=r((a-(o.t-this.offsetTime))/(p.t-this.offsetTime-(o.t-this.offsetTime)))),g=p.s?p.s[0]:o.e[0]),f=o.s[0]}for(i=0,k=b._length,l=f.i[0].length,c.lastIndex=d;i<k;i+=1)for(j=0;j<l;j+=1)n=h?f.i[i][j]:f.i[i][j]+(g.i[i][j]-f.i[i][j])*m,b.i[i][j]=n,n=h?f.o[i][j]:f.o[i][j]+(g.o[i][j]-f.o[i][j])*m,b.o[i][j]=n,n=h?f.v[i][j]:f.v[i][j]+(g.v[i][j]-f.v[i][j])*m,b.v[i][j]=n}function c(){var b=this.comp.renderedFrame-this.offsetTime,c=this.keyframes[0].t-this.offsetTime,d=this.keyframes[this.keyframes.length-1].t-this.offsetTime,e=this._caching.lastFrame;return e!==a&&(e<c&&b<c||e>d&&b>d)||(this._caching.lastIndex=e<b?this._caching.lastIndex:0,this.interpolateShape(b,this.pv,this._caching)),this._caching.lastFrame=b,this.pv}function d(){this.paths=this.localShapeCollection}function e(a,b){if(a._length!==b._length||a.c!==b.c)return!1;var c,d=a._length;for(c=0;c<d;c+=1)if(a.v[c][0]!==b.v[c][0]||a.v[c][1]!==b.v[c][1]||a.o[c][0]!==b.o[c][0]||a.o[c][1]!==b.o[c][1]||a.i[c][0]!==b.i[c][0]||a.i[c][1]!==b.i[c][1])return!1;return!0}function f(a){e(this.v,a)||(this.v=shapePool.clone(a),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function g(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock)return void this.setVValue(this.pv);this.lock=!0,this._mdf=!1,a=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var a,b,c=this.effectsSequence.length;for(b=0;b<c;b+=1)a=this.effectsSequence[b](a);this.setVValue(a),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function h(a,b,c){this.propType="shape",this.comp=a.comp,this.container=a,this.elem=a,this.data=b,this.k=!1,this.kf=!1,this._mdf=!1;var e=3===c?b.pt.k:b.ks.k;this.v=shapePool.clone(e),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=d,this.effectsSequence=[]}function i(a){this.effectsSequence.push(a),this.container.addDynamicProperty(this)}function j(b,e,f){this.propType="shape",this.comp=b.comp,this.elem=b,this.container=b,this.offsetTime=b.data.st,this.keyframes=3===f?e.pt.k:e.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var g=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,g),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=a,this.reset=d,this._caching={lastFrame:a,lastIndex:0},this.effectsSequence=[c.bind(this)]}h.prototype.interpolateShape=b,h.prototype.getValue=g,h.prototype.setVValue=f,h.prototype.addEffect=i,j.prototype.getValue=g,j.prototype.interpolateShape=b,j.prototype.setVValue=f,j.prototype.addEffect=i;var k=function(){var a=roundCorner;function b(a,b){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=b.d,this.elem=a,this.comp=a.comp,this.frameId=-1,this.initDynamicPropertyContainer(a),this.p=PropertyFactory.getProp(a,b.p,1,0,this),this.s=PropertyFactory.getProp(a,b.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return b.prototype={reset:d,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var b=this.p.v[0],c=this.p.v[1],d=this.s.v[0]/2,e=this.s.v[1]/2,f=3!==this.d,g=this.v;g.v[0][0]=b,g.v[0][1]=c-e,g.v[1][0]=f?b+d:b-d,g.v[1][1]=c,g.v[2][0]=b,g.v[2][1]=c+e,g.v[3][0]=f?b-d:b+d,g.v[3][1]=c,g.i[0][0]=f?b-d*a:b+d*a,g.i[0][1]=c-e,g.i[1][0]=f?b+d:b-d,g.i[1][1]=c-e*a,g.i[2][0]=f?b+d*a:b-d*a,g.i[2][1]=c+e,g.i[3][0]=f?b-d:b+d,g.i[3][1]=c+e*a,g.o[0][0]=f?b+d*a:b-d*a,g.o[0][1]=c-e,g.o[1][0]=f?b+d:b-d,g.o[1][1]=c+e*a,g.o[2][0]=f?b-d*a:b+d*a,g.o[2][1]=c+e,g.o[3][0]=f?b-d:b+d,g.o[3][1]=c-e*a}},extendPrototype([DynamicPropertyContainer],b),b}(),l=function(){function a(a,b){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=a,this.comp=a.comp,this.data=b,this.frameId=-1,this.d=b.d,this.initDynamicPropertyContainer(a),1===b.sy?(this.ir=PropertyFactory.getProp(a,b.ir,0,0,this),this.is=PropertyFactory.getProp(a,b.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(a,b.pt,0,0,this),this.p=PropertyFactory.getProp(a,b.p,1,0,this),this.r=PropertyFactory.getProp(a,b.r,0,degToRads,this),this.or=PropertyFactory.getProp(a,b.or,0,0,this),this.os=PropertyFactory.getProp(a,b.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return a.prototype={reset:d,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var a,b,c,d,e=2*Math.floor(this.pt.v),f=2*Math.PI/e,g=!0,h=this.or.v,i=this.ir.v,j=this.os.v,k=this.is.v,l=2*Math.PI*h/(2*e),m=2*Math.PI*i/(2*e),n=-Math.PI/2;n+=this.r.v;var o=3===this.data.d?-1:1;for(a=0,this.v._length=0;a<e;a+=1){b=g?h:i,c=g?j:k,d=g?l:m;var p=b*Math.cos(n),q=b*Math.sin(n),r=0===p&&0===q?0:q/Math.sqrt(p*p+q*q),s=0===p&&0===q?0:-p/Math.sqrt(p*p+q*q);p+=+this.p.v[0],q+=+this.p.v[1],this.v.setTripleAt(p,q,p-r*d*c*o,q-s*d*c*o,p+r*d*c*o,q+s*d*c*o,a,!0),g=!g,n+=f*o}},convertPolygonToPath:function(){var a,b=Math.floor(this.pt.v),c=2*Math.PI/b,d=this.or.v,e=this.os.v,f=2*Math.PI*d/(4*b),g=-(.5*Math.PI),h=3===this.data.d?-1:1;for(g+=this.r.v,this.v._length=0,a=0;a<b;a+=1){var i=d*Math.cos(g),j=d*Math.sin(g),k=0===i&&0===j?0:j/Math.sqrt(i*i+j*j),l=0===i&&0===j?0:-i/Math.sqrt(i*i+j*j);i+=+this.p.v[0],j+=+this.p.v[1],this.v.setTripleAt(i,j,i-k*f*e*h,j-l*f*e*h,i+k*f*e*h,j+l*f*e*h,a,!0),g+=c*h}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],a),a}(),m=function(){function a(a,b){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=a,this.comp=a.comp,this.frameId=-1,this.d=b.d,this.initDynamicPropertyContainer(a),this.p=PropertyFactory.getProp(a,b.p,1,0,this),this.s=PropertyFactory.getProp(a,b.s,1,0,this),this.r=PropertyFactory.getProp(a,b.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return a.prototype={convertRectToPath:function(){var a=this.p.v[0],b=this.p.v[1],c=this.s.v[0]/2,d=this.s.v[1]/2,e=bmMin(c,d,this.r.v),f=e*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(a+c,b-d+e,a+c,b-d+e,a+c,b-d+f,0,!0),this.v.setTripleAt(a+c,b+d-e,a+c,b+d-f,a+c,b+d-e,1,!0),0!==e?(this.v.setTripleAt(a+c-e,b+d,a+c-e,b+d,a+c-f,b+d,2,!0),this.v.setTripleAt(a-c+e,b+d,a-c+f,b+d,a-c+e,b+d,3,!0),this.v.setTripleAt(a-c,b+d-e,a-c,b+d-e,a-c,b+d-f,4,!0),this.v.setTripleAt(a-c,b-d+e,a-c,b-d+f,a-c,b-d+e,5,!0),this.v.setTripleAt(a-c+e,b-d,a-c+e,b-d,a-c+f,b-d,6,!0),this.v.setTripleAt(a+c-e,b-d,a+c-f,b-d,a+c-e,b-d,7,!0)):(this.v.setTripleAt(a-c,b+d,a-c+f,b+d,a-c,b+d,2),this.v.setTripleAt(a-c,b-d,a-c,b-d+f,a-c,b-d,3))):(this.v.setTripleAt(a+c,b-d+e,a+c,b-d+f,a+c,b-d+e,0,!0),0!==e?(this.v.setTripleAt(a+c-e,b-d,a+c-e,b-d,a+c-f,b-d,1,!0),this.v.setTripleAt(a-c+e,b-d,a-c+f,b-d,a-c+e,b-d,2,!0),this.v.setTripleAt(a-c,b-d+e,a-c,b-d+e,a-c,b-d+f,3,!0),this.v.setTripleAt(a-c,b+d-e,a-c,b+d-f,a-c,b+d-e,4,!0),this.v.setTripleAt(a-c+e,b+d,a-c+e,b+d,a-c+f,b+d,5,!0),this.v.setTripleAt(a+c-e,b+d,a+c-f,b+d,a+c-e,b+d,6,!0),this.v.setTripleAt(a+c,b+d-e,a+c,b+d-e,a+c,b+d-f,7,!0)):(this.v.setTripleAt(a-c,b-d,a-c+f,b-d,a-c,b-d,1,!0),this.v.setTripleAt(a-c,b+d,a-c,b+d-f,a-c,b+d,2,!0),this.v.setTripleAt(a+c,b+d,a+c-f,b+d,a+c,b+d,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:d},extendPrototype([DynamicPropertyContainer],a),a}();function n(){return h}function o(){return j}var p={};return p.getShapeProp=function(a,b,c){var d;return 3===c||4===c?d=(3===c?b.pt:b.ks).k.length?new j(a,b,c):new h(a,b,c):5===c?d=new m(a,b):6===c?d=new k(a,b):7===c&&(d=new l(a,b)),d.k&&a.addDynamicProperty(d),d},p.getConstructorFunction=n,p.getKeyframedConstructorFunction=o,p}(),Matrix=function(){var a=Math.cos,b=Math.sin,c=Math.tan,d=Math.round;function e(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function f(c){if(0===c)return this;var d=a(c),e=b(c);return this._t(d,-e,0,0,e,d,0,0,0,0,1,0,0,0,0,1)}function g(c){if(0===c)return this;var d=a(c),e=b(c);return this._t(1,0,0,0,0,d,-e,0,0,e,d,0,0,0,0,1)}function h(c){if(0===c)return this;var d=a(c),e=b(c);return this._t(d,0,e,0,0,1,0,0,-e,0,d,0,0,0,0,1)}function i(c){if(0===c)return this;var d=a(c),e=b(c);return this._t(d,-e,0,0,e,d,0,0,0,0,1,0,0,0,0,1)}function j(a,b){return this._t(1,b,a,1,0,0)}function k(a,b){return this.shear(c(a),c(b))}function l(d,e){var f=a(e),g=b(e);return this._t(f,g,0,0,-g,f,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,c(d),1,0,0,0,0,1,0,0,0,0,1)._t(f,-g,0,0,g,f,0,0,0,0,1,0,0,0,0,1)}function m(a,b,c){return(c||0===c||(c=1),1===a&&1===b&&1===c)?this:this._t(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1)}function n(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return this.props[0]=a,this.props[1]=b,this.props[2]=c,this.props[3]=d,this.props[4]=e,this.props[5]=f,this.props[6]=g,this.props[7]=h,this.props[8]=i,this.props[9]=j,this.props[10]=k,this.props[11]=l,this.props[12]=m,this.props[13]=n,this.props[14]=o,this.props[15]=p,this}function o(a,b,c){return(c=c||0,0!==a||0!==b||0!==c)?this._t(1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1):this}function p(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.props;if(1===a&&0===b&&0===c&&0===d&&0===e&&1===f&&0===g&&0===h&&0===i&&0===j&&1===k&&0===l)return q[12]=q[12]*a+q[15]*m,q[13]=q[13]*f+q[15]*n,q[14]=q[14]*k+q[15]*o,q[15]*=p,this._identityCalculated=!1,this;var r=q[0],s=q[1],t=q[2],u=q[3],v=q[4],w=q[5],x=q[6],y=q[7],z=q[8],A=q[9],B=q[10],C=q[11],D=q[12],E=q[13],F=q[14],G=q[15];return q[0]=r*a+s*e+t*i+u*m,q[1]=r*b+s*f+t*j+u*n,q[2]=r*c+s*g+t*k+u*o,q[3]=r*d+s*h+t*l+u*p,q[4]=v*a+w*e+x*i+y*m,q[5]=v*b+w*f+x*j+y*n,q[6]=v*c+w*g+x*k+y*o,q[7]=v*d+w*h+x*l+y*p,q[8]=z*a+A*e+B*i+C*m,q[9]=z*b+A*f+B*j+C*n,q[10]=z*c+A*g+B*k+C*o,q[11]=z*d+A*h+B*l+C*p,q[12]=D*a+E*e+F*i+G*m,q[13]=D*b+E*f+F*j+G*n,q[14]=D*c+E*g+F*k+G*o,q[15]=D*d+E*h+F*l+G*p,this._identityCalculated=!1,this}function q(a){var b=a.props;return this.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}function r(){return this._identityCalculated||(this._identity=1===this.props[0]&&0===this.props[1]&&0===this.props[2]&&0===this.props[3]&&0===this.props[4]&&1===this.props[5]&&0===this.props[6]&&0===this.props[7]&&0===this.props[8]&&0===this.props[9]&&1===this.props[10]&&0===this.props[11]&&0===this.props[12]&&0===this.props[13]&&0===this.props[14]&&1===this.props[15],this._identityCalculated=!0),this._identity}function s(a){for(var b=0;b<16;){if(a.props[b]!==this.props[b])return!1;b+=1}return!0}function t(a){var b;for(b=0;b<16;b+=1)a.props[b]=this.props[b];return a}function u(a){var b;for(b=0;b<16;b+=1)this.props[b]=a[b]}function v(a,b,c){return{x:a*this.props[0]+b*this.props[4]+c*this.props[8]+this.props[12],y:a*this.props[1]+b*this.props[5]+c*this.props[9]+this.props[13],z:a*this.props[2]+b*this.props[6]+c*this.props[10]+this.props[14]}}function w(a,b,c){return a*this.props[0]+b*this.props[4]+c*this.props[8]+this.props[12]}function x(a,b,c){return a*this.props[1]+b*this.props[5]+c*this.props[9]+this.props[13]}function y(a,b,c){return a*this.props[2]+b*this.props[6]+c*this.props[10]+this.props[14]}function z(){var a=this.props[0]*this.props[5]-this.props[1]*this.props[4],b=this.props[5]/a,c=-this.props[1]/a,d=-this.props[4]/a,e=this.props[0]/a,f=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/a,g=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/a,h=new Matrix;return h.props[0]=b,h.props[1]=c,h.props[4]=d,h.props[5]=e,h.props[12]=f,h.props[13]=g,h}function A(a){return this.getInverseMatrix().applyToPointArray(a[0],a[1],a[2]||0)}function B(a){var b,c=a.length,d=[];for(b=0;b<c;b+=1)d[b]=A(a[b]);return d}function C(a,b,c){var d=createTypedArray("float32",6);if(this.isIdentity())d[0]=a[0],d[1]=a[1],d[2]=b[0],d[3]=b[1],d[4]=c[0],d[5]=c[1];else{var e=this.props[0],f=this.props[1],g=this.props[4],h=this.props[5],i=this.props[12],j=this.props[13];d[0]=a[0]*e+a[1]*g+i,d[1]=a[0]*f+a[1]*h+j,d[2]=b[0]*e+b[1]*g+i,d[3]=b[0]*f+b[1]*h+j,d[4]=c[0]*e+c[1]*g+i,d[5]=c[0]*f+c[1]*h+j}return d}function D(a,b,c){var d;return this.isIdentity()?[a,b,c]:[a*this.props[0]+b*this.props[4]+c*this.props[8]+this.props[12],a*this.props[1]+b*this.props[5]+c*this.props[9]+this.props[13],a*this.props[2]+b*this.props[6]+c*this.props[10]+this.props[14]]}function E(a,b){if(this.isIdentity())return a+","+b;var c=this.props;return Math.round((a*c[0]+b*c[4]+c[12])*100)/100+","+Math.round((a*c[1]+b*c[5]+c[13])*100)/100}function F(){for(var a=0,b=this.props,c="matrix3d(",e=1e4;a<16;)c+=d(b[a]*e)/e,c+=15===a?")":",",a+=1;return c}function G(a){var b=1e4;return a<1e-6&&a>0||a>-1e-6&&a<0?d(a*b)/b:a}function H(){var a=this.props;return"matrix("+G(a[0])+","+G(a[1])+","+G(a[4])+","+G(a[5])+","+G(a[12])+","+G(a[13])+")"}return function(){this.reset=e,this.rotate=f,this.rotateX=g,this.rotateY=h,this.rotateZ=i,this.skew=k,this.skewFromAxis=l,this.shear=j,this.scale=m,this.setTransform=n,this.translate=o,this.transform=p,this.multiply=q,this.applyToPoint=v,this.applyToX=w,this.applyToY=x,this.applyToZ=y,this.applyToPointArray=D,this.applyToTriplePoints=C,this.applyToPointStringified=E,this.toCSS=F,this.to2dCSS=H,this.clone=t,this.cloneFromProps=u,this.equals=s,this.inversePoints=B,this.inversePoint=A,this.getInverseMatrix=z,this._t=this.transform,this.isIdentity=r,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(a){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(a){setLocationHref(a)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(a){setSubframeEnabled(a)}function setPrefix(a){setIdPrefix(a)}function loadAnimation(a){return!0===standalone&&(a.animationData=JSON.parse(animationData)),animationManager.loadAnimation(a)}function setQuality(a){if("string"==typeof a)switch(a){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(a)&&a>1&&setDefaultCurveSegments(a);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(a,b){"expressions"===a&&setExpressionsPlugin(b)}function getFactory(a){switch(a){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(a){for(var b=queryString.split("&"),c=0;c<b.length;c+=1){var d=b[c].split("=");if(decodeURIComponent(d[0])==a)return decodeURIComponent(d[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(err){}var ShapeModifiers=function(){var a={},b={};function c(a,c,d){return new b[a](c,d)}return a.registerModifier=function a(a,c){b[a]||(b[a]=c)},a.getModifier=c,a}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(a){if(!this.closed){a.sh.container.addDynamicProperty(a.sh);var b={shape:a.sh,data:a,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(b),this.addShapeToModifier(b),this._isAnimated&&a.setAsAnimated()}},ShapeModifier.prototype.init=function(a,b){this.shapes=[],this.elem=a,this.initDynamicPropertyContainer(a),this.initModifierProperties(a,b),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(a,b){this.s=PropertyFactory.getProp(a,b.s,0,.01,this),this.e=PropertyFactory.getProp(a,b.e,0,.01,this),this.o=PropertyFactory.getProp(a,b.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=b.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(a){a.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(a,b,c,d,e){var f,g,h,i=[];b<=1?i.push({s:a,e:b}):a>=1?i.push({s:a-1,e:b-1}):(i.push({s:a,e:1}),i.push({s:0,e:b-1}));var j=[],k=i.length;for(f=0;f<k;f+=1)(g=i[f]).e*e<d||g.s*e>d+c||(h=g.s*e<=d?0:(g.s*e-d)/c,j.push([h,g.e*e>=d+c?1:(g.e*e-d)/c]));return j.length||j.push([0,0]),j},TrimModifier.prototype.releasePathsData=function(a){var b,c=a.length;for(b=0;b<c;b+=1)segmentsLengthPool.release(a[b]);return a.length=0,a},TrimModifier.prototype.processShapes=function(a){if(this._mdf||a){var b=this.o.v%360/360;if(b<0&&(b+=1),(f=this.s.v>1?1+b:this.s.v<0?0+b:this.s.v+b)>(g=this.e.v>1?1+b:this.e.v<0?0+b:this.e.v+b)){var c=f;f=g,g=c}f=1e-4*Math.round(1e4*f),g=1e-4*Math.round(1e4*g),this.sValue=f,this.eValue=g}else f=this.sValue,g=this.eValue;var d=this.shapes.length,e=0;if(g===f)for(i=0;i<d;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape._mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection,this._mdf&&(this.shapes[i].pathsData.length=0);else if((1!==g||0!==f)&&(0!==g||1!==f)){var f,g,h,i,j,k,l,m,n,o,p,q,r=[];for(i=0;i<d;i+=1)if((o=this.shapes[i]).shape._mdf||this._mdf||a||2===this.m){if(k=(h=o.shape.paths)._length,n=0,!o.shape._mdf&&o.pathsData.length)n=o.totalShapeLength;else{for(j=0,l=this.releasePathsData(o.pathsData);j<k;j+=1)m=bez.getSegmentsLength(h.shapes[j]),l.push(m),n+=m.totalLength;o.totalShapeLength=n,o.pathsData=l}e+=n,o.shape._mdf=!0}else o.shape.paths=o.localShapeCollection;var s=f,t=g,u=0;for(i=d-1;i>=0;i-=1)if((o=this.shapes[i]).shape._mdf){for((p=o.localShapeCollection).releaseShapes(),2===this.m&&d>1?(q=this.calculateShapeEdges(f,g,o.totalShapeLength,u,e),u+=o.totalShapeLength):q=[[s,t]],k=q.length,j=0;j<k;j+=1){s=q[j][0],t=q[j][1],r.length=0,t<=1?r.push({s:o.totalShapeLength*s,e:o.totalShapeLength*t}):s>=1?r.push({s:o.totalShapeLength*(s-1),e:o.totalShapeLength*(t-1)}):(r.push({s:o.totalShapeLength*s,e:o.totalShapeLength}),r.push({s:0,e:o.totalShapeLength*(t-1)}));var v=this.addShapes(o,r[0]);if(r[0].s!==r[0].e){if(r.length>1)if(o.shape.paths.shapes[o.shape.paths._length-1].c){var w=v.pop();this.addPaths(v,p),v=this.addShapes(o,r[1],w)}else this.addPaths(v,p),v=this.addShapes(o,r[1]);this.addPaths(v,p)}}o.shape.paths=p}}else if(this._mdf)for(i=0;i<d;i+=1)this.shapes[i].pathsData.length=0,this.shapes[i].shape._mdf=!0},TrimModifier.prototype.addPaths=function(a,b){var c,d=a.length;for(c=0;c<d;c+=1)b.addShape(a[c])},TrimModifier.prototype.addSegment=function(a,b,c,d,e,f,g){e.setXYAt(b[0],b[1],"o",f),e.setXYAt(c[0],c[1],"i",f+1),g&&e.setXYAt(a[0],a[1],"v",f),e.setXYAt(d[0],d[1],"v",f+1)},TrimModifier.prototype.addSegmentFromArray=function(a,b,c,d){b.setXYAt(a[1],a[5],"o",c),b.setXYAt(a[2],a[6],"i",c+1),d&&b.setXYAt(a[0],a[4],"v",c),b.setXYAt(a[3],a[7],"v",c+1)},TrimModifier.prototype.addShapes=function(a,b,c){var d,e,f,g,h,i,j,k,l=a.pathsData,m=a.shape.paths.shapes,n=a.shape.paths._length,o=0,p=[],q=!0;for(c?(h=c._length,k=c._length):(c=shapePool.newElement(),h=0,k=0),p.push(c),d=0;d<n;d+=1){for(e=1,i=l[d].lengths,c.c=m[d].c,f=m[d].c?i.length:i.length+1;e<f;e+=1)if(o+(g=i[e-1]).addedLength<b.s)o+=g.addedLength,c.c=!1;else if(o>b.e){c.c=!1;break}else b.s<=o&&b.e>=o+g.addedLength?(this.addSegment(m[d].v[e-1],m[d].o[e-1],m[d].i[e],m[d].v[e],c,h,q),q=!1):(j=bez.getNewSegment(m[d].v[e-1],m[d].v[e],m[d].o[e-1],m[d].i[e],(b.s-o)/g.addedLength,(b.e-o)/g.addedLength,i[e-1]),this.addSegmentFromArray(j,c,h,q),q=!1,c.c=!1),o+=g.addedLength,h+=1;if(m[d].c&&i.length){if(g=i[e-1],o<=b.e){var r=i[e-1].addedLength;b.s<=o&&b.e>=o+r?(this.addSegment(m[d].v[e-1],m[d].o[e-1],m[d].i[0],m[d].v[0],c,h,q),q=!1):(j=bez.getNewSegment(m[d].v[e-1],m[d].v[0],m[d].o[e-1],m[d].i[0],(b.s-o)/r,(b.e-o)/r,i[e-1]),this.addSegmentFromArray(j,c,h,q),q=!1,c.c=!1)}else c.c=!1;o+=g.addedLength,h+=1}if(c._length&&(c.setXYAt(c.v[k][0],c.v[k][1],"i",k),c.setXYAt(c.v[c._length-1][0],c.v[c._length-1][1],"o",c._length-1)),o>b.e)break;d<n-1&&(c=shapePool.newElement(),q=!0,p.push(c),h=0)}return p},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(a,b){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(a,b.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(a,b){var c,d,e,f,g,h,i=b/100,j=[0,0],k=a._length,l=0;for(l=0;l<k;l+=1)j[0]+=a.v[l][0],j[1]+=a.v[l][1];j[0]/=k,j[1]/=k;var m=shapePool.newElement();for(l=0,m.c=a.c;l<k;l+=1)c=a.v[l][0]+(j[0]-a.v[l][0])*i,d=a.v[l][1]+(j[1]-a.v[l][1])*i,e=a.o[l][0]+-((j[0]-a.o[l][0])*i),f=a.o[l][1]+-((j[1]-a.o[l][1])*i),g=a.i[l][0]+-((j[0]-a.i[l][0])*i),h=a.i[l][1]+-((j[1]-a.i[l][1])*i),m.setTripleAt(c,d,e,f,g,h,l);return m},PuckerAndBloatModifier.prototype.processShapes=function(a){var b,c,d,e,f,g,h=this.shapes.length,i=this.amount.v;if(0!==i)for(c=0;c<h;c+=1){if(g=(f=this.shapes[c]).localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!a))for(g.releaseShapes(),f.shape._mdf=!0,b=f.shape.paths.shapes,e=f.shape.paths._length,d=0;d<e;d+=1)g.addShape(this.processPath(b[d],i));f.shape.paths=f.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var a=[0,0];function b(a){this._addDynamicProperty(a),this.elem.addDynamicProperty(a),this._isDirty=!0}function c(a,b,c){if(this.elem=a,this.frameId=-1,this.propType="transform",this.data=b,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(c||a),b.p&&b.p.s?(this.px=PropertyFactory.getProp(a,b.p.x,0,0,this),this.py=PropertyFactory.getProp(a,b.p.y,0,0,this),b.p.z&&(this.pz=PropertyFactory.getProp(a,b.p.z,0,0,this))):this.p=PropertyFactory.getProp(a,b.p||{k:[0,0,0]},1,0,this),b.rx){if(this.rx=PropertyFactory.getProp(a,b.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(a,b.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(a,b.rz,0,degToRads,this),b.or.k[0].ti){var d,e=b.or.k.length;for(d=0;d<e;d+=1)b.or.k[d].to=null,b.or.k[d].ti=null}this.or=PropertyFactory.getProp(a,b.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(a,b.r||{k:0},0,degToRads,this);b.sk&&(this.sk=PropertyFactory.getProp(a,b.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(a,b.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(a,b.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(a,b.s||{k:[100,100,100]},1,.01,this),b.o?this.o=PropertyFactory.getProp(a,b.o,0,.01,a):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return c.prototype={applyToMatrix:function(a){var b=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||b,this.a&&a.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&a.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&a.skewFromAxis(-this.sk.v,this.sa.v),this.r?a.rotate(-this.r.v):a.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?a.translate(this.px.v,this.py.v,-this.pz.v):a.translate(this.px.v,this.py.v,0):a.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(b){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||b){var c;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){if(c=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(d=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/c,0),e=this.p.getValueAtTime(this.p.keyframes[0].t/c,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(d=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/c,0),e=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/c,0)):(d=this.p.pv,e=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/c,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){var d=[],e=[],f=this.px,g=this.py;f._caching.lastFrame+f.offsetTime<=f.keyframes[0].t?(d[0]=f.getValueAtTime((f.keyframes[0].t+.01)/c,0),d[1]=g.getValueAtTime((g.keyframes[0].t+.01)/c,0),e[0]=f.getValueAtTime(f.keyframes[0].t/c,0),e[1]=g.getValueAtTime(g.keyframes[0].t/c,0)):f._caching.lastFrame+f.offsetTime>=f.keyframes[f.keyframes.length-1].t?(d[0]=f.getValueAtTime(f.keyframes[f.keyframes.length-1].t/c,0),d[1]=g.getValueAtTime(g.keyframes[g.keyframes.length-1].t/c,0),e[0]=f.getValueAtTime((f.keyframes[f.keyframes.length-1].t-.01)/c,0),e[1]=g.getValueAtTime((g.keyframes[g.keyframes.length-1].t-.01)/c,0)):(d=[f.pv,g.pv],e[0]=f.getValueAtTime((f._caching.lastFrame+f.offsetTime-.01)/c,f.offsetTime),e[1]=g.getValueAtTime((g._caching.lastFrame+g.offsetTime-.01)/c,g.offsetTime))}else d=e=a;this.v.rotate(-Math.atan2(d[1]-e[1],d[0]-e[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length){if(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk)if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;else this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],c),c.prototype.addDynamicProperty=b,c.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(a,b,d){return new c(a,b,d)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(a,b){return 1e5*Math.abs(a-b)<=Math.min(Math.abs(a),Math.abs(b))}function floatZero(a){return 1e-5>=Math.abs(a)}function lerp(a,b,c){return a*(1-c)+b*c}function lerpPoint(a,b,c){return[lerp(a[0],b[0],c),lerp(a[1],b[1],c)]}function quadRoots(a,b,c){if(0===a)return[];var d=b*b-4*a*c;if(d<0)return[];var e=-b/(2*a);if(0===d)return[e];var f=Math.sqrt(d)/(2*a);return[e-f,e+f]}function polynomialCoefficients(a,b,c,d){return[-a+3*b-3*c+d,3*a-6*b+3*c,-3*a+3*b,a]}function singlePoint(a){return new PolynomialBezier(a,a,a,a,!1)}function PolynomialBezier(a,b,c,d,e){e&&pointEqual(a,b)&&(b=lerpPoint(a,d,1/3)),e&&pointEqual(c,d)&&(c=lerpPoint(a,d,2/3));var f=polynomialCoefficients(a[0],b[0],c[0],d[0]),g=polynomialCoefficients(a[1],b[1],c[1],d[1]);this.a=[f[0],g[0]],this.b=[f[1],g[1]],this.c=[f[2],g[2]],this.d=[f[3],g[3]],this.points=[a,b,c,d]}function extrema(a,b){var c=a.points[0][b],d=a.points[a.points.length-1][b];if(c>d){var e=d;d=c,c=e}for(var f=quadRoots(3*a.a[b],2*a.b[b],a.c[b]),g=0;g<f.length;g+=1)if(f[g]>0&&f[g]<1){var h=a.point(f[g])[b];h<c?c=h:h>d&&(d=h)}return{min:c,max:d}}function intersectData(a,b,c){var d=a.boundingBox();return{cx:d.cx,cy:d.cy,width:d.width,height:d.height,bez:a,t:(b+c)/2,t1:b,t2:c}}function splitData(a){var b=a.bez.split(.5);return[intersectData(b[0],a.t1,a.t),intersectData(b[1],a.t,a.t2)]}function boxIntersect(a,b){return 2*Math.abs(a.cx-b.cx)<a.width+b.width&&2*Math.abs(a.cy-b.cy)<a.height+b.height}function intersectsImpl(a,b,c,d,e,f){if(boxIntersect(a,b)){if(c>=f||a.width<=d&&a.height<=d&&b.width<=d&&b.height<=d)return void e.push([a.t,b.t]);var g=splitData(a),h=splitData(b);intersectsImpl(g[0],h[0],c+1,d,e,f),intersectsImpl(g[0],h[1],c+1,d,e,f),intersectsImpl(g[1],h[0],c+1,d,e,f),intersectsImpl(g[1],h[1],c+1,d,e,f)}}function crossProduct(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function lineIntersection(a,b,c,d){var e=[a[0],a[1],1],f=[b[0],b[1],1],g=[c[0],c[1],1],h=[d[0],d[1],1],i=crossProduct(crossProduct(e,f),crossProduct(g,h));return floatZero(i[2])?null:[i[0]/i[2],i[1]/i[2]]}function polarOffset(a,b,c){return[a[0]+Math.cos(b)*c,a[1]-Math.sin(b)*c]}function pointDistance(a,b){return Math.hypot(a[0]-b[0],a[1]-b[1])}function pointEqual(a,b){return floatEqual(a[0],b[0])&&floatEqual(a[1],b[1])}function ZigZagModifier(){}function setPoint(a,b,c,d,e,f,g){var h=c-Math.PI/2,i=c+Math.PI/2,j=b[0]+Math.cos(c)*d*e,k=b[1]-Math.sin(c)*d*e;a.setTripleAt(j,k,j+Math.cos(h)*f,k-Math.sin(h)*f,j+Math.cos(i)*g,k-Math.sin(i)*g,a.length())}function getPerpendicularVector(a,b){var c=[b[0]-a[0],b[1]-a[1]],d=-(.5*Math.PI);return[Math.cos(d)*c[0]-Math.sin(d)*c[1],Math.sin(d)*c[0]+Math.cos(d)*c[1]]}function getProjectingAngle(a,b){var c=0===b?a.length()-1:b-1,d=(b+1)%a.length(),e=getPerpendicularVector(a.v[c],a.v[d]);return Math.atan2(0,1)-Math.atan2(e[1],e[0])}function zigZagCorner(a,b,c,d,e,f,g){var h=getProjectingAngle(b,c),i=b.v[c%b._length],j=b.v[0===c?b._length-1:c-1],k=b.v[(c+1)%b._length],l=2===f?Math.sqrt(Math.pow(i[0]-j[0],2)+Math.pow(i[1]-j[1],2)):0,m=2===f?Math.sqrt(Math.pow(i[0]-k[0],2)+Math.pow(i[1]-k[1],2)):0;setPoint(a,b.v[c%b._length],h,g,d,m/((e+1)*2),l/((e+1)*2),f)}function zigZagSegment(a,b,c,d,e,f){for(var g=0;g<d;g+=1){var h=(g+1)/(d+1),i=2===e?Math.sqrt(Math.pow(b.points[3][0]-b.points[0][0],2)+Math.pow(b.points[3][1]-b.points[0][1],2)):0,j=b.normalAngle(h);setPoint(a,b.point(h),j,f,c,i/((d+1)*2),i/((d+1)*2),e),f=-f}return f}function linearOffset(a,b,c){var d=Math.atan2(b[0]-a[0],b[1]-a[1]);return[polarOffset(a,d,c),polarOffset(b,d,c)]}function offsetSegment(a,b){c=(h=linearOffset(a.points[0],a.points[1],b))[0],d=h[1],e=(h=linearOffset(a.points[1],a.points[2],b))[0],f=h[1],g=(h=linearOffset(a.points[2],a.points[3],b))[0];var c,d,e,f,g,h,i=h[1],j=lineIntersection(c,d,e,f);null===j&&(j=d);var k=lineIntersection(g,i,e,f);return null===k&&(k=g),new PolynomialBezier(c,j,k,i)}function joinLines(a,b,c,d,e){var f=b.points[3],g=c.points[0];if(3===d||pointEqual(f,g))return f;if(2===d){var h=-b.tangentAngle(1),i=-c.tangentAngle(0)+Math.PI,j=lineIntersection(f,polarOffset(f,h+Math.PI/2,100),g,polarOffset(g,h+Math.PI/2,100)),k=j?pointDistance(j,f):pointDistance(f,g)/2,l=polarOffset(f,h,2*k*roundCorner);return a.setXYAt(l[0],l[1],"o",a.length()-1),l=polarOffset(g,i,2*k*roundCorner),a.setTripleAt(g[0],g[1],g[0],g[1],l[0],l[1],a.length()),g}var m=pointEqual(f,b.points[2])?b.points[0]:b.points[2],n=pointEqual(g,c.points[1])?c.points[3]:c.points[1],o=lineIntersection(m,f,g,n);return o&&pointDistance(o,f)<e?(a.setTripleAt(o[0],o[1],o[0],o[1],o[0],o[1],a.length()),o):f}function getIntersection(a,b){var c=a.intersections(b);return(c.length&&floatEqual(c[0][0],1)&&c.shift(),c.length)?c[0]:null}function pruneSegmentIntersection(a,b){var c=a.slice(),d=b.slice(),e=getIntersection(a[a.length-1],b[0]);return(e&&(c[a.length-1]=a[a.length-1].split(e[0])[0],d[0]=b[0].split(e[1])[1]),a.length>1&&b.length>1&&(e=getIntersection(a[0],b[b.length-1])))?[[a[0].split(e[0])[0]],[b[b.length-1].split(e[1])[1]]]:[c,d]}function pruneIntersections(a){for(var b,c=1;c<a.length;c+=1)b=pruneSegmentIntersection(a[c-1],a[c]),a[c-1]=b[0],a[c]=b[1];return a.length>1&&(b=pruneSegmentIntersection(a[a.length-1],a[0]),a[a.length-1]=b[0],a[0]=b[1]),a}function offsetSegmentSplit(a,b){var c,d,e,f,g=a.inflectionPoints();if(0===g.length)return[offsetSegment(a,b)];if(1===g.length||floatEqual(g[1],1))return c=(e=a.split(g[0]))[0],d=e[1],[offsetSegment(c,b),offsetSegment(d,b)];c=(e=a.split(g[0]))[0];var h=(g[1]-g[0])/(1-g[0]);return f=(e=e[1].split(h))[0],d=e[1],[offsetSegment(c,b),offsetSegment(f,b),offsetSegment(d,b)]}function OffsetPathModifier(){}function getFontProperties(a){for(var b=a.fStyle?a.fStyle.split(" "):[],c="normal",d="normal",e=b.length,f=0;f<e;f+=1)switch(b[f].toLowerCase()){case"italic":d="italic";break;case"bold":c="700";break;case"black":c="900";break;case"medium":c="500";break;case"regular":case"normal":c="400";break;case"light":case"thin":c="200"}return{style:d,weight:a.fWeight||c}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(a,b){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(a,b.c,0,null,this),this.o=PropertyFactory.getProp(a,b.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(a,b.tr,this),this.so=PropertyFactory.getProp(a,b.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(a,b.tr.eo,0,.01,this),this.data=b,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(a,b,c,d,e,f){var g=f?-1:1,h=d.s.v[0]+(1-d.s.v[0])*(1-e),i=d.s.v[1]+(1-d.s.v[1])*(1-e);a.translate(d.p.v[0]*g*e,d.p.v[1]*g*e,d.p.v[2]),b.translate(-d.a.v[0],-d.a.v[1],d.a.v[2]),b.rotate(-d.r.v*g*e),b.translate(d.a.v[0],d.a.v[1],d.a.v[2]),c.translate(-d.a.v[0],-d.a.v[1],d.a.v[2]),c.scale(f?1/h:h,f?1/i:i),c.translate(d.a.v[0],d.a.v[1],d.a.v[2])},RepeaterModifier.prototype.init=function(a,b,c,d){for(this.elem=a,this.arr=b,this.pos=c,this.elemsData=d,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(a),this.initModifierProperties(a,b[c]);c>0;)c-=1,this._elements.unshift(b[c]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]._processed=!1,"gr"===a[b].ty&&this.resetElements(a[b].it)},RepeaterModifier.prototype.cloneElements=function(a){var b=JSON.parse(JSON.stringify(a));return this.resetElements(b),b},RepeaterModifier.prototype.changeGroupRender=function(a,b){var c,d=a.length;for(c=0;c<d;c+=1)a[c]._render=b,"gr"===a[c].ty&&this.changeGroupRender(a[c].it,b)},RepeaterModifier.prototype.processShapes=function(a){var b=!1;if(this._mdf||a){var c,d,e,f,g,h,i,j,k=Math.ceil(this.c.v);if(this._groups.length<k){for(;this._groups.length<k;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes(),b=!0}for(e=0,g=0;e<=this._groups.length-1;e+=1){if(h=g<k,this._groups[e]._render=h,this.changeGroupRender(this._groups[e].it,h),!h){var m=this.elemsData[e].it,n=m[m.length-1];0!==n.transform.op.v?(n.transform.op._mdf=!0,n.transform.op.v=0):n.transform.op._mdf=!1}g+=1}this._currentCopies=k;var o=this.o.v,p=o%1,q=o>0?Math.floor(o):Math.ceil(o),r=this.pMatrix.props,s=this.rMatrix.props,t=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var u=0;if(o>0){for(;u<q;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),u+=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,p,!1),u+=p)}else if(o<0){for(;u>q;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),u-=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-p,!0),u-=p)}for(e=1===this.data.m?0:this._currentCopies-1,f=1===this.data.m?1:-1,g=this._currentCopies;g;){if(j=(d=(c=this.elemsData[e].it)[c.length-1].transform.mProps.v.props).length,c[c.length-1].transform.mProps._mdf=!0,c[c.length-1].transform.op._mdf=!0,c[c.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(e/(this._currentCopies-1)),0!==u){for((0!==e&&1===f||e!==this._currentCopies-1&&-1===f)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15]),this.matrix.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.matrix.transform(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]),i=0;i<j;i+=1)d[i]=this.matrix.props[i];this.matrix.reset()}else for(this.matrix.reset(),i=0;i<j;i+=1)d[i]=this.matrix.props[i];u+=1,g-=1,e+=f}}else for(g=this._currentCopies,e=0,f=1;g;)d=(c=this.elemsData[e].it)[c.length-1].transform.mProps.v.props,c[c.length-1].transform.mProps._mdf=!1,c[c.length-1].transform.op._mdf=!1,g-=1,e+=f;return b},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(a,b){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(a,b.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=shapePool.newElement();p.c=a.c;var q=a._length,r=0;for(c=0;c<q;c+=1)d=a.v[c],f=a.o[c],e=a.i[c],d[0]===f[0]&&d[1]===f[1]&&d[0]===e[0]&&d[1]===e[1]?0!==c&&c!==q-1||a.c?(g=0===c?a.v[q-1]:a.v[c-1],i=(h=Math.sqrt(Math.pow(d[0]-g[0],2)+Math.pow(d[1]-g[1],2)))?Math.min(h/2,b)/h:0,j=n=d[0]+(g[0]-d[0])*i,k=o=d[1]-(d[1]-g[1])*i,l=j-(j-d[0])*roundCorner,m=k-(k-d[1])*roundCorner,p.setTripleAt(j,k,l,m,n,o,r),r+=1,g=c===q-1?a.v[0]:a.v[c+1],i=(h=Math.sqrt(Math.pow(d[0]-g[0],2)+Math.pow(d[1]-g[1],2)))?Math.min(h/2,b)/h:0,j=l=d[0]+(g[0]-d[0])*i,k=m=d[1]+(g[1]-d[1])*i,n=j-(j-d[0])*roundCorner,o=k-(k-d[1])*roundCorner,p.setTripleAt(j,k,l,m,n,o,r)):p.setTripleAt(d[0],d[1],f[0],f[1],e[0],e[1],r):p.setTripleAt(a.v[c][0],a.v[c][1],a.o[c][0],a.o[c][1],a.i[c][0],a.i[c][1],r),r+=1;return p},RoundCornersModifier.prototype.processShapes=function(a){var b,c,d,e,f,g,h=this.shapes.length,i=this.rd.v;if(0!==i)for(c=0;c<h;c+=1){if(g=(f=this.shapes[c]).localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!a))for(g.releaseShapes(),f.shape._mdf=!0,b=f.shape.paths.shapes,e=f.shape.paths._length,d=0;d<e;d+=1)g.addShape(this.processPath(b[d],i));f.shape.paths=f.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(a){return[((this.a[0]*a+this.b[0])*a+this.c[0])*a+this.d[0],((this.a[1]*a+this.b[1])*a+this.c[1])*a+this.d[1]]},PolynomialBezier.prototype.derivative=function(a){return[(3*a*this.a[0]+2*this.b[0])*a+this.c[0],(3*a*this.a[1]+2*this.b[1])*a+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(a){var b=this.derivative(a);return Math.atan2(b[1],b[0])},PolynomialBezier.prototype.normalAngle=function(a){var b=this.derivative(a);return Math.atan2(b[0],b[1])},PolynomialBezier.prototype.inflectionPoints=function(){var a=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(a))return[];var b=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/a,c=b*b-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/a;if(c<0)return[];var d=Math.sqrt(c);return floatZero(d)?d>0&&d<1?[b]:[]:[b-d,b+d].filter(function(a){return a>0&&a<1})},PolynomialBezier.prototype.split=function(a){if(a<=0)return[singlePoint(this.points[0]),this];if(a>=1)return[this,singlePoint(this.points[this.points.length-1])];var b=lerpPoint(this.points[0],this.points[1],a),c=lerpPoint(this.points[1],this.points[2],a),d=lerpPoint(this.points[2],this.points[3],a),e=lerpPoint(b,c,a),f=lerpPoint(c,d,a),g=lerpPoint(e,f,a);return[new PolynomialBezier(this.points[0],b,e,g,!0),new PolynomialBezier(g,f,d,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var a=this.bounds();return{left:a.x.min,right:a.x.max,top:a.y.min,bottom:a.y.max,width:a.x.max-a.x.min,height:a.y.max-a.y.min,cx:(a.x.max+a.x.min)/2,cy:(a.y.max+a.y.min)/2}},PolynomialBezier.prototype.intersections=function(a,b,c){void 0===b&&(b=2),void 0===c&&(c=7);var d=[];return intersectsImpl(intersectData(this,0,1),intersectData(a,0,1),0,b,d,c),d},PolynomialBezier.shapeSegment=function(a,b){var c=(b+1)%a.length();return new PolynomialBezier(a.v[b],a.o[b],a.i[c],a.v[c],!0)},PolynomialBezier.shapeSegmentInverted=function(a,b){var c=(b+1)%a.length();return new PolynomialBezier(a.v[c],a.i[c],a.o[b],a.v[b],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(a,b){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(a,b.s,0,null,this),this.frequency=PropertyFactory.getProp(a,b.r,0,null,this),this.pointsType=PropertyFactory.getProp(a,b.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(a,b,c,d){var e=a._length,f=shapePool.newElement();if(f.c=a.c,a.c||(e-=1),0===e)return f;var g=-1,h=PolynomialBezier.shapeSegment(a,0);zigZagCorner(f,a,0,b,c,d,g);for(var i=0;i<e;i+=1)g=zigZagSegment(f,h,b,c,d,-g),h=i!==e-1||a.c?PolynomialBezier.shapeSegment(a,(i+1)%e):null,zigZagCorner(f,a,i+1,b,c,d,g);return f},ZigZagModifier.prototype.processShapes=function(a){var b,c,d,e,f,g,h=this.shapes.length,i=this.amplitude.v,j=Math.max(0,Math.round(this.frequency.v)),k=this.pointsType.v;if(0!==i)for(c=0;c<h;c+=1){if(g=(f=this.shapes[c]).localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!a))for(g.releaseShapes(),f.shape._mdf=!0,b=f.shape.paths.shapes,e=f.shape.paths._length,d=0;d<e;d+=1)g.addShape(this.processPath(b[d],i,j,k));f.shape.paths=f.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(a,b){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(a,b.a,0,null,this),this.miterLimit=PropertyFactory.getProp(a,b.ml,0,null,this),this.lineJoin=b.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(a,b,c,d){var e,f,g,h=shapePool.newElement();h.c=a.c;var i=a.length();a.c||(i-=1);var j=[];for(e=0;e<i;e+=1)g=PolynomialBezier.shapeSegment(a,e),j.push(offsetSegmentSplit(g,b));if(!a.c)for(e=i-1;e>=0;e-=1)g=PolynomialBezier.shapeSegmentInverted(a,e),j.push(offsetSegmentSplit(g,b));j=pruneIntersections(j);var k=null,l=null;for(e=0;e<j.length;e+=1){var m=j[e];for(l&&(k=joinLines(h,l,m[0],c,d)),l=m[m.length-1],f=0;f<m.length;f+=1)g=m[f],k&&pointEqual(g.points[0],k)?h.setXYAt(g.points[1][0],g.points[1][1],"o",h.length()-1):h.setTripleAt(g.points[0][0],g.points[0][1],g.points[1][0],g.points[1][1],g.points[0][0],g.points[0][1],h.length()),h.setTripleAt(g.points[3][0],g.points[3][1],g.points[3][0],g.points[3][1],g.points[2][0],g.points[2][1],h.length()),k=g.points[3]}return j.length&&joinLines(h,l,j[0][0],c,d),h},OffsetPathModifier.prototype.processShapes=function(a){var b,c,d,e,f,g,h=this.shapes.length,i=this.amount.v,j=this.miterLimit.v,k=this.lineJoin;if(0!==i)for(c=0;c<h;c+=1){if(g=(f=this.shapes[c]).localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!a))for(g.releaseShapes(),f.shape._mdf=!0,b=f.shape.paths.shapes,e=f.shape.paths._length,d=0;d<e;d+=1)g.addShape(this.processPath(b[d],i,k,j));f.shape.paths=f.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var a=5e3,b={w:0,size:0,shapes:[],data:{shapes:[]}},c=[];c=c.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var d=127988,e=917631,f=917601,g=917626,h=65039,i=8205,j=127462,k=127487,l=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function m(a){var b,c=a.split(","),d=c.length,e=[];for(b=0;b<d;b+=1)"sans-serif"!==c[b]&&"monospace"!==c[b]&&e.push(c[b]);return e.join(",")}function n(a,b){var c=createTag("span");c.setAttribute("aria-hidden",!0),c.style.fontFamily=b;var d=createTag("span");d.innerText="giItT1WQy@!-/#",c.style.position="absolute",c.style.left="-10000px",c.style.top="-10000px",c.style.fontSize="300px",c.style.fontVariant="normal",c.style.fontStyle="normal",c.style.fontWeight="normal",c.style.letterSpacing="0",c.appendChild(d),document.body.appendChild(c);var e=d.offsetWidth;return d.style.fontFamily=m(a)+", "+b,{node:d,w:e,parent:c}}function o(){var b,c,d,e=this.fonts.length,f=e;for(b=0;b<e;b+=1)this.fonts[b].loaded?f-=1:"n"===this.fonts[b].fOrigin||0===this.fonts[b].origin?this.fonts[b].loaded=!0:(c=this.fonts[b].monoCase.node,d=this.fonts[b].monoCase.w,c.offsetWidth!==d?(f-=1,this.fonts[b].loaded=!0):(c=this.fonts[b].sansCase.node,d=this.fonts[b].sansCase.w,c.offsetWidth!==d&&(f-=1,this.fonts[b].loaded=!0)),this.fonts[b].loaded&&(this.fonts[b].sansCase.parent.parentNode.removeChild(this.fonts[b].sansCase.parent),this.fonts[b].monoCase.parent.parentNode.removeChild(this.fonts[b].monoCase.parent)));0!==f&&Date.now()-this.initTime<a?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function p(a,b){var c,d=document.body&&b?"svg":"canvas",e=getFontProperties(a);if("svg"===d){var f=createNS("text");f.style.fontSize="100px",f.setAttribute("font-family",a.fFamily),f.setAttribute("font-style",e.style),f.setAttribute("font-weight",e.weight),f.textContent="1",a.fClass?(f.style.fontFamily="inherit",f.setAttribute("class",a.fClass)):f.style.fontFamily=a.fFamily,b.appendChild(f),c=f}else{var g=new OffscreenCanvas(500,500).getContext("2d");g.font=e.style+" "+e.weight+" 100px "+a.fFamily,c=g}return{measureText:function(a){return"svg"===d?(c.textContent=a,c.getComputedTextLength()):c.measureText(a).width}}}function q(a,b){if(!a){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=a.list;return}if(!document.body){this.isLoaded=!0,a.list.forEach(function(a){a.helper=p(a),a.cache={}}),this.fonts=a.list;return}var c=a.list,d=c.length,e=d;for(f=0;f<d;f+=1){var f,g,h,i=!0;if(c[f].loaded=!1,c[f].monoCase=n(c[f].fFamily,"monospace"),c[f].sansCase=n(c[f].fFamily,"sans-serif"),c[f].fPath){if("p"===c[f].fOrigin||3===c[f].origin){if((g=document.querySelectorAll('style[f-forigin="p"][f-family="'+c[f].fFamily+'"], style[f-origin="3"][f-family="'+c[f].fFamily+'"]')).length>0&&(i=!1),i){var j=createTag("style");j.setAttribute("f-forigin",c[f].fOrigin),j.setAttribute("f-origin",c[f].origin),j.setAttribute("f-family",c[f].fFamily),j.type="text/css",j.innerText="@font-face {font-family: "+c[f].fFamily+"; font-style: normal; src: url('"+c[f].fPath+"');}",b.appendChild(j)}}else if("g"===c[f].fOrigin||1===c[f].origin){for(h=0,g=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]');h<g.length;h+=1)-1!==g[h].href.indexOf(c[f].fPath)&&(i=!1);if(i){var k=createTag("link");k.setAttribute("f-forigin",c[f].fOrigin),k.setAttribute("f-origin",c[f].origin),k.type="text/css",k.rel="stylesheet",k.href=c[f].fPath,document.body.appendChild(k)}}else if("t"===c[f].fOrigin||2===c[f].origin){for(h=0,g=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]');h<g.length;h+=1)c[f].fPath===g[h].src&&(i=!1);if(i){var l=createTag("link");l.setAttribute("f-forigin",c[f].fOrigin),l.setAttribute("f-origin",c[f].origin),l.setAttribute("rel","stylesheet"),l.setAttribute("href",c[f].fPath),b.appendChild(l)}}}else c[f].loaded=!0,e-=1;c[f].helper=p(c[f],b),c[f].cache={},this.fonts.push(c[f])}0===e?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function r(a){if(a){this.chars||(this.chars=[]);var b,c,d,e=a.length,f=this.chars.length;for(b=0;b<e;b+=1){for(c=0,d=!1;c<f;)this.chars[c].style===a[b].style&&this.chars[c].fFamily===a[b].fFamily&&this.chars[c].ch===a[b].ch&&(d=!0),c+=1;d||(this.chars.push(a[b]),f+=1)}}}function s(a,c,d){for(var e=0,f=this.chars.length;e<f;){if(this.chars[e].ch===a&&this.chars[e].style===c&&this.chars[e].fFamily===d)return this.chars[e];e+=1}return("string"==typeof a&&13!==a.charCodeAt(0)||!a)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",a,c,d)),b}function t(a,b,c){var d=this.getFontByName(b),e=a;if(!d.cache[e]){var f=d.helper;if(" "===a){var g=f.measureText("|"+a+"|"),h=f.measureText("||");d.cache[e]=(g-h)/100}else d.cache[e]=f.measureText(a)/100}return d.cache[e]*c}function u(a){for(var b=0,c=this.fonts.length;b<c;){if(this.fonts[b].fName===a)return this.fonts[b];b+=1}return this.fonts[0]}function v(a){var b=0,c=a.charCodeAt(0);if(c>=55296&&c<=56319){var d=a.charCodeAt(1);d>=56320&&d<=57343&&(b=(c-55296)*1024+d-56320+65536)}return b}function w(a){return a===i}function x(a){return a===h}function y(a){var b=v(a);return!!(b>=j)&&!!(b<=k)}function z(a){return y(a.substr(0,2))&&y(a.substr(2,2))}function A(a){return -1!==c.indexOf(a)}function B(a,b){var c=v(a.substr(b,2));if(c!==d)return!1;var h=0;for(b+=2;h<5;){if((c=v(a.substr(b,2)))<f||c>g)return!1;h+=1,b+=2}return v(a.substr(b,2))===e}function C(){this.isLoaded=!0}var D=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return D.isModifier=function(a,b){var c=a.toString(16)+b.toString(16);return -1!==l.indexOf(c)},D.isZeroWidthJoiner=w,D.isFlagEmoji=z,D.isRegionalCode=y,D.isCombinedCharacter=A,D.isRegionalFlag=B,D.isVariationSelector=x,D.BLACK_FLAG_CODE_POINT=d,D.prototype={addChars:r,addFonts:q,getCharData:s,getFontByName:u,measureText:t,checkLoadedFonts:o,setIsLoaded:C},D}();function SlotManager(a){this.animationData=a}function slotFactory(a){return new SlotManager(a)}function RenderableElement(){}SlotManager.prototype.getProp=function(a){return this.animationData.slots&&this.animationData.slots[a.sid]?Object.assign(a,this.animationData.slots[a.sid].p):a},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(a){-1===this.renderableComponents.indexOf(a)&&this.renderableComponents.push(a)},removeRenderableComponent:function(a){-1!==this.renderableComponents.indexOf(a)&&this.renderableComponents.splice(this.renderableComponents.indexOf(a),1)},prepareRenderableFrame:function(a){this.checkLayerLimits(a)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(a){this.data.ip-this.data.st<=a&&this.data.op-this.data.st>a?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var a,b=this.renderableComponents.length;for(a=0;a<b;a+=1)this.renderableComponents[a].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var a={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(b){return a[b]||""}}();function SliderEffect(a,b,c){this.p=PropertyFactory.getProp(b,a.v,0,0,c)}function AngleEffect(a,b,c){this.p=PropertyFactory.getProp(b,a.v,0,0,c)}function ColorEffect(a,b,c){this.p=PropertyFactory.getProp(b,a.v,1,0,c)}function PointEffect(a,b,c){this.p=PropertyFactory.getProp(b,a.v,1,0,c)}function LayerIndexEffect(a,b,c){this.p=PropertyFactory.getProp(b,a.v,0,0,c)}function MaskIndexEffect(a,b,c){this.p=PropertyFactory.getProp(b,a.v,0,0,c)}function CheckboxEffect(a,b,c){this.p=PropertyFactory.getProp(b,a.v,0,0,c)}function NoValueEffect(){this.p={}}function EffectsManager(a,b){var c,d,e=a.ef||[];this.effectElements=[];var f=e.length;for(c=0;c<f;c+=1)d=new GroupEffect(e[c],b),this.effectElements.push(d)}function GroupEffect(a,b){this.init(a,b)}function BaseElement(){}function FrameElement(){}function FootageElement(a,b,c){this.initFrame(),this.initRenderable(),this.assetData=b.getAssetData(a.refId),this.footageData=b.imageLoader.getAsset(this.assetData),this.initBaseData(a,b,c)}function AudioElement(a,b,c){this.initFrame(),this.initRenderable(),this.assetData=b.getAssetData(a.refId),this.initBaseData(a,b,c),this._isPlaying=!1,this._canPlay=!1;var d=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(d),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,b.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,a.au&&a.au.lv?a.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(a,b){this.data=a,this.effectElements=[],this.initDynamicPropertyContainer(b);var c,d,e=this.data.ef.length,f=this.data.ef;for(c=0;c<e;c+=1){switch(d=null,f[c].ty){case 0:d=new SliderEffect(f[c],b,this);break;case 1:d=new AngleEffect(f[c],b,this);break;case 2:d=new ColorEffect(f[c],b,this);break;case 3:d=new PointEffect(f[c],b,this);break;case 4:case 7:d=new CheckboxEffect(f[c],b,this);break;case 10:d=new LayerIndexEffect(f[c],b,this);break;case 11:d=new MaskIndexEffect(f[c],b,this);break;case 5:d=new EffectsManager(f[c],b,this);break;default:d=new NoValueEffect(f[c],b,this)}d&&this.effectElements.push(d)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var a=0,b=this.data.masksProperties.length;a<b;){if("n"!==this.data.masksProperties[a].mode&&!1!==this.data.masksProperties[a].cl)return!0;a+=1}return!1},initExpressions:function(){var a=getExpressionInterfaces();if(a){var b=a("layer"),c=a("effects"),d=a("shape"),e=a("text"),f=a("comp");this.layerInterface=b(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var g=c.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(g),0===this.data.ty||this.data.xt?this.compInterface=f(this):4===this.data.ty?(this.layerInterface.shapeInterface=d(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=e(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var a=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=a},initBaseData:function(a,b,c){this.globalData=b,this.comp=c,this.data=a,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(a,b){var c,d=this.dynamicProperties.length;for(c=0;c<d;c+=1)(b||this._isParent&&"transform"===this.dynamicProperties[c].propType)&&(this.dynamicProperties[c].getValue(),this.dynamicProperties[c]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(a){-1===this.dynamicProperties.indexOf(a)&&this.dynamicProperties.push(a)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var a=getExpressionInterfaces();if(a){var b=a("footage");this.layerInterface=b(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(a){if(this.prepareRenderableFrame(a,!0),this.prepareProperties(a,!0),this.tm._placeholder)this._currentTime=a/this.data.sr;else{var b=this.tm.v;this._currentTime=b}this._volume=this.lv.v[0];var c=this._volume*this._volumeMultiplier;this._previousVolume!==c&&(this._previousVolume=c,this.audio.volume(c))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(a){this.audio.rate(a)},AudioElement.prototype.volume=function(a){this._volumeMultiplier=a,this._previousVolume=a*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(a){var b,c,d=this.layers.length;for(this.completeLayers=!0,b=d-1;b>=0;b-=1)!this.elements[b]&&(c=this.layers[b]).ip-c.st<=a-this.layers[b].st&&c.op-c.st>a-this.layers[b].st&&this.buildItem(b),this.completeLayers=!!this.elements[b]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(a){switch(a.ty){case 2:return this.createImage(a);case 0:return this.createComp(a);case 1:return this.createSolid(a);case 3:default:return this.createNull(a);case 4:return this.createShape(a);case 5:return this.createText(a);case 6:return this.createAudio(a);case 13:return this.createCamera(a);case 15:return this.createFootage(a)}},BaseRenderer.prototype.createCamera=function(){throw Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(a){return new AudioElement(a,this.globalData,this)},BaseRenderer.prototype.createFootage=function(a){return new FootageElement(a,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var a,b=this.layers.length;for(a=0;a<b;a+=1)this.buildItem(a);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(a){this.completeLayers=!1;var b,c,d=a.length,e=this.layers.length;for(b=0;b<d;b+=1)for(c=0;c<e;){if(this.layers[c].id===a[b].id){this.layers[c]=a[b];break}c+=1}},BaseRenderer.prototype.setProjectInterface=function(a){this.globalData.projectInterface=a},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(a,b,c){for(var d=this.elements,e=this.layers,f=0,g=e.length;f<g;)e[f].ind==b&&(d[f]&&!0!==d[f]?(c.push(d[f]),d[f].setAsParent(),void 0!==e[f].parent?this.buildElementParenting(a,e[f].parent,c):a.setHierarchy(c)):(this.buildItem(f),this.addPendingElement(a))),f+=1},BaseRenderer.prototype.addPendingElement=function(a){this.pendingElements.push(a)},BaseRenderer.prototype.searchExtraCompositions=function(a){var b,c=a.length;for(b=0;b<c;b+=1)if(a[b].xt){var d=this.createComp(a[b]);d.initExpressions(),this.globalData.projectInterface.registerComposition(d)}},BaseRenderer.prototype.getElementById=function(a){var b,c=this.elements.length;for(b=0;b<c;b+=1)if(this.elements[b].data.ind===a)return this.elements[b];return null},BaseRenderer.prototype.getElementByPath=function(a){var b=a.shift();if("number"==typeof b)c=this.elements[b];else{var c,d,e=this.elements.length;for(d=0;d<e;d+=1)if(this.elements[d].data.nm===b){c=this.elements[d];break}}return 0===a.length?c:c.getElementByPath(a)},BaseRenderer.prototype.setupGlobalData=function(a,b){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(a),this.globalData.fontManager.addChars(a.chars),this.globalData.fontManager.addFonts(a.fonts,b),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=a.fr,this.globalData.nm=a.nm,this.globalData.compSize={w:a.w,h:a.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(a,b,c){this.data=a,this.element=b,this.globalData=c,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var d=this.globalData.defs,e=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(e),this.solidPath="";var f=this.masksProperties,g=0,h=[],i=createElementID(),j="clipPath",k="clip-path";for(l=0;l<e;l+=1)if(("a"!==f[l].mode&&"n"!==f[l].mode||f[l].inv||100!==f[l].o.k||f[l].o.x)&&(j="mask",k="mask"),("s"===f[l].mode||"i"===f[l].mode)&&0===g?((o=createNS("rect")).setAttribute("fill","#ffffff"),o.setAttribute("width",this.element.comp.data.w||0),o.setAttribute("height",this.element.comp.data.h||0),h.push(o)):o=null,m=createNS("path"),"n"===f[l].mode)this.viewData[l]={op:PropertyFactory.getProp(this.element,f[l].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[l],3),elem:m,lastPath:""},d.appendChild(m);else{if(g+=1,m.setAttribute("fill","s"===f[l].mode?"#000000":"#ffffff"),m.setAttribute("clip-rule","nonzero"),0!==f[l].x.k?(j="mask",k="mask",r=PropertyFactory.getProp(this.element,f[l].x,0,null,this.element),s=createElementID(),(p=createNS("filter")).setAttribute("id",s),(q=createNS("feMorphology")).setAttribute("operator","erode"),q.setAttribute("in","SourceGraphic"),q.setAttribute("radius","0"),p.appendChild(q),d.appendChild(p),m.setAttribute("stroke","s"===f[l].mode?"#000000":"#ffffff")):(q=null,r=null),this.storedData[l]={elem:m,x:r,expan:q,lastPath:"",lastOperator:"",filterId:s,lastRadius:0},"i"===f[l].mode){var l,m,n,o,p,q,r,s,t=h.length,u=createNS("g");for(n=0;n<t;n+=1)u.appendChild(h[n]);var v=createNS("mask");v.setAttribute("mask-type","alpha"),v.setAttribute("id",i+"_"+g),v.appendChild(m),d.appendChild(v),u.setAttribute("mask","url("+getLocationHref()+"#"+i+"_"+g+")"),h.length=0,h.push(u)}else h.push(m);f[l].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[l]={elem:m,lastPath:"",op:PropertyFactory.getProp(this.element,f[l].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[l],3),invRect:o},this.viewData[l].prop.k||this.drawPath(f[l],this.viewData[l].prop.v,this.viewData[l])}for(l=0,this.maskElement=createNS(j),e=h.length;l<e;l+=1)this.maskElement.appendChild(h[l]);g>0&&(this.maskElement.setAttribute("id",i),this.element.maskedElement.setAttribute(k,"url("+getLocationHref()+"#"+i+")"),d.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var a=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:a,localMat:a,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var a,b=this.finalTransform.mat,c=0,d=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;c<d;){if(this.hierarchy[c].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}c+=1}if(this.finalTransform._matMdf)for(a=this.finalTransform.mProp.v.props,b.cloneFromProps(a),c=0;c<d;c+=1)b.multiply(this.hierarchy[c].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var a=0,b=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;a<b;)this.localTransforms[a]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[a]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),a+=1;if(this.finalTransform._localMatMdf){var c=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(c),a=1;a<b;a+=1){var d=this.localTransforms[a].matrix;c.multiply(d)}c.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var e=this.finalTransform.localOpacity;for(a=0;a<b;a+=1)e*=.01*this.localTransforms[a].opacity;this.finalTransform.localOpacity=e}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var a=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(a.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var b=0,c=a.length;for(b=0;b<c;b+=1)this.localTransforms.push(a[b])}}},globalToLocal:function(a){var b,c,d=[];d.push(this.finalTransform);for(var e=!0,f=this.comp;e;)f.finalTransform?(f.data.hasMask&&d.splice(0,0,f.finalTransform),f=f.comp):e=!1;var g=d.length;for(b=0;b<g;b+=1)c=d[b].mat.applyToPointArray(0,0,0),a=[a[0]-c[0],a[1]-c[1],0];return a},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(a){return this.viewData[a].prop},MaskElement.prototype.renderFrame=function(a){var b,c=this.element.finalTransform.mat,d=this.masksProperties.length;for(b=0;b<d;b+=1)if((this.viewData[b].prop._mdf||a)&&this.drawPath(this.masksProperties[b],this.viewData[b].prop.v,this.viewData[b]),(this.viewData[b].op._mdf||a)&&this.viewData[b].elem.setAttribute("fill-opacity",this.viewData[b].op.v),"n"!==this.masksProperties[b].mode&&(this.viewData[b].invRect&&(this.element.finalTransform.mProp._mdf||a)&&this.viewData[b].invRect.setAttribute("transform",c.getInverseMatrix().to2dCSS()),this.storedData[b].x&&(this.storedData[b].x._mdf||a))){var e=this.storedData[b].expan;this.storedData[b].x.v<0?("erode"!==this.storedData[b].lastOperator&&(this.storedData[b].lastOperator="erode",this.storedData[b].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[b].filterId+")")),e.setAttribute("radius",-this.storedData[b].x.v)):("dilate"!==this.storedData[b].lastOperator&&(this.storedData[b].lastOperator="dilate",this.storedData[b].elem.setAttribute("filter",null)),this.storedData[b].elem.setAttribute("stroke-width",2*this.storedData[b].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var a="M0,0 ";return a+(" h"+this.globalData.compSize.w+" v"+this.globalData.compSize.h+" h-"+this.globalData.compSize.w+(" v-"+this.globalData.compSize.h)+" ")},MaskElement.prototype.drawPath=function(a,b,c){var d,e,f=" M"+b.v[0][0]+","+b.v[0][1];for(d=1,e=b._length;d<e;d+=1)f+=" C"+b.o[d-1][0]+","+b.o[d-1][1]+" "+b.i[d][0]+","+b.i[d][1]+" "+b.v[d][0]+","+b.v[d][1];if(b.c&&e>1&&(f+=" C"+b.o[d-1][0]+","+b.o[d-1][1]+" "+b.i[0][0]+","+b.i[0][1]+" "+b.v[0][0]+","+b.v[0][1]),c.lastPath!==f){var g="";c.elem&&(b.c&&(g=a.inv?this.solidPath+f:f),c.elem.setAttribute("d",g)),c.lastPath=f}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var a={};function b(){var a=createNS("feColorMatrix");return a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),a}return a.createFilter=function a(a,b){var c=createNS("filter");return c.setAttribute("id",a),!0!==b&&(c.setAttribute("filterUnits","objectBoundingBox"),c.setAttribute("x","0%"),c.setAttribute("y","0%"),c.setAttribute("width","100%"),c.setAttribute("height","100%")),c},a.createAlphaToLuminanceFilter=b,a}(),featureSupport=function(){var a={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(a.maskType=!1),/firefox/i.test(navigator.userAgent)&&(a.svgLumaHidden=!1),a}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(a){var b,c,d="SourceGraphic",e=a.data.ef?a.data.ef.length:0,f=createElementID(),g=filtersFactory.createFilter(f,!0),h=0;for(b=0,this.filters=[];b<e;b+=1){c=null;var i=a.data.ef[b].ty;registeredEffects$1[i]&&(c=new registeredEffects$1[i].effect(g,a.effectsManager.effectElements[b],a,idPrefix+h,d),d=idPrefix+h,registeredEffects$1[i].countsAsEffect&&(h+=1)),c&&this.filters.push(c)}h&&(a.globalData.defs.appendChild(g),a.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+f+")")),this.filters.length&&a.addRenderableComponent(this)}function registerEffect$1(a,b,c){registeredEffects$1[a]={effect:b,countsAsEffect:c}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(a,b,c){this.assetData=b.getAssetData(a.refId),this.assetData&&this.assetData.sid&&(this.assetData=b.slotManager.getProp(this.assetData)),this.initElement(a,b,c),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(a,b){this.elem=a,this.pos=b}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(a){var b,c=this.filters.length;for(b=0;b<c;b+=1)this.filters[b].renderFrame(a)},SVGEffects.prototype.getEffects=function(a){var b,c=this.filters.length,d=[];for(b=0;b<c;b+=1)this.filters[b].type===a&&d.push(this.filters[b]);return d},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var a=null;if(this.data.td){this.matteMasks={};var b=createNS("g");b.setAttribute("id",this.layerId),b.appendChild(this.layerElement),a=b,this.globalData.defs.appendChild(b)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),a=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var c=createNS("clipPath"),d=createNS("path");d.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var e=createElementID();if(c.setAttribute("id",e),c.appendChild(d),this.globalData.defs.appendChild(c),this.checkMasks()){var f=createNS("g");f.setAttribute("clip-path","url("+getLocationHref()+"#"+e+")"),f.appendChild(this.layerElement),this.transformedElement=f,a?a.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+e+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(a){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[a]){var b,c,d,e,f=this.layerId+"_"+a;if(1===a||3===a){var g=createNS("mask");g.setAttribute("id",f),g.setAttribute("mask-type",3===a?"luminance":"alpha"),(d=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),g.appendChild(d),this.globalData.defs.appendChild(g),featureSupport.maskType||1!==a||(g.setAttribute("mask-type","luminance"),b=createElementID(),c=filtersFactory.createFilter(b),this.globalData.defs.appendChild(c),c.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(e=createNS("g")).appendChild(d),g.appendChild(e),e.setAttribute("filter","url("+getLocationHref()+"#"+b+")"))}else if(2===a){var h=createNS("mask");h.setAttribute("id",f),h.setAttribute("mask-type","alpha");var i=createNS("g");h.appendChild(i),b=createElementID(),c=filtersFactory.createFilter(b);var j=createNS("feComponentTransfer");j.setAttribute("in","SourceGraphic"),c.appendChild(j);var k=createNS("feFuncA");k.setAttribute("type","table"),k.setAttribute("tableValues","1.0 0.0"),j.appendChild(k),this.globalData.defs.appendChild(c);var l=createNS("rect");l.setAttribute("width",this.comp.data.w),l.setAttribute("height",this.comp.data.h),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("fill","#ffffff"),l.setAttribute("opacity","0"),i.setAttribute("filter","url("+getLocationHref()+"#"+b+")"),i.appendChild(l),(d=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),i.appendChild(d),featureSupport.maskType||(h.setAttribute("mask-type","luminance"),c.appendChild(filtersFactory.createAlphaToLuminanceFilter()),e=createNS("g"),i.appendChild(l),e.appendChild(this.layerElement),i.appendChild(e)),this.globalData.defs.appendChild(h)}this.matteMasks[a]=f}return this.matteMasks[a]},setMatte:function(a){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+a+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(a){this.hierarchy=a},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},function(){extendPrototype([RenderableElement,createProxyFunction({initElement:function(a,b,c){this.initFrame(),this.initBaseData(a,b,c),this.initTransform(a,b,c),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(a){this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement)}(),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var a=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",a),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(a){var b,c=this.shapeModifiers.length;for(b=0;b<c;b+=1)this.shapeModifiers[b].addShape(a)},isShapeInAnimatedModifiers:function(a){for(var b=0,c=this.shapeModifiers.length;b<c;)if(this.shapeModifiers[b].isAnimatedWithShape(a))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var a,b=this.shapes.length;for(a=0;a<b;a+=1)this.shapes[a].sh.reset();for(b=this.shapeModifiers.length,a=b-1;a>=0&&!this.shapeModifiers[a].processShapes(this._isFirstFrame);a-=1);}},searchProcessedElement:function(a){for(var b=this.processedElements,c=0,d=b.length;c<d;){if(b[c].elem===a)return b[c].pos;c+=1}return 0},addProcessedElement:function(a,b){for(var c=this.processedElements,d=c.length;d;)if(c[d-=1].elem===a){c[d].pos=b;return}c.push(new ProcessedElement(a,b))},prepareFrame:function(a){this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(a,b,c){this.caches=[],this.styles=[],this.transformers=a,this.lStr="",this.sh=c,this.lvl=b,this._isAnimated=!!c.k;for(var d=0,e=a.length;d<e;){if(a[d].mProps.dynamicProperties.length){this._isAnimated=!0;break}d+=1}}function SVGStyleData(a,b){this.data=a,this.type=a.ty,this.d="",this.lvl=b,this._mdf=!1,this.closed=!0===a.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(a,b,c,d){this.elem=a,this.frameId=-1,this.dataProps=createSizedArray(b.length),this.renderer=c,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",b.length?b.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(d);var e,f,g=b.length||0;for(e=0;e<g;e+=1)f=PropertyFactory.getProp(a,b[e].v,0,0,this),this.k=f.k||this.k,this.dataProps[e]={n:b[e].n,p:f};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(a,b,c){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(a,b.o,0,.01,this),this.w=PropertyFactory.getProp(a,b.w,0,null,this),this.d=new DashProperty(a,b.d||{},"svg",this),this.c=PropertyFactory.getProp(a,b.c,1,255,this),this.style=c,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(a,b,c){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(a,b.o,0,.01,this),this.c=PropertyFactory.getProp(a,b.c,1,255,this),this.style=c}function SVGNoStyleData(a,b,c){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.style=c}function GradientProperty(a,b,c){this.data=b,this.c=createTypedArray("uint8c",4*b.p);var d=b.k.k[0].s?b.k.k[0].s.length-4*b.p:b.k.k.length-4*b.p;this.o=createTypedArray("float32",d),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=d,this.initDynamicPropertyContainer(c),this.prop=PropertyFactory.getProp(a,b.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(a,b,c){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.initGradientData(a,b,c)}function SVGGradientStrokeStyleData(a,b,c){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(a,b.w,0,null,this),this.d=new DashProperty(a,b.d||{},"svg",this),this.initGradientData(a,b,c),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(a,b,c){this.transform={mProps:a,op:b,container:c},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(a){if((this.elem.globalData.frameId!==this.frameId||a)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||a,this._mdf)){var b=0,c=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),b=0;b<c;b+=1)"o"!==this.dataProps[b].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[b].p.v:this.dashArray[b]=this.dataProps[b].p.v:this.dashoffset[0]=this.dataProps[b].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(a,b){for(var c=0,d=this.o.length/2;c<d;){if(Math.abs(a[4*c]-a[4*b+2*c])>.01)return!1;c+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var a=0,b=this.data.k.k.length;a<b;){if(!this.comparePoints(this.data.k.k[a].s,this.data.p))return!1;a+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(a){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||a){var b,c,d,e=4*this.data.p;for(b=0;b<e;b+=1)c=b%4==0?100:255,d=Math.round(this.prop.v[b]*c),this.c[b]!==d&&(this.c[b]=d,this._cmdf=!a);if(this.o.length)for(e=this.prop.v.length,b=4*this.data.p;b<e;b+=1)c=b%2==0?100:1,d=b%2==0?Math.round(100*this.prop.v[b]):this.prop.v[b],this.o[b-4*this.data.p]!==d&&(this.o[b-4*this.data.p]=d,this._omdf=!a);this._mdf=!a}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(a,b,c){this.o=PropertyFactory.getProp(a,b.o,0,.01,this),this.s=PropertyFactory.getProp(a,b.s,1,null,this),this.e=PropertyFactory.getProp(a,b.e,1,null,this),this.h=PropertyFactory.getProp(a,b.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(a,b.a||{k:0},0,degToRads,this),this.g=new GradientProperty(a,b.g,this),this.style=c,this.stops=[],this.setGradientData(c.pElem,b),this.setGradientOpacity(b,c),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(a,b){var c,d,e,f=createElementID(),g=createNS(1===b.t?"linearGradient":"radialGradient");g.setAttribute("id",f),g.setAttribute("spreadMethod","pad"),g.setAttribute("gradientUnits","userSpaceOnUse");var h=[];for(d=0,e=4*b.g.p;d<e;d+=4)c=createNS("stop"),g.appendChild(c),h.push(c);a.setAttribute("gf"===b.ty?"fill":"stroke","url("+getLocationHref()+"#"+f+")"),this.gf=g,this.cst=h},SVGGradientFillStyleData.prototype.setGradientOpacity=function(a,b){if(this.g._hasOpacity&&!this.g._collapsable){var c,d,e,f=createNS("mask"),g=createNS("path");f.appendChild(g);var h=createElementID(),i=createElementID();f.setAttribute("id",i);var j=createNS(1===a.t?"linearGradient":"radialGradient");j.setAttribute("id",h),j.setAttribute("spreadMethod","pad"),j.setAttribute("gradientUnits","userSpaceOnUse"),e=a.g.k.k[0].s?a.g.k.k[0].s.length:a.g.k.k.length;var k=this.stops;for(d=4*a.g.p;d<e;d+=2)(c=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),j.appendChild(c),k.push(c);g.setAttribute("gf"===a.ty?"fill":"stroke","url("+getLocationHref()+"#"+h+")"),"gs"===a.ty&&(g.setAttribute("stroke-linecap",lineCapEnum[a.lc||2]),g.setAttribute("stroke-linejoin",lineJoinEnum[a.lj||2]),1===a.lj&&g.setAttribute("stroke-miterlimit",a.ml)),this.of=j,this.ms=f,this.ost=k,this.maskId=i,b.msElem=g}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(a,b,c,d){if(0===b)return"";var e,f=a.o,g=a.i,h=a.v,i=" M"+d.applyToPointStringified(h[0][0],h[0][1]);for(e=1;e<b;e+=1)i+=" C"+d.applyToPointStringified(f[e-1][0],f[e-1][1])+" "+d.applyToPointStringified(g[e][0],g[e][1])+" "+d.applyToPointStringified(h[e][0],h[e][1]);return c&&b&&(i+=" C"+d.applyToPointStringified(f[e-1][0],f[e-1][1])+" "+d.applyToPointStringified(g[0][0],g[0][1])+" "+d.applyToPointStringified(h[0][0],h[0][1])+"z"),i},SVGElementsRenderer=function(){var a=new Matrix,b=new Matrix;function c(a,b,c){(c||b.transform.op._mdf)&&b.transform.container.setAttribute("opacity",b.transform.op.v),(c||b.transform.mProps._mdf)&&b.transform.container.setAttribute("transform",b.transform.mProps.v.to2dCSS())}function d(){}function e(c,d,e){var f,g,h,i,j,k,l,m,n,o,p=d.styles.length,q=d.lvl;for(k=0;k<p;k+=1){if(i=d.sh._mdf||e,d.styles[k].lvl<q){for(m=b.reset(),n=q-d.styles[k].lvl,o=d.transformers.length-1;!i&&n>0;)i=d.transformers[o].mProps._mdf||i,n-=1,o-=1;if(i)for(n=q-d.styles[k].lvl,o=d.transformers.length-1;n>0;)m.multiply(d.transformers[o].mProps.v),n-=1,o-=1}else m=a;if(g=(l=d.sh.paths)._length,i){for(f=0,h="";f<g;f+=1)(j=l.shapes[f])&&j._length&&(h+=buildShapeString(j,j._length,j.c,m));d.caches[k]=h}else h=d.caches[k];d.styles[k].d+=!0===c.hd?"":h,d.styles[k]._mdf=i||d.styles[k]._mdf}}function f(a,b,c){var d=b.style;(b.c._mdf||c)&&d.pElem.setAttribute("fill","rgb("+bmFloor(b.c.v[0])+","+bmFloor(b.c.v[1])+","+bmFloor(b.c.v[2])+")"),(b.o._mdf||c)&&d.pElem.setAttribute("fill-opacity",b.o.v)}function g(a,b,c){h(a,b,c),i(a,b,c)}function h(a,b,c){var d,e,f,g,h,i=b.gf,j=b.g._hasOpacity,k=b.s.v,l=b.e.v;if(b.o._mdf||c){var m="gf"===a.ty?"fill-opacity":"stroke-opacity";b.style.pElem.setAttribute(m,b.o.v)}if(b.s._mdf||c){var n=1===a.t?"x1":"cx",o="x1"===n?"y1":"cy";i.setAttribute(n,k[0]),i.setAttribute(o,k[1]),j&&!b.g._collapsable&&(b.of.setAttribute(n,k[0]),b.of.setAttribute(o,k[1]))}if(b.g._cmdf||c){d=b.cst;var p=b.g.c;for(e=0,f=d.length;e<f;e+=1)(g=d[e]).setAttribute("offset",p[4*e]+"%"),g.setAttribute("stop-color","rgb("+p[4*e+1]+","+p[4*e+2]+","+p[4*e+3]+")")}if(j&&(b.g._omdf||c)){var q=b.g.o;for(e=0,f=(d=b.g._collapsable?b.cst:b.ost).length;e<f;e+=1)g=d[e],b.g._collapsable||g.setAttribute("offset",q[2*e]+"%"),g.setAttribute("stop-opacity",q[2*e+1])}if(1===a.t)(b.e._mdf||c)&&(i.setAttribute("x2",l[0]),i.setAttribute("y2",l[1]),j&&!b.g._collapsable&&(b.of.setAttribute("x2",l[0]),b.of.setAttribute("y2",l[1])));else if((b.s._mdf||b.e._mdf||c)&&(h=Math.sqrt(Math.pow(k[0]-l[0],2)+Math.pow(k[1]-l[1],2)),i.setAttribute("r",h),j&&!b.g._collapsable&&b.of.setAttribute("r",h)),b.e._mdf||b.h._mdf||b.a._mdf||c){h||(h=Math.sqrt(Math.pow(k[0]-l[0],2)+Math.pow(k[1]-l[1],2)));var r=Math.atan2(l[1]-k[1],l[0]-k[0]),s=b.h.v;s>=1?s=.99:s<=-1&&(s=-.99);var t=h*s,u=Math.cos(r+b.a.v)*t+k[0],v=Math.sin(r+b.a.v)*t+k[1];i.setAttribute("fx",u),i.setAttribute("fy",v),j&&!b.g._collapsable&&(b.of.setAttribute("fx",u),b.of.setAttribute("fy",v))}}function i(a,b,c){var d=b.style,e=b.d;e&&(e._mdf||c)&&e.dashStr&&(d.pElem.setAttribute("stroke-dasharray",e.dashStr),d.pElem.setAttribute("stroke-dashoffset",e.dashoffset[0])),b.c&&(b.c._mdf||c)&&d.pElem.setAttribute("stroke","rgb("+bmFloor(b.c.v[0])+","+bmFloor(b.c.v[1])+","+bmFloor(b.c.v[2])+")"),(b.o._mdf||c)&&d.pElem.setAttribute("stroke-opacity",b.o.v),(b.w._mdf||c)&&(d.pElem.setAttribute("stroke-width",b.w.v),d.msElem&&d.msElem.setAttribute("stroke-width",b.w.v))}return{createRenderFunction:function(a){switch(a.ty){case"fl":return f;case"gf":return h;case"gs":return g;case"st":return i;case"sh":case"el":case"rc":case"sr":return e;case"tr":return c;case"no":return d;default:return null}}}}();function SVGShapeElement(a,b,c){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(a,b,c),this.prevViewData=[]}function LetterProps(a,b,c,d,e,f){this.o=a,this.sw=b,this.sc=c,this.fc=d,this.m=e,this.p=f,this._mdf={o:!0,sw:!!b,sc:!!c,fc:!!d,m:!0,p:!0}}function TextProperty(a,b){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,b.d&&b.d.sid&&(b.d=a.globalData.slotManager.getProp(b.d)),this.data=b,this.elem=a,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var a,b,c,d,e=this.shapes.length,f=this.stylesList.length,g=[],h=!1;for(c=0;c<f;c+=1){for(a=0,d=this.stylesList[c],h=!1,g.length=0;a<e;a+=1)-1!==(b=this.shapes[a]).styles.indexOf(d)&&(g.push(b),h=b._isAnimated||h);g.length>1&&h&&this.setShapesAsAnimated(g)}},SVGShapeElement.prototype.setShapesAsAnimated=function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(a,b){var c,d=new SVGStyleData(a,b),e=d.pElem;return"st"===a.ty?c=new SVGStrokeStyleData(this,a,d):"fl"===a.ty?c=new SVGFillStyleData(this,a,d):"gf"===a.ty||"gs"===a.ty?(c=new("gf"===a.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,a,d),this.globalData.defs.appendChild(c.gf),c.maskId&&(this.globalData.defs.appendChild(c.ms),this.globalData.defs.appendChild(c.of),e.setAttribute("mask","url("+getLocationHref()+"#"+c.maskId+")"))):"no"===a.ty&&(c=new SVGNoStyleData(this,a,d)),("st"===a.ty||"gs"===a.ty)&&(e.setAttribute("stroke-linecap",lineCapEnum[a.lc||2]),e.setAttribute("stroke-linejoin",lineJoinEnum[a.lj||2]),e.setAttribute("fill-opacity","0"),1===a.lj&&e.setAttribute("stroke-miterlimit",a.ml)),2===a.r&&e.setAttribute("fill-rule","evenodd"),a.ln&&e.setAttribute("id",a.ln),a.cl&&e.setAttribute("class",a.cl),a.bm&&(e.style["mix-blend-mode"]=getBlendMode(a.bm)),this.stylesList.push(d),this.addToAnimatedContents(a,c),c},SVGShapeElement.prototype.createGroupElement=function(a){var b=new ShapeGroupData;return a.ln&&b.gr.setAttribute("id",a.ln),a.cl&&b.gr.setAttribute("class",a.cl),a.bm&&(b.gr.style["mix-blend-mode"]=getBlendMode(a.bm)),b},SVGShapeElement.prototype.createTransformElement=function(a,b){var c=TransformPropertyFactory.getTransformProperty(this,a,this),d=new SVGTransformData(c,c.o,b);return this.addToAnimatedContents(a,d),d},SVGShapeElement.prototype.createShapeElement=function(a,b,c){var d=4;"rc"===a.ty?d=5:"el"===a.ty?d=6:"sr"===a.ty&&(d=7);var e=new SVGShapeData(b,c,ShapePropertyFactory.getShapeProp(this,a,d,this));return this.shapes.push(e),this.addShapeToModifiers(e),this.addToAnimatedContents(a,e),e},SVGShapeElement.prototype.addToAnimatedContents=function(a,b){for(var c=0,d=this.animatedContents.length;c<d;){if(this.animatedContents[c].element===b)return;c+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(a),element:b,data:a})},SVGShapeElement.prototype.setElementStyles=function(a){var b,c=a.styles,d=this.stylesList.length;for(b=0;b<d;b+=1)this.stylesList[b].closed||c.push(this.stylesList[b])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var a,b=this.itemsData.length;for(a=0;a<b;a+=1)this.prevViewData[a]=this.itemsData[a];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),b=this.dynamicProperties.length,a=0;a<b;a+=1)this.dynamicProperties[a].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n=[].concat(f),o=a.length-1,p=[],q=[];for(h=o;h>=0;h-=1){if((m=this.searchProcessedElement(a[h]))?b[h]=c[m-1]:a[h]._render=g,"fl"===a[h].ty||"st"===a[h].ty||"gf"===a[h].ty||"gs"===a[h].ty||"no"===a[h].ty)m?b[h].style.closed=!1:b[h]=this.createStyleElement(a[h],e),a[h]._render&&b[h].style.pElem.parentNode!==d&&d.appendChild(b[h].style.pElem),p.push(b[h].style);else if("gr"===a[h].ty){if(m)for(i=0,j=b[h].it.length;i<j;i+=1)b[h].prevViewData[i]=b[h].it[i];else b[h]=this.createGroupElement(a[h]);this.searchShapes(a[h].it,b[h].it,b[h].prevViewData,b[h].gr,e+1,n,g),a[h]._render&&b[h].gr.parentNode!==d&&d.appendChild(b[h].gr)}else"tr"===a[h].ty?(m||(b[h]=this.createTransformElement(a[h],d)),k=b[h].transform,n.push(k)):"sh"===a[h].ty||"rc"===a[h].ty||"el"===a[h].ty||"sr"===a[h].ty?(m||(b[h]=this.createShapeElement(a[h],n,e)),this.setElementStyles(b[h])):"tm"===a[h].ty||"rd"===a[h].ty||"ms"===a[h].ty||"pb"===a[h].ty||"zz"===a[h].ty||"op"===a[h].ty?(m?(l=b[h]).closed=!1:((l=ShapeModifiers.getModifier(a[h].ty)).init(this,a[h]),b[h]=l,this.shapeModifiers.push(l)),q.push(l)):"rp"===a[h].ty&&(m?(l=b[h]).closed=!0:(l=ShapeModifiers.getModifier(a[h].ty),b[h]=l,l.init(this,a,h,b),this.shapeModifiers.push(l),g=!1),q.push(l));this.addProcessedElement(a[h],h+1)}for(h=0,o=p.length;h<o;h+=1)p[h].closed=!0;for(h=0,o=q.length;h<o;h+=1)q[h].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var a,b=this.stylesList.length;for(a=0;a<b;a+=1)this.stylesList[a].reset();for(this.renderShape(),a=0;a<b;a+=1)(this.stylesList[a]._mdf||this._isFirstFrame)&&(this.stylesList[a].msElem&&(this.stylesList[a].msElem.setAttribute("d",this.stylesList[a].d),this.stylesList[a].d="M0 0"+this.stylesList[a].d),this.stylesList[a].pElem.setAttribute("d",this.stylesList[a].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var a,b,c=this.animatedContents.length;for(a=0;a<c;a+=1)b=this.animatedContents[a],(this._isFirstFrame||b.element._isAnimated)&&!0!==b.data&&b.fn(b.data,b.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(a,b,c,d,e,f){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var g=!1;return this.o!==a&&(this.o=a,this._mdf.o=!0,g=!0),this.sw!==b&&(this.sw=b,this._mdf.sw=!0,g=!0),this.sc!==c&&(this.sc=c,this._mdf.sc=!0,g=!0),this.fc!==d&&(this.fc=d,this._mdf.fc=!0,g=!0),this.m!==e&&(this.m=e,this._mdf.m=!0,g=!0),f.length&&(this.p[0]!==f[0]||this.p[1]!==f[1]||this.p[4]!==f[4]||this.p[5]!==f[5]||this.p[12]!==f[12]||this.p[13]!==f[13])&&(this.p=f,this._mdf.p=!0,g=!0),g},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},TextProperty.prototype.setCurrentData=function(a){a.__complete||this.completeTextData(a),this.currentData=a,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(a){this.effectsSequence.push(a),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(a){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||a){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var b,c=this.currentData,d=this.keysIndex;if(this.lock)return void this.setCurrentData(this.currentData);this.lock=!0,this._mdf=!1;var e=this.effectsSequence.length,f=a||this.data.d.k[this.keysIndex].s;for(b=0;b<e;b+=1)f=d!==this.keysIndex?this.effectsSequence[b](f,f.t):this.effectsSequence[b](this.currentData,f.t);c!==f&&this.setCurrentData(f),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var a=this.data.d.k,b=this.elem.comp.renderedFrame,c=0,d=a.length;c<=d-1&&c!==d-1&&!(a[c+1].t>b);)c+=1;return this.keysIndex!==c&&(this.keysIndex=c),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(a){for(var b,c,d=[],e=0,f=a.length,g=!1,h=!1,i="";e<f;)g=h,h=!1,b=a.charCodeAt(e),i=a.charAt(e),FontManager.isCombinedCharacter(b)?g=!0:b>=55296&&b<=56319?FontManager.isRegionalFlag(a,e)?i=a.substr(e,14):(c=a.charCodeAt(e+1))>=56320&&c<=57343&&(FontManager.isModifier(b,c)?(i=a.substr(e,2),g=!0):i=FontManager.isFlagEmoji(a.substr(e,4))?a.substr(e,4):a.substr(e,2)):b>56319?(c=a.charCodeAt(e+1),FontManager.isVariationSelector(b)&&(g=!0)):FontManager.isZeroWidthJoiner(b)&&(g=!0,h=!0),g?(d[d.length-1]+=i,g=!1):d.push(i),e+=i.length;return d},TextProperty.prototype.completeTextData=function(a){a.__complete=!0;var b=this.elem.globalData.fontManager,c=this.data,d=[],e=0,f=c.m.g,g=0,h=0,i=0,j=[],k=0,l=0,m=b.getFontByName(a.f),n=0,o=getFontProperties(m);a.fWeight=o.weight,a.fStyle=o.style,a.finalSize=a.s,a.finalText=this.buildFinalText(a.t),r=a.finalText.length,a.finalLineHeight=a.lh;var p=a.tr/1e3*a.finalSize;if(a.sz)for(var q,r,s,t,u,v,w,x,y,z,A=!0,B=a.sz[0],C=a.sz[1];A;){z=this.buildFinalText(a.t),y=0,k=0,r=z.length,p=a.tr/1e3*a.finalSize;var D=-1;for(q=0;q<r;q+=1)x=z[q].charCodeAt(0),s=!1," "===z[q]?D=q:(13===x||3===x)&&(k=0,s=!0,y+=a.finalLineHeight||1.2*a.finalSize),b.chars?(w=b.getCharData(z[q],m.fStyle,m.fFamily),n=s?0:w.w*a.finalSize/100):n=b.measureText(z[q],a.f,a.finalSize),k+n>B&&" "!==z[q]?(-1===D?r+=1:q=D,y+=a.finalLineHeight||1.2*a.finalSize,z.splice(q,+(D===q),"\r"),D=-1,k=0):(k+=n,k+=p);y+=m.ascent*a.finalSize/100,this.canResize&&a.finalSize>this.minimumFontSize&&C<y?(a.finalSize-=1,a.finalLineHeight=a.finalSize*a.lh/a.s):(a.finalText=z,r=a.finalText.length,A=!1)}k=-p,n=0;var E=0;for(q=0;q<r;q+=1)if(s=!1,13===(x=(H=a.finalText[q]).charCodeAt(0))||3===x?(E=0,j.push(k),l=k>l?k:l,k=-2*p,t="",s=!0,i+=1):t=H,b.chars?(w=b.getCharData(H,m.fStyle,b.getFontByName(a.f).fFamily),n=s?0:w.w*a.finalSize/100):n=b.measureText(t,a.f,a.finalSize)," "===H?E+=n+p:(k+=n+p+E,E=0),d.push({l:n,an:n,add:g,n:s,anIndexes:[],val:t,line:i,animatorJustifyOffset:0}),2==f){if(g+=n,""===t||" "===t||q===r-1){for((""===t||" "===t)&&(g-=n);h<=q;)d[h].an=g,d[h].ind=e,d[h].extra=n,h+=1;e+=1,g=0}}else if(3==f){if(g+=n,""===t||q===r-1){for(""===t&&(g-=n);h<=q;)d[h].an=g,d[h].ind=e,d[h].extra=n,h+=1;g=0,e+=1}}else d[e].ind=e,d[e].extra=0,e+=1;if(a.l=d,l=k>l?k:l,j.push(k),a.sz)a.boxWidth=a.sz[0],a.justifyOffset=0;else switch(a.boxWidth=l,a.j){case 1:a.justifyOffset=-a.boxWidth;break;case 2:a.justifyOffset=-a.boxWidth/2;break;default:a.justifyOffset=0}a.lineWidths=j;var F=c.a;v=F.length;var G=[];for(u=0;u<v;u+=1){for((I=F[u]).a.sc&&(a.strokeColorAnim=!0),I.a.sw&&(a.strokeWidthAnim=!0),(I.a.fc||I.a.fh||I.a.fs||I.a.fb)&&(a.fillColorAnim=!0),L=0,K=I.s.b,q=0;q<r;q+=1)(J=d[q]).anIndexes[u]=L,(1==K&&""!==J.val||2==K&&""!==J.val&&" "!==J.val||3==K&&(J.n||" "==J.val||q==r-1)||4==K&&(J.n||q==r-1))&&(1===I.s.rn&&G.push(L),L+=1);c.a[u].s.totalChars=L;var H,I,J,K,L,M,N=-1;if(1===I.s.rn)for(q=0;q<r;q+=1)N!=(J=d[q]).anIndexes[u]&&(N=J.anIndexes[u],M=G.splice(Math.floor(Math.random()*G.length),1)[0]),J.anIndexes[u]=M}a.yOffset=a.finalLineHeight||1.2*a.finalSize,a.ls=a.ls||0,a.ascent=m.ascent*a.finalSize/100},TextProperty.prototype.updateDocumentData=function(a,b){b=void 0===b?this.keysIndex:b;var c=this.copyData({},this.data.d.k[b].s);c=this.copyData(c,a),this.data.d.k[b].s=c,this.recalculate(b),this.setCurrentData(c),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(a){var b=this.data.d.k[a].s;b.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(b)},TextProperty.prototype.canResizeFont=function(a){this.canResize=a,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(a){this.minimumFontSize=Math.floor(a)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var a=Math.max,b=Math.min,c=Math.floor;function d(a,b){this._currentTextLength=-1,this.k=!1,this.data=b,this.elem=a,this.comp=a.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(a),this.s=PropertyFactory.getProp(a,b.s||{k:0},0,0,this),"e"in b?this.e=PropertyFactory.getProp(a,b.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(a,b.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(a,b.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(a,b.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(a,b.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(a,b.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return d.prototype={getMult:function(d){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var e=0,f=0,g=1,h=1;this.ne.v>0?e=this.ne.v/100:f=-this.ne.v/100,this.xe.v>0?g=1-this.xe.v/100:h=1+this.xe.v/100;var i=BezierFactory.getBezierEasing(e,f,g,h).get,j=0,k=this.finalS,l=this.finalE,m=this.data.sh;if(2===m)j=i(j=l===k?+(d>=l):a(0,b(.5/(l-k)+(d-k)/(l-k),1)));else if(3===m)j=i(j=l===k?d>=l?0:1:1-a(0,b(.5/(l-k)+(d-k)/(l-k),1)));else if(4===m)l===k?j=0:(j=a(0,b(.5/(l-k)+(d-k)/(l-k),1)))<.5?j*=2:j=1-2*(j-.5),j=i(j);else if(5===m){if(l===k)j=0;else{var n=l-k,o=-n/2+(d=b(a(0,d+.5-k),l-k)),p=n/2;j=Math.sqrt(1-o*o/(p*p))}j=i(j)}else 6===m?j=i(j=l===k?0:(1+Math.cos(Math.PI+2*Math.PI*(d=b(a(0,d+.5-k),l-k))/(l-k)))/2):(d>=c(k)&&(j=d-k<0?a(0,b(b(l,1)-(k-d),1)):a(0,b(l-d,1))),j=i(j));if(100!==this.sm.v){var q=.01*this.sm.v;0===q&&(q=1e-8);var r=.5-.5*q;j<r?j=0:(j=(j-r)/q)>1&&(j=1)}return j*this.a.v},getValue:function(a){this.iterateDynamicProperties(),this._mdf=a||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,a&&2===this.data.r&&(this.e.v=this._currentTextLength);var b=2===this.data.r?1:100/this.data.totalChars,c=this.o.v/b,d=this.s.v/b+c,e=this.e.v/b+c;if(d>e){var f=d;d=e,e=f}this.finalS=d,this.finalE=e}},extendPrototype([DynamicPropertyContainer],d),{getTextSelectorProp:function(a,b,c){return new d(a,b,c)}}}();function TextAnimatorDataProperty(a,b,c){var d={propType:!1},e=PropertyFactory.getProp,f=b.a;this.a={r:f.r?e(a,f.r,0,degToRads,c):d,rx:f.rx?e(a,f.rx,0,degToRads,c):d,ry:f.ry?e(a,f.ry,0,degToRads,c):d,sk:f.sk?e(a,f.sk,0,degToRads,c):d,sa:f.sa?e(a,f.sa,0,degToRads,c):d,s:f.s?e(a,f.s,1,.01,c):d,a:f.a?e(a,f.a,1,0,c):d,o:f.o?e(a,f.o,0,.01,c):d,p:f.p?e(a,f.p,1,0,c):d,sw:f.sw?e(a,f.sw,0,0,c):d,sc:f.sc?e(a,f.sc,1,0,c):d,fc:f.fc?e(a,f.fc,1,0,c):d,fh:f.fh?e(a,f.fh,0,0,c):d,fs:f.fs?e(a,f.fs,0,.01,c):d,fb:f.fb?e(a,f.fb,0,.01,c):d,t:f.t?e(a,f.t,0,0,c):d},this.s=TextSelectorProp.getTextSelectorProp(a,b.s,c),this.s.t=b.s.t}function TextAnimatorProperty(a,b,c){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=a,this._renderType=b,this._elem=c,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(c)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var a,b,c=this._textData.a.length,d=PropertyFactory.getProp;for(a=0;a<c;a+=1)b=this._textData.a[a],this._animatorsData[a]=new TextAnimatorDataProperty(this._elem,b,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:d(this._elem,this._textData.p.a,0,0,this),f:d(this._elem,this._textData.p.f,0,0,this),l:d(this._elem,this._textData.p.l,0,0,this),r:d(this._elem,this._textData.p.r,0,0,this),p:d(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=d(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(a,b){if(this.lettersChangedFlag=b,this._mdf||this._isFirstFrame||b||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this._moreOptions.alignment.v,v=this._animatorsData,w=this._textData,x=this.mHelper,y=this._renderType,z=this.renderedLetters.length,A=a.l;if(this._hasMaskedPath){if(T=this._pathData.m,!this._pathData.n||this._pathData._mdf){var B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=T.v;for(this._pathData.r.v&&(V=V.reverse()),F={tLength:0,segments:[]},E=V._length-1,Q=0,D=0;D<E;D+=1)U=bez.buildBezierData(V.v[D],V.v[D+1],[V.o[D][0]-V.v[D][0],V.o[D][1]-V.v[D][1]],[V.i[D+1][0]-V.v[D+1][0],V.i[D+1][1]-V.v[D+1][1]]),F.tLength+=U.segmentLength,F.segments.push(U),Q+=U.segmentLength;D=E,T.v.c&&(U=bez.buildBezierData(V.v[D],V.v[0],[V.o[D][0]-V.v[D][0],V.o[D][1]-V.v[D][1]],[V.i[0][0]-V.v[0][0],V.i[0][1]-V.v[0][1]]),F.tLength+=U.segmentLength,F.segments.push(U),Q+=U.segmentLength),this._pathData.pi=F}if(F=this._pathData.pi,G=this._pathData.f.v,L=0,K=1,I=0,J=!0,O=F.segments,G<0&&T.v.c)for(F.tLength<Math.abs(G)&&(G=-Math.abs(G)%F.tLength),L=O.length-1,K=(N=O[L].points).length-1;G<0;)G+=N[K].partialLength,(K-=1)<0&&(L-=1,K=(N=O[L].points).length-1);M=(N=O[L].points)[K-1],P=(H=N[K]).partialLength}E=A.length,B=0,C=0;var W=1.2*a.finalSize*.714,X=!0;f=v.length;var Y=-1,Z=G,$=L,_=K,aa=-1,ab="",ac=this.defaultPropsArray;if(2===a.j||1===a.j){var ad=0,ae=0,af=2===a.j?-.5:-1,ag=0,ah=!0;for(D=0;D<E;D+=1)if(A[D].n){for(ad&&(ad+=ae);ag<D;)A[ag].animatorJustifyOffset=ad,ag+=1;ad=0,ah=!0}else{for(e=0;e<f;e+=1)(c=v[e].a).t.propType&&(ah&&2===a.j&&(ae+=c.t.v*af),(h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars)).length?ad+=c.t.v*h[0]*af:ad+=c.t.v*h*af);ah=!1}for(ad&&(ad+=ae);ag<D;)A[ag].animatorJustifyOffset=ad,ag+=1}for(D=0;D<E;D+=1){if(x.reset(),l=1,A[D].n)B=0,C+=a.yOffset,C+=+!!X,G=Z,X=!1,this._hasMaskedPath&&(L=$,K=_,M=(N=O[L].points)[K-1],P=(H=N[K]).partialLength,I=0),ab="",s="",q="",t="",ac=this.defaultPropsArray;else{if(this._hasMaskedPath){if(aa!==A[D].line){switch(a.j){case 1:G+=Q-a.lineWidths[A[D].line];break;case 2:G+=(Q-a.lineWidths[A[D].line])/2}aa=A[D].line}Y!==A[D].ind&&(A[Y]&&(G+=A[Y].extra),G+=A[D].an/2,Y=A[D].ind),G+=u[0]*A[D].an*.005;var ai=0;for(e=0;e<f;e+=1)(c=v[e].a).p.propType&&((h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars)).length?ai+=c.p.v[0]*h[0]:ai+=c.p.v[0]*h),c.a.propType&&((h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars)).length?ai+=c.a.v[0]*h[0]:ai+=c.a.v[0]*h);for(J=!0,this._pathData.a.v&&(G=.5*A[0].an+(Q-this._pathData.f.v-.5*A[0].an-.5*A[A.length-1].an)*Y/(E-1)+this._pathData.f.v);J;)I+P>=G+ai||!N?(R=(G+ai-I)/H.partialLength,j=M.point[0]+(H.point[0]-M.point[0])*R,k=M.point[1]+(H.point[1]-M.point[1])*R,x.translate(-u[0]*A[D].an*.005,-(.01*(u[1]*W))),J=!1):N&&(I+=H.partialLength,(K+=1)>=N.length&&(K=0,O[L+=1]?N=O[L].points:T.v.c?(K=0,N=O[L=0].points):(I-=H.partialLength,N=null)),N&&(M=H,P=(H=N[K]).partialLength));i=A[D].an/2-A[D].add,x.translate(-i,0,0)}else i=A[D].an/2-A[D].add,x.translate(-i,0,0),x.translate(-u[0]*A[D].an*.005,-u[1]*W*.01,0);for(e=0;e<f;e+=1)(c=v[e].a).t.propType&&(h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars),(0!==B||0!==a.j)&&(this._hasMaskedPath?h.length?G+=c.t.v*h[0]:G+=c.t.v*h:h.length?B+=c.t.v*h[0]:B+=c.t.v*h));for(a.strokeWidthAnim&&(n=a.sw||0),a.strokeColorAnim&&(m=a.sc?[a.sc[0],a.sc[1],a.sc[2]]:[0,0,0]),a.fillColorAnim&&a.fc&&(o=[a.fc[0],a.fc[1],a.fc[2]]),e=0;e<f;e+=1)(c=v[e].a).a.propType&&((h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars)).length?x.translate(-c.a.v[0]*h[0],-c.a.v[1]*h[1],c.a.v[2]*h[2]):x.translate(-c.a.v[0]*h,-c.a.v[1]*h,c.a.v[2]*h));for(e=0;e<f;e+=1)(c=v[e].a).s.propType&&((h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars)).length?x.scale(1+(c.s.v[0]-1)*h[0],1+(c.s.v[1]-1)*h[1],1):x.scale(1+(c.s.v[0]-1)*h,1+(c.s.v[1]-1)*h,1));for(e=0;e<f;e+=1){if(c=v[e].a,h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars),c.sk.propType&&(h.length?x.skewFromAxis(-c.sk.v*h[0],c.sa.v*h[1]):x.skewFromAxis(-c.sk.v*h,c.sa.v*h)),c.r.propType&&(h.length?x.rotateZ(-c.r.v*h[2]):x.rotateZ(-c.r.v*h)),c.ry.propType&&(h.length?x.rotateY(c.ry.v*h[1]):x.rotateY(c.ry.v*h)),c.rx.propType&&(h.length?x.rotateX(c.rx.v*h[0]):x.rotateX(c.rx.v*h)),c.o.propType&&(h.length?l+=(c.o.v*h[0]-l)*h[0]:l+=(c.o.v*h-l)*h),a.strokeWidthAnim&&c.sw.propType&&(h.length?n+=c.sw.v*h[0]:n+=c.sw.v*h),a.strokeColorAnim&&c.sc.propType)for(p=0;p<3;p+=1)h.length?m[p]+=(c.sc.v[p]-m[p])*h[0]:m[p]+=(c.sc.v[p]-m[p])*h;if(a.fillColorAnim&&a.fc){if(c.fc.propType)for(p=0;p<3;p+=1)h.length?o[p]+=(c.fc.v[p]-o[p])*h[0]:o[p]+=(c.fc.v[p]-o[p])*h;c.fh.propType&&(o=h.length?addHueToRGB(o,c.fh.v*h[0]):addHueToRGB(o,c.fh.v*h)),c.fs.propType&&(o=h.length?addSaturationToRGB(o,c.fs.v*h[0]):addSaturationToRGB(o,c.fs.v*h)),c.fb.propType&&(o=h.length?addBrightnessToRGB(o,c.fb.v*h[0]):addBrightnessToRGB(o,c.fb.v*h))}}for(e=0;e<f;e+=1)(c=v[e].a).p.propType&&(h=(d=v[e].s).getMult(A[D].anIndexes[e],w.a[e].s.totalChars),this._hasMaskedPath?h.length?x.translate(0,c.p.v[1]*h[0],-c.p.v[2]*h[1]):x.translate(0,c.p.v[1]*h,-c.p.v[2]*h):h.length?x.translate(c.p.v[0]*h[0],c.p.v[1]*h[1],-c.p.v[2]*h[2]):x.translate(c.p.v[0]*h,c.p.v[1]*h,-c.p.v[2]*h));if(a.strokeWidthAnim&&(q=n<0?0:n),a.strokeColorAnim&&(r="rgb("+Math.round(255*m[0])+","+Math.round(255*m[1])+","+Math.round(255*m[2])+")"),a.fillColorAnim&&a.fc&&(s="rgb("+Math.round(255*o[0])+","+Math.round(255*o[1])+","+Math.round(255*o[2])+")"),this._hasMaskedPath){if(x.translate(0,-a.ls),x.translate(0,u[1]*W*.01+C,0),this._pathData.p.v){var aj=180*Math.atan(S=(H.point[1]-M.point[1])/(H.point[0]-M.point[0]))/Math.PI;H.point[0]<M.point[0]&&(aj+=180),x.rotate(-aj*Math.PI/180)}x.translate(j,k,0),G-=u[0]*A[D].an*.005,A[D+1]&&Y!==A[D+1].ind&&(G+=A[D].an/2,G+=.001*a.tr*a.finalSize)}else{switch(x.translate(B,C,0),a.ps&&x.translate(a.ps[0],a.ps[1]+a.ascent,0),a.j){case 1:x.translate(A[D].animatorJustifyOffset+a.justifyOffset+(a.boxWidth-a.lineWidths[A[D].line]),0,0);break;case 2:x.translate(A[D].animatorJustifyOffset+a.justifyOffset+(a.boxWidth-a.lineWidths[A[D].line])/2,0,0)}x.translate(0,-a.ls),x.translate(i,0,0),x.translate(u[0]*A[D].an*.005,u[1]*W*.01,0),B+=A[D].l+.001*a.tr*a.finalSize}"html"===y?ab=x.toCSS():"svg"===y?ab=x.to2dCSS():ac=[x.props[0],x.props[1],x.props[2],x.props[3],x.props[4],x.props[5],x.props[6],x.props[7],x.props[8],x.props[9],x.props[10],x.props[11],x.props[12],x.props[13],x.props[14],x.props[15]],t=l}z<=D?(g=new LetterProps(t,q,r,s,ab,ac),this.renderedLetters.push(g),z+=1,this.lettersChangedFlag=!0):(g=this.renderedLetters[D],this.lettersChangedFlag=g.update(t,q,r,s,ab,ac)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(a,b,c){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(a,b,c),this.textProperty=new TextProperty(this,a.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(a.t,this.renderType,this),this.initTransform(a,b,c),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(a){this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange)},ITextElement.prototype.createPathShape=function(a,b){var c,d,e=b.length,f="";for(c=0;c<e;c+=1)"sh"===b[c].ty&&(f+=buildShapeString(d=b[c].ks.k,d.i.length,!0,a));return f},ITextElement.prototype.updateDocumentData=function(a,b){this.textProperty.updateDocumentData(a,b)},ITextElement.prototype.canResizeFont=function(a){this.textProperty.canResizeFont(a)},ITextElement.prototype.setMinimumFontSize=function(a){this.textProperty.setMinimumFontSize(a)},ITextElement.prototype.applyTextPropertiesToMatrix=function(a,b,c,d,e){switch(a.ps&&b.translate(a.ps[0],a.ps[1]+a.ascent,0),b.translate(0,-a.ls,0),a.j){case 1:b.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[c]),0,0);break;case 2:b.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[c])/2,0,0)}b.translate(d,e,0)},ITextElement.prototype.buildColor=function(a){return"rgb("+Math.round(255*a[0])+","+Math.round(255*a[1])+","+Math.round(255*a[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(a,b,c){this.textSpans=[],this.renderType="svg",this.initElement(a,b,c)}function ISolidElement(a,b,c){this.initElement(a,b,c)}function NullElement(a,b,c){this.initFrame(),this.initBaseData(a,b,c),this.initFrame(),this.initTransform(a,b,c),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(a,b,c){this.layers=a.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(a,b,c),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,b.frameRate,this):{_placeholder:!0}}function SVGRenderer(a,b){this.animationItem=a,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var c="";if(b&&b.title){var d=createNS("title"),e=createElementID();d.setAttribute("id",e),d.textContent=b.title,this.svgElement.appendChild(d),c+=e}if(b&&b.description){var f=createNS("desc"),g=createElementID();f.setAttribute("id",g),f.textContent=b.description,this.svgElement.appendChild(f),c+=" "+g}c&&this.svgElement.setAttribute("aria-labelledby",c);var h=createNS("defs");this.svgElement.appendChild(h);var i=createNS("g");this.svgElement.appendChild(i),this.layerElement=i,this.renderConfig={preserveAspectRatio:b&&b.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:b&&b.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:b&&b.contentVisibility||"visible",progressiveLoad:b&&b.progressiveLoad||!1,hideOnTransparent:!(b&&!1===b.hideOnTransparent),viewBoxOnly:b&&b.viewBoxOnly||!1,viewBoxSize:b&&b.viewBoxSize||!1,className:b&&b.className||"",id:b&&b.id||"",focusable:b&&b.focusable,filterSize:{width:b&&b.filterSize&&b.filterSize.width||"100%",height:b&&b.filterSize&&b.filterSize.height||"100%",x:b&&b.filterSize&&b.filterSize.x||"0%",y:b&&b.filterSize&&b.filterSize.y||"0%"},width:b&&b.width,height:b&&b.height,runExpressions:!b||void 0===b.runExpressions||b.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:h,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(a){for(var b=0,c=a.length,d=[],e="";b<c;)"\r"===a[b]||"\x03"===a[b]?(d.push(e),e=""):e+=a[b],b+=1;return d.push(e),d},SVGTextLottieElement.prototype.buildShapeData=function(a,b){if(a.shapes&&a.shapes.length){var c=a.shapes[0];if(c.it){var d=c.it[c.it.length-1];d.s&&(d.s.k[0]=b,d.s.k[1]=b)}}return a},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var a=this.textProperty.currentData;this.renderedLetters=createSizedArray(a?a.l.length:0),a.fc?this.layerElement.setAttribute("fill",this.buildColor(a.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),a.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(a.sc)),this.layerElement.setAttribute("stroke-width",a.sw)),this.layerElement.setAttribute("font-size",a.finalSize);var b=this.globalData.fontManager.getFontByName(a.f);if(b.fClass)this.layerElement.setAttribute("class",b.fClass);else{this.layerElement.setAttribute("font-family",b.fFamily);var c=a.fWeight,d=a.fStyle;this.layerElement.setAttribute("font-style",d),this.layerElement.setAttribute("font-weight",c)}this.layerElement.setAttribute("aria-label",a.t);var e=a.l||[],f=!!this.globalData.fontManager.chars;q=e.length;var g=this.mHelper,h="",i=this.data.singleShape,j=0,k=0,l=!0,m=.001*a.tr*a.finalSize;if(!i||f||a.sz){var n=this.textSpans.length;for(p=0;p<q;p+=1){if(this.textSpans[p]||(this.textSpans[p]={span:null,childSpan:null,glyph:null}),!f||!i||0===p){if(r=n>p?this.textSpans[p].span:createNS(f?"g":"text"),n<=p){if(r.setAttribute("stroke-linecap","butt"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("stroke-miterlimit","4"),this.textSpans[p].span=r,f){var o=createNS("g");r.appendChild(o),this.textSpans[p].childSpan=o}this.textSpans[p].span=r,this.layerElement.appendChild(r)}r.style.display="inherit"}if(g.reset(),i&&(e[p].n&&(j=-m,k+=a.yOffset,k+=+!!l,l=!1),this.applyTextPropertiesToMatrix(a,g,e[p].line,j,k),j+=e[p].l||0,j+=m),f){if(1===(s=this.globalData.fontManager.getCharData(a.finalText[p],b.fStyle,this.globalData.fontManager.getFontByName(a.f).fFamily)).t)t=new SVGCompElement(s.data,this.globalData,this);else{var p,q,r,s,t,u=emptyShapeData;s.data&&s.data.shapes&&(u=this.buildShapeData(s.data,a.finalSize)),t=new SVGShapeElement(u,this.globalData,this)}if(this.textSpans[p].glyph){var v=this.textSpans[p].glyph;this.textSpans[p].childSpan.removeChild(v.layerElement),v.destroy()}this.textSpans[p].glyph=t,t._debug=!0,t.prepareFrame(0),t.renderFrame(),this.textSpans[p].childSpan.appendChild(t.layerElement),1===s.t&&this.textSpans[p].childSpan.setAttribute("transform","scale("+a.finalSize/100+","+a.finalSize/100+")")}else i&&r.setAttribute("transform","translate("+g.props[12]+","+g.props[13]+")"),r.textContent=e[p].val,r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}i&&r&&r.setAttribute("d",h)}else{var w=this.textContainer,x="start";switch(a.j){case 1:x="end";break;case 2:x="middle";break;default:x="start"}w.setAttribute("text-anchor",x),w.setAttribute("letter-spacing",m);var y=this.buildTextContents(a.finalText);for(p=0,q=y.length,k=a.ps?a.ps[1]+a.ascent:0;p<q;p+=1)(r=this.textSpans[p].span||createNS("tspan")).textContent=y[p],r.setAttribute("x",0),r.setAttribute("y",k),r.style.display="inherit",w.appendChild(r),this.textSpans[p]||(this.textSpans[p]={span:null,glyph:null}),this.textSpans[p].span=r,k+=a.finalLineHeight;this.layerElement.appendChild(w)}for(;p<this.textSpans.length;)this.textSpans[p].span.style.display="none",p+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var a=this.layerElement.getBBox();this.bbox={top:a.y,left:a.x,width:a.width,height:a.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var a,b,c=this.textSpans.length;for(a=0,this.renderedFrame=this.comp.renderedFrame;a<c;a+=1)(b=this.textSpans[a].glyph)&&(b.prepareFrame(this.comp.renderedFrame-this.data.st),b._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var a,b,c,d,e,f=this.textAnimator.renderedLetters,g=this.textProperty.currentData.l;for(a=0,b=g.length;a<b;a+=1)!g[a].n&&(c=f[a],d=this.textSpans[a].span,(e=this.textSpans[a].glyph)&&e.renderFrame(),c._mdf.m&&d.setAttribute("transform",c.m),c._mdf.o&&d.setAttribute("opacity",c.o),c._mdf.sw&&d.setAttribute("stroke-width",c.sw),c._mdf.sc&&d.setAttribute("stroke",c.sc),c._mdf.fc&&d.setAttribute("fill",c.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var a=createNS("rect");a.setAttribute("width",this.data.sw),a.setAttribute("height",this.data.sh),a.setAttribute("fill",this.data.sc),this.layerElement.appendChild(a)},NullElement.prototype.prepareFrame=function(a){this.prepareProperties(a,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(a){return new NullElement(a,this.globalData,this)},SVGRendererBase.prototype.createShape=function(a){return new SVGShapeElement(a,this.globalData,this)},SVGRendererBase.prototype.createText=function(a){return new SVGTextLottieElement(a,this.globalData,this)},SVGRendererBase.prototype.createImage=function(a){return new IImageElement(a,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(a){return new ISolidElement(a,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(a){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+a.w+" "+a.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",a.w),this.svgElement.setAttribute("height",a.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var b=this.globalData.defs;this.setupGlobalData(a,b),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=a;var c=createNS("clipPath"),d=createNS("rect");d.setAttribute("width",a.w),d.setAttribute("height",a.h),d.setAttribute("x",0),d.setAttribute("y",0);var e=createElementID();c.setAttribute("id",e),c.appendChild(d),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+e+")"),b.appendChild(c),this.layers=a.layers,this.elements=createSizedArray(a.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var a,b=this.layers?this.layers.length:0;for(a=0;a<b;a+=1)this.elements[a]&&this.elements[a].destroy&&this.elements[a].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(a){var b=0,c=this.layers.length;for(b=0;b<c;b+=1)if(this.layers[b].ind===a)return b;return -1},SVGRendererBase.prototype.buildItem=function(a){var b=this.elements;if(!b[a]&&99!==this.layers[a].ty){b[a]=!0;var c=this.createItem(this.layers[a]);if(b[a]=c,getExpressionsPlugin()&&(0===this.layers[a].ty&&this.globalData.projectInterface.registerComposition(c),c.initExpressions()),this.appendElementInPos(c,a),this.layers[a].tt){var d="tp"in this.layers[a]?this.findIndexByInd(this.layers[a].tp):a-1;if(-1===d)return;if(this.elements[d]&&!0!==this.elements[d]){var e=b[d].getMatte(this.layers[a].tt);c.setMatte(e)}else this.buildItem(d),this.addPendingElement(c)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var a=this.pendingElements.pop();if(a.checkParenting(),a.data.tt)for(var b=0,c=this.elements.length;b<c;){if(this.elements[b]===a){var d="tp"in a.data?this.findIndexByInd(a.data.tp):b-1,e=this.elements[d].getMatte(this.layers[b].tt);a.setMatte(e);break}b+=1}}},SVGRendererBase.prototype.renderFrame=function(a){if(this.renderedFrame!==a&&!this.destroyed){null===a?a=this.renderedFrame:this.renderedFrame=a,this.globalData.frameNum=a,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=a,this.globalData._mdf=!1;var b,c=this.layers.length;for(this.completeLayers||this.checkLayers(a),b=c-1;b>=0;b-=1)(this.completeLayers||this.elements[b])&&this.elements[b].prepareFrame(a-this.layers[b].st);if(this.globalData._mdf)for(b=0;b<c;b+=1)(this.completeLayers||this.elements[b])&&this.elements[b].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(a,b){var c,d=a.getBaseElement();if(d){for(var e=0;e<b;)this.elements[e]&&!0!==this.elements[e]&&this.elements[e].getBaseElement()&&(c=this.elements[e].getBaseElement()),e+=1;c?this.layerElement.insertBefore(d,c):this.layerElement.appendChild(d)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(a,b,c){this.initFrame(),this.initBaseData(a,b,c),this.initTransform(a,b,c),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!b.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(a){if(this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=a/this.data.sr;else{var b,c=this.tm.v;c===this.data.op&&(c=this.data.op-1),this.renderedFrame=c}var d=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),b=d-1;b>=0;b-=1)(this.completeLayers||this.elements[b])&&(this.elements[b].prepareFrame(this.renderedFrame-this.layers[b].st),this.elements[b]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var a,b=this.layers.length;for(a=0;a<b;a+=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()},ICompElement.prototype.setElements=function(a){this.elements=a},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var a,b=this.layers.length;for(a=0;a<b;a+=1)this.elements[a]&&this.elements[a].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(a){return new SVGCompElement(a,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(a){return new SVGCompElement(a,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(a){var b,c=a.length,d="_";for(b=0;b<c;b+=1)d+=a[b].transform.key+"_";var e=this.sequences[d];return e||(e={transforms:[].concat(a),finalTransform:new Matrix,_mdf:!1},this.sequences[d]=e,this.sequenceList.push(e)),e},processSequence:function(a,b){for(var c=0,d=a.transforms.length,e=b;c<d&&!b;){if(a.transforms[c].transform.mProps._mdf){e=!0;break}c+=1}if(e)for(a.finalTransform.reset(),c=d-1;c>=0;c-=1)a.finalTransform.multiply(a.transforms[c].transform.mProps.v);a._mdf=e},processSequences:function(a){var b,c=this.sequenceList.length;for(b=0;b<c;b+=1)this.processSequence(this.sequenceList[b],a)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var a="__lottie_element_luma_buffer",b=null,c=null,d=null;function e(){var b=createNS("svg"),c=createNS("filter"),d=createNS("feColorMatrix");return c.setAttribute("id",a),d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),c.appendChild(d),b.appendChild(c),b.setAttribute("id",a+"_svg"),featureSupport.svgLumaHidden&&(b.style.display="none"),b}function f(){b||(d=e(),document.body.appendChild(d),(c=(b=createTag("canvas")).getContext("2d")).filter="url(#"+a+")",c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,1,1))}function g(d){return b||f(),b.width=d.width,b.height=d.height,c.filter="url(#"+a+")",b}return{load:f,get:g}};function createCanvas(a,b){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(a,b);var c=createTag("canvas");return c.width=a,c.height=b,c}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas}}(),registeredEffects={};function CVEffects(a){var b,c,d=a.data.ef?a.data.ef.length:0;for(b=0,this.filters=[];b<d;b+=1){c=null;var e=a.data.ef[b].ty;registeredEffects[e]&&(c=new registeredEffects[e].effect(a.effectsManager.effectElements[b],a)),c&&this.filters.push(c)}this.filters.length&&a.addRenderableComponent(this)}function registerEffect(a,b){registeredEffects[a]={effect:b}}function CVMaskElement(a,b){this.data=a,this.element=b,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var c,d=this.masksProperties.length,e=!1;for(c=0;c<d;c+=1)"n"!==this.masksProperties[c].mode&&(e=!0),this.viewData[c]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[c],3);this.hasMasks=e,e&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(a){var b,c=this.filters.length;for(b=0;b<c;b+=1)this.filters[b].renderFrame(a)},CVEffects.prototype.getEffects=function(a){var b,c=this.filters.length,d=[];for(b=0;b<c;b+=1)this.filters[b].type===a&&d.push(this.filters[b]);return d},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var a=this.element.finalTransform.mat,b=this.element.canvasContext,c=this.masksProperties.length;for(b.beginPath(),d=0;d<c;d+=1)if("n"!==this.masksProperties[d].mode){this.masksProperties[d].inv&&(b.moveTo(0,0),b.lineTo(this.element.globalData.compSize.w,0),b.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),b.lineTo(0,this.element.globalData.compSize.h),b.lineTo(0,0)),g=this.viewData[d].v,e=a.applyToPointArray(g.v[0][0],g.v[0][1],0),b.moveTo(e[0],e[1]);var d,e,f,g,h,i=g._length;for(h=1;h<i;h+=1)f=a.applyToTriplePoints(g.o[h-1],g.i[h],g.v[h]),b.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);f=a.applyToTriplePoints(g.o[h-1],g.i[0],g.v[0]),b.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])}this.element.globalData.renderer.save(!0),b.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(a,b,c,d){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var e,f,g=4;"rc"===b.ty?g=5:"el"===b.ty?g=6:"sr"===b.ty&&(g=7),this.sh=ShapePropertyFactory.getShapeProp(a,b,g,a);var h=c.length;for(e=0;e<h;e+=1)c[e].closed||(f={transforms:d.addTransformSequence(c[e].transforms),trNodes:[]},this.styledShapes.push(f),c[e].elements.push(f))}function CVShapeElement(a,b,c){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(a,b,c)}function CVTextElement(a,b,c){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(a,b,c)}function CVImageElement(a,b,c){this.assetData=b.getAssetData(a.refId),this.img=b.imageLoader.getAsset(this.assetData),this.initElement(a,b,c)}function CVSolidElement(a,b,c){this.initElement(a,b,c)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var a,b=15;for(a=0;a<b;a+=1){var c=new CanvasContext;this.stack[a]=c}this._length=b,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(a,b,c){this.completeLayers=!1,this.layers=a.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(a,b,c),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,b.frameRate,this):{_placeholder:!0}}function CanvasRenderer(a,b){this.animationItem=a,this.renderConfig={clearCanvas:!b||void 0===b.clearCanvas||b.clearCanvas,context:b&&b.context||null,progressiveLoad:b&&b.progressiveLoad||!1,preserveAspectRatio:b&&b.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:b&&b.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:b&&b.contentVisibility||"visible",className:b&&b.className||"",id:b&&b.id||"",runExpressions:!b||void 0===b.runExpressions||b.runExpressions},this.renderConfig.dpr=b&&b.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=b&&b.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(a,b,c){this.initElement(a,b,c)}function HShapeElement(a,b,c){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(a,b,c),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(a,b,c){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(a,b,c)}function HCameraElement(a,b,c){this.initFrame(),this.initBaseData(a,b,c),this.initHierarchy();var d=PropertyFactory.getProp;if(this.pe=d(this,a.pe,0,0,this),a.ks.p.s?(this.px=d(this,a.ks.p.x,1,0,this),this.py=d(this,a.ks.p.y,1,0,this),this.pz=d(this,a.ks.p.z,1,0,this)):this.p=d(this,a.ks.p,1,0,this),a.ks.a&&(this.a=d(this,a.ks.a,1,0,this)),a.ks.or.k.length&&a.ks.or.k[0].to){var e,f=a.ks.or.k.length;for(e=0;e<f;e+=1)a.ks.or.k[e].to=null,a.ks.or.k[e].ti=null}this.or=d(this,a.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=d(this,a.ks.rx,0,degToRads,this),this.ry=d(this,a.ks.ry,0,degToRads,this),this.rz=d(this,a.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(a,b,c){this.assetData=b.getAssetData(a.refId),this.initElement(a,b,c)}function HybridRendererBase(a,b){this.animationItem=a,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:b&&b.className||"",imagePreserveAspectRatio:b&&b.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(b&&!1===b.hideOnTransparent),filterSize:{width:b&&b.filterSize&&b.filterSize.width||"400%",height:b&&b.filterSize&&b.filterSize.height||"400%",x:b&&b.filterSize&&b.filterSize.x||"-100%",y:b&&b.filterSize&&b.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(a,b,c){this.layers=a.layers,this.supports3d=!a.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(a,b,c),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,b.frameRate,this):{_placeholder:!0}}function HybridRenderer(a,b){this.animationItem=a,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:b&&b.className||"",imagePreserveAspectRatio:b&&b.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(b&&!1===b.hideOnTransparent),filterSize:{width:b&&b.filterSize&&b.filterSize.width||"400%",height:b&&b.filterSize&&b.filterSize.height||"400%",x:b&&b.filterSize&&b.filterSize.x||"-100%",y:b&&b.filterSize&&b.filterSize.y||"-100%"},runExpressions:!b||void 0===b.runExpressions||b.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var a=this.globalData.canvasContext,b=assetLoader.createCanvas(a.canvas.width,a.canvas.height);this.buffers.push(b);var c=assetLoader.createCanvas(a.canvas.width,a.canvas.height);this.buffers.push(c),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var a=this.globalData;if(a.blendMode!==this.data.bm){a.blendMode=this.data.bm;var b=getBlendMode(this.data.bm);a.canvasContext.globalCompositeOperation=b}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(a){a.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var a=this.buffers[0].getContext("2d");this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var a=this.buffers[1],b=a.getContext("2d");if(this.clearCanvas(b),b.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var c=assetLoader.getLumaCanvas(this.canvasContext.canvas);c.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(c,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(a,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(a){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||a)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var b=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(b),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(b),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(a,b){var c={data:a,type:a.ty,preTransforms:this.transformsManager.addTransformSequence(b),transforms:[],elements:[],closed:!0===a.hd},d={};return"fl"===a.ty||"st"===a.ty?(d.c=PropertyFactory.getProp(this,a.c,1,255,this),d.c.k||(c.co="rgb("+bmFloor(d.c.v[0])+","+bmFloor(d.c.v[1])+","+bmFloor(d.c.v[2])+")")):("gf"===a.ty||"gs"===a.ty)&&(d.s=PropertyFactory.getProp(this,a.s,1,null,this),d.e=PropertyFactory.getProp(this,a.e,1,null,this),d.h=PropertyFactory.getProp(this,a.h||{k:0},0,.01,this),d.a=PropertyFactory.getProp(this,a.a||{k:0},0,degToRads,this),d.g=new GradientProperty(this,a.g,this)),d.o=PropertyFactory.getProp(this,a.o,0,.01,this),"st"===a.ty||"gs"===a.ty?(c.lc=lineCapEnum[a.lc||2],c.lj=lineJoinEnum[a.lj||2],1==a.lj&&(c.ml=a.ml),d.w=PropertyFactory.getProp(this,a.w,0,null,this),d.w.k||(c.wi=d.w.v),a.d&&(d.d=new DashProperty(this,a.d,"canvas",this),d.d.k||(c.da=d.d.dashArray,c.do=d.d.dashoffset[0]))):c.r=2===a.r?"evenodd":"nonzero",this.stylesList.push(c),d.style=c,d},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(a){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,a.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,a,this)}}},CVShapeElement.prototype.createShapeElement=function(a){var b=new CVShapeData(this,a,this.stylesList,this.transformsManager);return this.shapes.push(b),this.addShapeToModifiers(b),b},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var a,b=this.itemsData.length;for(a=0;a<b;a+=1)this.prevViewData[a]=this.itemsData[a];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),b=this.dynamicProperties.length,a=0;a<b;a+=1)this.dynamicProperties[a].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(a){var b,c=this.stylesList.length;for(b=0;b<c;b+=1)this.stylesList[b].closed||this.stylesList[b].transforms.push(a)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var a,b=this.stylesList.length;for(a=0;a<b;a+=1)this.stylesList[a].closed||this.stylesList[a].transforms.pop()},CVShapeElement.prototype.closeStyles=function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b].closed=!0},CVShapeElement.prototype.searchShapes=function(a,b,c,d,e){var f,g,h,i,j,k,l=a.length-1,m=[],n=[],o=[].concat(e);for(f=l;f>=0;f-=1){if((i=this.searchProcessedElement(a[f]))?b[f]=c[i-1]:a[f]._shouldRender=d,"fl"===a[f].ty||"st"===a[f].ty||"gf"===a[f].ty||"gs"===a[f].ty)i?b[f].style.closed=!1:b[f]=this.createStyleElement(a[f],o),m.push(b[f].style);else if("gr"===a[f].ty){if(i)for(g=0,h=b[f].it.length;g<h;g+=1)b[f].prevViewData[g]=b[f].it[g];else b[f]=this.createGroupElement(a[f]);this.searchShapes(a[f].it,b[f].it,b[f].prevViewData,d,o)}else"tr"===a[f].ty?(i||(k=this.createTransformElement(a[f]),b[f]=k),o.push(b[f]),this.addTransformToStyleList(b[f])):"sh"===a[f].ty||"rc"===a[f].ty||"el"===a[f].ty||"sr"===a[f].ty?i||(b[f]=this.createShapeElement(a[f])):"tm"===a[f].ty||"rd"===a[f].ty||"pb"===a[f].ty||"zz"===a[f].ty||"op"===a[f].ty?(i?(j=b[f]).closed=!1:((j=ShapeModifiers.getModifier(a[f].ty)).init(this,a[f]),b[f]=j,this.shapeModifiers.push(j)),n.push(j)):"rp"===a[f].ty&&(i?(j=b[f]).closed=!0:(j=ShapeModifiers.getModifier(a[f].ty),b[f]=j,j.init(this,a,f,b),this.shapeModifiers.push(j),d=!1),n.push(j));this.addProcessedElement(a[f],f+1)}for(this.removeTransformFromStyleList(),this.closeStyles(m),l=n.length,f=0;f<l;f+=1)n[f].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(a,b){(a._opMdf||b.op._mdf||this._isFirstFrame)&&(b.opacity=a.opacity,b.opacity*=b.op.v,b._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var a,b,c,d,e,f,g,h,i,j=this.stylesList.length,k=this.globalData.renderer,l=this.globalData.canvasContext;for(a=0;a<j;a+=1)if(!(("st"===(h=(i=this.stylesList[a]).type)||"gs"===h)&&0===i.wi||!i.data._shouldRender||0===i.coOp||0===this.globalData.currentGlobalAlpha)){for(k.save(),f=i.elements,"st"===h||"gs"===h?(k.ctxStrokeStyle("st"===h?i.co:i.grd),k.ctxLineWidth(i.wi),k.ctxLineCap(i.lc),k.ctxLineJoin(i.lj),k.ctxMiterLimit(i.ml||0)):k.ctxFillStyle("fl"===h?i.co:i.grd),k.ctxOpacity(i.coOp),"st"!==h&&"gs"!==h&&l.beginPath(),k.ctxTransform(i.preTransforms.finalTransform.props),c=f.length,b=0;b<c;b+=1){for(("st"===h||"gs"===h)&&(l.beginPath(),i.da&&(l.setLineDash(i.da),l.lineDashOffset=i.do)),e=(g=f[b].trNodes).length,d=0;d<e;d+=1)"m"===g[d].t?l.moveTo(g[d].p[0],g[d].p[1]):"c"===g[d].t?l.bezierCurveTo(g[d].pts[0],g[d].pts[1],g[d].pts[2],g[d].pts[3],g[d].pts[4],g[d].pts[5]):l.closePath();("st"===h||"gs"===h)&&(k.ctxStroke(),i.da&&l.setLineDash(this.dashResetter))}"st"!==h&&"gs"!==h&&this.globalData.renderer.ctxFill(i.r),k.restore()}},CVShapeElement.prototype.renderShape=function(a,b,c,d){var e,f,g=b.length-1;for(f=a,e=g;e>=0;e-=1)"tr"===b[e].ty?(f=c[e].transform,this.renderShapeTransform(a,f)):"sh"===b[e].ty||"el"===b[e].ty||"rc"===b[e].ty||"sr"===b[e].ty?this.renderPath(b[e],c[e]):"fl"===b[e].ty?this.renderFill(b[e],c[e],f):"st"===b[e].ty?this.renderStroke(b[e],c[e],f):"gf"===b[e].ty||"gs"===b[e].ty?this.renderGradientFill(b[e],c[e],f):"gr"===b[e].ty?this.renderShape(f,b[e].it,c[e].it):b[e].ty;d&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(a,b){if(this._isFirstFrame||b._mdf||a.transforms._mdf){var c,d,e,f=a.trNodes,g=b.paths,h=g._length;f.length=0;var i=a.transforms.finalTransform;for(e=0;e<h;e+=1){var j=g.shapes[e];if(j&&j.v){for(c=1,d=j._length;c<d;c+=1)1===c&&f.push({t:"m",p:i.applyToPointArray(j.v[0][0],j.v[0][1],0)}),f.push({t:"c",pts:i.applyToTriplePoints(j.o[c-1],j.i[c],j.v[c])});1===d&&f.push({t:"m",p:i.applyToPointArray(j.v[0][0],j.v[0][1],0)}),j.c&&d&&(f.push({t:"c",pts:i.applyToTriplePoints(j.o[c-1],j.i[0],j.v[0])}),f.push({t:"z"}))}}a.trNodes=f}},CVShapeElement.prototype.renderPath=function(a,b){if(!0!==a.hd&&a._shouldRender){var c,d=b.styledShapes.length;for(c=0;c<d;c+=1)this.renderStyledShape(b.styledShapes[c],b.sh)}},CVShapeElement.prototype.renderFill=function(a,b,c){var d=b.style;(b.c._mdf||this._isFirstFrame)&&(d.co="rgb("+bmFloor(b.c.v[0])+","+bmFloor(b.c.v[1])+","+bmFloor(b.c.v[2])+")"),(b.o._mdf||c._opMdf||this._isFirstFrame)&&(d.coOp=b.o.v*c.opacity)},CVShapeElement.prototype.renderGradientFill=function(a,b,c){var d=b.style;if(!d.grd||b.g._mdf||b.s._mdf||b.e._mdf||1!==a.t&&(b.h._mdf||b.a._mdf)){var e,f,g=this.globalData.canvasContext,h=b.s.v,i=b.e.v;if(1===a.t)e=g.createLinearGradient(h[0],h[1],i[0],i[1]);else{var j=Math.sqrt(Math.pow(h[0]-i[0],2)+Math.pow(h[1]-i[1],2)),k=Math.atan2(i[1]-h[1],i[0]-h[0]),l=b.h.v;l>=1?l=.99:l<=-1&&(l=-.99);var m=j*l,n=Math.cos(k+b.a.v)*m+h[0],o=Math.sin(k+b.a.v)*m+h[1];e=g.createRadialGradient(n,o,0,h[0],h[1],j)}var p=a.g.p,q=b.g.c,r=1;for(f=0;f<p;f+=1)b.g._hasOpacity&&b.g._collapsable&&(r=b.g.o[2*f+1]),e.addColorStop(q[4*f]/100,"rgba("+q[4*f+1]+","+q[4*f+2]+","+q[4*f+3]+","+r+")");d.grd=e}d.coOp=b.o.v*c.opacity},CVShapeElement.prototype.renderStroke=function(a,b,c){var d=b.style,e=b.d;e&&(e._mdf||this._isFirstFrame)&&(d.da=e.dashArray,d.do=e.dashoffset[0]),(b.c._mdf||this._isFirstFrame)&&(d.co="rgb("+bmFloor(b.c.v[0])+","+bmFloor(b.c.v[1])+","+bmFloor(b.c.v[2])+")"),(b.o._mdf||c._opMdf||this._isFirstFrame)&&(d.coOp=b.o.v*c.opacity),(b.w._mdf||this._isFirstFrame)&&(d.wi=b.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this.textProperty.currentData;this.renderedLetters=createSizedArray(m.l?m.l.length:0);var n=!1;m.fc?(n=!0,this.values.fill=this.buildColor(m.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=n;var o=!1;m.sc&&(o=!0,this.values.stroke=this.buildColor(m.sc),this.values.sWidth=m.sw);var p=this.globalData.fontManager.getFontByName(m.f),q=m.l,r=this.mHelper;this.stroke=o,this.values.fValue=m.finalSize+"px "+this.globalData.fontManager.getFontByName(m.f).fFamily,b=m.finalText.length;var s=this.data.singleShape,t=.001*m.tr*m.finalSize,u=0,v=0,w=!0,x=0;for(a=0;a<b;a+=1){d=(c=this.globalData.fontManager.getCharData(m.finalText[a],p.fStyle,this.globalData.fontManager.getFontByName(m.f).fFamily))&&c.data||{},r.reset(),s&&q[a].n&&(u=-t,v+=m.yOffset,v+=+!!w,w=!1),i=(g=d.shapes?d.shapes[0].it:[]).length,r.scale(m.finalSize/100,m.finalSize/100),s&&this.applyTextPropertiesToMatrix(m,r,q[a].line,u,v),k=createSizedArray(i-1);var y=0;for(h=0;h<i;h+=1)if("sh"===g[h].ty){for(e=1,f=g[h].ks.k.i.length,j=g[h].ks.k,l=[];e<f;e+=1)1===e&&l.push(r.applyToX(j.v[0][0],j.v[0][1],0),r.applyToY(j.v[0][0],j.v[0][1],0)),l.push(r.applyToX(j.o[e-1][0],j.o[e-1][1],0),r.applyToY(j.o[e-1][0],j.o[e-1][1],0),r.applyToX(j.i[e][0],j.i[e][1],0),r.applyToY(j.i[e][0],j.i[e][1],0),r.applyToX(j.v[e][0],j.v[e][1],0),r.applyToY(j.v[e][0],j.v[e][1],0));l.push(r.applyToX(j.o[e-1][0],j.o[e-1][1],0),r.applyToY(j.o[e-1][0],j.o[e-1][1],0),r.applyToX(j.i[0][0],j.i[0][1],0),r.applyToY(j.i[0][0],j.i[0][1],0),r.applyToX(j.v[0][0],j.v[0][1],0),r.applyToY(j.v[0][0],j.v[0][1],0)),k[y]=l,y+=1}s&&(u+=q[a].l,u+=t),this.textSpans[x]?this.textSpans[x].elem=k:this.textSpans[x]={elem:k},x+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var a,b,c,d,e,f,g,h,i,j=this.textAnimator.renderedLetters,k=this.textProperty.currentData.l;b=k.length;var l=null,m=null,n=null,o=this.globalData.renderer;for(a=0;a<b;a+=1)if(!k[a].n){if((g=j[a])&&(o.save(),o.ctxTransform(g.p),o.ctxOpacity(g.o)),this.fill){for(g&&g.fc?l!==g.fc&&(o.ctxFillStyle(g.fc),l=g.fc):l!==this.values.fill&&(l=this.values.fill,o.ctxFillStyle(this.values.fill)),d=(h=this.textSpans[a].elem).length,this.globalData.canvasContext.beginPath(),c=0;c<d;c+=1)for(f=(i=h[c]).length,this.globalData.canvasContext.moveTo(i[0],i[1]),e=2;e<f;e+=6)this.globalData.canvasContext.bezierCurveTo(i[e],i[e+1],i[e+2],i[e+3],i[e+4],i[e+5]);this.globalData.canvasContext.closePath(),o.ctxFill()}if(this.stroke){for(g&&g.sw?n!==g.sw&&(n=g.sw,o.ctxLineWidth(g.sw)):n!==this.values.sWidth&&(n=this.values.sWidth,o.ctxLineWidth(this.values.sWidth)),g&&g.sc?m!==g.sc&&(m=g.sc,o.ctxStrokeStyle(g.sc)):m!==this.values.stroke&&(m=this.values.stroke,o.ctxStrokeStyle(this.values.stroke)),d=(h=this.textSpans[a].elem).length,this.globalData.canvasContext.beginPath(),c=0;c<d;c+=1)for(f=(i=h[c]).length,this.globalData.canvasContext.moveTo(i[0],i[1]),e=2;e<f;e+=6)this.globalData.canvasContext.bezierCurveTo(i[e],i[e+1],i[e+2],i[e+3],i[e+4],i[e+5]);this.globalData.canvasContext.closePath(),o.ctxStroke()}g&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var a,b,c=createTag("canvas");c.width=this.assetData.w,c.height=this.assetData.h;var d=c.getContext("2d"),e=this.img.width,f=this.img.height,g=e/f,h=this.assetData.w/this.assetData.h,i=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;g>h&&"xMidYMid slice"===i||g<h&&"xMidYMid slice"!==i?a=(b=f)*h:b=(a=e)/h,d.drawImage(this.img,(e-a)/2,(f-b)/2,a,b,0,0,this.assetData.w,this.assetData.h),this.img=c}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(a){return new CVShapeElement(a,this.globalData,this)},CanvasRendererBase.prototype.createText=function(a){return new CVTextElement(a,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(a){return new CVImageElement(a,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(a){return new CVSolidElement(a,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(a){(1!==a[0]||0!==a[1]||0!==a[4]||1!==a[5]||0!==a[12]||0!==a[13])&&this.canvasContext.transform(a[0],a[1],a[4],a[5],a[12],a[13])},CanvasRendererBase.prototype.ctxOpacity=function(a){this.canvasContext.globalAlpha*=a<0?0:a},CanvasRendererBase.prototype.ctxFillStyle=function(a){this.canvasContext.fillStyle=a},CanvasRendererBase.prototype.ctxStrokeStyle=function(a){this.canvasContext.strokeStyle=a},CanvasRendererBase.prototype.ctxLineWidth=function(a){this.canvasContext.lineWidth=a},CanvasRendererBase.prototype.ctxLineCap=function(a){this.canvasContext.lineCap=a},CanvasRendererBase.prototype.ctxLineJoin=function(a){this.canvasContext.lineJoin=a},CanvasRendererBase.prototype.ctxMiterLimit=function(a){this.canvasContext.miterLimit=a},CanvasRendererBase.prototype.ctxFill=function(a){this.canvasContext.fill(a)},CanvasRendererBase.prototype.ctxFillRect=function(a,b,c,d){this.canvasContext.fillRect(a,b,c,d)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas)return void this.canvasContext.restore();this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(a){if(!this.renderConfig.clearCanvas)return void this.canvasContext.restore();a&&(this.globalData.blendMode="source-over"),this.contextData.restore(a)},CanvasRendererBase.prototype.configAnimation=function(a){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var b=this.animationItem.container.style;b.width="100%",b.height="100%";var c="0px 0px 0px";b.transformOrigin=c,b.mozTransformOrigin=c,b.webkitTransformOrigin=c,b["-webkit-transform"]=c,b.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=a,this.layers=a.layers,this.transformCanvas={w:a.w,h:a.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(a,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(a.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(a,b){if(this.reset(),a?(c=a,d=b,this.canvasContext.canvas.width=c,this.canvasContext.canvas.height=d):(this.animationItem.wrapper&&this.animationItem.container?(c=this.animationItem.wrapper.offsetWidth,d=this.animationItem.wrapper.offsetHeight):(c=this.canvasContext.canvas.width,d=this.canvasContext.canvas.height),this.canvasContext.canvas.width=c*this.renderConfig.dpr,this.canvasContext.canvas.height=d*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var c,d,e,f,g=this.renderConfig.preserveAspectRatio.split(" "),h=g[1]||"meet",i=g[0]||"xMidYMid",j=i.substr(0,4),k=i.substr(4);e=c/d,(f=this.transformCanvas.w/this.transformCanvas.h)>e&&"meet"===h||f<e&&"slice"===h?(this.transformCanvas.sx=c/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=c/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=d/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=d/(this.transformCanvas.h/this.renderConfig.dpr)),"xMid"===j&&(f<e&&"meet"===h||f>e&&"slice"===h)?this.transformCanvas.tx=(c-this.transformCanvas.w*(d/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===j&&(f<e&&"meet"===h||f>e&&"slice"===h)?this.transformCanvas.tx=(c-this.transformCanvas.w*(d/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,"YMid"===k&&(f>e&&"meet"===h||f<e&&"slice"===h)?this.transformCanvas.ty=(d-this.transformCanvas.h*(c/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===k&&(f>e&&"meet"===h||f<e&&"slice"===h)?this.transformCanvas.ty=(d-this.transformCanvas.h*(c/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=c/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=d/(this.transformCanvas.h/this.renderConfig.dpr)):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0;this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var a;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),a=(this.layers?this.layers.length:0)-1;a>=0;a-=1)this.elements[a]&&this.elements[a].destroy&&this.elements[a].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(a,b){if((this.renderedFrame!==a||!0!==this.renderConfig.clearCanvas||b)&&!this.destroyed&&-1!==a){this.renderedFrame=a,this.globalData.frameNum=a-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||b,this.globalData.projectInterface.currentFrame=a;var c,d=this.layers.length;for(this.completeLayers||this.checkLayers(a),c=d-1;c>=0;c-=1)(this.completeLayers||this.elements[c])&&this.elements[c].prepareFrame(a-this.layers[c].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),c=d-1;c>=0;c-=1)(this.completeLayers||this.elements[c])&&this.elements[c].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(a){var b=this.elements;if(!b[a]&&99!==this.layers[a].ty){var c=this.createItem(this.layers[a],this,this.globalData);b[a]=c,c.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var a=2*this._length,b=0;for(b=this._length;b<a;b+=1)this.stack[b]=new CanvasContext;this._length=a},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(a){this.cArrPos-=1;var b,c=this.stack[this.cArrPos],d=c.transform,e=this.cTr.props;for(b=0;b<16;b+=1)e[b]=d[b];if(a){this.nativeContext.restore();var f=this.stack[this.cArrPos+1];this.appliedFillStyle=f.fillStyle,this.appliedStrokeStyle=f.strokeStyle,this.appliedLineWidth=f.lineWidth,this.appliedLineCap=f.lineCap,this.appliedLineJoin=f.lineJoin,this.appliedMiterLimit=f.miterLimit}this.nativeContext.setTransform(d[0],d[1],d[4],d[5],d[12],d[13]),(a||-1!==c.opacity&&this.currentOpacity!==c.opacity)&&(this.nativeContext.globalAlpha=c.opacity,this.currentOpacity=c.opacity),this.currentFillStyle=c.fillStyle,this.currentStrokeStyle=c.strokeStyle,this.currentLineWidth=c.lineWidth,this.currentLineCap=c.lineCap,this.currentLineJoin=c.lineJoin,this.currentMiterLimit=c.miterLimit},CVContextData.prototype.save=function(a){a&&this.nativeContext.save();var b,c=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var d=this.stack[this.cArrPos];for(b=0;b<16;b+=1)d.transform[b]=c[b];this.cArrPos+=1;var e=this.stack[this.cArrPos];e.opacity=d.opacity,e.fillStyle=d.fillStyle,e.strokeStyle=d.strokeStyle,e.lineWidth=d.lineWidth,e.lineCap=d.lineCap,e.lineJoin=d.lineJoin,e.miterLimit=d.miterLimit},CVContextData.prototype.setOpacity=function(a){this.stack[this.cArrPos].opacity=a},CVContextData.prototype.setContext=function(a){this.nativeContext=a},CVContextData.prototype.fillStyle=function(a){this.stack[this.cArrPos].fillStyle!==a&&(this.currentFillStyle=a,this.stack[this.cArrPos].fillStyle=a)},CVContextData.prototype.strokeStyle=function(a){this.stack[this.cArrPos].strokeStyle!==a&&(this.currentStrokeStyle=a,this.stack[this.cArrPos].strokeStyle=a)},CVContextData.prototype.lineWidth=function(a){this.stack[this.cArrPos].lineWidth!==a&&(this.currentLineWidth=a,this.stack[this.cArrPos].lineWidth=a)},CVContextData.prototype.lineCap=function(a){this.stack[this.cArrPos].lineCap!==a&&(this.currentLineCap=a,this.stack[this.cArrPos].lineCap=a)},CVContextData.prototype.lineJoin=function(a){this.stack[this.cArrPos].lineJoin!==a&&(this.currentLineJoin=a,this.stack[this.cArrPos].lineJoin=a)},CVContextData.prototype.miterLimit=function(a){this.stack[this.cArrPos].miterLimit!==a&&(this.currentMiterLimit=a,this.stack[this.cArrPos].miterLimit=a)},CVContextData.prototype.transform=function(a){this.transformMat.cloneFromProps(a);var b=this.cTr;this.transformMat.multiply(b),b.cloneFromProps(this.transformMat.props);var c=b.props;this.nativeContext.setTransform(c[0],c[1],c[4],c[5],c[12],c[13])},CVContextData.prototype.opacity=function(a){var b=this.stack[this.cArrPos].opacity;b*=a<0?0:a,this.stack[this.cArrPos].opacity!==b&&(this.currentOpacity!==a&&(this.nativeContext.globalAlpha=a,this.currentOpacity=a),this.stack[this.cArrPos].opacity=b)},CVContextData.prototype.fill=function(a){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(a)},CVContextData.prototype.fillRect=function(a,b,c,d){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(a,b,c,d)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var a,b=this.canvasContext;for(b.beginPath(),b.moveTo(0,0),b.lineTo(this.data.w,0),b.lineTo(this.data.w,this.data.h),b.lineTo(0,this.data.h),b.lineTo(0,0),b.clip(),a=this.layers.length-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()},CVCompElement.prototype.destroy=function(){var a;for(a=this.layers.length-1;a>=0;a-=1)this.elements[a]&&this.elements[a].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(a){return new CVCompElement(a,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(a){return new CVCompElement(a,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var a=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var b=this.finalTransform.mat.toCSS();a.transform=b,a.webkitTransform=b}this.finalTransform._opMdf&&(a.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var a;this.data.hasMask?((a=createNS("rect")).setAttribute("width",this.data.sw),a.setAttribute("height",this.data.sh),a.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((a=createTag("div")).style.width=this.data.sw+"px",a.style.height=this.data.sh+"px",a.style.backgroundColor=this.data.sc),this.layerElement.appendChild(a)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var a;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),a=this.svgElement;else{a=createNS("svg");var b=this.comp.data?this.comp.data:this.globalData.compSize;a.setAttribute("width",b.w),a.setAttribute("height",b.h),a.appendChild(this.shapesContainer),this.layerElement.appendChild(a)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=a},HShapeElement.prototype.getTransformedPoint=function(a,b){var c,d=a.length;for(c=0;c<d;c+=1)b=a[c].mProps.v.applyToPointArray(b[0],b[1],0);return b},HShapeElement.prototype.calculateShapeBoundingBox=function(a,b){var c,d,e,f,g,h=a.sh.v,i=a.transformers,j=h._length;if(!(j<=1)){for(c=0;c<j-1;c+=1)d=this.getTransformedPoint(i,h.v[c]),e=this.getTransformedPoint(i,h.o[c]),f=this.getTransformedPoint(i,h.i[c+1]),g=this.getTransformedPoint(i,h.v[c+1]),this.checkBounds(d,e,f,g,b);h.c&&(d=this.getTransformedPoint(i,h.v[c]),e=this.getTransformedPoint(i,h.o[c]),f=this.getTransformedPoint(i,h.i[0]),g=this.getTransformedPoint(i,h.v[0]),this.checkBounds(d,e,f,g,b))}},HShapeElement.prototype.checkBounds=function(a,b,c,d,e){this.getBoundsOfCurve(a,b,c,d);var f=this.shapeBoundingBox;e.x=bmMin(f.left,e.x),e.xMax=bmMax(f.right,e.xMax),e.y=bmMin(f.top,e.y),e.yMax=bmMax(f.bottom,e.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(a,b,c,d){for(var e,f,g,h,i,j,k,l=[[a[0],d[0]],[a[1],d[1]]],m=0;m<2;++m)f=6*a[m]-12*b[m]+6*c[m],e=-3*a[m]+9*b[m]-9*c[m]+3*d[m],g=3*b[m]-3*a[m],f|=0,g|=0,0==(e|=0)&&0===f||(0===e?(h=-g/f)>0&&h<1&&l[m].push(this.calculateF(h,a,b,c,d,m)):(i=f*f-4*g*e)>=0&&((j=(-f+bmSqrt(i))/(2*e))>0&&j<1&&l[m].push(this.calculateF(j,a,b,c,d,m)),(k=(-f-bmSqrt(i))/(2*e))>0&&k<1&&l[m].push(this.calculateF(k,a,b,c,d,m))));this.shapeBoundingBox.left=bmMin.apply(null,l[0]),this.shapeBoundingBox.top=bmMin.apply(null,l[1]),this.shapeBoundingBox.right=bmMax.apply(null,l[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,l[1])},HShapeElement.prototype.calculateF=function(a,b,c,d,e,f){return bmPow(1-a,3)*b[f]+3*bmPow(1-a,2)*a*c[f]+3*(1-a)*bmPow(a,2)*d[f]+bmPow(a,3)*e[f]},HShapeElement.prototype.calculateBoundingBox=function(a,b){var c,d=a.length;for(c=0;c<d;c+=1)a[c]&&a[c].sh?this.calculateShapeBoundingBox(a[c],b):a[c]&&a[c].it?this.calculateBoundingBox(a[c].it,b):a[c]&&a[c].style&&a[c].w&&this.expandStrokeBoundingBox(a[c].w,b)},HShapeElement.prototype.expandStrokeBoundingBox=function(a,b){var c=0;if(a.keyframes){for(var d=0;d<a.keyframes.length;d+=1){var e=a.keyframes[d].s;e>c&&(c=e)}c*=a.mult}else c=a.v*a.mult;b.x-=c,b.xMax+=c,b.y-=c,b.yMax+=c},HShapeElement.prototype.currentBoxContains=function(a){return this.currentBBox.x<=a.x&&this.currentBBox.y<=a.y&&this.currentBBox.width+this.currentBBox.x>=a.x+a.width&&this.currentBBox.height+this.currentBBox.y>=a.y+a.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var a=this.tempBoundingBox,b=999999;if(a.x=999999,a.xMax=-b,a.y=b,a.yMax=-b,this.calculateBoundingBox(this.itemsData,a),a.width=a.xMax<a.x?0:a.xMax-a.x,a.height=a.yMax<a.y?0:a.yMax-a.y,!this.currentBoxContains(a)){var c=!1;if(this.currentBBox.w!==a.width&&(this.currentBBox.w=a.width,this.shapeCont.setAttribute("width",a.width),c=!0),this.currentBBox.h!==a.height&&(this.currentBBox.h=a.height,this.shapeCont.setAttribute("height",a.height),c=!0),c||this.currentBBox.x!==a.x||this.currentBBox.y!==a.y){this.currentBBox.w=a.width,this.currentBBox.h=a.height,this.currentBBox.x=a.x,this.currentBBox.y=a.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var d=this.shapeCont.style,e="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";d.transform=e,d.webkitTransform=e}}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var a=createNS("g");this.maskedElement.appendChild(a),this.innerElem=a}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var a=this.textProperty.currentData;this.renderedLetters=createSizedArray(a.l?a.l.length:0);var b=this.innerElem.style,c=a.fc?this.buildColor(a.fc):"rgba(0,0,0,0)";b.fill=c,b.color=c,a.sc&&(b.stroke=this.buildColor(a.sc),b.strokeWidth=a.sw+"px");var d=this.globalData.fontManager.getFontByName(a.f);if(!this.globalData.fontManager.chars)if(b.fontSize=a.finalSize+"px",b.lineHeight=a.finalSize+"px",d.fClass)this.innerElem.className=d.fClass;else{b.fontFamily=d.fFamily;var e=a.fWeight;b.fontStyle=a.fStyle,b.fontWeight=e}var f=a.l;k=f.length;var g=this.mHelper,h="",i=0;for(j=0;j<k;j+=1){if(this.globalData.fontManager.chars?(this.textPaths[i]?l=this.textPaths[i]:((l=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),l.setAttribute("stroke-linejoin",lineJoinEnum[2]),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[i]?n=(m=this.textSpans[i]).children[0]:((m=createTag("div")).style.lineHeight=0,(n=createNS("svg")).appendChild(l),styleDiv(m)))):this.isMasked?l=this.textPaths[i]?this.textPaths[i]:createNS("text"):this.textSpans[i]?(m=this.textSpans[i],l=this.textPaths[i]):(styleDiv(m=createTag("span")),styleDiv(l=createTag("span")),m.appendChild(l)),this.globalData.fontManager.chars){var j,k,l,m,n,o,p,q=this.globalData.fontManager.getCharData(a.finalText[j],d.fStyle,this.globalData.fontManager.getFontByName(a.f).fFamily);if(p=q?q.data:null,g.reset(),p&&p.shapes&&p.shapes.length&&(o=p.shapes[0].it,g.scale(a.finalSize/100,a.finalSize/100),h=this.createPathShape(g,o),l.setAttribute("d",h)),this.isMasked)this.innerElem.appendChild(l);else{if(this.innerElem.appendChild(m),p&&p.shapes){document.body.appendChild(n);var r=n.getBBox();n.setAttribute("width",r.width+2),n.setAttribute("height",r.height+2),n.setAttribute("viewBox",r.x-1+" "+(r.y-1)+" "+(r.width+2)+" "+(r.height+2));var s=n.style,t="translate("+(r.x-1)+"px,"+(r.y-1)+"px)";s.transform=t,s.webkitTransform=t,f[j].yOffset=r.y-1}else n.setAttribute("width",1),n.setAttribute("height",1);m.appendChild(n)}}else if(l.textContent=f[j].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(l);else{this.innerElem.appendChild(m);var u=l.style,v="translate3d(0,"+-a.finalSize/1.2+"px,0)";u.transform=v,u.webkitTransform=v}this.isMasked?this.textSpans[i]=l:this.textSpans[i]=m,this.textSpans[i].style.display="block",this.textPaths[i]=l,i+=1}for(;i<this.textSpans.length;)this.textSpans[i].style.display="none",i+=1},HTextElement.prototype.renderInnerContent=function(){if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);var a,b,c,d,e,f=this.svgElement.style,g="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";f.transform=g,f.webkitTransform=g}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var h=0,i=this.textAnimator.renderedLetters,j=this.textProperty.currentData.l;for(a=0,b=j.length;a<b;a+=1)j[a].n?h+=1:(d=this.textSpans[a],e=this.textPaths[a],c=i[h],h+=1,c._mdf.m&&(this.isMasked?d.setAttribute("transform",c.m):(d.style.webkitTransform=c.m,d.style.transform=c.m)),d.style.opacity=c.o,c.sw&&c._mdf.sw&&e.setAttribute("stroke-width",c.sw),c.sc&&c._mdf.sc&&e.setAttribute("stroke",c.sc),c.fc&&c._mdf.fc&&(e.setAttribute("fill",c.fc),e.style.color=c.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var k=this.innerElem.getBBox();this.currentBBox.w!==k.width&&(this.currentBBox.w=k.width,this.svgElement.setAttribute("width",k.width)),this.currentBBox.h!==k.height&&(this.currentBBox.h=k.height,this.svgElement.setAttribute("height",k.height));var l=1;if(this.currentBBox.w!==k.width+2*l||this.currentBBox.h!==k.height+2*l||this.currentBBox.x!==k.x-l||this.currentBBox.y!==k.y-l){this.currentBBox.w=k.width+2*l,this.currentBBox.h=k.height+2*l,this.currentBBox.x=k.x-l,this.currentBBox.y=k.y-l,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),f=this.svgElement.style;var m="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";f.transform=m,f.webkitTransform=m}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var a,b,c,d,e=this.comp.threeDElements.length;for(a=0;a<e;a+=1)if("3d"===(b=this.comp.threeDElements[a]).type){c=b.perspectiveElem.style,d=b.container.style;var f=this.pe.v+"px",g="0px 0px 0px",h="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";c.perspective=f,c.webkitPerspective=f,d.transformOrigin=g,d.mozTransformOrigin=g,d.webkitTransformOrigin=g,c.transform=h,c.webkitTransform=h}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var a=this._isFirstFrame;if(this.hierarchy)for(c=0,d=this.hierarchy.length;c<d;c+=1)a=this.hierarchy[c].finalTransform.mProp._mdf||a;if(a||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(c=d=this.hierarchy.length-1;c>=0;c-=1){var b=this.hierarchy[c].finalTransform.mProp;this.mat.translate(-b.p.v[0],-b.p.v[1],b.p.v[2]),this.mat.rotateX(-b.or.v[0]).rotateY(-b.or.v[1]).rotateZ(b.or.v[2]),this.mat.rotateX(-b.rx.v).rotateY(-b.ry.v).rotateZ(b.rz.v),this.mat.scale(1/b.s.v[0],1/b.s.v[1],1/b.s.v[2]),this.mat.translate(b.a.v[0],b.a.v[1],b.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var c,d,e=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]],f=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)),g=[e[0]/f,e[1]/f,e[2]/f],h=Math.sqrt(g[2]*g[2]+g[0]*g[0]),i=Math.atan2(g[1],h),j=Math.atan2(g[0],-g[2]);this.mat.rotateY(j).rotateX(-i)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var k=!this._prevMat.equals(this.mat);if((k||this.pe._mdf)&&this.comp.threeDElements){for(c=0,d=this.comp.threeDElements.length;c<d;c+=1)if("3d"===(l=this.comp.threeDElements[c]).type){if(k){var l,m,n,o=this.mat.toCSS();(n=l.container.style).transform=o,n.webkitTransform=o}this.pe._mdf&&((m=l.perspectiveElem.style).perspective=this.pe.v+"px",m.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(a){this.prepareProperties(a,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var a=this.globalData.getAssetsPath(this.assetData),b=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",a),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(b),b.crossOrigin="anonymous",b.src=a,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(a,b){var c=a.getBaseElement();if(c){var d=this.layers[b];if(d.ddd&&this.supports3d)this.addTo3dContainer(c,b);else if(this.threeDElements)this.addTo3dContainer(c,b);else{for(var e,f,g=0;g<b;)this.elements[g]&&!0!==this.elements[g]&&this.elements[g].getBaseElement&&(f=this.elements[g],e=(this.layers[g].ddd?this.getThreeDContainerByPos(g):f.getBaseElement())||e),g+=1;e?d.ddd&&this.supports3d||this.layerElement.insertBefore(c,e):d.ddd&&this.supports3d||this.layerElement.appendChild(c)}}},HybridRendererBase.prototype.createShape=function(a){return this.supports3d?new HShapeElement(a,this.globalData,this):new SVGShapeElement(a,this.globalData,this)},HybridRendererBase.prototype.createText=function(a){return this.supports3d?new HTextElement(a,this.globalData,this):new SVGTextLottieElement(a,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(a){return this.camera=new HCameraElement(a,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(a){return this.supports3d?new HImageElement(a,this.globalData,this):new IImageElement(a,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(a){return this.supports3d?new HSolidElement(a,this.globalData,this):new ISolidElement(a,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(a){for(var b=0,c=this.threeDElements.length;b<c;){if(this.threeDElements[b].startPos<=a&&this.threeDElements[b].endPos>=a)return this.threeDElements[b].perspectiveElem;b+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(a,b){var c,d,e=createTag("div");styleDiv(e);var f=createTag("div");if(styleDiv(f),"3d"===b){(c=e.style).width=this.globalData.compSize.w+"px",c.height=this.globalData.compSize.h+"px";var g="50% 50%";c.webkitTransformOrigin=g,c.mozTransformOrigin=g,c.transformOrigin=g;var h="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(d=f.style).transform=h,d.webkitTransform=h}e.appendChild(f);var i={container:f,perspectiveElem:e,startPos:a,endPos:a,type:b};return this.threeDElements.push(i),i},HybridRendererBase.prototype.build3dContainers=function(){var a,b,c=this.layers.length,d="";for(a=0;a<c;a+=1)this.layers[a].ddd&&3!==this.layers[a].ty?"3d"!==d&&(d="3d",b=this.createThreeDContainer(a,"3d")):"2d"!==d&&(d="2d",b=this.createThreeDContainer(a,"2d")),b.endPos=Math.max(b.endPos,a);for(a=(c=this.threeDElements.length)-1;a>=0;a-=1)this.resizerElem.appendChild(this.threeDElements[a].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(a,b){for(var c=0,d=this.threeDElements.length;c<d;){if(b<=this.threeDElements[c].endPos){for(var e,f=this.threeDElements[c].startPos;f<b;)this.elements[f]&&this.elements[f].getBaseElement&&(e=this.elements[f].getBaseElement()),f+=1;e?this.threeDElements[c].container.insertBefore(a,e):this.threeDElements[c].container.appendChild(a);break}c+=1}},HybridRendererBase.prototype.configAnimation=function(a){var b=createTag("div"),c=this.animationItem.wrapper,d=b.style;d.width=a.w+"px",d.height=a.h+"px",this.resizerElem=b,styleDiv(b),d.transformStyle="flat",d.mozTransformStyle="flat",d.webkitTransformStyle="flat",this.renderConfig.className&&b.setAttribute("class",this.renderConfig.className),c.appendChild(b),d.overflow="hidden";var e=createNS("svg");e.setAttribute("width","1"),e.setAttribute("height","1"),styleDiv(e),this.resizerElem.appendChild(e);var f=createNS("defs");e.appendChild(f),this.data=a,this.setupGlobalData(a,e),this.globalData.defs=f,this.layers=a.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var a,b=this.layers?this.layers.length:0;for(a=0;a<b;a+=1)this.elements[a]&&this.elements[a].destroy&&this.elements[a].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var a,b,c,d,e=this.animationItem.wrapper.offsetWidth,f=this.animationItem.wrapper.offsetHeight,g=e/f;this.globalData.compSize.w/this.globalData.compSize.h>g?(a=e/this.globalData.compSize.w,b=e/this.globalData.compSize.w,c=0,d=(f-this.globalData.compSize.h*(e/this.globalData.compSize.w))/2):(a=f/this.globalData.compSize.h,b=f/this.globalData.compSize.h,c=(e-this.globalData.compSize.w*(f/this.globalData.compSize.h))/2,d=0);var h=this.resizerElem.style;h.webkitTransform="matrix3d("+a+",0,0,0,0,"+b+",0,0,0,0,1,0,"+c+","+d+",0,1)",h.transform=h.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var a,b=this.globalData.compSize.w,c=this.globalData.compSize.h,d=this.threeDElements.length;for(a=0;a<d;a+=1){var e=this.threeDElements[a].perspectiveElem.style;e.webkitPerspective=Math.sqrt(Math.pow(b,2)+Math.pow(c,2))+"px",e.perspective=e.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(a){var b,c=a.length,d=createTag("div");for(b=0;b<c;b+=1)if(a[b].xt){var e=this.createComp(a[b],d,this.globalData.comp,null);e.initExpressions(),this.globalData.projectInterface.registerComposition(e)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(a,b){for(var c,d=0;d<b;)this.elements[d]&&this.elements[d].getBaseElement&&(c=this.elements[d].getBaseElement()),d+=1;c?this.layerElement.insertBefore(a,c):this.layerElement.appendChild(a)},HCompElement.prototype.createComp=function(a){return this.supports3d?new HCompElement(a,this.globalData,this):new SVGCompElement(a,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(a){return this.supports3d?new HCompElement(a,this.globalData,this):new SVGCompElement(a,this.globalData,this)};var CompExpressionInterface=function(){return function(a){function b(b){for(var c=0,d=a.layers.length;c<d;){if(a.layers[c].nm===b||a.layers[c].ind===b)return a.elements[c].layerInterface;c+=1}return null}return Object.defineProperty(b,"_name",{value:a.data.nm}),b.layer=b,b.pixelAspect=1,b.height=a.data.h||a.globalData.compSize.h,b.width=a.data.w||a.globalData.compSize.w,b.pixelAspect=1,b.frameDuration=1/a.globalData.frameRate,b.displayStartTime=0,b.numLayers=a.layers.length,b}}();function _typeof$2(a){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function seedRandom(a,b){var c,d=this,e=256,f=6,g=52,h="random",i=b.pow(e,f),j=b.pow(2,g),k=2*j,l=e-1;function m(c,d,g){var l=[],m=q(p((d=!0===d?{entropy:!0}:d||{}).entropy?[c,s(a)]:null===c?r():c,3),l),t=new n(l),u=function(){for(var a=t.g(f),b=i,c=0;a<j;)a=(a+c)*e,b*=e,c=t.g(1);for(;a>=k;)a/=2,b/=2,c>>>=1;return(a+c)/b};return u.int32=function(){return 0|t.g(4)},u.quick=function(){return t.g(4)/0x100000000},u.double=u,q(s(t.S),a),(d.pass||g||function(a,c,d,e){return(e&&(e.S&&o(e,t),a.state=function(){return o(t,{})}),d)?(b[h]=a,c):a})(u,m,"global"in d?d.global:this==b,d.state)}function n(a){var b,c=a.length,d=this,f=0,g=d.i=d.j=0,h=d.S=[];for(c||(a=[c++]);f<e;)h[f]=f++;for(f=0;f<e;f++)h[f]=h[g=l&g+a[f%c]+(b=h[f])],h[g]=b;d.g=function(a){for(var b,c=0,f=d.i,g=d.j,h=d.S;a--;)b=h[f=l&f+1],c=c*e+h[l&(h[f]=h[g=l&g+b])+(h[g]=b)];return d.i=f,d.j=g,c}}function o(a,b){return b.i=a.i,b.j=a.j,b.S=a.S.slice(),b}function p(a,b){var c,d=[],e=_typeof$2(a);if(b&&"object"==e)for(c in a)try{d.push(p(a[c],b-1))}catch(a){}return d.length?d:"string"==e?a:a+"\0"}function q(a,b){for(var c,d=a+"",e=0;e<d.length;)b[l&e]=l&(c^=19*b[l&e])+d.charCodeAt(e++);return s(b)}function r(){try{if(c)return s(c.randomBytes(e));var b=new Uint8Array(e);return(d.crypto||d.msCrypto).getRandomValues(b),s(b)}catch(b){var f=d.navigator,g=f&&f.plugins;return[+new Date,d,g,d.screen,s(a)]}}function s(a){return String.fromCharCode.apply(0,a)}b["seed"+h]=m,q(b.random(),a)}function initialize$2(a){seedRandom([],a)}var propTypes={SHAPE:"shape"};function _typeof$1(a){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(a){return a.constructor===Array||a.constructor===Float32Array}function isNumerable(a,b){return"number"===a||b instanceof Number||"boolean"===a||"string"===a}function $bm_neg(a){var b=_typeof$1(a);if("number"===b||a instanceof Number||"boolean"===b)return-a;if($bm_isInstanceOfArray(a)){var c,d=a.length,e=[];for(c=0;c<d;c+=1)e[c]=-a[c];return e}return a.propType?a.v:-a}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(a,b){var c=_typeof$1(a),d=_typeof$1(b);if(isNumerable(c,a)&&isNumerable(d,b)||"string"===c||"string"===d)return a+b;if($bm_isInstanceOfArray(a)&&isNumerable(d,b))return a=a.slice(0),a[0]+=b,a;if(isNumerable(c,a)&&$bm_isInstanceOfArray(b))return(b=b.slice(0))[0]=a+b[0],b;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){for(var e=0,f=a.length,g=b.length,h=[];e<f||e<g;)("number"==typeof a[e]||a[e]instanceof Number)&&("number"==typeof b[e]||b[e]instanceof Number)?h[e]=a[e]+b[e]:h[e]=void 0===b[e]?a[e]:a[e]||b[e],e+=1;return h}return 0}var add=sum;function sub(a,b){var c=_typeof$1(a),d=_typeof$1(b);if(isNumerable(c,a)&&isNumerable(d,b))return"string"===c&&(a=parseInt(a,10)),"string"===d&&(b=parseInt(b,10)),a-b;if($bm_isInstanceOfArray(a)&&isNumerable(d,b))return a=a.slice(0),a[0]-=b,a;if(isNumerable(c,a)&&$bm_isInstanceOfArray(b))return(b=b.slice(0))[0]=a-b[0],b;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){for(var e=0,f=a.length,g=b.length,h=[];e<f||e<g;)("number"==typeof a[e]||a[e]instanceof Number)&&("number"==typeof b[e]||b[e]instanceof Number)?h[e]=a[e]-b[e]:h[e]=void 0===b[e]?a[e]:a[e]||b[e],e+=1;return h}return 0}function mul(a,b){var c,d,e,f=_typeof$1(a),g=_typeof$1(b);if(isNumerable(f,a)&&isNumerable(g,b))return a*b;if($bm_isInstanceOfArray(a)&&isNumerable(g,b)){for(d=0,c=createTypedArray("float32",e=a.length);d<e;d+=1)c[d]=a[d]*b;return c}if(isNumerable(f,a)&&$bm_isInstanceOfArray(b)){for(d=0,c=createTypedArray("float32",e=b.length);d<e;d+=1)c[d]=a*b[d];return c}return 0}function div(a,b){var c,d,e,f=_typeof$1(a),g=_typeof$1(b);if(isNumerable(f,a)&&isNumerable(g,b))return a/b;if($bm_isInstanceOfArray(a)&&isNumerable(g,b)){for(d=0,c=createTypedArray("float32",e=a.length);d<e;d+=1)c[d]=a[d]/b;return c}if(isNumerable(f,a)&&$bm_isInstanceOfArray(b)){for(d=0,c=createTypedArray("float32",e=b.length);d<e;d+=1)c[d]=a/b[d];return c}return 0}function mod(a,b){return"string"==typeof a&&(a=parseInt(a,10)),"string"==typeof b&&(b=parseInt(b,10)),a%b}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(a,b,c){if(b>c){var d=c;c=b,b=d}return Math.min(Math.max(a,b),c)}function radiansToDegrees(a){return a/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(a){return a*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(a,b){if("number"==typeof a||a instanceof Number)return b=b||0,Math.abs(a-b);b||(b=helperLengthArray);var c,d=Math.min(a.length,b.length),e=0;for(c=0;c<d;c+=1)e+=Math.pow(b[c]-a[c],2);return Math.sqrt(e)}function normalize(a){return div(a,length(a))}function rgbToHsl(a){var b,c,d=a[0],e=a[1],f=a[2],g=Math.max(d,e,f),h=Math.min(d,e,f),i=(g+h)/2;if(g===h)b=0,c=0;else{var j=g-h;switch(c=i>.5?j/(2-g-h):j/(g+h),g){case d:b=(e-f)/j+6*(e<f);break;case e:b=(f-d)/j+2;break;case f:b=(d-e)/j+4}b/=6}return[b,c,i,a[3]]}function hue2rgb(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}function hslToRgb(a){var b,c,d,e=a[0],f=a[1],g=a[2];if(0===f)b=g,d=g,c=g;else{var h=g<.5?g*(1+f):g+f-g*f,i=2*g-h;b=hue2rgb(i,h,e+1/3),c=hue2rgb(i,h,e),d=hue2rgb(i,h,e-1/3)}return[b,c,d,a[3]]}function linear(a,b,c,d,e){if((void 0===d||void 0===e)&&(d=b,e=c,b=0,c=1),c<b){var f,g=c;c=b,b=g}if(a<=b)return d;if(a>=c)return e;var h=c===b?0:(a-b)/(c-b);if(!d.length)return d+(e-d)*h;var i=d.length,j=createTypedArray("float32",i);for(f=0;f<i;f+=1)j[f]=d[f]+(e[f]-d[f])*h;return j}function random(a,b){if(void 0===b&&(void 0===a?(a=0,b=1):(b=a,a=void 0)),b.length){var c,d=b.length;a||(a=createTypedArray("float32",d));var e=createTypedArray("float32",d),f=BMMath.random();for(c=0;c<d;c+=1)e[c]=a[c]+f*(b[c]-a[c]);return e}return void 0===a&&(a=0),a+BMMath.random()*(b-a)}function createPath(a,b,c,d){var e,f,g,h=a.length,i=shapePool.newElement();i.setPathData(!!d,h);var j=[0,0];for(e=0;e<h;e+=1)f=b&&b[e]?b[e]:j,g=c&&c[e]?c[e]:j,i.setTripleAt(a[e][0],a[e][1],g[0]+a[e][0],g[1]+a[e][1],f[0]+a[e][0],f[1]+a[e][1],e,!0);return i}function initiateExpression(elem,data,property){function noOp(a){return a}if(!elem.globalData.renderConfig.runExpressions)return noOp;var transform,$bm_transform,content,effect,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,time,velocity,value,text,textIndex,textTotal,selectorValue,parent,val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=(function(a,b){var c,d,e=this.pv.length?this.pv.length:1,f=createTypedArray("float32",e);a=5;var g=Math.floor(time*a);for(c=0,d=0;c<g;){for(d=0;d<e;d+=1)f[d]+=-b+2*b*BMMath.random();c+=1}var h=time*a,i=h-Math.floor(h),j=createTypedArray("float32",e);if(e>1){for(d=0;d<e;d+=1)j[d]=this.pv[d]+f[d]+(-b+2*b*BMMath.random())*i;return j}return this.pv+f[0]+(-b+2*b*BMMath.random())*i}).bind(this);function loopInDuration(a,b){return loopIn(a,b,!0)}function loopOutDuration(a,b){return loopOut(a,b,!0)}thisProperty.loopIn&&(loop_in=loopIn=thisProperty.loopIn.bind(thisProperty)),thisProperty.loopOut&&(loop_out=loopOut=thisProperty.loopOut.bind(thisProperty)),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(a,b){var c=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=Math.atan2(c[0],Math.sqrt(c[1]*c[1]+c[2]*c[2]))/degToRads;return[-Math.atan2(c[1],c[2])/degToRads,d,0]}function easeOut(a,b,c,d,e){return applyEase(easeOutBez,a,b,c,d,e)}function easeIn(a,b,c,d,e){return applyEase(easeInBez,a,b,c,d,e)}function ease(a,b,c,d,e){return applyEase(easeInOutBez,a,b,c,d,e)}function applyEase(a,b,c,d,e,f){void 0===e?(e=c,f=d):b=(b-c)/(d-c),b>1?b=1:b<0&&(b=0);var g=a(b);if($bm_isInstanceOfArray(e)){var h,i=e.length,j=createTypedArray("float32",i);for(h=0;h<i;h+=1)j[h]=(f[h]-e[h])*g+e[h];return j}return(f-e)*g+e}function nearestKey(a){var b,c,d,e=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(c=-1,(a*=elem.comp.globalData.frameRate)<data.k[0].t)c=1,d=data.k[0].t;else{for(b=0;b<e-1;b+=1)if(a===data.k[b].t){c=b+1,d=data.k[b].t;break}else if(a>data.k[b].t&&a<data.k[b+1].t){a-data.k[b].t>data.k[b+1].t-a?(c=b+2,d=data.k[b+1].t):(c=b+1,d=data.k[b].t);break}-1===c&&(c=b+1,d=data.k[b].t)}else c=0,d=0;var f={};return f.index=c,f.time=d/elem.comp.globalData.frameRate,f}function key(a){if(!data.k.length||"number"==typeof data.k[0])throw Error("The property has no keyframe at index "+a);a-=1;var b,c,d={time:data.k[a].t/elem.comp.globalData.frameRate,value:[]},e=Object.prototype.hasOwnProperty.call(data.k[a],"s")?data.k[a].s:data.k[a-1].e;for(b=0,c=e.length;b<c;b+=1)d[b]=e[b],d.value[b]=e[b];return d}function framesToTime(a,b){return b||(b=elem.comp.globalData.frameRate),a/b}function timeToFrames(a,b){return a||0===a||(a=time),b||(b=elem.comp.globalData.frameRate),a*b}function seedRandom(a){BMMath.seedrandom(randSeed+a)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(a,b){return"string"==typeof value?void 0===b?value.substring(a):value.substring(a,b):""}function substr(a,b){return"string"==typeof value?void 0===b?value.substr(a):value.substr(a,b):""}function posterizeTime(a){time=0===a?0:Math.floor(time*a)/a,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(a){return(value=a,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType)?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),!transform&&($bm_transform=transform=elem.layerInterface("ADBE Transform Group"),transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!!(elem.hierarchy&&elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var a={};return a.initExpressions=function a(a){var b=0,c=[];function d(){b+=1}function e(){0==(b-=1)&&g()}function f(a){-1===c.indexOf(a)&&c.push(a)}function g(){var a,b=c.length;for(a=0;a<b;a+=1)c[a].release();c.length=0}a.renderer.compInterface=CompExpressionInterface(a.renderer),a.renderer.globalData.projectInterface.registerComposition(a.renderer),a.renderer.globalData.pushExpression=d,a.renderer.globalData.popExpression=e,a.renderer.globalData.registerExpressionProperty=f},a.resetFrame=ExpressionManager.resetFrame,a}(),MaskManagerInterface=function(){function a(a,b){this._mask=a,this._data=b}return Object.defineProperty(a.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(a.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(b){var c,d=createSizedArray(b.viewData.length),e=b.viewData.length;for(c=0;c<e;c+=1)d[c]=new a(b.viewData[c],b.masksProperties[c]);return function(a){for(c=0;c<e;){if(b.masksProperties[c].nm===a)return d[c];c+=1}return null}}}(),ExpressionPropertyInterface=function(){var a={pv:0,v:0,mult:1},b={pv:[0,0,0],v:[0,0,0],mult:1};function c(a,b,c){Object.defineProperty(a,"velocity",{get:function(){return b.getVelocityAtTime(b.comp.currentFrame)}}),a.numKeys=b.keyframes?b.keyframes.length:0,a.key=function(d){if(!a.numKeys)return 0;var e="";e="s"in b.keyframes[d-1]?b.keyframes[d-1].s:"e"in b.keyframes[d-2]?b.keyframes[d-2].e:b.keyframes[d-2].s;var f="unidimensional"===c?new Number(e):Object.assign({},e);return f.time=b.keyframes[d-1].t/b.elem.comp.globalData.frameRate,f.value="unidimensional"===c?e[0]:e,f},a.valueAtTime=b.getValueAtTime,a.speedAtTime=b.getSpeedAtTime,a.velocityAtTime=b.getVelocityAtTime,a.propertyGroup=b.propertyGroup}function d(b){b&&"pv"in b||(b=a);var d=1/b.mult,e=b.pv*d,f=new Number(e);return f.value=e,c(f,b,"unidimensional"),function(){return b.k&&b.getValue(),e=b.v*d,f.value!==e&&((f=new Number(e)).value=e,c(f,b,"unidimensional")),f}}function e(a){a&&"pv"in a||(a=b);var d=1/a.mult,e=a.data&&a.data.l||a.pv.length,f=createTypedArray("float32",e),g=createTypedArray("float32",e);return f.value=g,c(f,a,"multidimensional"),function(){a.k&&a.getValue();for(var b=0;b<e;b+=1)g[b]=a.v[b]*d,f[b]=g[b];return f}}function f(){return a}return function(a){return a?"unidimensional"===a.propType?d(a):e(a):f}}(),TransformExpressionInterface=function(){return function(a){var b,c,d,e;function f(a){switch(a){case"scale":case"Scale":case"ADBE Scale":case 6:return f.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return f.rotation;case"ADBE Rotate X":return f.xRotation;case"ADBE Rotate Y":return f.yRotation;case"position":case"Position":case"ADBE Position":case 2:return f.position;case"ADBE Position_0":return f.xPosition;case"ADBE Position_1":return f.yPosition;case"ADBE Position_2":return f.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return f.anchorPoint;case"opacity":case"Opacity":case 11:return f.opacity;default:return null}}return Object.defineProperty(f,"rotation",{get:ExpressionPropertyInterface(a.r||a.rz)}),Object.defineProperty(f,"zRotation",{get:ExpressionPropertyInterface(a.rz||a.r)}),Object.defineProperty(f,"xRotation",{get:ExpressionPropertyInterface(a.rx)}),Object.defineProperty(f,"yRotation",{get:ExpressionPropertyInterface(a.ry)}),Object.defineProperty(f,"scale",{get:ExpressionPropertyInterface(a.s)}),a.p?e=ExpressionPropertyInterface(a.p):(b=ExpressionPropertyInterface(a.px),c=ExpressionPropertyInterface(a.py),a.pz&&(d=ExpressionPropertyInterface(a.pz))),Object.defineProperty(f,"position",{get:function(){return a.p?e():[b(),c(),d?d():0]}}),Object.defineProperty(f,"xPosition",{get:ExpressionPropertyInterface(a.px)}),Object.defineProperty(f,"yPosition",{get:ExpressionPropertyInterface(a.py)}),Object.defineProperty(f,"zPosition",{get:ExpressionPropertyInterface(a.pz)}),Object.defineProperty(f,"anchorPoint",{get:ExpressionPropertyInterface(a.a)}),Object.defineProperty(f,"opacity",{get:ExpressionPropertyInterface(a.o)}),Object.defineProperty(f,"skew",{get:ExpressionPropertyInterface(a.sk)}),Object.defineProperty(f,"skewAxis",{get:ExpressionPropertyInterface(a.sa)}),Object.defineProperty(f,"orientation",{get:ExpressionPropertyInterface(a.or)}),f}}(),LayerExpressionInterface=function(){function a(a){var b=new Matrix;return void 0!==a?this._elem.finalTransform.mProp.getValueAtTime(a).clone(b):this._elem.finalTransform.mProp.applyToMatrix(b),b}function b(a,b){var c=this.getMatrix(b);return c.props[12]=0,c.props[13]=0,c.props[14]=0,this.applyPoint(c,a)}function c(a,b){var c=this.getMatrix(b);return this.applyPoint(c,a)}function d(a,b){var c=this.getMatrix(b);return c.props[12]=0,c.props[13]=0,c.props[14]=0,this.invertPoint(c,a)}function e(a,b){var c=this.getMatrix(b);return this.invertPoint(c,a)}function f(a,b){if(this._elem.hierarchy&&this._elem.hierarchy.length){var c,d=this._elem.hierarchy.length;for(c=0;c<d;c+=1)this._elem.hierarchy[c].finalTransform.mProp.applyToMatrix(a)}return a.applyToPointArray(b[0],b[1],b[2]||0)}function g(a,b){if(this._elem.hierarchy&&this._elem.hierarchy.length){var c,d=this._elem.hierarchy.length;for(c=0;c<d;c+=1)this._elem.hierarchy[c].finalTransform.mProp.applyToMatrix(a)}return a.inversePoint(b)}function h(a){var b=new Matrix;if(b.reset(),this._elem.finalTransform.mProp.applyToMatrix(b),this._elem.hierarchy&&this._elem.hierarchy.length){var c,d=this._elem.hierarchy.length;for(c=0;c<d;c+=1)this._elem.hierarchy[c].finalTransform.mProp.applyToMatrix(b)}return b.inversePoint(a)}function i(){return[1,1,1,1]}return function(j){function k(a){m.mask=new MaskManagerInterface(a,j)}function l(a){m.effect=a}function m(a){switch(a){case"ADBE Root Vectors Group":case"Contents":case 2:return m.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return n;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return m.effect;case"ADBE Text Properties":return m.textInterface;default:return null}}m.getMatrix=a,m.invertPoint=g,m.applyPoint=f,m.toWorld=c,m.toWorldVec=b,m.fromWorld=e,m.fromWorldVec=d,m.toComp=c,m.fromComp=h,m.sampleImage=i,m.sourceRectAtTime=j.sourceRectAtTime.bind(j),m._elem=j;var n=TransformExpressionInterface(j.finalTransform.mProp),o=getDescriptor(n,"anchorPoint");return Object.defineProperties(m,{hasParent:{get:function(){return j.hierarchy.length}},parent:{get:function(){return j.hierarchy[0].layerInterface}},rotation:getDescriptor(n,"rotation"),scale:getDescriptor(n,"scale"),position:getDescriptor(n,"position"),opacity:getDescriptor(n,"opacity"),anchorPoint:o,anchor_point:o,transform:{get:function(){return n}},active:{get:function(){return j.isInRange}}}),m.startTime=j.data.st,m.index=j.data.ind,m.source=j.data.refId,m.height=0===j.data.ty?j.data.h:100,m.width=0===j.data.ty?j.data.w:100,m.inPoint=j.data.ip/j.comp.globalData.frameRate,m.outPoint=j.data.op/j.comp.globalData.frameRate,m._name=j.data.nm,m.registerMaskInterface=k,m.registerEffectsInterface=l,m}}(),propertyGroupFactory=function(){return function(a,b){return function(c){return(c=void 0===c?1:c)<=0?a:b(c-1)}}}(),PropertyInterface=function(){return function(a,b){var c={_name:a};return function(a){return(a=void 0===a?1:a)<=0?c:b(a-1)}}}(),EffectsExpressionInterface=function(){function a(c,d,e,f){function g(a){for(var b=c.ef,d=0,e=b.length;d<e;){if(a===b[d].nm||a===b[d].mn||a===b[d].ix){if(5===b[d].ty)return j[d];return j[d]()}d+=1}throw Error()}var h,i=propertyGroupFactory(g,e),j=[],k=c.ef.length;for(h=0;h<k;h+=1)5===c.ef[h].ty?j.push(a(c.ef[h],d.effectElements[h],d.effectElements[h].propertyGroup,f)):j.push(b(d.effectElements[h],c.ef[h].ty,f,i));return"ADBE Color Control"===c.mn&&Object.defineProperty(g,"color",{get:function(){return j[0]()}}),Object.defineProperties(g,{numProperties:{get:function(){return c.np}},_name:{value:c.nm},propertyGroup:{value:i}}),g.enabled=0!==c.en,g.active=g.enabled,g}function b(a,b,c,d){var e=ExpressionPropertyInterface(a.p);function f(){return 10===b?c.comp.compInterface(a.p.v):e()}return a.p.setGroupProperty&&a.p.setGroupProperty(PropertyInterface("",d)),f}return{createEffectsInterface:function(b,c){if(b.effectsManager){var d,e=[],f=b.data.ef,g=b.effectsManager.effectElements.length;for(d=0;d<g;d+=1)e.push(a(f[d],b.effectsManager.effectElements[d],c,b));var h=b.data.ef||[],i=function(a){for(d=0,g=h.length;d<g;){if(a===h[d].nm||a===h[d].mn||a===h[d].ix)return e[d];d+=1}return null};return Object.defineProperty(i,"numProperties",{get:function(){return h.length}}),i}return null}}}(),ShapePathInterface=function(){return function(a,b,c){var d=b.sh;function e(a){return"Shape"===a||"shape"===a||"Path"===a||"path"===a||"ADBE Vector Shape"===a||2===a?e.path:null}var f=propertyGroupFactory(e,c);return d.setGroupProperty(PropertyInterface("Path",f)),Object.defineProperties(e,{path:{get:function(){return d.k&&d.getValue(),d}},shape:{get:function(){return d.k&&d.getValue(),d}},_name:{value:a.nm},ix:{value:a.ix},propertyIndex:{value:a.ix},mn:{value:a.mn},propertyGroup:{value:c}}),e}}(),ShapeExpressionInterface=function(){function a(a,b,i){var o,p=[],q=a?a.length:0;for(o=0;o<q;o+=1)"gr"===a[o].ty?p.push(c(a[o],b[o],i)):"fl"===a[o].ty?p.push(d(a[o],b[o],i)):"st"===a[o].ty?p.push(g(a[o],b[o],i)):"tm"===a[o].ty?p.push(h(a[o],b[o],i)):"tr"===a[o].ty||("el"===a[o].ty?p.push(j(a[o],b[o],i)):"sr"===a[o].ty?p.push(k(a[o],b[o],i)):"sh"===a[o].ty?p.push(ShapePathInterface(a[o],b[o],i)):"rc"===a[o].ty?p.push(l(a[o],b[o],i)):"rd"===a[o].ty?p.push(m(a[o],b[o],i)):"rp"===a[o].ty?p.push(n(a[o],b[o],i)):"gf"===a[o].ty?p.push(e(a[o],b[o],i)):p.push(f(a[o],b[o],i)));return p}function b(b,c,d){var e,f=function(a){for(var b=0,c=e.length;b<c;){if(e[b]._name===a||e[b].mn===a||e[b].propertyIndex===a||e[b].ix===a||e[b].ind===a)return e[b];b+=1}return"number"==typeof a?e[a-1]:null};f.propertyGroup=propertyGroupFactory(f,d),e=a(b.it,c.it,f.propertyGroup),f.numProperties=e.length;var g=i(b.it[b.it.length-1],c.it[c.it.length-1],f.propertyGroup);return f.transform=g,f.propertyIndex=b.cix,f._name=b.nm,f}function c(a,c,d){var e=function(a){switch(a){case"ADBE Vectors Group":case"Contents":case 2:return e.content;default:return e.transform}};e.propertyGroup=propertyGroupFactory(e,d);var f=b(a,c,e.propertyGroup),g=i(a.it[a.it.length-1],c.it[c.it.length-1],e.propertyGroup);return e.content=f,e.transform=g,Object.defineProperty(e,"_name",{get:function(){return a.nm}}),e.numProperties=a.np,e.propertyIndex=a.ix,e.nm=a.nm,e.mn=a.mn,e}function d(a,b,c){function d(a){return"Color"===a||"color"===a?d.color:"Opacity"===a||"opacity"===a?d.opacity:null}return Object.defineProperties(d,{color:{get:ExpressionPropertyInterface(b.c)},opacity:{get:ExpressionPropertyInterface(b.o)},_name:{value:a.nm},mn:{value:a.mn}}),b.c.setGroupProperty(PropertyInterface("Color",c)),b.o.setGroupProperty(PropertyInterface("Opacity",c)),d}function e(a,b,c){function d(a){return"Start Point"===a||"start point"===a?d.startPoint:"End Point"===a||"end point"===a?d.endPoint:"Opacity"===a||"opacity"===a?d.opacity:null}return Object.defineProperties(d,{startPoint:{get:ExpressionPropertyInterface(b.s)},endPoint:{get:ExpressionPropertyInterface(b.e)},opacity:{get:ExpressionPropertyInterface(b.o)},type:{get:function(){return"a"}},_name:{value:a.nm},mn:{value:a.mn}}),b.s.setGroupProperty(PropertyInterface("Start Point",c)),b.e.setGroupProperty(PropertyInterface("End Point",c)),b.o.setGroupProperty(PropertyInterface("Opacity",c)),d}function f(){return function(){return null}}function g(a,b,c){var d,e=propertyGroupFactory(j,c),f=propertyGroupFactory(i,e);function g(c){Object.defineProperty(i,a.d[c].nm,{get:ExpressionPropertyInterface(b.d.dataProps[c].p)})}var h=a.d?a.d.length:0,i={};for(d=0;d<h;d+=1)g(d),b.d.dataProps[d].p.setGroupProperty(f);function j(a){return"Color"===a||"color"===a?j.color:"Opacity"===a||"opacity"===a?j.opacity:"Stroke Width"===a||"stroke width"===a?j.strokeWidth:null}return Object.defineProperties(j,{color:{get:ExpressionPropertyInterface(b.c)},opacity:{get:ExpressionPropertyInterface(b.o)},strokeWidth:{get:ExpressionPropertyInterface(b.w)},dash:{get:function(){return i}},_name:{value:a.nm},mn:{value:a.mn}}),b.c.setGroupProperty(PropertyInterface("Color",e)),b.o.setGroupProperty(PropertyInterface("Opacity",e)),b.w.setGroupProperty(PropertyInterface("Stroke Width",e)),j}function h(a,b,c){function d(b){return b===a.e.ix||"End"===b||"end"===b?d.end:b===a.s.ix?d.start:b===a.o.ix?d.offset:null}var e=propertyGroupFactory(d,c);return d.propertyIndex=a.ix,b.s.setGroupProperty(PropertyInterface("Start",e)),b.e.setGroupProperty(PropertyInterface("End",e)),b.o.setGroupProperty(PropertyInterface("Offset",e)),d.propertyIndex=a.ix,d.propertyGroup=c,Object.defineProperties(d,{start:{get:ExpressionPropertyInterface(b.s)},end:{get:ExpressionPropertyInterface(b.e)},offset:{get:ExpressionPropertyInterface(b.o)},_name:{value:a.nm}}),d.mn=a.mn,d}function i(a,b,c){function d(b){return a.a.ix===b||"Anchor Point"===b?d.anchorPoint:a.o.ix===b||"Opacity"===b?d.opacity:a.p.ix===b||"Position"===b?d.position:a.r.ix===b||"Rotation"===b||"ADBE Vector Rotation"===b?d.rotation:a.s.ix===b||"Scale"===b?d.scale:a.sk&&a.sk.ix===b||"Skew"===b?d.skew:a.sa&&a.sa.ix===b||"Skew Axis"===b?d.skewAxis:null}var e=propertyGroupFactory(d,c);return b.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",e)),b.transform.mProps.p.setGroupProperty(PropertyInterface("Position",e)),b.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",e)),b.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",e)),b.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",e)),b.transform.mProps.sk&&(b.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",e)),b.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",e))),b.transform.op.setGroupProperty(PropertyInterface("Opacity",e)),Object.defineProperties(d,{opacity:{get:ExpressionPropertyInterface(b.transform.mProps.o)},position:{get:ExpressionPropertyInterface(b.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(b.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(b.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(b.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(b.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(b.transform.mProps.sa)},_name:{value:a.nm}}),d.ty="tr",d.mn=a.mn,d.propertyGroup=c,d}function j(a,b,c){function d(b){return a.p.ix===b?d.position:a.s.ix===b?d.size:null}var e=propertyGroupFactory(d,c);d.propertyIndex=a.ix;var f="tm"===b.sh.ty?b.sh.prop:b.sh;return f.s.setGroupProperty(PropertyInterface("Size",e)),f.p.setGroupProperty(PropertyInterface("Position",e)),Object.defineProperties(d,{size:{get:ExpressionPropertyInterface(f.s)},position:{get:ExpressionPropertyInterface(f.p)},_name:{value:a.nm}}),d.mn=a.mn,d}function k(a,b,c){function d(b){return a.p.ix===b?d.position:a.r.ix===b?d.rotation:a.pt.ix===b?d.points:a.or.ix===b||"ADBE Vector Star Outer Radius"===b?d.outerRadius:a.os.ix===b?d.outerRoundness:a.ir&&(a.ir.ix===b||"ADBE Vector Star Inner Radius"===b)?d.innerRadius:a.is&&a.is.ix===b?d.innerRoundness:null}var e=propertyGroupFactory(d,c),f="tm"===b.sh.ty?b.sh.prop:b.sh;return d.propertyIndex=a.ix,f.or.setGroupProperty(PropertyInterface("Outer Radius",e)),f.os.setGroupProperty(PropertyInterface("Outer Roundness",e)),f.pt.setGroupProperty(PropertyInterface("Points",e)),f.p.setGroupProperty(PropertyInterface("Position",e)),f.r.setGroupProperty(PropertyInterface("Rotation",e)),a.ir&&(f.ir.setGroupProperty(PropertyInterface("Inner Radius",e)),f.is.setGroupProperty(PropertyInterface("Inner Roundness",e))),Object.defineProperties(d,{position:{get:ExpressionPropertyInterface(f.p)},rotation:{get:ExpressionPropertyInterface(f.r)},points:{get:ExpressionPropertyInterface(f.pt)},outerRadius:{get:ExpressionPropertyInterface(f.or)},outerRoundness:{get:ExpressionPropertyInterface(f.os)},innerRadius:{get:ExpressionPropertyInterface(f.ir)},innerRoundness:{get:ExpressionPropertyInterface(f.is)},_name:{value:a.nm}}),d.mn=a.mn,d}function l(a,b,c){function d(b){return a.p.ix===b?d.position:a.r.ix===b?d.roundness:a.s.ix===b||"Size"===b||"ADBE Vector Rect Size"===b?d.size:null}var e=propertyGroupFactory(d,c),f="tm"===b.sh.ty?b.sh.prop:b.sh;return d.propertyIndex=a.ix,f.p.setGroupProperty(PropertyInterface("Position",e)),f.s.setGroupProperty(PropertyInterface("Size",e)),f.r.setGroupProperty(PropertyInterface("Rotation",e)),Object.defineProperties(d,{position:{get:ExpressionPropertyInterface(f.p)},roundness:{get:ExpressionPropertyInterface(f.r)},size:{get:ExpressionPropertyInterface(f.s)},_name:{value:a.nm}}),d.mn=a.mn,d}function m(a,b,c){function d(b){return a.r.ix===b||"Round Corners 1"===b?d.radius:null}var e=propertyGroupFactory(d,c),f=b;return d.propertyIndex=a.ix,f.rd.setGroupProperty(PropertyInterface("Radius",e)),Object.defineProperties(d,{radius:{get:ExpressionPropertyInterface(f.rd)},_name:{value:a.nm}}),d.mn=a.mn,d}function n(a,b,c){function d(b){return a.c.ix===b||"Copies"===b?d.copies:a.o.ix===b||"Offset"===b?d.offset:null}var e=propertyGroupFactory(d,c),f=b;return d.propertyIndex=a.ix,f.c.setGroupProperty(PropertyInterface("Copies",e)),f.o.setGroupProperty(PropertyInterface("Offset",e)),Object.defineProperties(d,{copies:{get:ExpressionPropertyInterface(f.c)},offset:{get:ExpressionPropertyInterface(f.o)},_name:{value:a.nm}}),d.mn=a.mn,d}return function(b,c,d){var e;function f(a){if("number"==typeof a)return 0===(a=void 0===a?1:a)?d:e[a-1];for(var b=0,c=e.length;b<c;){if(e[b]._name===a)return e[b];b+=1}return null}return f.propertyGroup=propertyGroupFactory(f,function(){return d}),e=a(b,c,f.propertyGroup),f.numProperties=e.length,f._name="Contents",f}}(),TextExpressionInterface=function(){return function(a){var b;function c(a){return"ADBE Text Document"===a?c.sourceText:null}return Object.defineProperty(c,"sourceText",{get:function(){a.textProperty.getValue();var c=a.textProperty.currentData.t;return b&&c===b.value||((b=new String(c)).value=c||new String(c),Object.defineProperty(b,"style",{get:function(){return{fillColor:a.textProperty.currentData.fc}}})),b}}),c}}();function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var FootageInterface=function(){var a=function(a){var b="",c=a.getFootageData();function d(a){if(c[a])return(b=a,c=c[a],"object"===_typeof(c))?d:c;var e=a.indexOf(b);return -1!==e?(c=c[parseInt(a.substr(e+b.length),10)],"object"===_typeof(c))?d:c:""}return function(){return b="",c=a.getFootageData(),d}},b=function(b){function c(a){return"Outline"===a?c.outlineInterface():null}return c._name="Outline",c.outlineInterface=a(b),c};return function(a){function c(a){return"Data"===a?c.dataInterface:null}return c._name="Data",c.dataInterface=b(a),c}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(a){return interfaces[a]||null}var expressionHelpers=function(){return{searchExpressions:function(a,b,c){b.x&&(c.k=!0,c.x=!0,c.initiateExpression=ExpressionManager.initiateExpression,c.effectsSequence.push(c.initiateExpression(a,b,c).bind(c)))},getSpeedAtTime:function(a){var b,c=-.01,d=this.getValueAtTime(a),e=this.getValueAtTime(a+c),f=0;if(d.length){for(b=0;b<d.length;b+=1)f+=Math.pow(e[b]-d[b],2);f=100*Math.sqrt(f)}else f=0;return f},getVelocityAtTime:function(a){if(void 0!==this.vel)return this.vel;var b,c,d=-.001,e=this.getValueAtTime(a),f=this.getValueAtTime(a+d);if(e.length)for(c=0,b=createTypedArray("float32",e.length);c<e.length;c+=1)b[c]=(f[c]-e[c])/d;else b=(f-e)/d;return b},getValueAtTime:function(a){return a*=this.elem.globalData.frameRate,(a-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<a?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(a,this._cachingAtTime),this._cachingAtTime.lastFrame=a),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(a){this.propertyGroup=a}}}();function addPropertyDecorator(){function a(a,b,c){if(!this.k||!this.keyframes)return this.pv;a=a?a.toLowerCase():"";var d,e,f,g,h,i=this.comp.renderedFrame,j=this.keyframes,k=j[j.length-1].t;if(i<=k)return this.pv;if(c?(d=b?Math.abs(k-this.elem.comp.globalData.frameRate*b):Math.max(0,k-this.elem.data.ip),e=k-d):((!b||b>j.length-1)&&(b=j.length-1),d=k-(e=j[j.length-1-b].t)),"pingpong"===a){if(Math.floor((i-e)/d)%2!=0)return this.getValueAtTime((d-(i-e)%d+e)/this.comp.globalData.frameRate,0)}else if("offset"===a){var l=this.getValueAtTime(e/this.comp.globalData.frameRate,0),m=this.getValueAtTime(k/this.comp.globalData.frameRate,0),n=this.getValueAtTime(((i-e)%d+e)/this.comp.globalData.frameRate,0),o=Math.floor((i-e)/d);if(this.pv.length){for(f=0,g=(h=Array(l.length)).length;f<g;f+=1)h[f]=(m[f]-l[f])*o+n[f];return h}return(m-l)*o+n}else if("continue"===a){var p=this.getValueAtTime(k/this.comp.globalData.frameRate,0),q=this.getValueAtTime((k-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(f=0,g=(h=Array(p.length)).length;f<g;f+=1)h[f]=p[f]+(p[f]-q[f])*((i-k)/this.comp.globalData.frameRate)/5e-4;return h}return p+(i-k)/.001*(p-q)}return this.getValueAtTime(((i-e)%d+e)/this.comp.globalData.frameRate,0)}function b(a,b,c){if(!this.k)return this.pv;a=a?a.toLowerCase():"";var d,e,f,g,h,i=this.comp.renderedFrame,j=this.keyframes,k=j[0].t;if(i>=k)return this.pv;if(c?(d=b?Math.abs(this.elem.comp.globalData.frameRate*b):Math.max(0,this.elem.data.op-k),e=k+d):((!b||b>j.length-1)&&(b=j.length-1),d=(e=j[b].t)-k),"pingpong"===a){if(Math.floor((k-i)/d)%2==0)return this.getValueAtTime(((k-i)%d+k)/this.comp.globalData.frameRate,0)}else if("offset"===a){var l=this.getValueAtTime(k/this.comp.globalData.frameRate,0),m=this.getValueAtTime(e/this.comp.globalData.frameRate,0),n=this.getValueAtTime((d-(k-i)%d+k)/this.comp.globalData.frameRate,0),o=Math.floor((k-i)/d)+1;if(this.pv.length){for(f=0,g=(h=Array(l.length)).length;f<g;f+=1)h[f]=n[f]-(m[f]-l[f])*o;return h}return n-(m-l)*o}else if("continue"===a){var p=this.getValueAtTime(k/this.comp.globalData.frameRate,0),q=this.getValueAtTime((k+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(f=0,g=(h=Array(p.length)).length;f<g;f+=1)h[f]=p[f]+(p[f]-q[f])*(k-i)/.001;return h}return p+(p-q)*(k-i)/.001}return this.getValueAtTime((d-((k-i)%d+k))/this.comp.globalData.frameRate,0)}function c(a,b){if(!this.k||(a=.5*(a||.4),(b=Math.floor(b||5))<=1))return this.pv;var c,d,e=this.comp.renderedFrame/this.comp.globalData.frameRate,f=e-a,g=e+a,h=b>1?(g-f)/(b-1):1,i=0,j=0;for(c=this.pv.length?createTypedArray("float32",this.pv.length):0;i<b;){if(d=this.getValueAtTime(f+i*h),this.pv.length)for(j=0;j<this.pv.length;j+=1)c[j]+=d[j];else c+=d;i+=1}if(this.pv.length)for(j=0;j<this.pv.length;j+=1)c[j]/=b;else c/=b;return c}function d(a){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var b=this._transformCachingAtTime.v;if(b.cloneFromProps(this.pre.props),this.appliedTransformations<1){var c=this.a.getValueAtTime(a);b.translate(-c[0]*this.a.mult,-c[1]*this.a.mult,c[2]*this.a.mult)}if(this.appliedTransformations<2){var d=this.s.getValueAtTime(a);b.scale(d[0]*this.s.mult,d[1]*this.s.mult,d[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var e=this.sk.getValueAtTime(a),f=this.sa.getValueAtTime(a);b.skewFromAxis(-e*this.sk.mult,f*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var g=this.r.getValueAtTime(a);b.rotate(-g*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var h=this.rz.getValueAtTime(a),i=this.ry.getValueAtTime(a),j=this.rx.getValueAtTime(a),k=this.or.getValueAtTime(a);b.rotateZ(-h*this.rz.mult).rotateY(i*this.ry.mult).rotateX(j*this.rx.mult).rotateZ(-k[2]*this.or.mult).rotateY(k[1]*this.or.mult).rotateX(k[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var l=this.px.getValueAtTime(a),m=this.py.getValueAtTime(a);if(this.data.p.z){var n=this.pz.getValueAtTime(a);b.translate(l*this.px.mult,m*this.py.mult,-n*this.pz.mult)}else b.translate(l*this.px.mult,m*this.py.mult,0)}else{var o=this.p.getValueAtTime(a);b.translate(o[0]*this.p.mult,o[1]*this.p.mult,-o[2]*this.p.mult)}return b}function e(){return this.v.clone(new Matrix)}var f=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(a,b,c){var g=f(a,b,c);return g.dynamicProperties.length?g.getValueAtTime=d.bind(g):g.getValueAtTime=e.bind(g),g.setGroupProperty=expressionHelpers.setGroupProperty,g};var g=PropertyFactory.getProp;function h(a){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),a*=this.elem.globalData.frameRate,(a-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<a?this._caching.lastIndex:0,this._cachingAtTime.lastTime=a,this.interpolateShape(a,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}PropertyFactory.getProp=function(d,e,f,h,i){var j=g(d,e,f,h,i);j.kf?j.getValueAtTime=expressionHelpers.getValueAtTime.bind(j):j.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(j),j.setGroupProperty=expressionHelpers.setGroupProperty,j.loopOut=a,j.loopIn=b,j.smooth=c,j.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(j),j.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(j),j.numKeys=1===e.a?e.k.length:0,j.propertyIndex=e.ix;var k=0;return 0!==f&&(k=createTypedArray("float32",1===e.a?e.k[0].s.length:e.k.length)),j._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:k},expressionHelpers.searchExpressions(d,e,j),j.k&&i.addDynamicProperty(j),j};var i=ShapePropertyFactory.getConstructorFunction(),j=ShapePropertyFactory.getKeyframedConstructorFunction();function k(){}k.prototype={vertices:function(a,b){this.k&&this.getValue();var c,d=this.v;void 0!==b&&(d=this.getValueAtTime(b,0));var e=d._length,f=d[a],g=d.v,h=createSizedArray(e);for(c=0;c<e;c+=1)"i"===a||"o"===a?h[c]=[f[c][0]-g[c][0],f[c][1]-g[c][1]]:h[c]=[f[c][0],f[c][1]];return h},points:function(a){return this.vertices("v",a)},inTangents:function(a){return this.vertices("i",a)},outTangents:function(a){return this.vertices("o",a)},isClosed:function(){return this.v.c},pointOnPath:function(a,b){var c,d=this.v;void 0!==b&&(d=this.getValueAtTime(b,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(d));for(var e=this._segmentsLength,f=e.lengths,g=e.totalLength*a,h=0,i=f.length,j=0;h<i;){if(j+f[h].addedLength>g){var k=h,l=d.c&&h===i-1?0:h+1,m=(g-j)/f[h].addedLength;c=bez.getPointInSegment(d.v[k],d.v[l],d.o[k],d.i[l],m,f[h]);break}j+=f[h].addedLength,h+=1}return c||(c=d.c?[d.v[0][0],d.v[0][1]]:[d.v[d._length-1][0],d.v[d._length-1][1]]),c},vectorOnPath:function(a,b,c){1==a?a=this.v.c:0==a&&(a=.999);var d=this.pointOnPath(a,b),e=this.pointOnPath(a+.001,b),f=e[0]-d[0],g=e[1]-d[1],h=Math.sqrt(Math.pow(f,2)+Math.pow(g,2));return 0===h?[0,0]:"tangent"===c?[f/h,g/h]:[-g/h,f/h]},tangentOnPath:function(a,b){return this.vectorOnPath(a,b,"tangent")},normalOnPath:function(a,b){return this.vectorOnPath(a,b,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([k],i),extendPrototype([k],j),j.prototype.getValueAtTime=h,j.prototype.initiateExpression=ExpressionManager.initiateExpression;var l=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(a,b,c,d,e){var f=l(a,b,c,d,e);return f.propertyIndex=b.ix,f.lock=!1,3===c?expressionHelpers.searchExpressions(a,b.pt,f):4===c&&expressionHelpers.searchExpressions(a,b.ks,f),f.k&&a.addDynamicProperty(f),f}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function a(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(a,b){var c=this.calculateExpression(b);if(a.t!==c){var d={};return this.copyData(d,a),d.t=c.toString(),d.__complete=!1,d}return a},TextProperty.prototype.searchProperty=function(){var a=this.searchKeyframes(),b=this.searchExpressions();return this.kf=a||b,this.kf},TextProperty.prototype.searchExpressions=a}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(a,b){var c,d,e=createNS("feMerge");for(e.setAttribute("result",a),d=0;d<b.length;d+=1)(c=createNS("feMergeNode")).setAttribute("in",b[d]),e.appendChild(c),e.appendChild(c);return e}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(a,b,c,d,e){this.filterManager=b;var f=createNS("feColorMatrix");f.setAttribute("type","matrix"),f.setAttribute("color-interpolation-filters","linearRGB"),f.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=f,f.setAttribute("result",d+"_tint_1"),a.appendChild(f),(f=createNS("feColorMatrix")).setAttribute("type","matrix"),f.setAttribute("color-interpolation-filters","sRGB"),f.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),f.setAttribute("result",d+"_tint_2"),a.appendChild(f),this.matrixFilter=f;var g=this.createMergeNode(d,[e,d+"_tint_1",d+"_tint_2"]);a.appendChild(g)}function SVGFillFilter(a,b,c,d){this.filterManager=b;var e=createNS("feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.setAttribute("result",d),a.appendChild(e),this.matrixFilter=e}function SVGStrokeEffect(a,b,c){this.initialized=!1,this.filterManager=b,this.elem=c,this.paths=[]}function SVGTritoneFilter(a,b,c,d){this.filterManager=b;var e=createNS("feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","linearRGB"),e.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),a.appendChild(e);var f=createNS("feComponentTransfer");f.setAttribute("color-interpolation-filters","sRGB"),f.setAttribute("result",d),this.matrixFilter=f;var g=createNS("feFuncR");g.setAttribute("type","table"),f.appendChild(g),this.feFuncR=g;var h=createNS("feFuncG");h.setAttribute("type","table"),f.appendChild(h),this.feFuncG=h;var i=createNS("feFuncB");i.setAttribute("type","table"),f.appendChild(i),this.feFuncB=i,a.appendChild(f)}function SVGProLevelsFilter(a,b,c,d){this.filterManager=b;var e=this.filterManager.effectElements,f=createNS("feComponentTransfer");(e[10].p.k||0!==e[10].p.v||e[11].p.k||1!==e[11].p.v||e[12].p.k||1!==e[12].p.v||e[13].p.k||0!==e[13].p.v||e[14].p.k||1!==e[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",f)),(e[17].p.k||0!==e[17].p.v||e[18].p.k||1!==e[18].p.v||e[19].p.k||1!==e[19].p.v||e[20].p.k||0!==e[20].p.v||e[21].p.k||1!==e[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",f)),(e[24].p.k||0!==e[24].p.v||e[25].p.k||1!==e[25].p.v||e[26].p.k||1!==e[26].p.v||e[27].p.k||0!==e[27].p.v||e[28].p.k||1!==e[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",f)),(e[31].p.k||0!==e[31].p.v||e[32].p.k||1!==e[32].p.v||e[33].p.k||1!==e[33].p.v||e[34].p.k||0!==e[34].p.v||e[35].p.k||1!==e[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",f)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(f.setAttribute("color-interpolation-filters","sRGB"),a.appendChild(f)),(e[3].p.k||0!==e[3].p.v||e[4].p.k||1!==e[4].p.v||e[5].p.k||1!==e[5].p.v||e[6].p.k||0!==e[6].p.v||e[7].p.k||1!==e[7].p.v)&&((f=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),f.setAttribute("result",d),a.appendChild(f),this.feFuncRComposed=this.createFeFunc("feFuncR",f),this.feFuncGComposed=this.createFeFunc("feFuncG",f),this.feFuncBComposed=this.createFeFunc("feFuncB",f))}function SVGDropShadowEffect(a,b,c,d,e){var f=b.container.globalData.renderConfig.filterSize,g=b.data.fs||f;a.setAttribute("x",g.x||f.x),a.setAttribute("y",g.y||f.y),a.setAttribute("width",g.width||f.width),a.setAttribute("height",g.height||f.height),this.filterManager=b;var h=createNS("feGaussianBlur");h.setAttribute("in","SourceAlpha"),h.setAttribute("result",d+"_drop_shadow_1"),h.setAttribute("stdDeviation","0"),this.feGaussianBlur=h,a.appendChild(h);var i=createNS("feOffset");i.setAttribute("dx","25"),i.setAttribute("dy","0"),i.setAttribute("in",d+"_drop_shadow_1"),i.setAttribute("result",d+"_drop_shadow_2"),this.feOffset=i,a.appendChild(i);var j=createNS("feFlood");j.setAttribute("flood-color","#00ff00"),j.setAttribute("flood-opacity","1"),j.setAttribute("result",d+"_drop_shadow_3"),this.feFlood=j,a.appendChild(j);var k=createNS("feComposite");k.setAttribute("in",d+"_drop_shadow_3"),k.setAttribute("in2",d+"_drop_shadow_2"),k.setAttribute("operator","in"),k.setAttribute("result",d+"_drop_shadow_4"),a.appendChild(k);var l=this.createMergeNode(d,[d+"_drop_shadow_4",e]);a.appendChild(l)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var b=this.filterManager.effectElements[0].p.v,c=this.filterManager.effectElements[1].p.v,d=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+d+" 0"),this.matrixFilter.setAttribute("values",c[0]-b[0]+" 0 0 0 "+b[0]+" "+(c[1]-b[1])+" 0 0 0 "+b[1]+" "+(c[2]-b[2])+" 0 0 0 "+b[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var b=this.filterManager.effectElements[2].p.v,c=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+b[0]+" 0 0 0 0 "+b[1]+" 0 0 0 0 "+b[2]+" 0 0 0 "+c+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var a,b,c,d,e=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(d=this.elem.maskManager.masksProperties.length,c=0):d=(c=this.filterManager.effectElements[0].p.v-1)+1,(b=createNS("g")).setAttribute("fill","none"),b.setAttribute("stroke-linecap","round"),b.setAttribute("stroke-dashoffset",1);c<d;c+=1)a=createNS("path"),b.appendChild(a),this.paths.push({p:a,m:c});if(3===this.filterManager.effectElements[10].p.v){var f=createNS("mask"),g=createElementID();f.setAttribute("id",g),f.setAttribute("mask-type","alpha"),f.appendChild(b),this.elem.globalData.defs.appendChild(f);var h=createNS("g");for(h.setAttribute("mask","url("+getLocationHref()+"#"+g+")");e[0];)h.appendChild(e[0]);this.elem.layerElement.appendChild(h),this.masker=f,b.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(e=this.elem.layerElement.children||this.elem.layerElement.childNodes;e.length;)this.elem.layerElement.removeChild(e[0]);this.elem.layerElement.appendChild(b),this.elem.layerElement.removeAttribute("mask"),b.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=b},SVGStrokeEffect.prototype.renderFrame=function(a){this.initialized||this.initialize();var b=this.paths.length;for(c=0;c<b;c+=1)if(-1!==this.paths[c].m&&(d=this.elem.maskManager.viewData[this.paths[c].m],e=this.paths[c].p,(a||this.filterManager._mdf||d.prop._mdf)&&e.setAttribute("d",d.lastPath),a||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||d.prop._mdf)){if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var c,d,e,f,g,h=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),i=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),j=e.getTotalLength();f="0 0 0 "+j*h+" ";var k=Math.floor(j*(i-h)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01));for(g=0;g<k;g+=1)f+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";f+="0 "+10*j+" 0 0"}else f="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;e.setAttribute("stroke-dasharray",f)}if((a||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(a||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(a||this.filterManager.effectElements[3].p._mdf)){var l=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*l[0])+","+bmFloor(255*l[1])+","+bmFloor(255*l[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var b=this.filterManager.effectElements[0].p.v,c=this.filterManager.effectElements[1].p.v,d=this.filterManager.effectElements[2].p.v,e=d[0]+" "+c[0]+" "+b[0],f=d[1]+" "+c[1]+" "+b[1],g=d[2]+" "+c[2]+" "+b[2];this.feFuncR.setAttribute("tableValues",e),this.feFuncG.setAttribute("tableValues",f),this.feFuncB.setAttribute("tableValues",g)}},SVGProLevelsFilter.prototype.createFeFunc=function(a,b){var c=createNS(a);return c.setAttribute("type","table"),b.appendChild(c),c},SVGProLevelsFilter.prototype.getTableValue=function(a,b,c,d,e){for(var f,g,h=0,i=256,j=Math.min(a,b),k=Math.max(a,b),l=Array.call(null,{length:256}),m=0,n=e-d,o=b-a;h<=256;)g=(f=h/256)<=j?o<0?e:d:f>=k?o<0?d:e:d+n*Math.pow((f-a)/o,1/c),l[m]=g,m+=1,h+=256/(i-1);return l.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var b,c=this.filterManager.effectElements;this.feFuncRComposed&&(a||c[3].p._mdf||c[4].p._mdf||c[5].p._mdf||c[6].p._mdf||c[7].p._mdf)&&(b=this.getTableValue(c[3].p.v,c[4].p.v,c[5].p.v,c[6].p.v,c[7].p.v),this.feFuncRComposed.setAttribute("tableValues",b),this.feFuncGComposed.setAttribute("tableValues",b),this.feFuncBComposed.setAttribute("tableValues",b)),this.feFuncR&&(a||c[10].p._mdf||c[11].p._mdf||c[12].p._mdf||c[13].p._mdf||c[14].p._mdf)&&(b=this.getTableValue(c[10].p.v,c[11].p.v,c[12].p.v,c[13].p.v,c[14].p.v),this.feFuncR.setAttribute("tableValues",b)),this.feFuncG&&(a||c[17].p._mdf||c[18].p._mdf||c[19].p._mdf||c[20].p._mdf||c[21].p._mdf)&&(b=this.getTableValue(c[17].p.v,c[18].p.v,c[19].p.v,c[20].p.v,c[21].p.v),this.feFuncG.setAttribute("tableValues",b)),this.feFuncB&&(a||c[24].p._mdf||c[25].p._mdf||c[26].p._mdf||c[27].p._mdf||c[28].p._mdf)&&(b=this.getTableValue(c[24].p.v,c[25].p.v,c[26].p.v,c[27].p.v,c[28].p.v),this.feFuncB.setAttribute("tableValues",b)),this.feFuncA&&(a||c[31].p._mdf||c[32].p._mdf||c[33].p._mdf||c[34].p._mdf||c[35].p._mdf)&&(b=this.getTableValue(c[31].p.v,c[32].p.v,c[33].p.v,c[34].p.v,c[35].p.v),this.feFuncA.setAttribute("tableValues",b))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){if((a||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),a||this.filterManager.effectElements[0].p._mdf){var b=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*b[0]),Math.round(255*b[1]),Math.round(255*b[2])))}if((a||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),a||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var c=this.filterManager.effectElements[3].p.v,d=(this.filterManager.effectElements[2].p.v-90)*degToRads,e=c*Math.cos(d),f=c*Math.sin(d);this.feOffset.setAttribute("dx",e),this.feOffset.setAttribute("dy",f)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(a,b,c){this.initialized=!1,this.filterManager=b,this.filterElem=a,this.elem=c,c.matteElement=createNS("g"),c.matteElement.appendChild(c.layerElement),c.matteElement.appendChild(c.transformedElement),c.baseElement=c.matteElement}function SVGGaussianBlurEffect(a,b,c,d){a.setAttribute("x","-100%"),a.setAttribute("y","-100%"),a.setAttribute("width","300%"),a.setAttribute("height","300%"),this.filterManager=b;var e=createNS("feGaussianBlur");e.setAttribute("result",d),a.appendChild(e),this.feGaussianBlur=e}function TransformEffect(){}function SVGTransformEffect(a,b){this.init(b)}function CVTransformEffect(a){this.init(a)}return SVGMatte3Effect.prototype.findSymbol=function(a){for(var b=0,c=_svgMatteSymbols.length;b<c;){if(_svgMatteSymbols[b]===a)return _svgMatteSymbols[b];b+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(a,b){var c,d=a.layerElement.parentNode;if(d){for(var e=d.children,f=0,g=e.length;f<g&&e[f]!==a.layerElement;)f+=1;f<=g-2&&(c=e[f+1]);var h=createNS("use");h.setAttribute("href","#"+b),c?d.insertBefore(h,c):d.appendChild(h)}},SVGMatte3Effect.prototype.setElementAsMask=function(a,b){if(!this.findSymbol(b)){var c=createElementID(),d=createNS("mask");d.setAttribute("id",b.layerId),d.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(b);var e=a.globalData.defs;e.appendChild(d);var f=createNS("symbol");f.setAttribute("id",c),this.replaceInParent(b,c),f.appendChild(b.layerElement),e.appendChild(f);var g=createNS("use");g.setAttribute("href","#"+c),d.appendChild(g),b.data.hd=!1,b.show()}a.setMatte(b.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var a=this.filterManager.effectElements[0].p.v,b=this.elem.comp.elements,c=0,d=b.length;c<d;)b[c]&&b[c].data.ind===a&&this.setElementAsMask(this.elem,b[c]),c+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var b=.3,c=this.filterManager.effectElements[0].p.v*b,d=this.filterManager.effectElements[1].p.v,e=3==d?0:c,f=2==d?0:c;this.feGaussianBlur.setAttribute("stdDeviation",e+" "+f);var g=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",g)}},TransformEffect.prototype.init=function(a){this.effectsManager=a,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(a){if(this._opMdf=!1,this._mdf=!1,a||this.effectsManager._mdf){var b=this.effectsManager.effectElements,c=b[0].p.v,d=b[1].p.v,e=1===b[2].p.v,f=b[3].p.v,g=e?f:b[4].p.v,h=b[5].p.v,i=b[6].p.v,j=b[7].p.v;this.matrix.reset(),this.matrix.translate(-c[0],-c[1],c[2]),this.matrix.scale(.01*g,.01*f,1),this.matrix.rotate(-j*degToRads),this.matrix.skewFromAxis(-h*degToRads,(i+90)*degToRads),this.matrix.translate(d[0],d[1],0),this._mdf=!0,this.opacity!==b[8].p.v&&(this.opacity=b[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})},73123:a=>{"use strict";let b=Symbol("kDone"),c=Symbol("kRun");class d{constructor(a){this[b]=()=>{this.pending--,this[c]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[c]()}[c](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[b])}}}a.exports=d},73407:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},73496:a=>{"use strict";a.exports=require("http2")},74075:a=>{"use strict";a.exports=require("zlib")},74124:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechDetected=void 0;class c{constructor(a,b){this.privSpeechStartDetected=JSON.parse(a),this.privSpeechStartDetected.Offset+=b}static fromJSON(a,b){return new c(a,b)}get Offset(){return this.privSpeechStartDetected.Offset}}b.SpeechDetected=c},74228:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationServiceRecognizer=void 0;let d=c(94705),e=c(41686),f=c(35961);class g extends f.ConversationServiceRecognizer{constructor(a,b,c,d,e){super(a,b,c,d,e),this.privTranslationRecognizer=e,this.connectionEvents.attach(a=>{"ConnectionEstablishedEvent"===a.name&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(a){let b=new e.PropertyCollection,c=await this.processSpeechMessages(a);if(c)return!0;let g=async a=>{if(b.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.asJson()),this.privRequestSession.onPhraseRecognized(a.Offset+a.Duration),a.RecognitionStatus===f.RecognitionStatus.Success){let c=this.fireEventForResult(a,b);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch(a){}if(this.privSuccessCallback){try{this.privSuccessCallback(c.result)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{let d=f.EnumTranslation.implTranslateRecognitionResult(a.RecognitionStatus),g=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,d,a.Text,a.Duration,a.Offset,a.Language,a.Confidence,void 0,a.asJson(),b);if(d===e.ResultReason.Canceled){let b=f.EnumTranslation.implTranslateCancelResult(a.RecognitionStatus),c=f.EnumTranslation.implTranslateCancelErrorCode(a.RecognitionStatus);await this.cancelRecognitionLocal(b,c,f.EnumTranslation.implTranslateErrorDetails(c))}else if(a.RecognitionStatus!==f.RecognitionStatus.EndOfDictation){let a=new e.TranslationRecognitionEventArgs(g,g.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,a)}catch(a){}if(this.privSuccessCallback){try{this.privSuccessCallback(g)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}c=!0}},h=a=>{b.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.asJson());let d=this.fireEventForResult(a,b);if(this.privRequestSession.onHypothesis(d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch(a){}c=!0};switch(a.messageType===d.MessageType.Text&&b.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"translation.hypothesis":h(f.TranslationHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":let i=JSON.parse(a.textBody);if(i.SpeechPhrase)await g(f.TranslationPhrase.fromTranslationResponse(i,this.privRequestSession.currentTurnAudioOffset));else{let b=JSON.parse(a.textBody);b.SpeechHypothesis&&h(f.TranslationHypothesis.fromTranslationResponse(b,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await g(f.TranslationPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(a.binaryBody,this.privRequestSession.sessionId),c=!0;break;case"audio.end":case"translation.synthesis.end":let j=f.TranslationSynthesisEnd.fromJSON(a.textBody);switch(j.SynthesisStatus){case f.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){let a=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),b=new e.TranslationSynthesisEventArgs(a,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,b)}catch(a){}}if(this.privTranslationRecognizer.canceled){let a=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,j.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,a)}catch(a){}}break;case f.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}c=!0}return c}cancelRecognition(a,b,c,d,g){let h=new e.PropertyCollection;if(h.setProperty(f.CancellationErrorCodePropertyName,e.CancellationErrorCode[d]),this.privTranslationRecognizer.canceled){let b=new e.TranslationRecognitionCanceledEventArgs(a,c,g,d,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,b)}catch{}}if(this.privSuccessCallback){let a=new e.TranslationRecognitionResult(void 0,b,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,g,void 0,h);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(a,b,c){try{let d=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(a),b,c);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch(a){}}handleRecognizedCallback(a,b,c){try{let d=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(a),b,c);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,d)}catch(a){}}fireEventForResult(a,b){let c,g,h;if(void 0!==a.Translation.Translations)for(let b of(c=new e.Translations,a.Translation.Translations))c.set(b.Language,b.Text||b.DisplayText);a instanceof f.TranslationPhrase?(g=a.Translation&&a.Translation.TranslationStatus===d.TranslationStatus.Success?e.ResultReason.TranslatedSpeech:e.ResultReason.RecognizedSpeech,h=a.Confidence):g=e.ResultReason.TranslatingSpeech;let i=a.Language,j=new e.TranslationRecognitionResult(c,this.privRequestSession.requestId,g,a.Text,a.Duration,a.Offset,i,h,a.Translation.FailureReason,a.asJson(),b);return new e.TranslationRecognitionEventArgs(j,a.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(a,b){let c=void 0===a?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,d=new e.TranslationSynthesisResult(c,a),f=new e.TranslationSynthesisEventArgs(d,b);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,f)}catch(a){}}}b.TranslationServiceRecognizer=g},74342:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.IdentityProvider=b.SpeakerDiarizationMode=void 0,function(a){a.None="None",a.Identity="Identity",a.Anonymous="Anonymous"}(c=b.SpeakerDiarizationMode||(b.SpeakerDiarizationMode={})),function(a){a.CallCenter="CallCenter"}(d=b.IdentityProvider||(b.IdentityProvider={}))},75538:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CustomCommandsConfig=void 0;let d=c(87470),e=c(85112),f=c(41686);class g extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(a,b,c){d.Contracts.throwIfNullOrWhitespace(a,"applicationId"),d.Contracts.throwIfNullOrWhitespace(b,"subscription"),d.Contracts.throwIfNullOrWhitespace(c,"region");let g=new e.DialogServiceConfigImpl;return g.setProperty(f.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),g.setProperty(f.PropertyId.Conversation_ApplicationId,a),g.setProperty(f.PropertyId.SpeechServiceConnection_Key,b),g.setProperty(f.PropertyId.SpeechServiceConnection_Region,c),g}static fromAuthorizationToken(a,b,c){d.Contracts.throwIfNullOrWhitespace(a,"applicationId"),d.Contracts.throwIfNullOrWhitespace(b,"authorizationToken"),d.Contracts.throwIfNullOrWhitespace(c,"region");let g=new e.DialogServiceConfigImpl;return g.setProperty(f.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),g.setProperty(f.PropertyId.Conversation_ApplicationId,a),g.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,b),g.setProperty(f.PropertyId.SpeechServiceConnection_Region,c),g}set applicationId(a){d.Contracts.throwIfNullOrWhitespace(a,"value"),this.setProperty(f.PropertyId.Conversation_ApplicationId,a)}get applicationId(){return this.getProperty(f.PropertyId.Conversation_ApplicationId)}}b.CustomCommandsConfig=g},76558:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},76710:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TurnStatusReceivedEventArgs=void 0;let d=c(68375);class e{constructor(a){this.privTurnStatus=d.TurnStatusResponsePayload.fromJSON(a)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}b.TurnStatusReceivedEventArgs=e},76830:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceProfileType=void 0,function(a){a[a.TextIndependentIdentification=0]="TextIndependentIdentification",a[a.TextDependentVerification=1]="TextDependentVerification",a[a.TextIndependentVerification=2]="TextIndependentVerification"}(c=b.VoiceProfileType||(b.VoiceProfileType={}))},77504:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.List=void 0;let d=c(29016);class e{constructor(a){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],a)for(let b of a)this.privList.push(b)}get(a){return this.throwIfDisposed(),this.privList[a]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(a){this.throwIfDisposed(),this.insertAt(this.privList.length,a)}insertAt(a,b){this.throwIfDisposed(),0===a?this.privList.unshift(b):a===this.privList.length?this.privList.push(b):this.privList.splice(a,0,b),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(a){return this.throwIfDisposed(),this.remove(a,1)[0]}remove(a,b){this.throwIfDisposed();let c=this.privList.splice(a,b);return this.triggerSubscriptions(this.privRemoveSubscriptions),c}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(a){this.throwIfDisposed();let b=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[b]=a,{detach:()=>(delete this.privAddSubscriptions[b],Promise.resolve())}}onRemoved(a){this.throwIfDisposed();let b=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[b]=a,{detach:()=>(delete this.privRemoveSubscriptions[b],Promise.resolve())}}onDisposed(a){this.throwIfDisposed();let b=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[b]=a,{detach:()=>(delete this.privDisposedSubscriptions[b],Promise.resolve())}}join(a){return this.throwIfDisposed(),this.privList.join(a)}toArray(){let a=[];return this.privList.forEach(b=>{a.push(b)}),a}any(a){return(this.throwIfDisposed(),a)?this.where(a).length()>0:this.length()>0}all(a){return this.throwIfDisposed(),this.where(a).length()===this.length()}forEach(a){this.throwIfDisposed();for(let b=0;b<this.length();b++)a(this.privList[b],b)}select(a){this.throwIfDisposed();let b=[];for(let c=0;c<this.privList.length;c++)b.push(a(this.privList[c],c));return new e(b)}where(a){this.throwIfDisposed();let b=new e;for(let c=0;c<this.privList.length;c++)a(this.privList[c],c)&&b.add(this.privList[c]);return b}orderBy(a){return this.throwIfDisposed(),new e(this.toArray().sort(a))}orderByDesc(a){return this.throwIfDisposed(),this.orderBy((b,c)=>a(c,b))}clone(){return this.throwIfDisposed(),new e(this.toArray())}concat(a){return this.throwIfDisposed(),new e(this.privList.concat(a.toArray()))}concatArray(a){return this.throwIfDisposed(),new e(this.privList.concat(a))}isDisposed(){return null==this.privList}dispose(a){this.isDisposed()||(this.privDisposeReason=a,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new d.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(a){if(a)for(let b in a)b&&a[b]()}}b.List=e},77574:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DialogServiceTurnStateManager=void 0;let d=c(29016),e=c(48213);class f{constructor(){this.privTurnMap=new Map;return}StartTurn(a){if(this.privTurnMap.has(a))throw new d.InvalidOperationError("Service error: There is already a turn with id:"+a);let b=new e.DialogServiceTurnState(this,a);return this.privTurnMap.set(a,b),this.privTurnMap.get(a)}GetTurn(a){return this.privTurnMap.get(a)}CompleteTurn(a){if(!this.privTurnMap.has(a))throw new d.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+a);let b=this.privTurnMap.get(a);return b.complete(),this.privTurnMap.delete(a),b}}b.DialogServiceTurnStateManager=f},77662:(a,b,c)=>{"use strict";c(91645),c(34631);let{randomFillSync:d}=c(55511),e=c(49695),{EMPTY_BUFFER:f}=c(57738),{isValidStatusCode:g}=c(49e3),{mask:h,toBuffer:i}=c(36534),j=Buffer.alloc(4);class k{constructor(a,b){this._extensions=b||{},this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(a,b){let c=b.mask&&b.readOnly,e=b.mask?6:2,f=a.length;a.length>=65536?(e+=8,f=127):a.length>125&&(e+=2,f=126);let g=Buffer.allocUnsafe(c?a.length+e:e);return(g[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(g[0]|=64),g[1]=f,126===f?g.writeUInt16BE(a.length,2):127===f&&(g.writeUInt32BE(0,2),g.writeUInt32BE(a.length,6)),b.mask)?(d(j,0,4),g[1]|=128,g[e-4]=j[0],g[e-3]=j[1],g[e-2]=j[2],g[e-1]=j[3],c)?(h(a,j,g,e,a.length),[g]):(h(a,j,a,0,a.length),[g,a]):[g,a]}close(a,b,c,d){let e;if(void 0===a)e=f;else if("number"==typeof a&&g(a))if(void 0===b||""===b)(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else{let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),e.write(b,2)}else throw TypeError("First argument must be a valid error code number");this._deflating?this.enqueue([this.doClose,e,c,d]):this.doClose(e,c,d)}doClose(a,b,c){this.sendFrame(k.frame(a,{fin:!0,rsv1:!1,opcode:8,mask:b,readOnly:!1}),c)}ping(a,b,c){let d=i(a);if(d.length>125)throw RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,d,b,i.readOnly,c]):this.doPing(d,b,i.readOnly,c)}doPing(a,b,c,d){this.sendFrame(k.frame(a,{fin:!0,rsv1:!1,opcode:9,mask:b,readOnly:c}),d)}pong(a,b,c){let d=i(a);if(d.length>125)throw RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,d,b,i.readOnly,c]):this.doPong(d,b,i.readOnly,c)}doPong(a,b,c,d){this.sendFrame(k.frame(a,{fin:!0,rsv1:!1,opcode:10,mask:b,readOnly:c}),d)}send(a,b,c){let d=i(a),f=this._extensions[e.extensionName],g=b.binary?2:1,h=b.compress;if(this._firstFragment?(this._firstFragment=!1,h&&f&&(h=d.length>=f._threshold),this._compress=h):(h=!1,g=0),b.fin&&(this._firstFragment=!0),f){let a={fin:b.fin,rsv1:h,opcode:g,mask:b.mask,readOnly:i.readOnly};this._deflating?this.enqueue([this.dispatch,d,this._compress,a,c]):this.dispatch(d,this._compress,a,c)}else this.sendFrame(k.frame(d,{fin:b.fin,rsv1:!1,opcode:g,mask:b.mask,readOnly:i.readOnly}),c)}dispatch(a,b,c,d){if(!b)return void this.sendFrame(k.frame(a,c),d);let f=this._extensions[e.extensionName];this._bufferedBytes+=a.length,this._deflating=!0,f.compress(a,c.fin,(b,e)=>{if(this._socket.destroyed){let a=Error("The socket was closed while data was being compressed");"function"==typeof d&&d(a);for(let b=0;b<this._queue.length;b++){let c=this._queue[b][4];"function"==typeof c&&c(a)}return}this._bufferedBytes-=a.length,this._deflating=!1,c.readOnly=!1,this.sendFrame(k.frame(e,c),d),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[1].length,Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[1].length,this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}a.exports=k},79551:a=>{"use strict";a.exports=require("url")},79738:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeakerServiceRecognizer=void 0;let d=c(9403),e=c(94705),f=c(41686),g=c(35961),h=c(42436);class i extends g.ServiceRecognizerBase{constructor(a,b,c,d,e){super(a,b,c,d,e),this.privSpeakerRecognizer=e,this.privSpeakerAudioSource=c,this.recognizeSpeaker=a=>this.recognizeSpeakerOnce(a),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(a){let b=!1,c=new f.PropertyCollection;if(a.messageType===e.MessageType.Text&&c.setProperty(f.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),"speaker.response"===a.path.toLowerCase()){let c,d=JSON.parse(a.textBody);c="success"!==d.status.statusCode.toLowerCase()?new f.SpeakerRecognitionResult(d,f.ResultReason.Canceled,f.CancellationErrorCode.ServiceError,d.status.reason):new f.SpeakerRecognitionResult(d,f.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(c),b=!0}let d=new e.Deferred;return d.resolve(b),d.promise}cancelRecognition(a,b,c,d,e){if(new f.PropertyCollection().setProperty(g.CancellationErrorCodePropertyName,f.CancellationErrorCode[d]),this.privResultDeferral){let a=new f.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:e,reason:e}},f.ResultReason.Canceled,d,e);try{this.privResultDeferral.resolve(a)}catch(a){this.privResultDeferral.reject(a)}}}async recognizeSpeakerOnce(a){this.privSpeakerModel=a,this.voiceProfileType=a.scenario,this.privResultDeferral||(this.privResultDeferral=new e.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(f.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let b=this.connectImpl(),c=this.sendPreAudioMessages(this.extractSpeakerContext(a)),g=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),h=await this.privSpeakerAudioSource.format,i=await this.privSpeakerAudioSource.deviceInfo,j=new d.ReplayableAudioNode(g,h.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(j,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:i};try{await b,await c}catch(a){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,f.CancellationReason.Error,f.CancellationErrorCode.ConnectionFailure,a)}let k=new f.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,k),this.receiveMessage(),this.sendAudio(j).then(()=>{},a=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,f.CancellationReason.Error,f.CancellationErrorCode.RuntimeError,a)}),this.privResultDeferral.promise}async sendPreAudioMessages(a){let b=await this.fetchConnection();await this.sendSpeakerRecognition(b,a)}async sendSpeakerRecognition(a,b){let c=JSON.stringify(b);return a.send(new h.SpeechConnectionMessage(e.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",c))}extractSpeakerContext(a){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:a.profileIds,scenario:a.scenario}}}b.SpeakerServiceRecognizer=i},79793:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranslationResult=void 0;let d=c(44166);class e extends d.TranslationRecognitionResult{constructor(a,b,c,d,e,f,g,h,i,j,k){super(b,d,e,f,g,h,void 0,void 0,i,j,k),this.privId=a,this.privOrigLang=c}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}b.ConversationTranslationResult=e},80695:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b};Object.defineProperty(b,"__esModule",{value:!0}),b.AudioFileWriter=void 0;let g=f(c(29021)),h=c(87470);class i{constructor(a){h.Contracts.throwIfNullOrUndefined(g.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=g.openSync(a,"w")}set format(a){h.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=a;let b=0;this.privAudioFormat.hasHeader&&(b=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=g.createWriteStream("",{fd:this.privFd,start:b,autoClose:!1}))}write(a){h.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(a.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),g.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),g.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}b.AudioFileWriter=i},80899:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kylekim/Desktop/one_cup_eng/app/(main)/shadow/ShadowClient.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kylekim/Desktop/one_cup_eng/app/(main)/shadow/ShadowClient.tsx","default")},80990:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RawWebsocketMessage=void 0;let d=c(87277),e=c(29016),f=c(10977);class g{constructor(a,b,c){if(this.privPayload=null,!b)throw new e.ArgumentNullError("payload");if(a===d.MessageType.Binary&&"ArrayBuffer"!==Object.getPrototypeOf(b).constructor.name)throw new e.InvalidOperationError("Payload must be ArrayBuffer");if(a===d.MessageType.Text&&"string"!=typeof b)throw new e.InvalidOperationError("Payload must be a string");this.privMessageType=a,this.privPayload=b,this.privId=c||(0,f.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===d.MessageType.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===d.MessageType.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}b.RawWebsocketMessage=g},81489:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechRecognizer=void 0;let d=c(35961),e=c(38786),f=c(94705),g=c(87470),h=c(41686);class i extends h.Recognizer{constructor(a,b){let c=a;g.Contracts.throwIfNull(c,"speechConfig"),g.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage),h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage]),super(b,c.properties,new d.SpeechConnectionFactory,a.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(a,b,c){let d=a;return b.properties.mergeTo(d.properties),new i(a,c)}get endpointId(){return g.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(h.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){g.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return g.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return(g.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(d.OutputFormatPropertyName,h.OutputFormat[h.OutputFormat.Simple])===h.OutputFormat[h.OutputFormat.Simple])?h.OutputFormat.Simple:h.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,b)}startContinuousRecognitionAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,b)}stopContinuousRecognitionAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),a,b)}startKeywordRecognitionAsync(a,b,c){g.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,b){g.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,f.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new d.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,b,c,e){let f=c;return new d.SpeechServiceRecognizer(a,b,f,e,this)}}b.SpeechRecognizer=i},81630:a=>{"use strict";a.exports=require("http")},81916:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechSynthesisBookmarkEventArgs=void 0;class c{constructor(a,b){this.privAudioOffset=a,this.privText=b}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}b.SpeechSynthesisBookmarkEventArgs=c},81971:(a,b,c)=>{"use strict";let{Duplex:d}=c(27910);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}a.exports=function(a,b){let c=!0,h=!0;function i(){c&&a._socket.resume()}a.readyState===a.CONNECTING?a.once("open",function(){a._receiver.removeAllListeners("drain"),a._receiver.on("drain",i)}):(a._receiver.removeAllListeners("drain"),a._receiver.on("drain",i));let j=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b){j.push(b)||(c=!1,a._socket.pause())}),a.once("error",function(a){j.destroyed||(h=!1,j.destroy(a))}),a.once("close",function(){j.destroyed||j.push(null)}),j._destroy=function(b,c){if(a.readyState===a.CLOSED){c(b),process.nextTick(e,j);return}let d=!1;a.once("error",function(a){d=!0,c(a)}),a.once("close",function(){d||c(b),process.nextTick(e,j)}),h&&a.terminate()},j._final=function(b){if(a.readyState===a.CONNECTING)return void a.once("open",function(){j._final(b)});null!==a._socket&&(a._socket._writableState.finished?(b(),j._readableState.endEmitted&&j.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},j._read=function(){(a.readyState===a.OPEN||a.readyState===a.CLOSING)&&!c&&(c=!0,a._receiver._writableState.needDrain||a._socket.resume())},j._write=function(b,c,d){if(a.readyState===a.CONNECTING)return void a.once("open",function(){j._write(b,c,d)});a.send(b,d)},j.on("end",f),j.on("error",g),j}},83911:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Recognizer=void 0;let d=c(35961),e=c(94705),f=c(87470),g=c(41686);class h{constructor(a,b,c,d){this.audioConfig=void 0!==a?a:g.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=b.clone(),this.privConnectionFactory=c,this.tokenCredential=d,this.implCommonRecognizerSetup()}close(a,b){f.Contracts.throwIfDisposed(this.privDisposed),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}get internalData(){return this.privReco}async dispose(a){!this.privDisposed&&(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return d.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){d.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a="undefined"!=typeof window?"Browser":"Node",b="unknown",c="unknown";"undefined"!=typeof navigator&&(a=a+"/"+navigator.platform,b=navigator.userAgent,c=navigator.appVersion);let e=this.createRecognizerConfig(new d.SpeechServiceConfig(new d.Context(new d.OS(a,b,c))));this.privReco=this.createServiceRecognizer(h.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,e)}async recognizeOnceAsyncImpl(a){f.Contracts.throwIfDisposed(this.privDisposed);let b=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,b.resolve,b.reject);let c=await b.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){f.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){f.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(a,b){let c=a.getProperty(g.PropertyId.SpeechServiceConnection_Key,void 0);return c&&""!==c?new d.CognitiveSubscriptionKeyAuthentication(c):b?new d.CognitiveTokenAuthentication(async()=>{try{let a=await b.getToken("https://cognitiveservices.azure.com/.default");return a?.token??""}catch(a){throw a}},async()=>{try{let a=await b.getToken("https://cognitiveservices.azure.com/.default");return a?.token??""}catch(a){throw a}}):new d.CognitiveTokenAuthentication(()=>Promise.resolve(a.getProperty(g.PropertyId.SpeechServiceAuthorization_Token,void 0)),()=>Promise.resolve(a.getProperty(g.PropertyId.SpeechServiceAuthorization_Token,void 0)))}}b.Recognizer=h},83997:a=>{"use strict";a.exports=require("tty")},84283:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PhraseListGrammar=void 0;class c{constructor(a){this.privGrammerBuilder=a.dynamicGrammar}static fromRecognizer(a){return new c(a.internalData)}addPhrase(a){this.privGrammerBuilder.addPhrase(a)}addPhrases(a){this.privGrammerBuilder.addPhrase(a)}clear(){this.privGrammerBuilder.clearPhrases()}}b.PhraseListGrammar=c},84585:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.NoMatchReason=void 0,function(a){a[a.NotRecognized=0]="NotRecognized",a[a.InitialSilenceTimeout=1]="InitialSilenceTimeout",a[a.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(c=b.NoMatchReason||(b.NoMatchReason={}))},84768:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PullAudioInputStreamCallback=void 0;class c{}b.PullAudioInputStreamCallback=c},85112:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DialogServiceConfigImpl=b.DialogServiceConfig=void 0;let d=c(87470),e=c(41686);class f{constructor(){return}set applicationId(a){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}}b.DialogServiceConfig=f;class g extends f{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(a){d.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechConfig.speechRecognitionLanguage=a}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(a){this.privSpeechConfig.outputFormat=a}setProperty(a,b){this.privSpeechConfig.setProperty(a,b)}getProperty(a,b){return this.privSpeechConfig.getProperty(a)}setProxy(a,b,c,d){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,a),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${b}`),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,c),d&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,d)}setServiceProperty(a,b,c){this.privSpeechConfig.setServiceProperty(a,b)}close(){}}b.DialogServiceConfigImpl=g},85748:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationTranscriber=void 0;let d=c(35961),e=c(38786),f=c(94705),g=c(87470),h=c(41686);class i extends h.Recognizer{constructor(a,b){let c=a;g.Contracts.throwIfNull(c,"speechConfig"),g.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage),h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage]),super(b,c.properties,new d.ConversationTranscriberConnectionFactory,a.tokenCredential),this.privProperties.setProperty(h.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,b,c){let d=a;return b.properties.mergeTo(d.properties),new i(a,c)}get endpointId(){return g.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(h.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){g.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return g.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return(g.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(d.OutputFormatPropertyName,h.OutputFormat[h.OutputFormat.Simple])===h.OutputFormat[h.OutputFormat.Simple])?h.OutputFormat.Simple:h.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,b)}stopTranscribingAsync(a,b){(0,f.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),a,b)}close(a,b){g.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,f.marshalPromiseToCallbacks)(this.dispose(!0),a,b)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new d.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,b,c,e){let f=c;return e.isSpeakerDiarizationEnabled=!0,new d.ConversationTranscriptionServiceRecognizer(a,b,f,e,this)}}b.ConversationTranscriber=i},85763:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeakerAudioDestination=void 0;let d=c(94705),e=c(65543),f=c(57645),g=1800,h={[f.AudioFormatTag.PCM]:"audio/wav",[f.AudioFormatTag.MuLaw]:"audio/x-wav",[f.AudioFormatTag.MP3]:"audio/mpeg",[f.AudioFormatTag.OGG_OPUS]:"audio/ogg",[f.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[f.AudioFormatTag.ALaw]:"audio/x-wav",[f.AudioFormatTag.FLAC]:"audio/flac",[f.AudioFormatTag.AMR_WB]:"audio/amr-wb",[f.AudioFormatTag.G722]:"audio/G722"};class i{constructor(a){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=a||(0,d.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(a,b,c){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(a),this.updateSourceBuffer().then(()=>{b&&b()},a=>{c&&c(a)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(a),this.privBytesReceived+=a.byteLength)}close(a,b){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{a&&a()},a=>{b&&b(a)});else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window)if((this.privFormat.formatTag===f.AudioFormatTag.PCM||this.privFormat.formatTag===f.AudioFormatTag.MuLaw||this.privFormat.formatTag===f.AudioFormatTag.ALaw)&&!1===this.privFormat.hasHeader)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let c=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(c).then(()=>{let d=new Blob([c=this.privFormat.addHeader(c)],{type:h[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(d),this.notifyPlayback().then(()=>{a&&a()},a=>{b&&b(a)})},a=>{b&&b(a)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(a){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=a;let b=h[this.privFormat.formatTag];void 0===b?console.warn(`Unknown mimeType for format ${f.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(b)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=g,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(b),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(a=>{d.Events.instance.onEvent(new d.BackgroundEvent(a))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(a=>{d.Events.instance.onEvent(new d.BackgroundEvent(a))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(a=>{d.Events.instance.onEvent(new d.BackgroundEvent(a))})):(console.warn(`Format ${f.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(a){this.privAudio&&(this.privAudio.volume=a)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(a,b){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{a&&a()},a=>{b&&b(a)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;let a=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(a)}catch(b){this.privAudioBuffer.unshift(a),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&void 0!==this.privAudio&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}b.SpeakerAudioDestination=i},85953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>v.a,__next_app__:()=>B,handler:()=>D,pages:()=>A,routeModule:()=>C,tree:()=>z});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(60677),t=c(9977),u=c(88665),v=c.n(u),w=c(30893),x=c(26713),y={};for(let a in w)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(y[a]=()=>w[a]);c.d(b,y);let z={children:["",{children:["(main)",{children:["shadow",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,28999)),"/Users/kylekim/Desktop/one_cup_eng/app/(main)/shadow/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,19559)),"/Users/kylekim/Desktop/one_cup_eng/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,65284,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,58014)),"/Users/kylekim/Desktop/one_cup_eng/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,A=["/Users/kylekim/Desktop/one_cup_eng/app/(main)/shadow/page.tsx"],B={require:c,loadChunk:()=>Promise.resolve()},C=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/(main)/shadow/page",pathname:"/shadow",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:z},distDir:".next",projectDir:""});async function D(a,b,c){var d,e;let u="/(main)/shadow/page";"/index"===u&&(u="/");let y="false",E=(0,h.getRequestMeta)(a,"postponed"),F=await C.prepare(a,b,{srcPage:u,multiZoneDraftMode:y});if(!F)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:G,query:H,params:I,parsedUrl:J,pageIsDynamic:K,buildManifest:L,nextFontManifest:M,serverFilesManifest:N,reactLoadableManifest:O,serverActionsManifest:P,clientReferenceManifest:Q,subresourceIntegrityManifest:R,prerenderManifest:S,isDraftMode:T,isOnDemandRevalidate:U}=F,V=null==(d=s.routerServerGlobal[s.RouterServerContextSymbol])?void 0:d[""],W=C.instrumentationOnRequestError.bind(C),X=(b,c,d)=>((null==V?void 0:V.logErrorWithOriginalStack)?V.logErrorWithOriginalStack(b,"app-dir"):console.error(b),W(a,b,{path:a.url||"/",headers:a.headers,method:a.method||"GET"},d)),Y=(null==V?void 0:V.nextConfig)||N.config,Z=J.pathname||"/",$=(0,q.normalizeAppPath)(u),_=!!(S.dynamicRoutes[$]||S.routes[$]||S.routes[Z]),aa=(0,l.checkIsAppPPREnabled)(Y.experimental.ppr),ab=!1,ac=!1,ad=!!(aa&&((null==(e=S.routes[$]??S.routes[Z]??S.dynamicRoutes[$])?void 0:e.renderingMode)==="PARTIALLY_STATIC"||ab&&(C.isDev||(null==V?void 0:V.experimentalTestProxy)))),ae=ac&&ad,af=ab&&ad,ag=af&&!0===C.isDev,ah=(0,h.getRequestMeta)(a,"isRSCRequest")||!!a.headers[t.RSC_HEADER],ai=a.headers["user-agent"]||"",aj=(0,x.getBotType)(ai),ak=(0,o.isHtmlBotRequest)(a),al=ak&&ad,am=K&&ad&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ae)?(0,m.u)($):null,an={...w,tree:z,pages:A,GlobalError:v(),handler:D,routeModule:C,__next_app__:B};P&&Q&&(0,n.setReferenceManifestsSingleton)({page:u,clientReferenceManifest:Q,serverActionsManifest:P,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:P})});let ao=(0,r.getIsPossibleServerAction)(a),ap=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!(ah&&a.headers[t.NEXT_ROUTER_PREFETCH_HEADER]),aq=ad&&ah&&!ap,ar=!0===C.isDev||!_||"string"==typeof E||aq,as=_&&!ar&&!E&&!aq,at=as||(0,o.shouldServeStreamingMetadata)(ai,Y.htmlLimitedBots);ak&&ad&&(_=!1,at=!1);let au=a.method||"GET",av=(0,g.getTracer)(),aw=av.getActiveScopeSpan();try{let d=async d=>{let e={query:H,params:I,page:$,sharedContext:{buildId:G},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:am,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:an,Component:(0,j.T)(an),params:I,routeModule:C,page:u,postponed:E,shouldWaitOnAllReady:al,serveStreamingMetadata:at,supportsDynamicResponse:ar,buildManifest:L,nextFontManifest:M,reactLoadableManifest:O,subresourceIntegrityManifest:R,serverActionsManifest:P,clientReferenceManifest:Q,isPossibleServerAction:ao,isOnDemandRevalidate:U,setIsrStatus:null==V?void 0:V.setIsrStatus,dir:C.projectDir,isDraftMode:T,isRevalidate:as,botType:aj,assetPrefix:Y.assetPrefix,nextConfigOutput:Y.output,crossOrigin:Y.crossOrigin,trailingSlash:Y.trailingSlash,previewProps:S.preview,deploymentId:Y.deploymentId,enableTainting:Y.experimental.taint,htmlLimitedBots:Y.htmlLimitedBots,devtoolSegmentExplorer:Y.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:Y.reactMaxHeadersLength,multiZoneDraftMode:y,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:Y.experimental.cacheLife,basePath:Y.basePath,serverActions:Y.experimental.serverActions,...af||ag?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:ag}:{},experimental:{isRoutePPREnabled:ad,expireTime:Y.expireTime,staleTimes:Y.experimental.staleTimes,dynamicIO:!!Y.experimental.dynamicIO,clientSegmentCache:!!Y.experimental.clientSegmentCache,dynamicOnHover:!!Y.experimental.dynamicOnHover,inlineCss:!!Y.experimental.inlineCss,authInterrupts:!!Y.experimental.authInterrupts,clientTraceMetadata:Y.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:X,err:(0,h.getRequestMeta)(a,"invokeError"),dev:C.isDev}},f=new k.NodeNextRequest(a),g=new k.NodeNextResponse(b);return C.render(f,g,e).finally(()=>{if(!d)return;d.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let c=av.getRootSpanAttributes();if(!c)return;if(c.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${c.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=c.get("next.route");if(e){let a=`${au} ${e}`;d.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),d.updateName(a)}else d.updateName(`${au} ${a.url}`)})};if(aw)return await d(aw);return await av.withPropagatedContext(a.headers,()=>av.trace(i.BaseServerSpan.handleRequest,{spanName:`${au} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":au,"http.target":a.url}},d))}catch(b){throw aw||await X(b,a,{routerKind:"App Router",routePath:u,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:as,isOnDemandRevalidate:U})}),b}}},86553:(a,b,c)=>{"use strict";let d=c(81630),e=c(55591),{URL:f}=c(79551),g=c(39993),h=c(49791),i=c(63259),j=c(24757),k=c(74075),{PassThrough:l}=c(27910),m={};k.createBrotliDecompress&&(m.br=()=>k.createBrotliDecompress()),k.createGunzip&&(m.gzip=()=>k.createGunzip()),k.createInflate&&(m.deflate=()=>k.createInflate());let n=Object.keys(m).join(", "),o=a=>{let b=new l;if(b.statusCode=a.statusCode,b.status=a.statusCode,b.statusMessage=a.statusMessage,b.headers=a.headers,b._response=a,b.headers["content-encoding"]){let c=b.headers["content-encoding"].split(", ").reverse();for(;c.length;){let d=c.shift();if(m[d]){let c=m[d]();c.on("error",a=>b.emit("error",Error("ZBufError",a))),a=a.pipe(c)}else break}}return a.pipe(b)};class p extends Error{constructor(a,...b){let c;super(...b),Error.captureStackTrace(this,p),this.name="StatusError",this.message=a.statusMessage,this.statusCode=a.statusCode,this.json=a.json,this.text=a.text,this.arrayBuffer=a.arrayBuffer,this.headers=a.headers,Object.defineProperty(this,"responseBody",{get:()=>(c||(c=this.arrayBuffer()),c)})}}let q=a=>new Promise((b,c)=>{let d=[];a.on("error",c),a.on("end",()=>b(Buffer.concat(d))),a.on("data",a=>d.push(a))}),r=a=>{let b;a.arrayBuffer=()=>{if(!b)return b=q(a);throw Error("body stream is locked")},a.text=()=>a.arrayBuffer().then(a=>a.toString()),a.json=async()=>{let b=await a.text();try{return JSON.parse(b)}catch(a){throw a.message+=`str"${b}"`,a}}};a.exports=j((a,b,c,j,k)=>(l,m=null,q={})=>{let s,t=new f(l=k+(l||""));if("https:"===t.protocol)s=e;else if("http:"===t.protocol)s=d;else throw Error(`Unknown protocol, ${t.protocol}`);let u={path:t.pathname+t.search,port:t.port,method:b,headers:{...j||{},...q},hostname:t.hostname};(t.username||t.password)&&(u.auth=[t.username,t.password].join(":"));let v=h(u.headers);return"json"!==c||v.get("accept")||v.set("accept","application/json"),v.has("accept-encoding")||v.set("accept-encoding",n),new Promise((b,d)=>{let e=s.request(u,async e=>((e=o(e)).on("error",d),r(e),e.status=e.statusCode,a.has(e.statusCode))?c?void("buffer"===c?b(e.arrayBuffer()):"json"===c?b(e.json()):"string"===c&&b(e.text())):b(e):d(new p(e)));e.on("error",d),m?((m instanceof ArrayBuffer||ArrayBuffer.isView(m))&&(m=i.native(m)),Buffer.isBuffer(m)||("string"==typeof m?m=Buffer.from(m):g(m)?(m.pipe(e),m=null):"object"==typeof m?(v.has("content-type")||e.setHeader("content-type","application/json"),m=Buffer.from(JSON.stringify(m))):d(Error("Unknown body type."))),m&&(e.setHeader("content-length",m.length),e.end(m))):e.end()})})},87098:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.CancellationReason=void 0,function(a){a[a.Error=0]="Error",a[a.EndOfStream=1]="EndOfStream"}(c=b.CancellationReason||(b.CancellationReason={}))},87277:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionMessage=b.MessageType=void 0;let e=c(29016),f=c(10977);!function(a){a[a.Text=0]="Text",a[a.Binary=1]="Binary"}(d=b.MessageType||(b.MessageType={}));class g{constructor(a,b,c,g){if(this.privBody=null,a===d.Text&&b&&"string"!=typeof b)throw new e.InvalidOperationError("Payload must be a string");if(a===d.Binary&&b&&!(b instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=b,this.privHeaders=c||{},this.privId=g||(0,f.createNoDashGuid)(),this.messageType){case d.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case d.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===d.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===d.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}b.ConnectionMessage=g},87470:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Contracts=void 0;class c{static throwIfNullOrUndefined(a,b){if(null==a)throw Error("throwIfNullOrUndefined:"+b)}static throwIfNull(a,b){if(null===a)throw Error("throwIfNull:"+b)}static throwIfNullOrWhitespace(a,b){if(c.throwIfNullOrUndefined(a,b),(""+a).trim().length<1)throw Error("throwIfNullOrWhitespace:"+b)}static throwIfNullOrTooLong(a,b,d){if(c.throwIfNullOrUndefined(a,b),(""+a).length>d)throw Error("throwIfNullOrTooLong:"+b+" (more than "+d.toString()+" characters)")}static throwIfNullOrTooShort(a,b,d){if(c.throwIfNullOrUndefined(a,b),(""+a).length<d)throw Error("throwIfNullOrTooShort:"+b+" (less than "+d.toString()+" characters)")}static throwIfDisposed(a){if(a)throw Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(a,b){if(c.throwIfNullOrUndefined(a,b),0===a.length)throw Error("throwIfArrayEmptyOrWhitespace:"+b);for(let d of a)c.throwIfNullOrWhitespace(d,b)}static throwIfFileDoesNotExist(a,b){c.throwIfNullOrWhitespace(a,b)}static throwIfNotUndefined(a,b){if(void 0!==a)throw Error("throwIfNotUndefined:"+b)}}b.Contracts=c},87510:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CancellationDetails=void 0;let d=c(35961),e=c(28863),f=c(41686);class g extends e.CancellationDetailsBase{constructor(a,b,c){super(a,b,c)}static fromResult(a){let b=f.CancellationReason.Error,c=f.CancellationErrorCode.NoError;if(a instanceof f.RecognitionResult&&a.json){let c=d.SimpleSpeechPhrase.fromJSON(a.json,0);b=d.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return a.properties&&(c=f.CancellationErrorCode[a.properties.getProperty(d.CancellationErrorCodePropertyName,f.CancellationErrorCode[f.CancellationErrorCode.NoError])]),new g(b,a.errorDetails||d.EnumTranslation.implTranslateErrorDetails(c),c)}}b.CancellationDetails=g},87659:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MeetingTranscriptionCanceledEventArgs=void 0;let d=c(17528);class e extends d.CancellationEventArgsBase{}b.MeetingTranscriptionCanceledEventArgs=e},88278:(a,b,c)=>{"use strict";let d=c(94735),e=c(81630);c(55591),c(91645),c(34631);let{createHash:f}=c(55511),g=c(49695),h=c(65916),{format:i,parse:j}=c(38426),{GUID:k,kWebSocket:l}=c(57738),m=/^[+/0-9A-Za-z]{22}==$/,n=0,o=1,p=2;class q extends d{constructor(a,b){if(super(),null==(a={maxPayload:0x6400000,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){let a=this.emit.bind(this,"connection");this._removeListeners=r(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set),this.options=a,this._state=n}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(a&&this.once("close",a),this._state===p)return void process.nextTick(s,this);if(this._state===o)return;if(this._state=o,this.clients)for(let a of this.clients)a.terminate();let b=this._server;if(b&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port))return void b.close(s.bind(void 0,this));process.nextTick(s,this)}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",t);let e=void 0!==a.headers["sec-websocket-key"]&&a.headers["sec-websocket-key"].trim(),f=a.headers.upgrade,h=+a.headers["sec-websocket-version"],i={};if("GET"!==a.method||void 0===f||"websocket"!==f.toLowerCase()||!e||!m.test(e)||8!==h&&13!==h||!this.shouldHandle(a))return u(b,400);if(this.options.perMessageDeflate){let c=new g(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let b=j(a.headers["sec-websocket-extensions"]);b[g.extensionName]&&(c.accept(b[g.extensionName]),i[g.extensionName]=c)}catch(a){return u(b,400)}}if(this.options.verifyClient){let f={origin:a.headers[`${8===h?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,j)=>{if(!f)return u(b,g||401,h,j);this.completeUpgrade(e,i,a,b,c,d)});if(!this.options.verifyClient(f))return u(b,401)}this.completeUpgrade(e,i,a,b,c,d)}completeUpgrade(a,b,c,d,e,j){if(!d.readable||!d.writable)return d.destroy();if(d[l])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>n)return u(d,503);let m=f("sha1").update(a+k).digest("base64"),o=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${m}`],p=new h(null),q=c.headers["sec-websocket-protocol"];if(q&&(q=q.split(",").map(v),(q=this.options.handleProtocols?this.options.handleProtocols(q,c):q[0])&&(o.push(`Sec-WebSocket-Protocol: ${q}`),p._protocol=q)),b[g.extensionName]){let a=b[g.extensionName].params,c=i({[g.extensionName]:[a]});o.push(`Sec-WebSocket-Extensions: ${c}`),p._extensions=b}this.emit("headers",o,c),d.write(o.concat("\r\n").join("\r\n")),d.removeListener("error",t),p.setSocket(d,e,this.options.maxPayload),this.clients&&(this.clients.add(p),p.on("close",()=>this.clients.delete(p))),j(p,c)}}function r(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}function s(a){a._state=p,a.emit("close")}function t(){this.destroy()}function u(a,b,c,d){a.writable&&(c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.write(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)),a.removeListener("error",t),a.destroy()}function v(a){return a.trim()}a.exports=q},88325:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.type=b.connectivity=b.Device=b.OS=b.System=b.Context=b.SpeechServiceConfig=void 0;class e{constructor(a){this.context=a}serialize(){return JSON.stringify(this,(a,b)=>{if(b&&"object"==typeof b&&!Array.isArray(b)){let a={};for(let c in b)Object.hasOwnProperty.call(b,c)&&(a[c&&c.charAt(0).toLowerCase()+c.substring(1)]=b[c]);return a}return b})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(a){this.recognition=a.toLowerCase()}}b.SpeechServiceConfig=e;class f{constructor(a){this.system=new g,this.os=a}}b.Context=f;class g{constructor(){let a="1.44.0";this.name="SpeechSDK",this.version=a,this.build="JavaScript",this.lang="JavaScript"}}b.System=g;class h{constructor(a,b,c){this.platform=a,this.name=b,this.version=c}}b.OS=h;class i{constructor(a,b,c){this.manufacturer=a,this.model=b,this.version=c}}b.Device=i,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(c=b.connectivity||(b.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(d=b.type||(b.type={}))},88776:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationPhrase=void 0;let d=c(87470),e=c(35961),f=c(61951);class g{constructor(a,b){this.privTranslationPhrase=a,this.privTranslationPhrase.Offset+=b,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(a,b){return new g(JSON.parse(a),b)}static fromTranslationResponse(a,b){d.Contracts.throwIfNullOrUndefined(a,"translationResponse");let c=a.SpeechPhrase;return a.SpeechPhrase=void 0,c.Translation=a,c.Text=c.DisplayText,new g(c,b)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){let a={...this.privTranslationPhrase},b={...a,RecognitionStatus:e.RecognitionStatus[a.RecognitionStatus]};return a.Translation&&(b.Translation={...a.Translation,TranslationStatus:f.TranslationStatus[a.Translation.TranslationStatus]}),JSON.stringify(b)}mapRecognitionStatus(a){return"string"==typeof a?e.RecognitionStatus[a]:"number"==typeof a?a:void 0}mapTranslationStatus(a){return"string"==typeof a?f.TranslationStatus[a]:"number"==typeof a?a:void 0}}b.TranslationPhrase=g},88933:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CognitiveTokenAuthentication=void 0;let d=c(94705),e=c(62117),f=c(89393);class g{constructor(a,b){if(!a)throw new d.ArgumentNullError("fetchCallback");if(!b)throw new d.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=a,this.privFetchOnExpiryCallback=b}fetch(a){return this.privFetchCallback(a).then(a=>new e.AuthInfo(f.HeaderNames.Authorization,void 0===a?void 0:g.privTokenPrefix+a))}fetchOnExpiry(a){return this.privFetchOnExpiryCallback(a).then(a=>new e.AuthInfo(f.HeaderNames.Authorization,void 0===a?void 0:g.privTokenPrefix+a))}}b.CognitiveTokenAuthentication=g,g.privTokenPrefix="Bearer "},89393:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.HeaderNames=void 0;class c{}b.HeaderNames=c,c.AuthKey="Ocp-Apim-Subscription-Key",c.Authorization="Authorization",c.SpIDAuthKey="Apim-Subscription-Id",c.ConnectionId="X-ConnectionId",c.ContentType="Content-Type",c.CustomCommandsAppId="X-CommandsAppId",c.Path="Path",c.RequestId="X-RequestId",c.RequestStreamId="X-StreamId",c.RequestTimestamp="X-Timestamp"},89521:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.PronunciationAssessmentGradingSystem=void 0,function(a){a[a.FivePoint=1]="FivePoint",a[a.HundredMark=2]="HundredMark"}(c=b.PronunciationAssessmentGradingSystem||(b.PronunciationAssessmentGradingSystem={}))},90305:()=>{},90370:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PcmRecorder=void 0;let d=c(94705);class e{constructor(a){this.privStopInputOnRelease=a}record(a,b,c){let e=16e3,f=new d.RiffPcmEncoder(a.sampleRate,e),g=a.createMediaStreamSource(b),h=()=>{let d=(()=>{let b=0;try{return a.createScriptProcessor(b,1,1)}catch(d){b=2048;let c=a.sampleRate;for(;b<16384&&c>=2*e;)b<<=1,c>>=1;return a.createScriptProcessor(b,1,1)}})();d.onaudioprocess=a=>{let b=a.inputBuffer.getChannelData(0);if(c&&!c.isClosed){let a=f.encode(b);a&&c.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()})}},g.connect(d),d.connect(a.destination),this.privMediaResources={scriptProcessorNode:d,source:g,stream:b}},i=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(a.audioWorklet&&!i){if(!this.privSpeechProcessorScript){let a=new Blob([`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(a)}a.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{let d=new AudioWorkletNode(a,"speech-processor");d.port.onmessage=a=>{let b=a.data;if(c&&!c.isClosed){let a=f.encode(b);a&&c.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()})}},g.connect(d),d.connect(a.destination),this.privMediaResources={scriptProcessorNode:d,source:g,stream:b}}).catch(()=>{h()})}else try{h()}catch(a){throw Error(`Unable to start audio worklet node for PCMRecorder: ${a}`)}}releaseMediaResources(a){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(a.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(a=>a.stop()),this.privMediaResources.source=null))}setWorkletUrl(a){this.privSpeechProcessorScript=a}}b.PcmRecorder=e},90635:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationConnectionFactory=void 0;let d=c(9403),e=c(47232),f=c(41686),g=c(8941),h=c(35961),i=c(89393),j=c(1255),k=c(38786);class l extends g.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(a,b,c){let e=this.getEndpointUrl(a),j={};if(this.setQueryParams(j,a,e),e){let a=new URL(e),b=a.pathname;(""===b||"/"===b)&&(a.pathname=this.universalUri,e=await g.ConnectionFactoryBase.getRedirectUrlFromEndpoint(a.toString()))}let k={};void 0!==b.token&&""!==b.token&&(k[b.headerName]=b.token),k[i.HeaderNames.ConnectionId]=c,a.parameters.setProperty(f.PropertyId.SpeechServiceConnection_Url,e);let l="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new d.WebsocketConnection(e,j,k,new h.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),l,c)}getEndpointUrl(a,b){let c=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Region),d=g.ConnectionFactoryBase.getHostSuffix(c),h=a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h?!0===b?h:e.StringUtils.formatString(h,{region:c}):(h="true"===a.parameters.getProperty("SPEECH-ForceV1Endpoint","false")?a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+this.translationV1Uri:a.parameters.getProperty(f.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+this.universalUri,!0===b)?h:e.StringUtils.formatString(h,{region:c})}setQueryParams(a,b,c){a.from=b.parameters.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage),a.to=b.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages),a.scenario=b.recognitionMode===k.RecognitionMode.Interactive?"interactive":b.recognitionMode===k.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(b,a,c),this.setUrlParameter(f.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,j.QueryParameterNames.StableTranslation,b,a,c);let d=b.parameters.getProperty(f.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==d&&(a.voice=d,a.features="requireVoice")}}b.TranslationConnectionFactory=l},91268:(a,b,c)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?a.exports=c(36632):a.exports=c(30678)},91645:a=>{"use strict";a.exports=require("net")},91747:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationConnectionMessage=void 0;let d=c(94705);class e extends d.ConnectionMessage{constructor(a,b,c,d){super(a,b,c,d);let e=JSON.parse(this.textBody);void 0!==e.type&&(this.privConversationMessageType=e.type)}get conversationMessageType(){return this.privConversationMessageType}}b.ConversationConnectionMessage=e},92234:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechRecognitionCanceledEventArgs=void 0;let d=c(17528);class e extends d.CancellationEventArgsBase{}b.SpeechRecognitionCanceledEventArgs=e},92479:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ChunkedArrayBufferStream=void 0;let d=c(94705);class e extends d.Stream{constructor(a,b){super(b),this.privTargetChunkSize=Math.round(a),this.privNextBufferReadyBytes=0}writeStreamChunk(a){if(a.isEnd||0===this.privNextBufferReadyBytes&&a.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(a);let b=0;for(;b<a.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=a.timeReceived);let c=Math.min(a.buffer.byteLength-b,this.privTargetChunkSize-this.privNextBufferReadyBytes),d=new Uint8Array(this.privNextBufferToWrite),e=new Uint8Array(a.buffer.slice(b,c+b));d.set(e,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=c,b+=c,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}b.ChunkedArrayBufferStream=e},92525:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.VoiceProfileClient=void 0;let d=c(35961),e=c(26956),f=c(87470),g=c(41686);class h extends g.Recognizer{constructor(a){f.Contracts.throwIfNullOrUndefined(a,"speechConfig");let b=a;f.Contracts.throwIfNull(b,"speechConfig"),super(e.AudioConfig.fromStreamInput(g.AudioInputStream.createPushStream()),b.properties,new d.VoiceProfileConnectionFactory),this.privProperties=b.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(g.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){f.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(g.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,b){let c=await this.privVoiceAdapter.createProfile(a,b);return new g.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,b){return this.privVoiceAdapter.getActivationPhrases(a,b)}async enrollProfileAsync(a,b){let c=b;return f.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=b,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,b,c,e){let f=c;return new d.VoiceServiceRecognizer(a,b,f,e,this)}async dispose(a){!this.privDisposedVoiceAdapter&&(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new d.RecognizerConfig(a,this.properties)}getResult(a,b){return new g.VoiceProfileResult(a.ok?b:g.ResultReason.Canceled,a.statusText)}}b.VoiceProfileClient=h},94287:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IntentRecognitionEventArgs=void 0;let d=c(41686);class e extends d.RecognitionEventArgs{constructor(a,b,c){super(b,c),this.privResult=a}get result(){return this.privResult}}b.IntentRecognitionEventArgs=e},94453:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.SynthesisAudioMetadata=b.MetadataType=void 0,function(a){a.WordBoundary="WordBoundary",a.Bookmark="Bookmark",a.Viseme="Viseme",a.SentenceBoundary="SentenceBoundary",a.SessionEnd="SessionEnd",a.AvatarSignal="TalkingAvatarSignal"}(c=b.MetadataType||(b.MetadataType={}));class d{constructor(a){this.privSynthesisAudioMetadata=JSON.parse(a)}static fromJSON(a){return new d(a)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}b.SynthesisAudioMetadata=d},94595:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranscriberConnectionFactory=void 0;let d=c(9403),e=c(41686),f=c(8941),g=c(35961),h=c(89393),i=c(1255);class j extends f.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(a,b,c){let i=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0),j=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),k=f.ConnectionFactoryBase.getHostSuffix(j),l="wss://transcribe."+j+".cts.speech"+k+this.multiaudioRelativeUri,m=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,l),n={};this.setQueryParams(n,a,i),i||(i=m);let o={};void 0!==b.token&&""!==b.token&&(o[b.headerName]=b.token),o[h.HeaderNames.ConnectionId]=c,a.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,i);let p="true"===a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new d.WebsocketConnection(i,n,o,new g.WebsocketMessageFormatter,d.ProxyInfo.fromRecognizerConfig(a),p,c))}setQueryParams(a,b,c){let d=b.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),f=b.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);!d||i.QueryParameterNames.CustomSpeechDeploymentId in a||(a[i.QueryParameterNames.CustomSpeechDeploymentId]=d),!f||i.QueryParameterNames.Language in a||(a[i.QueryParameterNames.Language]=f);let h="true"===b.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),j=b.parameters.getProperty(g.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(h||j)&&(a[i.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(b,a,c)}}b.TranscriberConnectionFactory=j},94705:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationStatus=void 0,e(c(24020),b),e(c(45977),b),e(c(87277),b),e(c(49815),b),e(c(34081),b),e(c(17477),b),e(c(29016),b),e(c(98849),b),e(c(3231),b),e(c(10977),b),e(c(32274),b),e(c(20637),b),e(c(76558),b),e(c(47725),b),e(c(9187),b),e(c(57769),b),e(c(12380),b),e(c(8239),b),e(c(37548),b),e(c(17529),b),e(c(77504),b),e(c(19991),b),e(c(56075),b),e(c(61357),b),e(c(80990),b),e(c(9658),b),e(c(17096),b);var f=c(61951);Object.defineProperty(b,"TranslationStatus",{enumerable:!0,get:function(){return f.TranslationStatus}}),e(c(92479),b),e(c(69387),b),e(c(56217),b),e(c(45352),b),e(c(6484),b)},94735:a=>{"use strict";a.exports=require("events")},95160:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SessionEventArgs=void 0;class c{constructor(a){this.privSessionId=a}get sessionId(){return this.privSessionId}}b.SessionEventArgs=c},95386:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){return function(b,c){return new Promise((d,e)=>{a.call(this,b,c,(a,b)=>{a?e(a):d(b)})})}}},95456:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PullAudioInputStreamImpl=b.PullAudioInputStream=b.PushAudioInputStreamImpl=b.PushAudioInputStream=b.AudioInputStream=void 0;let d=c(35961),e=c(94705),f=c(10977),g=c(41686),h=c(57645);class i{constructor(){return}static createPushStream(a){return j.create(a)}static createPullStream(a,b){return l.create(a,b)}}b.AudioInputStream=i;class j extends i{static create(a){return new k(a)}}b.PushAudioInputStream=j;class k extends j{constructor(a){super(),void 0===a?this.privFormat=h.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=a,this.privEvents=new e.EventSource,this.privId=(0,f.createNoDashGuid)(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(a){this.privStream.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(a){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,a)),await this.turnOn();let b=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>b.read()}}detach(a){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:d.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:d.type.Stream})}onEvent(a){this.privEvents.onEvent(a),e.Events.instance.onEvent(a)}toBuffer(a){let b=Buffer.alloc(a.byteLength),c=new Uint8Array(a);for(let a=0;a<b.length;++a)b[a]=c[a];return b}}b.PushAudioInputStreamImpl=k;class l extends i{constructor(){super()}static create(a,b){return new m(a,b)}}b.PullAudioInputStream=l;class m extends l{constructor(a,b){super(),void 0===b?this.privFormat=g.AudioStreamFormat.getDefaultInputFormat():this.privFormat=b,this.privEvents=new e.EventSource,this.privId=(0,f.createNoDashGuid)(),this.privCallback=a,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(a){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,a)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>{let a,b=0;for(;b<this.privBufferSize;){let c=new ArrayBuffer(this.privBufferSize-b),d=this.privCallback.read(c);if(void 0===a?a=c:new Int8Array(a).set(new Int8Array(c),b),0===d)break;b+=d}return Promise.resolve({buffer:a.slice(0,b),isEnd:this.privIsClosed||0===b,timeReceived:Date.now()})}}}detach(a){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,a))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:d.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:d.type.Stream})}onEvent(a){this.privEvents.onEvent(a),e.Events.instance.onEvent(a)}}b.PullAudioInputStreamImpl=m},95930:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationRecognitionEventArgs=void 0;let d=c(41686);class e extends d.RecognitionEventArgs{constructor(a,b,c){super(b,c),this.privResult=a}get result(){return this.privResult}}b.TranslationRecognitionEventArgs=e},96211:(a,b,c)=>{a.exports=function(a){function b(a){let b=0;for(let c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c)|0;return d.colors[Math.abs(b)%d.colors.length]}function d(a){let b,c,f,g=null;function h(...a){if(!h.enabled)return;let c=h,e=Number(new Date);c.diff=e-(b||e),c.prev=b,c.curr=e,b=e,a[0]=d.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");let f=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(b,e)=>{if("%%"===b)return"%";f++;let g=d.formatters[e];if("function"==typeof g){let d=a[f];b=g.call(c,d),a.splice(f,1),f--}return b}),d.formatArgs.call(c,a),(c.log||d.log).apply(c,a)}return h.namespace=a,h.useColors=d.useColors(),h.color=d.selectColor(a),h.extend=e,h.destroy=d.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(c!==d.namespaces&&(c=d.namespaces,f=d.enabled(a)),f),set:a=>{g=a}}),"function"==typeof d.init&&d.init(h),h}function e(a,b){let c=d(this.namespace+(void 0===b?":":b)+a);return c.log=this.log,c}function f(a){for(let b of(d.save(a),d.namespaces=a,d.names=[],d.skips=[],("string"==typeof a?a:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===b[0]?d.skips.push(b.slice(1)):d.names.push(b)}function g(a,b){let c=0,d=0,e=-1,f=0;for(;c<a.length;)if(d<b.length&&(b[d]===a[c]||"*"===b[d]))"*"===b[d]?(e=d,f=c):c++,d++;else{if(-1===e)return!1;d=e+1,c=++f}for(;d<b.length&&"*"===b[d];)d++;return d===b.length}function h(){let a=[...d.names,...d.skips.map(a=>"-"+a)].join(",");return d.enable(""),a}function i(a){for(let b of d.skips)if(g(a,b))return!1;for(let b of d.names)if(g(a,b))return!0;return!1}function j(a){return a instanceof Error?a.stack||a.message:a}function k(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return d.debug=d,d.default=d,d.coerce=j,d.disable=h,d.enable=f,d.enabled=i,d.humanize=c(67802),d.destroy=k,Object.keys(a).forEach(b=>{d[b]=a[b]}),d.names=[],d.skips=[],d.formatters={},d.selectColor=b,d.enable(d.load()),d}},98298:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EnumTranslation=void 0;let d=c(41686),e=c(35961);class f{static implTranslateRecognitionResult(a,b=!1){let c=d.ResultReason.Canceled;switch(a){case e.RecognitionStatus.Success:c=d.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:c=b?d.ResultReason.RecognizedSpeech:d.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:c=d.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:c=d.ResultReason.Canceled}return c}static implTranslateCancelResult(a){let b=d.CancellationReason.EndOfStream;switch(a){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:b=d.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:b=d.CancellationReason.Error}return b}static implTranslateCancelErrorCode(a){let b=d.CancellationErrorCode.NoError;switch(a){case e.RecognitionStatus.Error:b=d.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:b=d.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:b=d.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:b=d.CancellationErrorCode.Forbidden;break;default:b=d.CancellationErrorCode.NoError}return b}static implTranslateErrorDetails(a){let b="The speech service encountered an internal error and could not continue.";switch(a){case d.CancellationErrorCode.Forbidden:b="The recognizer is using a free subscription that ran out of quota.";break;case d.CancellationErrorCode.BadRequestParameters:b="Invalid parameter or unsupported audio format in the request.";break;case d.CancellationErrorCode.TooManyRequests:b="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return b}}b.EnumTranslation=f},98420:(a,b,c)=>{"use strict";var d;Object.defineProperty(b,"__esModule",{value:!0}),b.RecognizerConfig=b.SpeechResultFormat=void 0;let e=c(41686),f=c(35961),g=c(38786);!function(a){a[a.Simple=0]="Simple",a[a.Detailed=1]="Detailed"}(d=b.SpeechResultFormat||(b.SpeechResultFormat={}));class h{constructor(a,b){this.privSpeechServiceConfig=a||new f.SpeechServiceConfig(new f.Context(null)),this.privParameters=b,this.privMaxRetryCount=parseInt(b.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=b.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===g.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=g.RecognitionMode[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==g.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(a){this.parameters.setProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,a)}get sourceLanguageModels(){let a=[],b=!1;if(void 0!==this.autoDetectSourceLanguages)for(let c of this.autoDetectSourceLanguages.split(",")){let d=c+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),f=this.parameters.getProperty(d,void 0);void 0!==f?(a.push({language:c,endpoint:f}),b=!0):a.push({language:c,endpoint:""})}return b?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}b.RecognizerConfig=h},98519:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TranslationSynthesisResult=void 0;class c{constructor(a,b){this.privReason=a,this.privAudio=b}get audio(){return this.privAudio}get reason(){return this.privReason}}b.TranslationSynthesisResult=c},98849:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Events=void 0;let d=c(29016),e=c(3231);class f{static setEventSource(a){if(!a)throw new d.ArgumentNullError("eventSource");f.privInstance=a}static get instance(){return f.privInstance}}b.Events=f,f.privInstance=new e.EventSource},99028:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AvatarWebRTCConnectionResult=void 0;let d=c(41686);class e extends d.SynthesisResult{constructor(a,b,c,d,e){super(b,c,d,e),this.privSDPAnswer=a}get SDPAnswer(){return this.privSDPAnswer}}b.AvatarWebRTCConnectionResult=e},99054:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SpeechTranslationConfigImpl=b.SpeechTranslationConfig=void 0;let d=c(35961),e=c(87470),f=c(41686);class g extends f.SpeechConfig{constructor(){super()}static fromSubscription(a,b){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(b,"region");let c=new h;return c.properties.setProperty(f.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(f.PropertyId.SpeechServiceConnection_Region,b),c}static fromAuthorizationToken(a,b){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(b,"region");let c=new h;return c.properties.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(f.PropertyId.SpeechServiceConnection_Region,b),c}static fromHost(a,b){e.Contracts.throwIfNull(a,"hostName");let c=new h;return c.setProperty(f.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(""===a.port?"":":"+a.port)),void 0!==b&&c.setProperty(f.PropertyId.SpeechServiceConnection_Key,b),c}static fromEndpoint(a,b){e.Contracts.throwIfNull(a,"endpoint");let c="string"==typeof b&&b.trim().length>0,d="object"==typeof b&&null!==b&&"function"==typeof b.getToken;if(void 0!==b&&!c&&!d)throw Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");let g="object"==typeof b?new h(b):new h;return g.setProperty(f.PropertyId.SpeechServiceConnection_Endpoint,a.href),"string"==typeof b&&b.trim().length>0&&g.setProperty(f.PropertyId.SpeechServiceConnection_Key,b),g}}b.SpeechTranslationConfig=g;class h extends g{constructor(a){super(),this.privSpeechProperties=new f.PropertyCollection,this.outputFormat=f.OutputFormat.Simple,this.privTokenCredential=a}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return f.OutputFormat[this.privSpeechProperties.getProperty(d.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(d.OutputFormatPropertyName,f.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(f.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");let b=this.targetLanguages;b.includes(a)||(b.push(a),this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,b.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(f.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(a,b,c,d){this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyPort],b),this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_ProxyPassword],d)}getProperty(a,b){return this.privSpeechProperties.getProperty(a,b)}setProperty(a,b){this.privSpeechProperties.setProperty(a,b)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,b){let c=JSON.parse(this.privSpeechProperties.getProperty(d.ServicePropertiesPropertyName,"{}"));c[a]=b,this.privSpeechProperties.setProperty(d.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceResponse_ProfanityOption,f.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(d.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(f.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(f.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return f.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(f.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(f.PropertyId.SpeechServiceConnection_SynthOutputFormat,f.SpeechSynthesisOutputFormat[a])}}b.SpeechTranslationConfigImpl=h},99413:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Translations=void 0;let d=c(41686);class e{constructor(){this.privMap=new d.PropertyCollection}get languages(){return this.privMap.keys}get(a,b){return this.privMap.getProperty(a,b)}set(a,b){this.privMap.setProperty(a,b)}}b.Translations=e}};var __webpack_require__=require("../../../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=a=>__webpack_require__(__webpack_require__.s=a),__webpack_exports__=__webpack_require__.X(0,[902,814,50],()=>__webpack_exec__(85953));module.exports=__webpack_exports__})();