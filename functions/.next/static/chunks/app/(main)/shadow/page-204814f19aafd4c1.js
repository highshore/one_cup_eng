(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{10952:()=>{},13678:()=>{},14087:(e,r,n)=>{"use strict";n.d(r,{default:()=>eO});var t=n(95155),o=n(12115),i=n(43262),s=n(76107),a=n(35317),c=n(22661);let l={primary:"#3c2e26",primaryDark:"#2c1810",primaryLight:"#5d4037",accent:"#d4a574",success:"#4e7c59",warning:"#c17817",error:"#a8423f",background:"#faf8f6",surface:"#ffffff",text:{primary:"#2c1810",secondary:"#3c2e26",muted:"#8d6e63",inverse:"#ffffff"},border:{light:"#e8ddd4",medium:"#d7c7b8",dark:"#a69080"},shadow:{sm:"0 1px 3px rgba(44, 24, 16, 0.1), 0 1px 2px rgba(44, 24, 16, 0.06)",md:"0 4px 6px rgba(44, 24, 16, 0.07), 0 2px 4px rgba(44, 24, 16, 0.06)",lg:"0 10px 15px rgba(44, 24, 16, 0.1), 0 4px 6px rgba(44, 24, 16, 0.05)",xl:"0 20px 25px rgba(44, 24, 16, 0.1), 0 10px 10px rgba(44, 24, 16, 0.04)"}},d=i.Ay.div.withConfig({componentId:"sc-960caaf-0"})(['width:100%;padding:2rem 0rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;display:flex;flex-direction:column;align-items:center;gap:2rem;max-width:960px;margin:0 auto;min-height:100vh;']);i.Ay.h1.withConfig({componentId:"sc-960caaf-1"})(["color:",";width:100%;text-align:center;font-size:2.5rem;font-weight:700;margin:0;background:linear-gradient( 135deg,",","," );-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-0.02em;@media (max-width:768px){font-size:2rem;}"],l.text.primary,l.primary,l.primaryLight);let u=i.Ay.button.withConfig({componentId:"sc-960caaf-2"})(["display:inline-flex;align-items:center;justify-content:center;padding:0.75rem 1.5rem;font-size:0.875rem;font-weight:600;background:linear-gradient(135deg,",",",");color:",";border:none;border-radius:12px;cursor:pointer;transition:all 0.2s cubic-bezier(0.4,0,0.2,1);box-shadow:",';position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient( 135deg,',","," );opacity:0;transition:opacity 0.2s ease;}&:hover:not(:disabled){transform:translateY(-2px);box-shadow:",";&::before{opacity:1;}}&:active:not(:disabled){transform:translateY(0);box-shadow:",";}&:disabled{background:",";color:",";cursor:not-allowed;transform:none;box-shadow:none;&::before{display:none;}}span{position:relative;z-index:1;}"],l.primary,l.primaryDark,l.text.inverse,l.shadow.sm,l.primaryLight,l.accent,l.shadow.lg,l.shadow.md,l.border.medium,l.text.muted),p=i.Ay.div.withConfig({componentId:"sc-960caaf-3"})(["margin:1.5rem 0;padding:1.5rem;border-radius:16px;line-height:2;font-size:1.1rem;transition:transform 0.2s ease,box-shadow 0.2s ease;&:hover{transform:translateY(-2px);}"]),m=i.Ay.div.withConfig({componentId:"sc-960caaf-4"})(["display:inline-flex;flex-direction:column;align-items:center;margin:0 1px;vertical-align:top;position:relative;"]),g=i.Ay.span.withConfig({componentId:"sc-960caaf-5"})(["font-size:0.7em;color:",";margin-top:2px;line-height:1;font-weight:500;"],l.text.muted),h=i.Ay.span.withConfig({componentId:"sc-960caaf-6"})(["color:",";font-weight:600;padding:4px 2px;border-radius:0;margin:0 1px;transition:all 0.2s ease;text-decoration:",";font-style:",";opacity:",";"," "," &:hover{transform:scale(1.05);}"],e=>{if(e.isOmitted)return l.error;switch(e.color){case"green":return l.success;case"orange":return l.warning;case"red":return l.error;default:return l.text.muted}},e=>e.isOmitted?"line-through":"none",e=>e.isOmitted||e.isInserted?"italic":"normal",e=>e.isOmitted?.85:1,e=>e.hasUnexpectedBreak&&"\n    border-bottom: 3px dotted ".concat(l.warning,";\n    padding-bottom: 1px; \n  "),e=>e.hasMissingBreak&&"\n    border-bottom: 3px dashed ".concat(l.primaryLight,";\n    padding-bottom: 1px;\n  ")),f=i.Ay.p.withConfig({componentId:"sc-960caaf-7"})(["color:",";width:100%;text-align:center;font-weight:500;padding:1rem;background:","10;border:1px solid ","30;border-radius:12px;margin:1rem 0;box-shadow:",";"],l.error,l.error,l.error,l.shadow.sm),x=i.Ay.div.withConfig({componentId:"sc-960caaf-8"})(["display:inline-block;width:20px;height:20px;border:2px solid ",";border-radius:50%;border-top-color:",";animation:spin 1s ease-in-out infinite;margin-right:0.5rem;@keyframes spin{to{transform:rotate(360deg);}}"],l.border.light,l.primary),y=i.Ay.div.withConfig({componentId:"sc-960caaf-9"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;gap:1rem;.spinner{width:40px;height:40px;border:3px solid ",";border-radius:50%;border-top-color:",";animation:spin 1s ease-in-out infinite;}.text{font-size:1.1rem;color:",";font-weight:500;}@keyframes spin{to{transform:rotate(360deg);}}"],l.border.light,l.primary,l.text.secondary),b=i.Ay.div.withConfig({componentId:"sc-960caaf-10"})(["margin-bottom:2rem;width:100%;aspect-ratio:16 / 9;position:relative;border-radius:20px;overflow:hidden;box-shadow:",";background:linear-gradient(135deg,",",",");border:1px solid ",";transition:transform 0.3s ease,box-shadow 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:",",0 0 0 1px ","20;}iframe{width:100%;height:100%;border:none;border-radius:20px;}"],l.shadow.xl,l.background,l.surface,l.border.light,l.shadow.xl,l.primary),w=i.Ay.div.withConfig({componentId:"sc-960caaf-11"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.75rem 1rem;border-radius:12px;font-size:0.875rem;font-weight:500;margin-top:0.5rem;border:1px solid;",""],e=>{switch(e.type){case"success":return"\n          background: ".concat(l.success,"10;\n          border-color: ").concat(l.success,"30;\n          color: ").concat(l.success,";\n        ");case"warning":return"\n          background: ".concat(l.warning,"10;\n          border-color: ").concat(l.warning,"30;\n          color: ").concat(l.warning,";\n        ");case"error":return"\n          background: ".concat(l.error,"10;\n          border-color: ").concat(l.error,"30;\n          color: ").concat(l.error,";\n        ");default:return"\n          background: ".concat(l.primary,"10;\n          border-color: ").concat(l.primary,"30;\n          color: ").concat(l.primary,";\n        ")}}),v=i.Ay.div.withConfig({componentId:"sc-960caaf-12"})(["font-size:1.15rem;line-height:1.7;margin-bottom:1rem;color:",";font-weight:400;letter-spacing:0.01em;"],l.text.primary),A=i.Ay.div.withConfig({shouldForwardProp:e=>"isOpen"!==e}).withConfig({componentId:"sc-2f039401-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:",";visibility:",";transition:opacity 0.3s ease,visibility 0.3s ease;"],e=>+!!e.isOpen,e=>e.isOpen?"visible":"hidden"),j=i.Ay.div.withConfig({componentId:"sc-2f039401-1"})(["background:",";border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,0.2);padding:1.8rem;max-width:90%;width:450px;position:relative;transform:scale(1);transition:transform 0.3s ease;border-left:5px solid ",";border:1px solid ",";overflow-y:auto;max-height:90vh;@media (max-width:768px){padding:1.5rem;width:80%;max-height:80vh;}@media (max-width:480px){padding:1.2rem;width:90%;max-height:75vh;}"],l.background,l.accent,l.border.light),k=i.Ay.button.withConfig({componentId:"sc-2f039401-2"})(["position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:",";cursor:pointer;width:2.1rem;height:2.1rem;padding:0;line-height:1;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;@media (max-width:768px){top:0.8rem;right:0.8rem;width:2rem;height:2rem;}&:hover{color:",";background:",";}"],l.text.muted,l.primary,l.border.light),C=i.Ay.div.withConfig({componentId:"sc-2f039401-3"})(["font-weight:bold;color:",";margin-bottom:1rem;font-size:1.5rem;padding-bottom:0.7rem;border-bottom:1px solid ",";"],l.primary,l.border.light),S=i.Ay.div.withConfig({componentId:"sc-2f039401-4"})(["color:",';font-family:"Apple SD Gothic Neo","Noto Sans KR",sans-serif;line-height:1.6;white-space:pre-line;font-size:1rem;'],l.text.secondary),z=i.Ay.div.withConfig({componentId:"sc-2f039401-5"})(["color:",";font-style:italic;padding:1rem 0;display:flex;align-items:center;justify-content:center;min-height:100px;"],l.text.muted),I=i.Ay.div.withConfig({componentId:"sc-2f039401-6"})(["margin-bottom:1.5rem;"]),R=i.Ay.div.withConfig({componentId:"sc-2f039401-7"})(["font-size:1rem;font-weight:600;color:",";margin-bottom:0.5rem;"],l.primary),E=i.Ay.details.withConfig({componentId:"sc-2f039401-8"})(["margin-top:1rem;summary{font-size:0.95rem;font-weight:600;cursor:pointer;list-style:none;margin:0;padding:0;&:hover{color:",";}}ul{padding-left:1.2rem;margin:0.5rem 0;list-style:disc;font-size:0.9rem;color:",";}"],l.primaryDark,l.text.secondary),D=e=>{let{modalState:r,onClose:n}=e;return(0,t.jsx)(A,{isOpen:r.isOpen,onClick:n,children:(0,t.jsxs)(j,{onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(k,{onClick:n,children:"\xd7"}),(0,t.jsx)(C,{children:r.word}),!r.isLoading||r.apiData||r.gptDefinition?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I,{children:r.isLoading&&!r.gptDefinition?(0,t.jsx)(z,{children:"GPT 뜻풀이 검색 중..."}):r.gptDefinition?(0,t.jsx)(S,{children:r.gptDefinition}):(0,t.jsx)(S,{children:"한국어 뜻풀이를 가져오지 못했습니다."})}),r.isLoading&&!r.apiData?(0,t.jsx)(z,{children:"Loading English definitions from API..."}):r.apiData&&Array.isArray(r.apiData)&&r.apiData.length>0?(0,t.jsxs)(E,{children:[(0,t.jsx)("summary",{children:"\uD83D\uDCD6 영어 사전 확인하기"}),r.apiData.map((e,n)=>(0,t.jsxs)("div",{style:{marginTop:"1rem",borderBottom:n<r.apiData.length-1?"1px solid #eee":"none",paddingBottom:n<r.apiData.length-1?"1rem":"0"},children:[e.phonetics&&e.phonetics.filter(e=>e.text).length>0&&(0,t.jsxs)(I,{children:[(0,t.jsx)(R,{style:{fontSize:"0.9rem"},children:"Pronunciation"}),e.phonetics.map((e,r)=>e.text&&(0,t.jsx)("div",{style:{marginBottom:"0.3rem",display:"flex",alignItems:"center"},children:e.audio&&(0,t.jsx)("audio",{controls:!0,src:e.audio,style:{height:"30px",minWidth:"100%"}})},"phonetic-".concat(r)))]}),e.meanings&&e.meanings.length>0&&(0,t.jsxs)(I,{children:[(0,t.jsx)(R,{style:{fontSize:"0.9rem"},children:"Meanings"}),e.meanings.map((e,r)=>(0,t.jsxs)("div",{style:{marginBottom:"0.8rem"},children:[(0,t.jsx)(S,{style:{fontWeight:"bold",color:l.primaryDark},children:e.partOfSpeech}),e.definitions&&e.definitions.length>0&&(0,t.jsx)("ul",{style:{marginTop:"0.3rem",paddingLeft:"0px",listStyleType:"disc"},children:e.definitions.map((e,r)=>(0,t.jsxs)("li",{style:{marginBottom:"0.4rem"},children:[e.definition,e.example&&(0,t.jsxs)("div",{style:{fontStyle:"italic",color:l.text.muted,fontSize:"0.9em",marginLeft:"0px",overflowWrap:"break-word",wordBreak:"break-word"},children:['e.g. "',e.example,'"']}),e.synonyms&&e.synonyms.length>0&&(0,t.jsxs)("div",{style:{fontSize:"0.85em",color:l.text.secondary,marginTop:"0.2rem",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,t.jsx)("strong",{children:"Synonyms:"})," ",e.synonyms.join(", ")]}),e.antonyms&&e.antonyms.length>0&&(0,t.jsxs)("div",{style:{fontSize:"0.85em",color:l.text.secondary,marginTop:"0.2rem",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,t.jsx)("strong",{children:"Antonyms:"})," ",e.antonyms.join(", ")]})]},"def-".concat(r)))}),e.synonyms&&e.synonyms.length>0&&(0,t.jsxs)("div",{style:{fontSize:"0.85em",color:l.text.secondary,marginTop:"0.3rem",paddingLeft:"0px",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,t.jsx)("strong",{children:"Synonyms:"})," ",e.synonyms.join(", ")]}),e.antonyms&&e.antonyms.length>0&&(0,t.jsxs)("div",{style:{fontSize:"0.85em",color:l.text.secondary,marginTop:"0.3rem",paddingLeft:"0px",overflowWrap:"break-word",wordBreak:"break-word"},children:[(0,t.jsx)("strong",{children:"Antonyms:"})," ",e.antonyms.join(", ")]})]},"meaning-".concat(r)))]}),e.sourceUrls&&e.sourceUrls.length>0&&(0,t.jsx)(I,{children:(0,t.jsx)(R,{style:{fontSize:"0.9rem"},children:"Source: Wikitionary"})})]},"entry-".concat(n)))]}):r.apiData&&"No Definitions Found"===r.apiData.title?(0,t.jsxs)(z,{children:['No English definitions found for "',r.word,'" via API.']}):!r.isLoading&&(0,t.jsxs)(z,{children:['Could not load English definitions for "',r.word,'".']})]}):(0,t.jsx)(z,{children:"뜻풀이 및 영어 정의 검색 중..."})]})})};n(49509);let T=e=>void 0===e?"gray":e>=80?"green":e>=60?"orange":"red",P=e=>{try{let r=new URL(e),n=null;if("youtu.be"===r.hostname)n=r.pathname.substring(1);else if("www.youtube.com"===r.hostname||"youtube.com"===r.hostname)if("/embed"===r.pathname){let e=r.pathname.split("/").pop();n=void 0!==e?e:null}else"/watch"===r.pathname&&(n=r.searchParams.get("v"));if(n){let e=new URL("https://www.youtube.com/embed/".concat(n));return e.searchParams.set("enablejsapi","1"),r.searchParams.forEach((r,n)=>{let t=n.toLowerCase();["v","feature","si","enablejsapi"].includes(t)||e.searchParams.set(n,r)}),e.toString()}return console.warn("Could not extract videoId from URL:",e),null}catch(e){return console.error("Error parsing YouTube URL for embed:",e),null}},W=e=>{var r,n,i,s,a;let{sentence:c,index:d}=e;console.log("[RenderDebug] Original Sentence Text:",c.text);let u=c.text.trim().split(/\s+/),f=(null==(n=c.assessmentResult)||null==(r=n.detailResult)?void 0:r.Words)||[];if(!c.isAssessmentFinalized)return(0,t.jsxs)(p,{children:[(0,t.jsx)(v,{children:c.text}),c.isAssessing&&(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:l.text.muted},children:(0,t.jsxs)("i",{children:['Recording... Recognized so far: "',c.recognizedText||"",'"']})}),!c.isAssessing&&c.recognizedText&&(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:l.text.muted},children:(0,t.jsxs)("i",{children:['Processing... Recognized: "',c.recognizedText||"",'"']})})]});if(!c.assessmentResult)return(0,t.jsxs)(p,{children:[(0,t.jsx)(v,{children:c.text}),(0,t.jsx)("p",{style:{color:l.error,fontSize:"0.9rem"},children:"Assessment data is missing after finalization."}),c.audioUrl&&(0,t.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,t.jsx)("audio",{id:"sentence-audio-".concat(d),controls:!0,src:c.audioUrl,style:{width:"100%"}})})]});let x=[],y=0,b=0,w=u.length,A=e=>e.toLowerCase().replace(/[.,!?;:'"()[\]{}]|…/g,"");for(;y<f.length&&(null==(s=f[y])||null==(i=s.PronunciationAssessment)?void 0:i.ErrorType)==="Insertion";){let e=f[y],r=null==(a=e.PronunciationAssessment)?void 0:a.AccuracyScore,n="Word: ".concat(e.Word,"\nError: Insertion\nAccuracy: ").concat(void 0!==r?r.toFixed(0)+"%":"N/A");x.push((0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(h,{color:"gray",title:"Marker for inserted text",style:{fontStyle:"italic",marginRight:"0.2em"},isInserted:!0,children:"[\xa0\xa0]"}),(0,t.jsx)(m,{children:(0,t.jsx)(h,{color:T(r),isOmitted:!1,isInserted:!0,title:n,children:e.Word})},"insertion-text-score-prefix-".concat(y))," "]},"insertion-prefix-".concat(y))),y++}u.forEach((e,r)=>{var n,i,s,a,c;let l=null,d=!1,u=A(e);if(console.log("[RenderDebug] Original[".concat(r,"]: '").concat(e,"' (Normalized: '").concat(u,"')")),y<f.length){let e=f[y],r=A(e.Word),n=null==(s=e.PronunciationAssessment)?void 0:s.ErrorType;console.log("[RenderDebug] Azure[".concat(y,"]: '").concat(e.Word,"' (Normalized: '").concat(r,"'), Type: ").concat(n));let t=!1;"Insertion"!==n&&u===r?(t=!0,l=e,d=!0):"Omission"===n&&u===r&&(t=!0,l=e,d=!0),console.log("[RenderDebug] Comparison: normalizedOriginal('".concat(u,"') === normalizedAzure('").concat(r,"') ==> ").concat(t))}if(l){console.log("[RenderDebug] Matched: '".concat(e,"' with Azure's '").concat(l.Word,"'. ErrorType: ").concat(null==(a=l.PronunciationAssessment)?void 0:a.ErrorType));let n=l.PronunciationAssessment,o=null==n?void 0:n.AccuracyScore,i=null==n?void 0:n.ErrorType,s="Omission"===i,c="UnexpectedBreak"===i,d="MissingBreak"===i,u=l.Word;s&&(u="[".concat(l.Word,"]"));let p="Word: ".concat(l.Word,"\nError: ").concat(i||"None","\nAccuracy: ").concat(void 0!==o?o.toFixed(0)+"%":"N/A");!s&&b++,x.push((0,t.jsxs)(m,{children:[(0,t.jsx)(h,{color:T(o),isOmitted:s,isInserted:!1,hasUnexpectedBreak:c,hasMissingBreak:d,title:p,children:u}),!s&&(0,t.jsx)(g,{color:T(o),children:void 0!==o?Math.round(o):"?"})]},"word-score-".concat(r)))}else{console.log("[RenderDebug] Omission: '".concat(e,"' was not found in Azure words or was implicitly omitted."));let n="Word: ".concat(e,"\nError: Omission (implicit)\nAccuracy: N/A");x.push((0,t.jsx)(m,{children:(0,t.jsxs)(h,{color:"gray",isOmitted:!0,isInserted:!1,title:n,children:["[",e,"]"]})},"omission-".concat(r)))}for(d&&y++;y<f.length&&(null==(i=f[y])||null==(n=i.PronunciationAssessment)?void 0:n.ErrorType)==="Insertion";){let e=f[y],r=null==(c=e.PronunciationAssessment)?void 0:c.AccuracyScore,n="Word: ".concat(e.Word,"\nError: Insertion\nAccuracy: ").concat(void 0!==r?r.toFixed(0)+"%":"N/A");x.push((0,t.jsxs)(o.Fragment,{children:[" ",(0,t.jsx)(h,{color:"gray",title:"Marker for inserted text",style:{fontStyle:"italic",marginRight:"0.2em"},isInserted:!0,children:"[\xa0\xa0]"}),(0,t.jsx)(m,{children:(0,t.jsx)(h,{color:T(r),isOmitted:!1,isInserted:!0,title:n,children:e.Word})},"insertion-text-score-".concat(y))]},"insertion-".concat(y))),y++}x.push((0,t.jsx)("span",{children:" "},"space-".concat(r)))});let j=Math.round(b/w*100);return(0,t.jsxs)(p,{children:[(0,t.jsx)("div",{style:{marginBottom:"1rem",fontSize:"1.05rem",lineHeight:"1.7"},children:x}),(0,t.jsxs)("div",{style:{marginTop:"0.75rem",fontSize:"0.875rem",color:l.text.muted},children:["Completeness: ",j,"% (",b,"/",w," words spoken)"]}),c.audioUrl&&(0,t.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,t.jsx)("audio",{id:"sentence-audio-".concat(d),controls:!0,src:c.audioUrl,style:{width:"100%"}})})]})};var _=n(43770),F=n.n(_);let O=i.Ay.div.withConfig({shouldForwardProp:e=>"isOpen"!==e}).withConfig({componentId:"sc-ca033323-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:",";visibility:",";transition:opacity 0.3s ease,visibility 0.3s ease;"],e=>+!!e.isOpen,e=>e.isOpen?"visible":"hidden"),N=i.Ay.div.withConfig({componentId:"sc-ca033323-1"})(["background:linear-gradient( 135deg,"," 0%,"," 100% );border-radius:20px;padding:2.5rem;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:",";border:1px solid ",";position:relative;transform:scale(0.9);transition:transform 0.3s ease;",'[data-open="true"] &{transform:scale(1);}'],l.surface,l.background,l.shadow.xl,l.border.light,O),M=i.Ay.div.withConfig({componentId:"sc-ca033323-2"})(["text-align:center;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid ",";"],l.border.light),U=i.Ay.h2.withConfig({componentId:"sc-ca033323-3"})(["font-size:1.8rem;font-weight:700;background:linear-gradient(135deg,",",",");-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;"],l.primary,l.accent),L=i.Ay.p.withConfig({componentId:"sc-ca033323-4"})(["font-size:1.1rem;color:",";margin:0;line-height:1.6;"],l.text.secondary),B=i.Ay.div.withConfig({componentId:"sc-ca033323-5"})(["display:flex;flex-direction:column;gap:1rem;margin-bottom:2rem;"]),Y=i.Ay.button.withConfig({componentId:"sc-ca033323-6"})(["display:flex;align-items:center;justify-content:center;padding:1.5rem 2rem;font-size:1.1rem;font-weight:600;border-radius:16px;border:2px solid;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;"," &:active{transform:translateY(0);}span{position:relative;z-index:1;}"],e=>"primary"===e.variant?"\n        background: linear-gradient(135deg, ".concat(l.primary,", ").concat(l.primaryDark,");\n        color: ").concat(l.text.inverse,";\n        border-color: ").concat(l.primary,';\n        \n        &::before {\n          content: "";\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(135deg, ').concat(l.primaryLight,", ").concat(l.accent,");\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n        \n        &:hover {\n          transform: translateY(-2px);\n          box-shadow: ").concat(l.shadow.lg,";\n          \n          &::before {\n            opacity: 1;\n          }\n        }\n      "):"\n        background: ".concat(l.surface,";\n        color: ").concat(l.text.primary,";\n        border-color: ").concat(l.border.medium,";\n        \n        &:hover {\n          background: ").concat(l.background,";\n          border-color: ").concat(l.primary,";\n          transform: translateY(-2px);\n          box-shadow: ").concat(l.shadow.md,";\n        }\n      ")),J=i.Ay.button.withConfig({componentId:"sc-ca033323-7"})(["position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:",";cursor:pointer;transition:color 0.2s ease;&:hover{color:",";}"],l.text.muted,l.text.primary),X=e=>{let{isOpen:r,onClose:n,onAIChat:o,onFinish:i}=e;return(0,t.jsx)(O,{isOpen:r,"data-open":r,onClick:n,children:(0,t.jsxs)(N,{onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(J,{onClick:n,children:"✕"}),(0,t.jsxs)(M,{children:[(0,t.jsx)(U,{children:"\uD83C\uDF89 학습 완료!"}),(0,t.jsxs)(L,{children:["오늘 쉐도잉 학습을 완료하셨습니다.",(0,t.jsx)("br",{}),"다음 중 어떻게 마무리하고 싶으세요?"]})]}),(0,t.jsxs)(B,{children:[(0,t.jsx)(Y,{variant:"primary",onClick:o,children:(0,t.jsx)("span",{children:"\uD83D\uDCAC 오늘 학습한 내용에 대해 AI와 이야기하기"})}),(0,t.jsx)(Y,{variant:"secondary",onClick:i,children:(0,t.jsx)("span",{children:"✅ 그냥 끝내기"})})]})]})})},G=(0,i.i7)(["0%,100%{transform:translateY(0px);}50%{transform:translateY(-10px);}"]),H=(0,i.i7)(["0%,100%{opacity:1;}50%{opacity:0.7;}"]),K=(0,i.i7)(["0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}"]),V=i.Ay.div.withConfig({componentId:"sc-f26742f6-0"})(["max-width:900px;margin:0 auto;padding:2rem;background:linear-gradient( 135deg,"," 0%,"," 50%,"," 100% );border-radius:24px;box-shadow:",",0 0 40px rgba(60,46,38,0.1),inset 0 1px 0 rgba(255,255,255,0.1);border:1px solid ",';position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient( 90deg,',",",","," );background-size:200% 100%;animation:"," 3s ease infinite;}"],l.surface,l.background,l.surface,l.shadow.xl,l.border.light,l.primary,l.accent,l.primary,K),$=i.Ay.div.withConfig({componentId:"sc-f26742f6-1"})(["position:relative;width:120px;height:120px;pointer-events:none;z-index:5;margin:0 auto 1rem auto;"]),q=i.Ay.div.withConfig({componentId:"sc-f26742f6-2"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-bottom:3rem;padding-bottom:2rem;border-bottom:2px solid ",";position:relative;"],l.border.light),Q=i.Ay.h1.withConfig({componentId:"sc-f26742f6-3"})(["font-size:2.8rem;font-weight:800;background:linear-gradient( 135deg,"," 0%,"," 30%,"," 60%,"," 100% );background-size:300% 300%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;animation:"," 4s ease infinite;letter-spacing:-0.02em;"],l.primary,l.accent,l.primaryLight,l.primary,K),Z=i.Ay.p.withConfig({componentId:"sc-f26742f6-4"})(["font-size:1.5rem;color:",";margin:20px 0;font-weight:500;"],l.text.muted),ee=i.Ay.div.withConfig({componentId:"sc-f26742f6-5"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:3rem;"]),er=i.Ay.div.withConfig({componentId:"sc-f26742f6-6"})(["background:",";border:2px solid ",";border-radius:20px;padding:2rem 1.5rem;text-align:center;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;animation:",' 3s ease-in-out infinite;&::before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:',";transform:rotate(-45deg);transition:all 0.6s ease;opacity:0;}&:hover{transform:translateY(-8px) scale(1.02);box-shadow:",",0 20px 40px rgba(60,46,38,0.15);border-color:",";&::before{opacity:1;animation:"," 2s linear infinite;}}&:nth-child(2){animation-delay:0.2s;}&:nth-child(3){animation-delay:0.4s;}&:nth-child(4){animation-delay:0.6s;}"],e=>e.highlight?"linear-gradient(135deg, \n          ".concat(l.primary,"15 0%, \n          ").concat(l.accent,"10 50%, \n          ").concat(l.primary,"15 100%)"):"linear-gradient(135deg, \n          ".concat(l.surface," 0%, \n          ").concat(l.background," 100%)"),e=>e.highlight?l.primary:l.border.light,G,e=>e.highlight?"linear-gradient(45deg, transparent, ".concat(l.primary,"20, transparent)"):"none",l.shadow.xl,l.primary,K),en=i.Ay.div.withConfig({componentId:"sc-f26742f6-7"})(["font-size:3rem;font-weight:800;background:linear-gradient(135deg,",",",");-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;position:relative;z-index:2;"],l.primary,l.accent),et=i.Ay.div.withConfig({componentId:"sc-f26742f6-8"})(["font-size:0.95rem;color:",";font-weight:600;text-transform:uppercase;letter-spacing:1px;position:relative;z-index:2;"],l.text.muted),eo=i.Ay.div.withConfig({componentId:"sc-f26742f6-9"})(["margin-bottom:3rem;padding:1.5rem;border-radius:16px;background:linear-gradient( 135deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 100% );backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);"]),ei=i.Ay.h2.withConfig({componentId:"sc-f26742f6-10"})(["font-size:1.6rem;font-weight:700;color:",';margin-bottom:1.5rem;display:flex;align-items:center;gap:0.75rem;&::before{content:"";width:6px;height:32px;background:linear-gradient(180deg,',",",");border-radius:3px;box-shadow:0 2px 8px rgba(60,46,38,0.3);}"],l.text.primary,l.primary,l.accent),es=i.Ay.div.withConfig({componentId:"sc-f26742f6-11"})(["width:100%;height:16px;background:linear-gradient( 90deg,",",",' );border-radius:8px;overflow:hidden;position:relative;box-shadow:inset 0 2px 4px rgba(0,0,0,0.1);&::after{content:"";position:absolute;top:0;left:0;height:100%;width:',"%;background:",';border-radius:8px;transition:width 0.8s cubic-bezier(0.4,0,0.2,1);position:relative;&::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient( 90deg,transparent,rgba(255,255,255,0.3),transparent );animation:'," 2s ease infinite;}}"],l.border.light,l.border.medium,e=>e.percentage,e=>e.color?e.color:e.percentage>=80?"linear-gradient(90deg, ".concat(l.success,", #6fd46f)"):e.percentage>=60?"linear-gradient(90deg, ".concat(l.warning,", #f4c430)"):"linear-gradient(90deg, ".concat(l.error,", #ff6b6b)"),K),ea=i.Ay.div.withConfig({componentId:"sc-f26742f6-12"})(["background:linear-gradient( 135deg,"," 0%,"," 100% );border:1px solid ",';border-radius:16px;padding:2rem;margin-bottom:1rem;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient( 90deg,transparent,rgba(60,46,38,0.05),transparent );transition:left 0.6s ease;}&:hover{transform:translateY(-4px);box-shadow:',";border-color:","50;&::before{left:100%;}}"],l.surface,l.background,l.border.light,l.shadow.lg,l.primary),ec=i.Ay.h4.withConfig({componentId:"sc-f26742f6-13"})(["font-size:1.2rem;font-weight:700;background:linear-gradient( 135deg,",","," );-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;"],l.text.primary,l.primary),el=i.Ay.p.withConfig({componentId:"sc-f26742f6-14"})(["color:",";line-height:1.7;margin-bottom:1rem;font-weight:500;"],l.text.secondary),ed=i.Ay.div.withConfig({componentId:"sc-f26742f6-15"})(["display:flex;flex-wrap:wrap;gap:0.75rem;"]),eu=i.Ay.span.withConfig({componentId:"sc-f26742f6-16"})(["padding:0.5rem 1rem;border-radius:25px;font-size:0.9rem;font-weight:600;background:",";color:",";border:2px solid ",';transition:all 0.3s ease;position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient( 90deg,transparent,rgba(255,255,255,0.2),transparent );transition:left 0.4s ease;}&:hover{transform:translateY(-2px);&::before{left:100%;}}'],e=>e.score>=80?"linear-gradient(135deg, ".concat(l.success,"20, ").concat(l.success,"10)"):e.score>=60?"linear-gradient(135deg, ".concat(l.warning,"20, ").concat(l.warning,"10)"):"linear-gradient(135deg, ".concat(l.error,"20, ").concat(l.error,"10)"),e=>e.score>=80?l.success:e.score>=60?l.warning:l.error,e=>e.score>=80?"".concat(l.success,"40"):e.score>=60?"".concat(l.warning,"40"):"".concat(l.error,"40")),ep=i.Ay.div.withConfig({componentId:"sc-f26742f6-17"})(["background:linear-gradient( 135deg,","08 0%,","05 50%,","08 100% );border:2px solid ",'30;border-radius:20px;padding:2.5rem;margin-top:2rem;position:relative;overflow:hidden;&::before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient( 45deg,transparent,',"10,transparent );animation:"," 4s ease-in-out infinite;}"],l.primary,l.accent,l.primary,l.primary,l.primary,H),em=i.Ay.h3.withConfig({componentId:"sc-f26742f6-18"})(["font-size:1.5rem;font-weight:700;background:linear-gradient(135deg,",",",');-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:1.5rem;display:flex;align-items:center;gap:0.75rem;position:relative;z-index:2;&::before{content:"\uD83D\uDCA1";font-size:1.8rem;animation:'," 2s ease-in-out infinite;}"],l.primary,l.accent,H),eg=i.Ay.ul.withConfig({componentId:"sc-f26742f6-19"})(["list-style:none;padding:0;margin:0;position:relative;z-index:2;"]),eh=i.Ay.li.withConfig({componentId:"sc-f26742f6-20"})(["padding:1rem 0;color:",';line-height:1.7;display:flex;align-items:flex-start;gap:1rem;font-weight:500;transition:all 0.3s ease;&::before{content:"→";color:',";font-weight:bold;font-size:1.2rem;margin-top:0.1rem;transition:transform 0.3s ease;}&:hover{transform:translateX(8px);&::before{transform:scale(1.2);}}"],l.text.secondary,l.primary),ef=i.Ay.button.withConfig({componentId:"sc-f26742f6-21"})(["margin-top:2rem;display:flex;width:100%;align-items:center;justify-content:center;padding:1rem 3rem;font-size:1rem;font-weight:700;background:linear-gradient(135deg,",",",");color:",";border:none;border-radius:20px;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);box-shadow:",';position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient( 135deg,',","," );opacity:0;transition:opacity 0.3s ease;}&:hover{transform:translateY(-4px) scale(1.02);box-shadow:",";&::before{opacity:1;}}&:active{transform:translateY(-2px) scale(1.01);}span{position:relative;z-index:1;}"],l.primary,l.primaryDark,l.text.inverse,l.shadow.lg,l.accent,l.primaryLight,l.shadow.xl),ex=e=>{let r,n,i,s,a,c,{sentences:d}=e,[u,p]=(0,o.useState)(!1),[m,g]=(0,o.useState)(null);(0,o.useEffect)(()=>{fetch("/animations/complete.json").then(e=>e.json()).then(e=>g(e)).catch(e=>console.error("Error loading animation:",e))},[]);let h=d.filter(e=>e.assessmentResult),f=0===h.length,x={totalSentences:8,avgPronunciation:82,avgAccuracy:85,avgFluency:78,avgCompleteness:83,wordIssues:[{word:"expectations",score:65,error:"Mispronunciation",count:2},{word:"resilience",score:58,error:"Accuracy",count:1},{word:"character",score:72,error:"Fluency",count:1},{word:"refine",score:68,error:"Pronunciation",count:1},{word:"company",score:74,error:"Accent",count:1},{word:"greatness",score:69,error:"Stress",count:1},{word:"train",score:76,error:"Speed",count:1}]};if(f)r=x.totalSentences,n=x.avgPronunciation,i=x.avgAccuracy,s=x.avgFluency,a=x.avgCompleteness,c=x.wordIssues;else{r=h.length,n=h.reduce((e,r)=>{var n;return e+((null==(n=r.assessmentResult)?void 0:n.pronunciationScore)||0)},0)/r,i=h.reduce((e,r)=>{var n;return e+((null==(n=r.assessmentResult)?void 0:n.accuracyScore)||0)},0)/r,s=h.reduce((e,r)=>{var n;return e+((null==(n=r.assessmentResult)?void 0:n.fluencyScore)||0)},0)/r,a=h.reduce((e,r)=>{var n;return e+((null==(n=r.assessmentResult)?void 0:n.completenessScore)||0)},0)/r;let e=[],t=new Map;h.forEach(e=>{var r,n;((null==(n=e.assessmentResult)||null==(r=n.detailResult)?void 0:r.Words)||[]).forEach(e=>{var r,n;let o=(null==(r=e.PronunciationAssessment)?void 0:r.AccuracyScore)||0,i=(null==(n=e.PronunciationAssessment)?void 0:n.ErrorType)||"None";if(o<70||"None"!==i){let r=e.Word.toLowerCase();if(t.has(r)){let e=t.get(r);e.count++,e.score=Math.min(e.score,o)}else t.set(r,{word:e.Word,score:o,error:i,count:1})}})}),e.push(...Array.from(t.values())),e.sort((e,r)=>e.score-r.score),c=e}let y=[];n<70&&y.push({title:"전체적인 발음",description:"명확한 발음과 정확한 소리 생성에 집중하세요. 원어민 오디오와 함께 연습해보세요."}),s<70&&y.push({title:"말하기 유창성",description:"부드럽고 자연스러운 말의 리듬을 연습하세요. 매일 소리내어 읽기와 쉐도잉 연습을 해보세요."}),i<70&&y.push({title:"단어 정확성",description:"개별 단어의 정확한 발음에 집중하세요. 발음 기호를 가이드로 활용해보세요."}),f&&0===y.length&&y.push({title:"말하기 유창성",description:"부드럽고 자연스러운 말의 리듬을 연습하세요. 매일 소리내어 읽기와 쉐도잉 연습을 해보세요."});let b=(n+i+s+a)/4;return(0,t.jsxs)(V,{children:[(0,t.jsxs)(q,{children:[b>=80&&m&&(0,t.jsx)($,{children:(0,t.jsx)(F(),{animationData:m,loop:!0,style:{width:"100%",height:"100%"}})}),(0,t.jsx)(Q,{children:"고생하셨습니다!"}),(0,t.jsx)(Z,{children:f?"스터디 분석 결과":"총 ".concat(r,"개 문장 분석 결과")})]}),(0,t.jsxs)(ee,{children:[(0,t.jsxs)(er,{highlight:!0,children:[(0,t.jsx)(en,{children:Math.round(b)}),(0,t.jsx)(et,{children:"종합 점수"})]}),(0,t.jsxs)(er,{children:[(0,t.jsx)(en,{children:Math.round(n)}),(0,t.jsx)(et,{children:"발음"})]}),(0,t.jsxs)(er,{children:[(0,t.jsx)(en,{children:Math.round(i)}),(0,t.jsx)(et,{children:"정확성"})]}),(0,t.jsxs)(er,{children:[(0,t.jsx)(en,{children:Math.round(s)}),(0,t.jsx)(et,{children:"유창성"})]})]}),(0,t.jsxs)(eo,{children:[(0,t.jsx)(ei,{children:"\uD83D\uDCC8 세부 성과 분석"}),(0,t.jsxs)("div",{style:{display:"grid",gap:"1.5rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,t.jsx)("span",{style:{fontWeight:600},children:"발음 점수"}),(0,t.jsxs)("span",{style:{color:l.text.muted,fontWeight:600},children:[Math.round(n),"%"]})]}),(0,t.jsx)(es,{percentage:n})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,t.jsx)("span",{style:{fontWeight:600},children:"정확성 점수"}),(0,t.jsxs)("span",{style:{color:l.text.muted,fontWeight:600},children:[Math.round(i),"%"]})]}),(0,t.jsx)(es,{percentage:i})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,t.jsx)("span",{style:{fontWeight:600},children:"유창성 점수"}),(0,t.jsxs)("span",{style:{color:l.text.muted,fontWeight:600},children:[Math.round(s),"%"]})]}),(0,t.jsx)(es,{percentage:s})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",fontSize:"1.1rem"},children:[(0,t.jsx)("span",{style:{fontWeight:600},children:"완성도 점수"}),(0,t.jsxs)("span",{style:{color:l.text.muted,fontWeight:600},children:[Math.round(a),"%"]})]}),(0,t.jsx)(es,{percentage:a})]})]})]}),c.length>0&&(0,t.jsxs)(eo,{children:[(0,t.jsx)(ei,{children:"\uD83C\uDFAF 집중 연습 단어"}),(0,t.jsx)("p",{style:{color:l.text.secondary,marginBottom:"1.5rem",fontSize:"1.1rem",lineHeight:"1.6"},children:"다음 단어들의 정확도가 낮게 나타났습니다. 이 단어들의 발음 연습에 집중해보세요:"}),(0,t.jsx)(ed,{children:c.slice(0,15).map((e,r)=>(0,t.jsxs)(eu,{score:e.score,children:[e.word," (",Math.round(e.score),"%)"]},r))})]}),y.length>0&&(0,t.jsxs)(eo,{children:[(0,t.jsx)(ei,{children:"\uD83D\uDCAA 개선이 필요한 영역"}),y.map((e,r)=>(0,t.jsxs)(ea,{children:[(0,t.jsx)(ec,{children:e.title}),(0,t.jsx)(el,{children:e.description})]},r))]}),(0,t.jsxs)(ep,{children:[(0,t.jsx)(em,{children:"다음 단계 추천"}),(0,t.jsxs)(eg,{children:[b>=80?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eh,{children:"훌륭합니다! 높은 수준의 실력을 유지하기 위해 꾸준히 연습을 계속하세요."}),(0,t.jsx)(eh,{children:"더 어려운 콘텐츠에 도전하거나 말하기 속도와 자연스러움에 집중해보세요."}),(0,t.jsx)(eh,{children:"다양한 억양과 말하기 스타일을 연습하여 실력의 폭을 넓혀보세요."})]}):b>=60?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eh,{children:"좋은 진전입니다! 개선이 필요한 특정 단어와 소리에 집중해보세요."}),(0,t.jsx)(eh,{children:"일관성을 위해 매일 10-15분씩 쉐도잉 연습을 해보세요."}),(0,t.jsx)(eh,{children:"자신의 말하기를 녹음하고 원어민과 비교해보세요."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eh,{children:"천천히 말하기부터 시작하여 각 단어의 명확한 발음에 집중하세요."}),(0,t.jsx)(eh,{children:"전체 문장으로 넘어가기 전에 기본적인 소리와 발음을 연습하세요."}),(0,t.jsx)(eh,{children:"발음 앱을 사용하거나 말하기 코치와 함께 개인별 맞춤 피드백을 받아보세요."})]}),(0,t.jsx)(eh,{children:"위에 강조된 단어들을 먼저 개별적으로 연습해보세요."}),(0,t.jsx)(eh,{children:"내일 다시 돌아와서 이 연습을 반복하여 향상 정도를 확인해보세요!"})]})]}),(0,t.jsx)(ef,{onClick:()=>p(!0),children:(0,t.jsx)("span",{children:"\uD83C\uDFAF 마무리하기"})}),u&&(0,t.jsx)(X,{isOpen:u,onClose:()=>p(!1),onAIChat:()=>{p(!1),console.log("AI Chat selected")},onFinish:()=>{p(!1),console.log("Finish selected")}})]})};var ey=n(49509);let eb=i.Ay.div.withConfig({componentId:"sc-16eb6902-0"})(["width:100%;margin-top:1rem;background:",";border-radius:20px;line-height:1.8;text-align:left;padding:1.5rem;box-shadow:",";"],l.surface,l.shadow.sm),ew=i.Ay.span.withConfig({shouldForwardProp:e=>"isActive"!==e}).withConfig({componentId:"sc-16eb6902-1"})(["transition:all 0s cubic-bezier(0.4,0,0.2,1);background:",";color:",";font-weight:",';cursor:pointer;position:relative;padding:0.1em 0.1em;border-radius:4px;&::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:',";opacity:0;border-radius:8px;transition:opacity 0.2s ease;z-index:-1;}&:hover{&::before{opacity:",";}transform:",";}"],e=>e.isActive?"#fafa00":"transparent",e=>e.isActive?"#000000":l.text.secondary,e=>(e.isActive,"400"),l.primary,e=>e.isActive?"0":"0.1",e=>e.isActive?"none":"translateY(-1px)"),ev=i.Ay.div.withConfig({componentId:"sc-16eb6902-2"})(["padding:2rem;border:1px solid ",";border-radius:20px;background:",";display:flex;flex-direction:column;gap:1.5rem;box-shadow:",';transition:all 0.3s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;&::before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,',",",");transition:width 0.3s ease;}&:hover{transform:translateY(-4px);box-shadow:",";border-color:","30;&::before{width:8px;}}"],l.border.light,l.surface,l.shadow.md,l.primary,l.accent,l.shadow.xl,l.primary),eA=i.Ay.div.withConfig({componentId:"sc-16eb6902-3"})(["display:flex;align-items:center;gap:1rem;flex-wrap:wrap;"]),ej=i.Ay.div.withConfig({componentId:"sc-16eb6902-4"})(["width:100%;position:relative;overflow:hidden;"]),ek=i.Ay.div.withConfig({componentId:"sc-16eb6902-5"})(["display:flex;width:100%;min-height:400px;"]),eC=i.Ay.div.withConfig({shouldForwardProp:e=>"isActive"!==e}).withConfig({componentId:"sc-16eb6902-6"})(["width:100%;flex-shrink:0;display:",";animation:",";@keyframes slideIn{from{opacity:0;transform:translateX(20px);}to{opacity:1;transform:translateX(0);}}"],e=>e.isActive?"block":"none",e=>e.isActive?"slideIn 0.3s ease-out":"none"),eS=i.Ay.div.withConfig({componentId:"sc-16eb6902-7"})(["display:flex;align-items:center;justify-content:space-between;margin-top:1rem;gap:1rem;"]),ez=(0,i.Ay)(u).withConfig({componentId:"sc-16eb6902-8"})(["display:flex;align-items:center;gap:0.5rem;min-width:120px;&:disabled{opacity:0.5;}"]),eI=i.Ay.div.withConfig({componentId:"sc-16eb6902-9"})(["flex:1;height:8px;background:",";border-radius:4px;overflow:hidden;position:relative;"],l.border.light),eR=i.Ay.div.withConfig({shouldForwardProp:e=>"progress"!==e}).withConfig({componentId:"sc-16eb6902-10"})(["height:100%;width:","%;background:linear-gradient(90deg,",",",');border-radius:4px;transition:width 0.3s ease;position:relative;&::after{content:"";position:absolute;top:0;right:0;bottom:0;width:20px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3));animation:shimmer 2s infinite;}@keyframes shimmer{0%{transform:translateX(-20px);}100%{transform:translateX(20px);}}'],e=>e.progress,l.primary,l.accent),eE=i.Ay.div.withConfig({componentId:"sc-16eb6902-11"})(["text-align:center;margin-top:0.5rem;font-size:0.875rem;color:",";font-weight:500;"],l.text.muted),eD=i.Ay.div.withConfig({componentId:"sc-16eb6902-12"})(["display:flex;align-items:center;justify-content:center;"]),eT=i.Ay.div.withConfig({shouldForwardProp:e=>"isActive"!==e&&"isCompleted"!==e}).withConfig({componentId:"sc-16eb6902-13"})(['display:flex;align-items:center;position:relative;&:not(:last-child){margin-right:2rem;&::after{content:"";position:absolute;right:-2rem;top:50%;transform:translateY(-50%);width:2rem;height:2px;background:',";transition:background 0.3s ease;}}"],e=>e.isCompleted?l.primary:l.border.light),eP=i.Ay.div.withConfig({shouldForwardProp:e=>"isActive"!==e&&"isCompleted"!==e}).withConfig({componentId:"sc-16eb6902-14"})(["width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1rem;transition:all 0.3s ease;cursor:pointer;position:relative;z-index:1;",""],e=>e.isActive?"\n        background: linear-gradient(135deg, ".concat(l.primary,", ").concat(l.primaryDark,");\n        color: ").concat(l.text.inverse,";\n        box-shadow: ").concat(l.shadow.md,";\n        transform: scale(1.1);\n      "):e.isCompleted?"\n        background: ".concat(l.primary,";\n        color: ").concat(l.text.inverse,";\n        &:hover {\n          transform: scale(1.05);\n          box-shadow: ").concat(l.shadow.sm,";\n        }\n      "):"\n        background: ".concat(l.border.light,";\n        color: ").concat(l.text.muted,";\n        &:hover {\n          background: ").concat(l.border.medium,";\n        }\n      ")),eW=i.Ay.div.withConfig({shouldForwardProp:e=>"isActive"!==e}).withConfig({componentId:"sc-16eb6902-15"})(["position:absolute;top:100%;left:50%;transform:translateX(-50%);margin-top:0.75rem;font-size:0.875rem;font-weight:700;color:",";white-space:nowrap;opacity:",";transition:opacity 0.3s ease;",":hover &{opacity:1;}"],e=>e.isActive?l.primary:l.text.muted,e=>+!!e.isActive,eT),e_=i.Ay.div.withConfig({componentId:"sc-16eb6902-16"})(["width:100%;margin-top:1rem;"]),eF=(0,i.Ay)(u).withConfig({componentId:"sc-16eb6902-17"})(["background:",";margin-bottom:1rem;&.active{background:",";}"],l.primaryDark,l.accent),eO=()=>{let[e,r]=(0,o.useState)(null),[n,i]=(0,o.useState)(null),[m,g]=(0,o.useState)(!0),[h,v]=(0,o.useState)(null),A=(0,o.useRef)(null),[j,k]=(0,o.useState)(!1),[C,S]=(0,o.useState)([]),[z,I]=(0,o.useState)(null),R=(0,o.useRef)(null),E=(0,o.useRef)(null),[T,_]=(0,o.useState)([]),[F,O]=(0,o.useState)(null),[N,M]=(0,o.useState)(!1),[U,L]=(0,o.useState)(null),[B,Y]=(0,o.useState)(0),[J,X]=(0,o.useState)(1),[G,H]=(0,o.useState)(!1),[K,V]=(0,o.useState)({isOpen:!1,word:"",apiData:null,gptDefinition:"",isLoading:!1}),[$]=(0,o.useState)([{id:"intern-1",text:"People with very high expectations have very low resilience.",blankIndex:7,originalWord:"low"},{id:"intern-2",text:"You want to train, you want to refine the character of your company.",blankIndex:7,originalWord:"refine"},{id:"intern-3",text:"Greatness comes from character.",blankIndex:3,originalWord:"character"}]),[q,Q]=(0,o.useState)(0),[Z,ee]=(0,o.useState)($),[er]=(0,o.useState)([{id:"word-1",word:"Resilience",inputMode:"write"},{id:"word-2",word:"Refine",inputMode:"write"},{id:"word-3",word:"Character",inputMode:"write"},{id:"word-4",word:"Setback",inputMode:"write"},{id:"word-5",word:"Ample",inputMode:"write"}]),[en,et]=(0,o.useState)(er),[eo,ei]=(0,o.useState)(0),[es,ea]=(0,o.useState)("fill-blank"),ec=(0,o.useRef)(null),[el,ed]=(0,o.useState)(!1),[eu,ep]=(0,o.useState)(null),em=(0,o.useRef)([]),[eg,eh]=(0,o.useState)(null),ef=(0,o.useRef)(null),eO=(0,o.useRef)(eg),eN=(0,o.useRef)(N),eM=(0,o.useRef)(null),eU=(0,o.useRef)(null),eL=(0,o.useRef)(null),eB=(0,o.useRef)(null),eY=ey.env.NEXT_PUBLIC_AZURE_PRIMARY_KEY,eJ="koreacentral",eX=ey.env.NEXT_PUBLIC_OPENAI_API_KEY;(0,o.useEffect)(()=>{eO.current=eg},[eg]),(0,o.useEffect)(()=>{eN.current=N},[N]);let eG=(0,o.useCallback)(P,[]);function eH(e,r){let n=new DataView(new ArrayBuffer(44+2*e.length));function t(e,r){for(let t=0;t<r.length;t++)n.setUint8(e+t,r.charCodeAt(t))}t(0,"RIFF"),n.setUint32(4,36+2*e.length,!0),t(8,"WAVE"),t(12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,r,!0),n.setUint32(28,2*r,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),t(36,"data"),n.setUint32(40,2*e.length,!0);let o=44;for(let r=0;r<e.length;r++,o+=2){let t=Math.max(-1,Math.min(1,e[r]));n.setInt16(o,t<0?32768*t:32767*t,!0)}return new Blob([n],{type:"audio/wav"})}function eK(e){let r=e.byteLength/4,n=new Int16Array(r),t=new Float32Array(e);for(let e=0;e<r;e++)n[e]=32767*Math.max(-1,Math.min(1,t[e]));return n.buffer}(0,o.useEffect)(()=>{if(null!==U){let e=document.getElementById("sentence-audio-".concat(U));e&&e.play().catch(e=>{console.error("Autoplay failed:",e)}),L(null)}},[U]),(0,o.useEffect)(()=>{let e=e=>{if(!e||0===e.length)return[];let r=[],n="",t=[],o=[".","?","!"];return e.forEach((i,s)=>{n+=(t.length>0?" ":"")+i.word,t.push(i);let a=i.word.charAt(i.word.length-1),c=o.includes(a),l=s===e.length-1;(c&&t.length>0||l&&t.length>0)&&(r.push({id:"sentence-".concat(r.length,"-").concat(Date.now()),text:n.trim(),startTime:t[0].start,endTime:t[t.length-1].end,assessmentResult:null,isRecorded:!1,audioUrl:null,recognizedText:"",rawJson:"",isAssessmentFinalized:!1}),n="",t=[])}),r};return(async()=>{g(!0),v(null),S([]),_([]),I(null),k(!1),A.current&&"function"==typeof A.current.destroy&&(A.current.destroy(),A.current=null),E.current&&(clearInterval(E.current),E.current=null);try{let r=(0,a.H9)(c.db,"shadow","sample"),n=await (0,a.x7)(r);if(n.exists()){let r=n.data();if(r&&r.youtube_url){let e=P(r.youtube_url);e?i(e):v("Invalid YouTube URL in Firestore.")}else v("youtube_url field not found in Firestore document.");if(r&&r.audio_timestamps&&Array.isArray(r.audio_timestamps)){let n=r.audio_timestamps.sort((e,r)=>e.start-r.start);S(n),_(e(n))}else S([]),_([]),console.warn("audio_timestamps not found or not an array in Firestore.")}else v("Shadow learning content not found. Please ensure the 'shadow/sample' document exists in Firestore with youtube_url and audio_timestamps fields.")}catch(e){console.error("Firestore fetch error:",e),v("Failed to load video data: ".concat(e.message))}finally{g(!1)}})(),()=>{E.current&&clearInterval(E.current)}},[eG]),(0,o.useEffect)(()=>{if(!n||m||h){A.current&&"function"==typeof A.current.destroy&&(A.current.destroy(),A.current=null,k(!1)),E.current&&(clearInterval(E.current),E.current=null);return}let e=()=>{if(!A.current||"function"!=typeof A.current.getCurrentTime||0===C.length)return;let e=A.current.getCurrentTime(),r=null;for(let n=0;n<C.length;n++)if(e>=C[n].start&&e<=C[n].end){r=n;break}if(z!==r&&(I(r),null!==r&&R.current)){let e=R.current.children[r];e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}},r=()=>{k(!0)},t=r=>{r.data===window.YT.PlayerState.PLAYING?(E.current&&clearInterval(E.current),C.length>0&&(E.current=window.setInterval(e,250))):(E.current&&(clearInterval(E.current),E.current=null),(r.data===window.YT.PlayerState.PAUSED||r.data===window.YT.PlayerState.ENDED)&&C.length>0&&e())},o=()=>{A.current&&"function"==typeof A.current.destroy&&A.current.destroy(),A.current=new window.YT.Player("youtube-player-iframe",{events:{onReady:r,onStateChange:t}})};if(window.YT&&window.YT.Player)document.getElementById("youtube-player-iframe")&&o();else{window.onYouTubeIframeAPIReady=o;let e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";let r=document.getElementsByTagName("script")[0];r&&r.parentNode?r.parentNode.insertBefore(e,r):document.head.appendChild(e)}return()=>{delete window.onYouTubeIframeAPIReady,A.current&&"function"==typeof A.current.destroy&&A.current.destroy(),A.current=null,k(!1),E.current&&(clearInterval(E.current),E.current=null)}},[n,m,h,C.length]),(0,o.useEffect)(()=>()=>{eB.current&&eB.current.getTracks().forEach(e=>e.stop()),eM.current&&"closed"!==eM.current.state&&eM.current.close().catch(console.warn),eO.current&&(console.log("[Cleanup] Closing Azure Recognizer on unmount."),eO.current.close()),ef.current&&(console.log("[Cleanup] Closing Azure PushStream on unmount."),ef.current.close())},[]);let eV=async e=>{if(N)return;let n=T[e];if(!n)return void r("Cannot find sentence to record.");r(null),O(e),M(!0),em.current=[],_(r=>r.map((r,n)=>n===e?{...r,assessmentResult:null,audioUrl:null,assessmentError:null,recognizedText:"",rawJson:"",isAssessing:!0,isAssessmentFinalized:!1}:r));try{if(!eY||!eJ)throw Error("Azure Speech Key or Region is not configured.");let r=s.SpeechConfig.fromSubscription(eY,eJ);r.speechRecognitionLanguage="en-US",ef.current&&ef.current.close(),ef.current=s.AudioInputStream.createPushStream(s.AudioStreamFormat.getWaveFormatPCM(16e3,16,1));let t=s.AudioConfig.fromStreamInput(ef.current),o=new s.PronunciationAssessmentConfig(n.text,s.PronunciationAssessmentGradingSystem.HundredMark,s.PronunciationAssessmentGranularity.Phoneme,!0);o.enableProsodyAssessment=!0,o.enableMiscue=!0,eO.current&&eO.current.close();let i=new s.SpeechRecognizer(r,t);o.applyTo(i),i.recognizing=(r,n)=>{if(n.result.reason===s.ResultReason.RecognizingSpeech){let r=s.PronunciationAssessmentResult.fromResult(n.result);_(t=>t.map((t,o)=>o===e?{...t,recognizedText:n.result.text,assessmentResult:r,assessmentError:null,isAssessmentFinalized:!1}:t))}},i.recognized=(r,n)=>{if(console.log("[Azure Recognized Event] Result reason: ".concat(s.ResultReason[n.result.reason])),n.result.reason===s.ResultReason.RecognizedSpeech){console.log("[Azure Recognized] Text: ".concat(n.result.text));let r=s.PronunciationAssessmentResult.fromResult(n.result),t=n.result.properties.getProperty(s.PropertyId.SpeechServiceResponse_JsonResult);_(o=>o.map((o,i)=>i===e?{...o,assessmentResult:r,recognizedText:n.result.text,rawJson:t,isAssessing:!1,isAssessmentFinalized:!0}:o))}else n.result.reason===s.ResultReason.NoMatch?(console.warn("[Azure Recognized] NoMatch: Speech could not be recognized."),_(r=>r.map((r,n)=>n===e?{...r,assessmentError:"Speech could not be recognized by Azure.",isAssessing:!1,isAssessmentFinalized:!0}:r))):(console.log("[Azure Recognized] Other reason: ".concat(s.ResultReason[n.result.reason])),_(r=>r.map((r,n)=>n===e?{...r,isAssessing:!1,isAssessmentFinalized:!0}:r)))},i.canceled=(r,n)=>{console.error("[Azure] CANCELED event. Reason: ".concat(s.CancellationReason[n.reason]));let t="Azure CANCELED: Unknown reason";n.reason===s.CancellationReason.Error&&(t="Azure CANCELED: ".concat(n.errorDetails," (Code: ").concat(n.errorCode,")"),console.error("[Azure] CANCELED: ErrorCode=".concat(n.errorCode," ( ").concat(s.CancellationErrorCode[n.errorCode]," )")),console.error("[Azure] CANCELED: ErrorDetails=".concat(n.errorDetails))),_(r=>r.map((r,n)=>n===e?{...r,assessmentError:t,isAssessing:!1,isAssessmentFinalized:!0}:r))},i.sessionStarted=(e,r)=>{console.log("[Azure] Session STARTED")},i.sessionStopped=(e,r)=>{console.log("[Azure] Session STOPPED"),ef.current&&(console.log("[Azure] Closing push stream on session stop."),ef.current.close())},await i.startContinuousRecognitionAsync(()=>{console.log("[Azure] Continuous recognition successfully started.")},r=>{console.error("[Azure] Error starting Azure continuous recognition: ".concat(r)),_(n=>n.map((n,t)=>t===e?{...n,assessmentError:"Azure SDK Error starting recognition: ".concat(r),isAssessing:!1,isAssessmentFinalized:!1}:n)),ef.current&&ef.current.close()}),eh(i),console.log("[Azure] Azure Recognizer instance created and recognition started."),_(r=>r.map((r,n)=>n===e?{...r,isAssessing:!0,assessmentResult:null,audioUrl:null,assessmentError:null,recognizedText:"",rawJson:"",isAssessmentFinalized:!1}:r)),eM.current=new AudioContext({sampleRate:16e3}),await eM.current.audioWorklet.addModule("/scripts/audio-processor.js"),eB.current=await navigator.mediaDevices.getUserMedia({audio:!0}),eU.current=eM.current.createMediaStreamSource(eB.current),eL.current=new AudioWorkletNode(eM.current,"audio-processor",{processorOptions:{sampleRate:eM.current.sampleRate}}),eL.current.port.onmessage=r=>{let n=r.data instanceof ArrayBuffer,t=n?r.data.byteLength:0;if(n&&t>0){let n=new Float32Array(r.data.slice(0));if(em.current.push(n),ef.current&&eO.current&&eN.current&&t>0)try{let e=eK(r.data.slice(0));ef.current.write(e)}catch(r){console.error("[AudioWorklet] Error writing audio to Azure push stream:",r.toString()),_(r=>r.map((r,n)=>n===e?{...r,assessmentError:"Azure audio stream closed unexpectedly during write.",isAssessing:!1,isAssessmentFinalized:!0}:r))}}},eU.current.connect(eL.current)}catch(t){console.error("Error starting sentence recording:",t);let n=t.message||"Failed to start recording.";r(n),_(r=>r.map((r,t)=>t===e?{...r,assessmentError:n,isAssessing:!1,isAssessmentFinalized:!0}:r)),M(!1),O(null),eO.current&&eO.current.close(),ef.current&&ef.current.close()}},e$=async()=>{if(!N||null===F)return void console.warn("Stop called but no active recording or sentence index.");if(console.log("[Stop] Attempting to stop recording for sentence index: ".concat(F)),eO.current&&"function"==typeof eO.current.stopContinuousRecognitionAsync){console.log("[Azure] Sending stopContinuousRecognitionAsync command.");try{await eO.current.stopContinuousRecognitionAsync(()=>{console.log("[Azure] Continuous recognition stopped command sent successfully.")},e=>{console.error("[Azure] Error SENDING stop continuous recognition: ".concat(e))})}catch(e){console.error("[Azure] Exception during stopContinuousRecognitionAsync call:",e)}}else console.warn("[Azure] Recognizer or stopContinuousRecognitionAsync not available to stop.");if(eL.current&&(eL.current.port.onmessage=null,eL.current.disconnect(),eL.current=null,console.log("[WebAudio] AudioWorkletNode disconnected.")),eU.current&&(eU.current.disconnect(),eU.current=null,console.log("[WebAudio] MicrophoneSourceNode disconnected.")),eB.current&&(eB.current.getTracks().forEach(e=>e.stop()),eB.current=null,console.log("[WebAudio] MediaStream tracks stopped.")),eM.current&&"closed"!==eM.current.state){try{await eM.current.close(),console.log("[WebAudio] AudioContext closed.")}catch(e){console.warn("[WebAudio] Error closing AudioContext:",e)}eM.current=null}let e=null;if(em.current.length>0)try{let r=em.current.reduce((e,r)=>e+r.length,0),n=new Float32Array(r),t=0;for(let e of em.current)n.set(e,t),t+=e.length;let o=eH(n,16e3);e=URL.createObjectURL(o),console.log("[WebAudio] Recorded audio URL created: ".concat(e))}catch(e){console.error("Error encoding WAV:",e),_(e=>e.map((e,r)=>r===F?{...e,assessmentError:"Failed to process recorded audio."}:e))}em.current=[],M(!1),O(null),_(r=>r.map((r,n)=>n===F?{...r,isAssessing:!1,audioUrl:e,isRecorded:!0,isAssessmentFinalized:!1}:r)),e&&(console.log("[Autoplay] Triggering autoplay for sentence ".concat(F)),L(F))},eq=async(e,r)=>{try{let n=ey.env.NEXT_PUBLIC_OPENAI_API_KEY;if(!n)return"API 키가 설정되지 않았습니다.";let t="다음 문장에서 '".concat(e,"'의 정의를 한국어로 제공해주세요. 단어의 의미를 문장의 맥락에 맞게 설명해주세요. 반드시 존대말로 작성해주세요.\n\n문장: \"").concat(r,'"\n\n* 결과 형식:\n뜻풀이: [문장 문맥에 맞는 단어 정의]\n'),o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:t}],temperature:.3,max_tokens:300})});if(!o.ok)throw Error("HTTP error ".concat(o.status));return(await o.json()).choices[0].message.content}catch(e){return console.error("GPT API Error:",e),"뜻풀이를 가져오는 중 오류가 발생했습니다: ".concat(e)}},eQ=async e=>{try{let r=await fetch("https://api.dictionaryapi.dev/api/v2/entries/en/".concat(e));if(!r.ok){if(404===r.status)return console.warn('No definitions found for "'.concat(e,'" from API.')),null;throw Error("API error: ".concat(r.status))}return await r.json()}catch(e){return console.error("Free Dictionary API Error:",e),null}},eZ=(e,r,n)=>{try{var t;let o=document.caretRangeFromPoint(r,n);if(!o)return{word:""};let i=e.closest(".transcript-text");if(!i)return{word:""};let s=i.textContent||"",a=o.startContainer,c=o.startOffset,l=0,d=-1,u=e=>{if(!(d>=0)){if(e===a){d=l+c;return}if(e.nodeType===Node.TEXT_NODE){var r;l+=(null==(r=e.textContent)?void 0:r.length)||0}else if(e.nodeType===Node.ELEMENT_NODE)for(let r of Array.from(e.childNodes))u(r)}};if(u(i),d<0)return{word:""};let p=d,m=d;for(;p>0&&" "!==s[p-1]&&"—"!==s[p-1];)p--;for(;m<s.length&&" "!==s[m]&&"—"!==s[m];)m++;let g=s.substring(p,m);return{word:g=g.replace(/[.,!?;:'"()[\]{}]|…/g,"").trim(),rect:(null==(t=o.startContainer.nodeType===Node.TEXT_NODE?o.startContainer.parentElement:o.startContainer)?void 0:t.getBoundingClientRect())||void 0}}catch(e){return console.error("Error extracting word from text:",e),{word:""}}},e0=async e=>{var r;if(G)return;e.preventDefault(),e.stopPropagation();let n=e.target.closest(".transcript-text");if(!n)return;let t=n.textContent||"";if(!t)return;null==(r=window.getSelection())||r.removeAllRanges();let{word:o}=eZ(n,e.clientX,e.clientY),i=e1(o);if(!i||i.length>30||i.split(/\s+/).length>1)return;let s=RegExp("[^.!?]*\b".concat(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\b[^.!?]*[.!?]"),"i"),a=t.match(s),c=a?a[0].trim():t;V({isOpen:!0,word:i,apiData:null,gptDefinition:"",isLoading:!0}),document.body.style.overflow="hidden";try{let e=await eq(i,c),r=await eQ(i);V(n=>({...n,gptDefinition:e,apiData:r,isLoading:!1}))}catch(e){console.error("Definition or API error:",e),V(e=>({...e,gptDefinition:e.gptDefinition||"뜻풀이를 가져오는 중 오류가 발생했습니다.",apiData:null,isLoading:!1}))}};(0,o.useEffect)(()=>{G||I(null)},[G]);let e1=e=>{let r=e.toLowerCase();return r.endsWith("ies")&&r.length>3?r.slice(0,-3)+"y":r.endsWith("s")&&!r.endsWith("ss")&&r.length>3?r.slice(0,-1):r},e2=(e,r)=>{let n=e.text.split(" "),o=[];return n.forEach((r,n)=>{n===e.blankIndex?o.push((0,t.jsx)("span",{style:{textDecoration:"underline",textDecorationStyle:"solid",textDecorationThickness:"2px",color:l.primary,fontWeight:"bold",minWidth:"100px",display:"inline-block",textAlign:"center",margin:"0 4px"},children:e.userResponse||"________"},"blank-".concat(n))):o.push((0,t.jsx)("span",{style:{margin:"0 4px"},children:r},"word-".concat(n)))}),(0,t.jsxs)(p,{children:[(0,t.jsx)("div",{style:{fontSize:"1.2rem",lineHeight:"1.8",marginBottom:"1rem"},children:o}),e.isRecording&&(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:l.text.muted},children:(0,t.jsx)("i",{children:"Recording... Say a word to fill the blank"})}),e.userResponse&&(0,t.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid ".concat(l.border.light),fontSize:"0.9rem"},children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Your Answer:"}),' "',e.userResponse,'"']}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Original Word:"}),' "',e.originalWord,'"']}),void 0!==e.isCorrect&&(0,t.jsx)(w,{type:e.isCorrect?"success":"warning",children:e.isCorrect?"✓ Good! You used a different word.":"Try using a different word than the original."})]}),e.recordedAudioUrl&&(0,t.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,t.jsx)("audio",{id:"intern-audio-".concat(r),controls:!0,src:e.recordedAudioUrl,style:{width:"100%"}})})]})},e5=async()=>{if(!eX)throw Error("OpenAI API key is not configured");let e=await fetch("https://api.openai.com/v1/realtime/transcription_sessions",{method:"POST",headers:{Authorization:"Bearer ".concat(eX),"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to get ephemeral token: ".concat(e.status));return(await e.json()).client_secret},e6=async e=>{if(!el){ed(!0),ep(e),em.current=[],ee(r=>r.map((r,n)=>n===e?{...r,isRecording:!0,userResponse:"",transcriptionError:"",isCorrect:void 0}:r));try{let r=await e5(),n=new WebSocket("wss://api.openai.com/v1/realtime?intent=transcription&authorization=Bearer+".concat(r));ec.current=n,n.onopen=()=>{console.log("[OpenAI] WebSocket connected"),n.send(JSON.stringify({type:"transcription_session.update",input_audio_format:"pcm16",input_audio_transcription:{model:"gpt-4o-mini-transcribe",prompt:"",language:"en"},turn_detection:{type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:500},input_audio_noise_reduction:{type:"near_field"}}))},n.onmessage=r=>{let n=JSON.parse(r.data);if(console.log("[OpenAI] Received message:",n),"input_audio_buffer.committed"===n.type)console.log("[OpenAI] Audio buffer committed");else if("transcription.text.delta"===n.type)ee(r=>r.map((r,t)=>t===e?{...r,userResponse:n.text||""}:r));else if("transcription.text.done"===n.type){var t,o;let r=(null==(t=n.text)?void 0:t.trim())||"",i=null==(o=Z[e])?void 0:o.originalWord,s=r.toLowerCase()!==(null==i?void 0:i.toLowerCase());ee(n=>n.map((n,t)=>t===e?{...n,userResponse:r,isCorrect:s,isRecording:!1}:n))}},n.onerror=r=>{console.error("[OpenAI] WebSocket error:",r),ee(r=>r.map((r,n)=>n===e?{...r,transcriptionError:"WebSocket connection error",isRecording:!1}:r))},n.onclose=()=>{console.log("[OpenAI] WebSocket closed"),ed(!1),ep(null)},eM.current=new AudioContext({sampleRate:16e3}),await eM.current.audioWorklet.addModule("/scripts/audio-processor.js"),eB.current=await navigator.mediaDevices.getUserMedia({audio:!0}),eU.current=eM.current.createMediaStreamSource(eB.current),eL.current=new AudioWorkletNode(eM.current,"audio-processor",{processorOptions:{sampleRate:eM.current.sampleRate}}),eL.current.port.onmessage=e=>{if(e.data instanceof ArrayBuffer&&e.data.byteLength>0){var r;let n=new Float32Array(e.data.slice(0));if(em.current.push(n),(null==(r=ec.current)?void 0:r.readyState)===WebSocket.OPEN){let r=eK(e.data.slice(0)),n=btoa(String.fromCharCode(...Array.from(new Uint8Array(r))));ec.current.send(JSON.stringify({type:"input_audio_buffer.append",audio:n}))}}},eU.current.connect(eL.current)}catch(r){console.error("Error starting OpenAI recording:",r),ee(n=>n.map((n,t)=>t===e?{...n,transcriptionError:r.message,isRecording:!1}:n)),ed(!1),ep(null)}}},e3=async()=>{if(!el||null===eu)return;eL.current&&(eL.current.port.onmessage=null,eL.current.disconnect(),eL.current=null),eU.current&&(eU.current.disconnect(),eU.current=null),eB.current&&(eB.current.getTracks().forEach(e=>e.stop()),eB.current=null),eM.current&&"closed"!==eM.current.state&&(await eM.current.close(),eM.current=null),ec.current&&(ec.current.close(),ec.current=null);let e=null;if(em.current.length>0)try{let r=em.current.reduce((e,r)=>e+r.length,0),n=new Float32Array(r),t=0;for(let e of em.current)n.set(e,t),t+=e.length;let o=eH(n,16e3);e=URL.createObjectURL(o)}catch(e){console.error("Error encoding WAV:",e)}em.current=[],ed(!1),ep(null),ee(r=>r.map((r,n)=>n===eu?{...r,recordedAudioUrl:e,isRecording:!1}:r))},e4=(e,r)=>(0,t.jsxs)(p,{children:[(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,t.jsx)("h3",{style:{color:l.primary,fontSize:"2rem",margin:"1rem 0"},children:e.word}),(0,t.jsx)("p",{style:{color:l.text.secondary,fontSize:"1rem"},children:"Create a sentence using this word. You can write or speak your response."})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,t.jsx)(u,{onClick:()=>e7(r,"write"),style:{background:"write"===e.inputMode?"linear-gradient(135deg, ".concat(l.primary,", ").concat(l.primaryDark,")"):l.border.medium,color:"write"===e.inputMode?l.text.inverse:l.text.muted},children:(0,t.jsx)("span",{children:"✏️ Write"})}),(0,t.jsx)(u,{onClick:()=>e7(r,"speak"),style:{background:"speak"===e.inputMode?"linear-gradient(135deg, ".concat(l.primary,", ").concat(l.primaryDark,")"):l.border.medium,color:"speak"===e.inputMode?l.text.inverse:l.text.muted},children:(0,t.jsx)("span",{children:"\uD83C\uDFA4 Speak"})})]}),"write"===e.inputMode?(0,t.jsx)("div",{style:{marginBottom:"1rem"},children:(0,t.jsx)("textarea",{value:e.userSentence||"",onChange:e=>e8(r,e.target.value),placeholder:'Write a sentence using "'.concat(e.word,'"...'),style:{width:"100%",minHeight:"100px",padding:"1rem",fontSize:"1rem",border:"1px solid ".concat(l.border.medium),borderRadius:"8px",resize:"vertical",fontFamily:"inherit"}})}):(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("div",{style:{textAlign:"center",marginBottom:"1rem"},children:(0,t.jsx)(u,{onClick:()=>{e.isRecording?re():e9(r)},disabled:el&&!e.isRecording,children:(0,t.jsx)("span",{children:e.isRecording?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{}),"Stop Recording"]}):"\uD83C\uDFA4 Record Sentence"})})}),e.isRecording&&(0,t.jsx)("div",{style:{textAlign:"center",fontSize:"0.9rem",color:l.text.muted},children:(0,t.jsxs)("i",{children:['Recording... Speak your sentence using "',e.word,'"']})})]}),(e.userSentence||e.spokenSentence)&&(0,t.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid ".concat(l.border.light),fontSize:"0.95rem"},children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Your Sentence:"})}),(0,t.jsxs)("div",{style:{background:l.background,padding:"1rem",borderRadius:"8px",margin:"0.5rem 0",fontStyle:"italic"},children:['"',"write"===e.inputMode?e.userSentence:e.spokenSentence,'"']}),e.userSentence||e.spokenSentence?(0,t.jsx)(w,{type:"success",children:"✓ Sentence created successfully!"}):null]}),e.recordedAudioUrl&&(0,t.jsx)("div",{style:{marginTop:"0.75rem"},children:(0,t.jsx)("audio",{id:"creation-audio-".concat(r),controls:!0,src:e.recordedAudioUrl,style:{width:"100%"}})}),e.transcriptionError&&(0,t.jsx)(w,{type:"error",children:e.transcriptionError})]}),e7=(e,r)=>{et(n=>n.map((n,t)=>t===e?{...n,inputMode:r}:n))},e8=(e,r)=>{et(n=>n.map((n,t)=>t===e?{...n,userSentence:r,isCompleted:r.trim().length>0}:n))},e9=async e=>{if(!el){ed(!0),ep(e),em.current=[],et(r=>r.map((r,n)=>n===e?{...r,isRecording:!0,spokenSentence:"",transcriptionError:""}:r));try{let r=await e5(),n=new WebSocket("wss://api.openai.com/v1/realtime?intent=transcription&authorization=Bearer+".concat(r));ec.current=n,n.onopen=()=>{console.log("[OpenAI] WebSocket connected for sentence creation"),n.send(JSON.stringify({type:"transcription_session.update",input_audio_format:"pcm16",input_audio_transcription:{model:"gpt-4o-mini-transcribe",prompt:"",language:"en"},turn_detection:{type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:1e3},input_audio_noise_reduction:{type:"near_field"}}))},n.onmessage=r=>{let n=JSON.parse(r.data);if(console.log("[OpenAI] Received message for sentence creation:",n),"input_audio_buffer.committed"===n.type)console.log("[OpenAI] Audio buffer committed for sentence creation");else if("transcription.text.delta"===n.type)et(r=>r.map((r,t)=>t===e?{...r,spokenSentence:n.text||""}:r));else if("transcription.text.done"===n.type){var t;let r=(null==(t=n.text)?void 0:t.trim())||"";et(n=>n.map((n,t)=>t===e?{...n,spokenSentence:r,isCompleted:r.length>0,isRecording:!1}:n))}},n.onerror=r=>{console.error("[OpenAI] WebSocket error for sentence creation:",r),et(r=>r.map((r,n)=>n===e?{...r,transcriptionError:"WebSocket connection error",isRecording:!1}:r))},n.onclose=()=>{console.log("[OpenAI] WebSocket closed for sentence creation"),ed(!1),ep(null)},eM.current=new AudioContext({sampleRate:16e3}),await eM.current.audioWorklet.addModule("/scripts/audio-processor.js"),eB.current=await navigator.mediaDevices.getUserMedia({audio:!0}),eU.current=eM.current.createMediaStreamSource(eB.current),eL.current=new AudioWorkletNode(eM.current,"audio-processor",{processorOptions:{sampleRate:eM.current.sampleRate}}),eL.current.port.onmessage=e=>{if(e.data instanceof ArrayBuffer&&e.data.byteLength>0){var r;let n=new Float32Array(e.data.slice(0));if(em.current.push(n),(null==(r=ec.current)?void 0:r.readyState)===WebSocket.OPEN){let r=eK(e.data.slice(0)),n=btoa(String.fromCharCode(...Array.from(new Uint8Array(r))));ec.current.send(JSON.stringify({type:"input_audio_buffer.append",audio:n}))}}},eU.current.connect(eL.current)}catch(r){console.error("Error starting sentence creation recording:",r),et(n=>n.map((n,t)=>t===e?{...n,transcriptionError:r.message,isRecording:!1}:n)),ed(!1),ep(null)}}},re=async()=>{if(!el||null===eu)return;eL.current&&(eL.current.port.onmessage=null,eL.current.disconnect(),eL.current=null),eU.current&&(eU.current.disconnect(),eU.current=null),eB.current&&(eB.current.getTracks().forEach(e=>e.stop()),eB.current=null),eM.current&&"closed"!==eM.current.state&&(await eM.current.close(),eM.current=null),ec.current&&(ec.current.close(),ec.current=null);let e=null;if(em.current.length>0)try{let r=em.current.reduce((e,r)=>e+r.length,0),n=new Float32Array(r),t=0;for(let e of em.current)n.set(e,t),t+=e.length;let o=eH(n,16e3);e=URL.createObjectURL(o)}catch(e){console.error("Error encoding WAV for sentence creation:",e)}em.current=[],ed(!1),ep(null),et(r=>r.map((r,n)=>n===eu?{...r,recordedAudioUrl:e,isRecording:!1}:r))};return(0,t.jsxs)(d,{children:[(0,t.jsxs)(b,{children:[m&&(0,t.jsxs)(y,{children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("div",{className:"text",children:"Loading YouTube video..."})]}),h&&(0,t.jsxs)(f,{children:["Error loading video: ",h]}),!m&&!h&&n&&(0,t.jsx)("iframe",{id:"youtube-player-iframe",width:"100%",height:"100%",src:n,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),!m&&!h&&!n&&(0,t.jsx)(w,{type:"info",children:"YouTube video URL not available."})]}),(0,t.jsx)(eD,{children:[{id:1,name:"스크립트 공부",label:"Script Study"},{id:2,name:"쉐도잉",label:"Shadowing"},{id:3,name:"내재화",label:"Internalization"},{id:4,name:"분석",label:"Analysis"}].map((e,r)=>(0,t.jsxs)(eT,{isActive:J===e.id,isCompleted:J>e.id,children:[(0,t.jsx)(eP,{isActive:J===e.id,isCompleted:J>e.id,onClick:()=>X(e.id),children:e.id}),(0,t.jsx)(eW,{isActive:J===e.id,children:e.name})]},e.id))}),(0,t.jsxs)(e_,{children:[1===J&&!m&&!h&&C.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eF,{onClick:()=>{H(!G)},className:G?"active":"",children:(0,t.jsx)("span",{children:G?"✕ 오디오 모드 해제":"\uD83C\uDFA7 오디오 모드"})}),(0,t.jsx)(eb,{ref:R,className:"transcript-text",onClick:e0,children:C.map((e,r)=>(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(ew,{isActive:r===z,onClick:n=>{G&&A.current&&j&&(n.stopPropagation(),A.current.seekTo(e.start,!0),I(r))},children:e.word}),r<C.length-1&&" "]},"".concat(e.word,"-").concat(r,"-").concat(e.start)))})]}),2===J&&T.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ej,{children:(0,t.jsx)(ek,{children:T.map((e,r)=>(0,t.jsx)(eC,{isActive:r===B,children:(0,t.jsxs)(ev,{children:[(0,t.jsx)(W,{sentence:e,index:r}),(0,t.jsx)(eA,{children:(0,t.jsx)(u,{onClick:()=>{N&&F===B?e$():N||eV(B)},disabled:N&&F!==B,children:(0,t.jsx)("span",{children:N&&F===B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{}),"Stop Recording"]}):"Start Recording"})})}),e.assessmentError&&(0,t.jsx)(w,{type:"error",children:e.assessmentError})]})},e.id))})}),(0,t.jsxs)(eS,{children:[(0,t.jsx)(ez,{onClick:()=>Y(Math.max(0,B-1)),disabled:0===B,children:(0,t.jsx)("span",{children:"← Previous"})}),(0,t.jsx)(eI,{children:(0,t.jsx)(eR,{progress:(B+1)/T.length*100})}),(0,t.jsx)(ez,{onClick:()=>Y(Math.min(T.length-1,B+1)),disabled:B===T.length-1||!(()=>{var e,r,n,t,o,i,s,a,c,l;if(null===B||0===T.length)return!1;let d=T[B];if(!d||!d.assessmentResult||!d.assessmentResult.detailResult)return!1;let u=d.text.trim().split(/\s+/),p=(null==(r=d.assessmentResult)||null==(e=r.detailResult)?void 0:e.Words)||[],m=0,g=e=>e.toLowerCase().replace(/[.,!?;:'"()[\]{}]|…/g,"");for(;m<p.length&&(null==(t=p[m])||null==(n=t.PronunciationAssessment)?void 0:n.ErrorType)==="Insertion";)m++;for(let e of u){let r=null,n=!1,t=g(e);if(m<p.length){let e=p[m],o=g(e.Word),i=null==(s=e.PronunciationAssessment)?void 0:s.ErrorType;"Insertion"!==i&&t===o?(r=e,"Omission"===i&&(n=!0),m++):"Omission"===i&&t===o&&(n=!0,m++)}if(n||!r)return!1;{let e=null==(a=r.PronunciationAssessment)?void 0:a.AccuracyScore;if(void 0===e||e<70)return!1}for(;m<p.length&&(null==(i=p[m])||null==(o=i.PronunciationAssessment)?void 0:o.ErrorType)==="Insertion";)m++}for(;m<p.length;)null==(l=p[m])||null==(c=l.PronunciationAssessment)||c.ErrorType,m++;return!0})(),children:(0,t.jsx)("span",{children:"Next →"})})]}),(0,t.jsxs)(eE,{children:["Sentence ",B+1," of ",T.length]})]}),3===J&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,t.jsx)(u,{onClick:()=>ea("fill-blank"),style:{background:"fill-blank"===es?"linear-gradient(135deg, ".concat(l.primary,", ").concat(l.primaryDark,")"):l.border.medium,color:"fill-blank"===es?l.text.inverse:l.text.muted},children:(0,t.jsx)("span",{children:"Fill in the Blank"})}),(0,t.jsx)(u,{onClick:()=>ea("create-sentences"),style:{background:"create-sentences"===es?"linear-gradient(135deg, ".concat(l.primary,", ").concat(l.primaryDark,")"):l.border.medium,color:"create-sentences"===es?l.text.inverse:l.text.muted},children:(0,t.jsx)("span",{children:"Create Sentences"})})]}),"fill-blank"===es&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ej,{children:(0,t.jsx)(ek,{children:Z.map((e,r)=>(0,t.jsx)(eC,{isActive:r===q,children:(0,t.jsxs)(ev,{children:[e2(e,r),(0,t.jsx)(eA,{children:(0,t.jsx)(u,{onClick:()=>{el&&eu===q?e3():el||e6(q)},disabled:el&&eu!==q,children:(0,t.jsx)("span",{children:el&&eu===q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{}),"Stop Recording"]}):"Record Answer"})})}),e.transcriptionError&&(0,t.jsx)(w,{type:"error",children:e.transcriptionError})]})},e.id))})}),(0,t.jsxs)(eS,{children:[(0,t.jsx)(ez,{onClick:()=>Q(Math.max(0,q-1)),disabled:0===q,children:(0,t.jsx)("span",{children:"← Previous"})}),(0,t.jsx)(eI,{children:(0,t.jsx)(eR,{progress:(q+1)/Z.length*100})}),(0,t.jsx)(ez,{onClick:()=>Q(Math.min(Z.length-1,q+1)),disabled:q===Z.length-1,children:(0,t.jsx)("span",{children:"Next →"})})]}),(0,t.jsxs)(eE,{children:["Sentence ",q+1," of"," ",Z.length]})]}),"create-sentences"===es&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ej,{children:(0,t.jsx)(ek,{children:en.map((e,r)=>(0,t.jsx)(eC,{isActive:r===eo,children:(0,t.jsx)(ev,{children:e4(e,r)})},e.id))})}),(0,t.jsxs)(eS,{children:[(0,t.jsx)(ez,{onClick:()=>ei(Math.max(0,eo-1)),disabled:0===eo,children:(0,t.jsx)("span",{children:"← Previous"})}),(0,t.jsx)(eI,{children:(0,t.jsx)(eR,{progress:(eo+1)/en.length*100})}),(0,t.jsx)(ez,{onClick:()=>ei(Math.min(en.length-1,eo+1)),disabled:eo===en.length-1,children:(0,t.jsx)("span",{children:"Next →"})})]}),(0,t.jsxs)(eE,{children:["Word ",eo+1," of"," ",en.length]})]})]}),4===J&&(0,t.jsx)(ex,{sentences:T})]}),e&&(0,t.jsx)(f,{children:e}),(0,t.jsx)(D,{modalState:K,onClose:()=>{V(e=>({...e,isOpen:!1,apiData:null,gptDefinition:""})),document.body.style.overflow=""}})]})}},22661:(e,r,n)=>{"use strict";n.d(r,{Cn:()=>p,IG:()=>u,db:()=>d,j2:()=>l});var t=n(23915),o=n(16203),i=n(35317),s=n(90858),a=n(81427);let c=(0,t.Wp)({apiKey:"AIzaSyBC62vsKGQqdgpyC9RugoHEfh9UcRi2SMA",authDomain:"one-cup-eng.firebaseapp.com",projectId:"one-cup-eng",storageBucket:"one-cup-eng.firebasestorage.app",messagingSenderId:"615807178262",appId:"1:615807178262:web:9a96a5f0d94ae628d74737"}),l=(0,o.xI)(c),d=(0,i.aU)(c),u=(0,s.c7)(c),p=(0,a.Uz)(c,"asia-northeast3")},26308:()=>{},29645:()=>{},42250:()=>{},44573:()=>{},88286:(e,r,n)=>{Promise.resolve().then(n.bind(n,14087))},88632:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[992,888,66,262,432,74,441,964,358],()=>r(88286)),_N_E=e.O()}]);