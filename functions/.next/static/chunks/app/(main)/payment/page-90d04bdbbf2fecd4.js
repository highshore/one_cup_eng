(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{15220:(e,n,r)=>{Promise.resolve().then(r.bind(r,85257))},22661:(e,n,r)=>{"use strict";r.d(n,{Cn:()=>m,IG:()=>p,db:()=>c,j2:()=>l});var o=r(23915),t=r(16203),i=r(35317),a=r(90858),s=r(81427);let d=(0,o.Wp)({apiKey:"AIzaSyBC62vsKGQqdgpyC9RugoHEfh9UcRi2SMA",authDomain:"one-cup-eng.firebaseapp.com",projectId:"one-cup-eng",storageBucket:"one-cup-eng.firebasestorage.app",messagingSenderId:"615807178262",appId:"1:615807178262:web:9a96a5f0d94ae628d74737"}),l=(0,t.xI)(d),c=(0,i.aU)(d),p=(0,a.c7)(d),m=(0,s.Uz)(d,"asia-northeast3")},35695:(e,n,r)=>{"use strict";var o=r(18999);r.o(o,"useParams")&&r.d(n,{useParams:function(){return o.useParams}}),r.o(o,"usePathname")&&r.d(n,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(n,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(n,{useSearchParams:function(){return o.useSearchParams}}),r.o(o,"useServerInsertedHTML")&&r.d(n,{useServerInsertedHTML:function(){return o.useServerInsertedHTML}})},85257:(e,n,r)=>{"use strict";r.d(n,{default:()=>T});var o=r(95155),t=r(12115),i=r(43262),a=r(35695),s=r(22661),d=r(35317),l=r(81427);window.PaypleCpayCallback||(window.PaypleCpayCallback=[]),window.PaypleCpayCallback.push(function(e){console.log("Payple callback received through callback array:",e);try{console.log("Payple callback details:",{responseType:typeof e,hasData:!!e,keys:e?Object.keys(e):[],payResult:null==e?void 0:e.PCD_PAY_RST,payCode:null==e?void 0:e.PCD_PAY_CODE,payMsg:null==e?void 0:e.PCD_PAY_MSG,payerId:null==e?void 0:e.PCD_PAYER_ID,timestamp:new Date().toISOString()}),sessionStorage.setItem("paypleCallbackResponse",JSON.stringify(e));let n=sessionStorage.getItem("paymentSessionInfo");if(n){let r=JSON.parse(n);console.log("Session info found:",r),(0,l.Qg)(s.Cn,"verifyPaymentResult")({userId:r.userId,paymentParams:e,timestamp:Date.now()}).then(e=>{console.log("Payment verification result:",e.data),sessionStorage.setItem("paymentVerificationResult",JSON.stringify(e.data)),window.location.href="/payment/result"}).catch(e=>{console.error("Payment verification error:",e),sessionStorage.setItem("paymentVerificationError",JSON.stringify({message:e.message,code:e.code,details:e.details,timestamp:new Date().toISOString()})),window.location.href="/payment/result"})}else console.error("No session info found in sessionStorage"),window.location.href="/payment/result"}catch(e){console.error("Error in Payple callback handler:",e),console.error("Error details:",{message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:null,timestamp:new Date().toISOString()}),window.location.href="/payment/result"}return!0}),window.checkCallbackState=function(){var e;console.log("PaypleCpayCallback state:",{exists:!!window.PaypleCpayCallback,isArray:Array.isArray(window.PaypleCpayCallback),length:(null==(e=window.PaypleCpayCallback)?void 0:e.length)||0,sessionInfo:sessionStorage.getItem("paymentSessionInfo"),callbackResponse:sessionStorage.getItem("paypleCallbackResponse"),verificationResult:sessionStorage.getItem("paymentVerificationResult"),verificationError:sessionStorage.getItem("paymentVerificationError")})};let c=i.I4.div.withConfig({componentId:"sc-fc40d619-0"})(["background:white;border-radius:24px;box-shadow:0 8px 32px rgba(0,0,0,0.08);padding:2.5rem;width:100%;margin:2rem 0;border:1px solid rgba(255,255,255,0.8);backdrop-filter:blur(10px);@media (max-width:768px){padding:1.5rem;border-radius:16px;}"]),p=i.I4.div.withConfig({componentId:"sc-fc40d619-1"})(['text-align:center;margin-bottom:2.5rem;position:relative;&::after{content:"";position:absolute;bottom:-1rem;left:50%;transform:translateX(-50%);width:60px;height:3px;background:linear-gradient(90deg,#2c1810 0%,#4a2f23 100%);border-radius:2px;}@media (max-width:768px){margin-bottom:2rem;}']),m=i.I4.h1.withConfig({componentId:"sc-fc40d619-2"})(["font-size:2.5rem;font-weight:800;margin-bottom:0.5rem;color:#2c1810;letter-spacing:-0.02em;@media (max-width:768px){font-size:2rem;}"]),h=i.I4.p.withConfig({componentId:"sc-fc40d619-3"})(["font-size:1.1rem;font-weight:400;color:#666;margin:0;line-height:1.6;@media (max-width:768px){font-size:1rem;}"]),f=i.I4.div.withConfig({componentId:"sc-fc40d619-4"})(["background:#fafafa;border:2px solid #f0f0f0;border-radius:16px;padding:1.5rem;transition:all 0.3s ease;&:hover{border-color:#e0e0e0;background:#f8f8f8;}@media (max-width:768px){padding:1rem;border-radius:12px;}"]),g=i.I4.h3.withConfig({componentId:"sc-fc40d619-5"})(['font-size:1.25rem;font-weight:700;margin-bottom:1rem;color:#2c1810;display:flex;align-items:center;gap:0.5rem;&::before{content:"✨";font-size:1.2em;}']),u=i.I4.div.withConfig({componentId:"sc-fc40d619-6"})(["display:grid;gap:1rem;margin-bottom:1.5rem;"]),y=i.I4.div.withConfig({shouldForwardProp:e=>"$selected"!==e&&"$disabled"!==e}).withConfig({componentId:"sc-fc40d619-7"})(["border:2px solid ",";border-radius:12px;padding:1.25rem;cursor:",";transition:all 0.3s ease;background:",";position:relative;opacity:",";&:hover{border-color:",";transform:",";box-shadow:",";}"],e=>e.$selected?"#2c1810":"#e0e0e0",e=>e.$disabled?"not-allowed":"pointer",e=>e.$selected?"linear-gradient(135deg, #f5f5f5 0%, #fafafa 100%)":"white",e=>e.$disabled?.6:1,e=>e.$disabled?"#e0e0e0":e.$selected?"#2c1810":"#ccc",e=>e.$disabled?"none":"translateY(-2px)",e=>e.$disabled?"none":"0 4px 12px rgba(0, 0, 0, 0.1)"),x=i.I4.div.withConfig({componentId:"sc-fc40d619-8"})(["display:flex;align-items:center;margin-bottom:0.5rem;"]),w=i.I4.span.withConfig({componentId:"sc-fc40d619-9"})(["font-size:1.5rem;margin-right:0.75rem;"]),b=i.I4.h4.withConfig({componentId:"sc-fc40d619-10"})(["font-size:1.1rem;font-weight:700;color:#2c1810;margin:0;flex:1;"]),C=i.I4.span.withConfig({shouldForwardProp:e=>"$highlighted"!==e}).withConfig({componentId:"sc-fc40d619-11"})(["font-size:1rem;font-weight:",";color:",";background:",";padding:",";border-radius:",";"],e=>e.$highlighted?"800":"600",e=>e.$highlighted?"#2c1810":"#666",e=>e.$highlighted?"linear-gradient(90deg, #fff3e0, #ffecb3)":"transparent",e=>e.$highlighted?"0.25rem 0.5rem":"0",e=>e.$highlighted?"6px":"0"),I=i.I4.p.withConfig({componentId:"sc-fc40d619-12"})(["font-size:0.9rem;color:#666;margin:0.5rem 0 0 0;line-height:1.5;"]),j=i.I4.ul.withConfig({componentId:"sc-fc40d619-13"})(["list-style:none;padding:0;margin:1rem 0;"]),P=i.I4.li.withConfig({componentId:"sc-fc40d619-14"})(['display:flex;align-items:center;padding:0.5rem 0;font-size:0.9rem;color:#555;&::before{content:"✓";color:#4caf50;font-weight:bold;margin-right:0.75rem;width:16px;height:16px;border-radius:50%;background:#e8f5e8;display:flex;align-items:center;justify-content:center;font-size:0.7rem;}']),v=i.I4.button.withConfig({shouldForwardProp:e=>"$variant"!==e}).withConfig({componentId:"sc-fc40d619-15"})(["width:100%;padding:1rem 2rem;border:none;border-radius:12px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all 0.3s ease;position:relative;overflow:hidden;"," &:disabled{opacity:0.6;cursor:not-allowed;transform:none;box-shadow:none;}@media (max-width:768px){padding:0.875rem 1.5rem;font-size:1rem;}"],e=>"secondary"===e.$variant?"\n    background: transparent;\n    color: #2c1810;\n    border: 2px solid #2c1810;\n    \n    &:hover {\n      background: #2c1810;\n      color: white;\n      transform: translateY(-2px);\n      box-shadow: 0 6px 20px rgba(44, 24, 16, 0.3);\n    }\n  ":"\n    background: linear-gradient(135deg, #2c1810 0%, #4a2f23 100%);\n    color: white;\n    \n    &:hover:not(:disabled) {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 25px rgba(44, 24, 16, 0.4);\n    }\n    \n    &::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -100%;\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n      transition: left 0.5s;\n    }\n    \n    &:hover:not(:disabled)::before {\n      left: 100%;\n    }\n  "),k=i.I4.div.withConfig({componentId:"sc-fc40d619-16"})(["background:#f8f9fa;border:1px solid #e9ecef;border-radius:12px;padding:1.5rem;margin-top:1.5rem;@media (max-width:768px){padding:1rem;}"]),S=i.I4.h4.withConfig({componentId:"sc-fc40d619-17"})(['font-size:1rem;font-weight:700;color:#2c1810;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem;&::before{content:"\uD83D\uDCCB";}']),D=i.I4.div.withConfig({componentId:"sc-fc40d619-18"})(["margin-bottom:1rem;&:last-child{margin-bottom:0;}"]),E=i.I4.h5.withConfig({componentId:"sc-fc40d619-19"})(["font-size:0.9rem;font-weight:600;color:#495057;margin-bottom:0.5rem;"]),_=i.I4.p.withConfig({componentId:"sc-fc40d619-20"})(["font-size:0.85rem;color:#6c757d;line-height:1.5;margin-bottom:0.5rem;&:last-child{margin-bottom:0;}strong{color:#495057;font-weight:600;}a{color:#2c1810;text-decoration:none;font-weight:600;&:hover{text-decoration:underline;}}"]),$=i.I4.div.withConfig({componentId:"sc-fc40d619-21"})(["background:linear-gradient(135deg,#ffebee 0%,#ffcdd2 100%);border:2px solid #ef5350;border-radius:8px;padding:1rem;margin-top:1rem;color:#c62828;font-weight:500;text-align:center;"]),z=i.I4.div.withConfig({componentId:"sc-fc40d619-22"})(["border:3px solid rgba(255,255,255,0.3);border-left-color:white;border-radius:50%;width:20px;height:20px;animation:spin 1s linear infinite;display:inline-block;@keyframes spin{to{transform:rotate(360deg);}}"]),N=i.I4.div.withConfig({componentId:"sc-fc40d619-23"})(["background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border:2px solid #2196f3;border-radius:16px;padding:2rem;text-align:center;margin-top:1rem;"]),A=i.I4.div.withConfig({componentId:"sc-fc40d619-24"})(["font-size:3rem;margin-bottom:1rem;"]),O=i.I4.h3.withConfig({componentId:"sc-fc40d619-25"})(["font-size:1.5rem;font-weight:700;color:#1976d2;margin-bottom:1rem;"]),R=i.I4.p.withConfig({componentId:"sc-fc40d619-26"})(["font-size:1rem;color:#1565c0;margin-bottom:1.5rem;line-height:1.6;"]);function T(){let e=(0,a.useRouter)(),[n,r]=(0,t.useState)(!0),[i,T]=(0,t.useState)(!1),[M,U]=(0,t.useState)(null),[F,q]=(0,t.useState)(null),[Y,H]=(0,t.useState)(s.j2.currentUser),[L,G]=(0,t.useState)(!0),[J,Q]=(0,t.useState)(0),[B]=(0,t.useState)("밋업 참여 티켓");(0,t.useEffect)(()=>{let e=s.j2.onAuthStateChanged(e=>{e?(H(e),V(e.uid)):(r(!1),H(null))});return()=>e()},[]),(0,t.useEffect)(()=>{Q(4700*!!L)},[L]);let V=async e=>{try{let n=await (0,d.x7)((0,d.H9)(s.db,"users",e));n.exists()&&q(n.data()),r(!1)}catch(e){console.error("Error fetching user data:",e),U("사용자 정보를 가져오는 중 오류가 발생했습니다."),r(!1)}};(0,t.useEffect)(()=>(window.functionsInstance=s.Cn,()=>{window.functionsInstance=void 0}),[]);let W=async()=>{if(!Y){localStorage.setItem("returnUrl","/payment"),e.push("/auth");return}if(!L)return void U("밋업 참여를 선택해주세요.");if(J<=0){U("결제 금액을 계산하는 중 오류가 발생했습니다. 다시 시도해주세요."),console.error("Calculated amount is zero");return}T(!0),U(null);try{var n,r;let e={userId:Y.uid,userEmail:Y.email||"",userName:Y.displayName||"사용자",userPhone:(null==(n=Y.phoneNumber)?void 0:n.slice(-8))||Date.now().toString().slice(-8),pcd_amount:J,pcd_good_name:B,selected_categories:{meetup:L}};sessionStorage.setItem("paymentSessionInfo",JSON.stringify({userId:Y.uid,timestamp:Date.now(),amount:J,productName:B})),console.log("PaypleCpayCallback array setup:",{exists:!!window.PaypleCpayCallback,isArray:Array.isArray(window.PaypleCpayCallback),length:(null==(r=window.PaypleCpayCallback)?void 0:r.length)||0});let o=(0,l.Qg)(s.Cn,"getPaymentWindow");console.log("Calling getPaymentWindow with userInfo:",e);let t=(await o(e)).data;if(!(null==t?void 0:t.success))throw Error((null==t?void 0:t.message)||"결제 정보를 가져오는데 실패했습니다.");if(void 0===window.$||"function"!=typeof window.PaypleCpayAuthCheck)throw console.error("Payment scripts not loaded"),Error("결제 스크립트가 로드되지 않았습니다. 페이지를 새로고침 해주세요.");console.log("Opening payment window with params:",{PCD_RST_URL:t.paymentParams.PCD_RST_URL||"Not set",PCD_AMOUNT:t.paymentParams.PCD_AMOUNT,PCD_GOOD_NAME:t.paymentParams.PCD_GOOD_NAME}),console.log("Payment flow: User stays in frontend → Payple opens payment window → User completes payment → Payple sends POST to our HTTP function → Our callback array handles the frontend response → Redirect to result page"),window.PaypleCpayAuthCheck(t.paymentParams)}catch(e){console.error("Payment error:",e),U(e instanceof Error?e.message:"결제 초기화 중 오류가 발생했습니다."),T(!1)}};return((0,t.useEffect)(()=>{if(void 0===window.$){let e=document.createElement("script");e.src="https://code.jquery.com/jquery-3.6.0.min.js",e.async=!0,e.onload=()=>{console.log("jQuery successfully loaded");let e=document.createElement("script");e.src="https://cpay.payple.kr/js/v1/payment.js",e.async=!0,e.onload=()=>{console.log("Payple script successfully loaded")},e.onerror=e=>{console.error("Failed to load Payple script:",e)},document.body.appendChild(e)},e.onerror=e=>{console.error("Failed to load jQuery:",e)},document.body.appendChild(e)}else{let e=document.createElement("script");e.src="https://cpay.payple.kr/js/v1/payment.js",e.async=!0,e.onload=()=>{console.log("Payple script successfully loaded")},e.onerror=e=>{console.error("Failed to load Payple script:",e)},document.body.appendChild(e)}return()=>{let e=document.querySelector('script[src="https://code.jquery.com/jquery-3.6.0.min.js"]'),n=document.querySelector('script[src="https://cpay.payple.kr/js/v1/payment.js"]');e&&e.parentNode&&e.parentNode.removeChild(e),n&&n.parentNode&&n.parentNode.removeChild(n)}},[]),n)?(0,o.jsx)(z,{}):(0,o.jsxs)(c,{children:[(0,o.jsxs)(p,{children:[(0,o.jsx)(m,{children:"영어 한잔 멤버십"}),(0,o.jsx)(h,{children:"원하는 카테고리를 선택하고 멤버십을 시작하세요"})]}),(null==F?void 0:F.hasActiveSubscription)?(0,o.jsxs)(N,{children:[(0,o.jsx)(A,{children:"\uD83C\uDF89"}),(0,o.jsx)(O,{children:"멤버십 이용 중"}),(0,o.jsx)(R,{children:"이미 멤버십을 이용 중입니다. 현재 멤버십 플랜은 프로필 페이지에서 확인 가능합니다."}),(0,o.jsx)(v,{$variant:"secondary",onClick:()=>e.push("/profile"),children:"프로필로 돌아가기"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(f,{children:[(0,o.jsx)(g,{children:"밋업 멤버십"}),(0,o.jsxs)(u,{children:[(0,o.jsxs)(y,{$selected:L,onClick:()=>G(!L),children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(w,{children:"\uD83C\uDFAB"}),(0,o.jsx)(b,{children:"밋업 (Meetup) 참여 티켓"}),(0,o.jsx)(C,{children:"월 4,700원"})]}),(0,o.jsx)(I,{children:"통역사 출신과 함께하는 오프라인 영어 모임"})]}),(0,o.jsxs)(y,{$selected:!0,$disabled:!0,children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(w,{children:"\uD83D\uDCF0"}),(0,o.jsx)(b,{children:"아티클 서비스"}),(0,o.jsx)(C,{children:"포함됨"})]}),(0,o.jsx)(I,{children:"매주 새로운 영어 아티클과 단어장 서비스"})]}),(0,o.jsxs)(y,{$selected:!0,$disabled:!0,children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(w,{children:"\uD83D\uDE80"}),(0,o.jsx)(b,{children:"추후 개발 기능"}),(0,o.jsx)(C,{children:"포함됨"})]}),(0,o.jsx)(I,{children:"앞으로 추가될 모든 프리미엄 기능들"})]})]}),(0,o.jsxs)(j,{children:[(0,o.jsx)(P,{children:"월 4회 오프라인 영어 모임 참여 기회"}),(0,o.jsx)(P,{children:"통역사 및 다양한 업계 종사자와 실전 영어 대화"}),(0,o.jsx)(P,{children:"소규모 그룹 (5명 이하) 집중 학습"}),(0,o.jsx)(P,{children:"매주 해외에서 가장 핫한 영어 아티클 제공"}),(0,o.jsx)(P,{children:"단어장 무제한 저장 및 관리"}),(0,o.jsx)(P,{children:"아티클 속독 모드 및 음성 모드 제공"}),(0,o.jsx)(P,{children:"추후 추가되는 모든 프리미엄 기능"})]})]}),(0,o.jsx)(v,{onClick:W,disabled:i||!L,style:{marginTop:"1.5rem",position:"relative",zIndex:2},children:i?(0,o.jsx)(z,{}):"월 ".concat(J.toLocaleString(),"원에 멤버십 시작하기")}),M&&(0,o.jsx)($,{children:M}),(0,o.jsxs)(k,{children:[(0,o.jsx)(S,{children:"결제 및 환불 정책"}),(0,o.jsxs)(D,{children:[(0,o.jsx)(E,{children:"자동 결제 안내"}),(0,o.jsx)(_,{children:"요금제에 가입하시면 결제 시점을 기준으로 30일 후 자동 결제가 진행됩니다."})]}),(0,o.jsxs)(D,{children:[(0,o.jsx)(E,{children:"청약철회 (전액 환불) 가능 기간"}),(0,o.jsxs)(_,{children:["신규 결제(생애 최초 결제) 또는 매월 반복 결제 모두 결제일로부터 7일 이내에는 ",(0,o.jsx)("strong",{children:"청약철회(전액 환불)"}),"가 가능합니다."]})]}),(0,o.jsxs)(D,{children:[(0,o.jsx)(E,{children:"7일 이후 환불 규정"}),(0,o.jsx)(_,{children:"결제일로부터 7일이 지난 경우에는 청약철회가 아닌 해지 및 부분 환불 규정이 적용됩니다."})]}),(0,o.jsxs)(D,{children:[(0,o.jsx)(E,{children:"부분 환불 기준"}),(0,o.jsx)(_,{children:"예) 월 멤버십을 20일 사용 후 해지한 경우, 남은 10일분(30일 기준)에 해당하는 금액을 다음과 같이 환불해드립니다:"}),(0,o.jsx)(_,{children:(0,o.jsx)("strong",{children:"환불 금액 = (정가) \xd7 (남은 일수) \xf7 30"})})]}),(0,o.jsxs)(D,{children:[(0,o.jsx)(E,{children:"멤버십 정지 및 환불 요청 방법"}),(0,o.jsxs)(_,{children:["멤버십 해지 및 환불은"," ",(0,o.jsx)("a",{href:"/profile",onClick:n=>{n.preventDefault(),e.push("/profile")},children:"프로필 페이지"}),"에서 직접 신청하실 수 있습니다."]})]})]})]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[992,888,262,432,441,964,358],()=>n(15220)),_N_E=e.O()}]);