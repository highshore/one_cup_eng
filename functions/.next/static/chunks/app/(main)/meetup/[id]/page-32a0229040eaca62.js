(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{2942:(e,i,t)=>{"use strict";t.d(i,{EventDetailClient:()=>D});var n=t(95155),r=t(12115),o=t(35695),a=t(43262),s=t(9932),d=t(24735),c=t(93035),l=t(3985),p=t(62269),x=t(64045);let h=(0,a.i7)(["0%{background-position:-100% center;}100%{background-position:100% center;}"]),u=a.Ay.div.withConfig({componentId:"sc-f420165d-0"})(["min-height:100vh;background-color:transparent;color:#333;@media (max-width:768px){overflow-x:hidden;}"]),m=a.Ay.div.withConfig({componentId:"sc-f420165d-1"})(["height:40vh;position:relative;overflow:hidden;background-color:#000000;border-radius:20px;margin-top:2rem;@media (max-width:768px){height:35vh;margin-top:1rem;border-radius:12px;}"]),g=a.Ay.img.withConfig({componentId:"sc-f420165d-2"})(["width:100%;height:100%;object-fit:contain;position:absolute;top:0;left:0;opacity:",";transition:opacity 0.3s ease-in-out;"],e=>+!!e.$active),f=a.Ay.div.withConfig({componentId:"sc-f420165d-3"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#000000;color:#ccc;font-size:3rem;@media (max-width:768px){font-size:2rem;}"]),w=a.Ay.div.withConfig({componentId:"sc-f420165d-4"})(["padding:2.5rem 0 0 0;max-width:960px;margin:0 auto;@media (max-width:768px){padding:1.5rem 0 0 0;max-width:100%;}"]),b=a.Ay.div.withConfig({componentId:"sc-f420165d-5"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;border-radius:20px;background-color:",";color:",";font-size:14px;font-weight:600;margin-bottom:1rem;@media (max-width:768px){font-size:12px;padding:0.375rem 0.75rem;margin-bottom:0.75rem;border-radius:12px;}"],e=>{switch(e.$category.toLowerCase()){case"discussion":return"#e3f2fd";case"movie night":return"#ffebee";case"picnic":return"#e8f5e8";case"socializing":return"#fff3e0";default:return"#f5f5f5"}},e=>{switch(e.$category.toLowerCase()){case"discussion":return"#1976d2";case"movie night":return"#d32f2f";case"picnic":return"#388e3c";case"socializing":return"#f57c00";default:return"#666"}}),v=a.Ay.h1.withConfig({componentId:"sc-f420165d-6"})(["color:#333;font-size:28px;font-weight:800;margin:0 0 1rem 0;line-height:1.3;word-wrap:break-word;@media (max-width:768px){font-size:22px;margin:0 0 0.75rem 0;line-height:1.2;}"]),j=a.Ay.span.withConfig({componentId:"sc-f420165d-7"})(["color:",";font-weight:",";"],e=>e.$isUrgent?"#DC143C":"inherit",e=>e.$isUrgent?"bold":"inherit"),y=a.Ay.p.withConfig({componentId:"sc-f420165d-8"})(["color:#333;font-size:16px;line-height:1.6;margin:0 0 1.5rem 0;white-space:pre-wrap;word-wrap:break-word;@media (max-width:768px){font-size:14px;line-height:1.5;margin:0 0 1rem 0;}"]),C=a.Ay.h2.withConfig({componentId:"sc-f420165d-9"})(["color:#333;font-size:24px;font-weight:700;margin:1.5rem 0 1rem 0;@media (max-width:768px){font-size:20px;margin:1.25rem 0 0.75rem 0;}"]),k=a.Ay.div.withConfig({componentId:"sc-f420165d-10"})(["display:flex;align-items:flex-start;gap:8px;margin-bottom:8px;@media (max-width:768px){gap:6px;margin-bottom:6px;}"]),z=a.Ay.span.withConfig({componentId:"sc-f420165d-11"})(["color:#666;margin-top:3px;flex-shrink:0;display:flex;align-items:center;@media (max-width:768px){margin-top:2px;}"]),A=a.Ay.span.withConfig({componentId:"sc-f420165d-12"})(["color:#333;font-size:16px;line-height:1.4;word-wrap:break-word;@media (max-width:768px){font-size:14px;line-height:1.3;}"]),I=a.Ay.div.withConfig({componentId:"sc-f420165d-13"})(["display:flex;flex-wrap:wrap;gap:8px;margin:0.5rem 0;@media (max-width:768px){gap:6px;margin:0.375rem 0;}"]),$=a.Ay.div.withConfig({componentId:"sc-f420165d-14"})(["display:flex;gap:16px;max-width:920px;transition:opacity 0.3s ease-in-out,transform 0.3s ease-in-out;z-index:1000;"," @media (max-width:768px){flex-direction:column;gap:12px;width:auto;","}"],e=>{let{$isFloating:i}=e;return i?(0,a.AH)(["position:fixed;bottom:30px;left:20px;right:20px;margin:0 auto;padding-bottom:0;z-index:1050;"]):(0,a.AH)(["position:static;margin:2rem auto 0 auto;padding-bottom:0;z-index:1000;"])},e=>{let{$isFloating:i}=e;return i?(0,a.AH)(["position:fixed !important;bottom:20px !important;left:16px !important;right:16px !important;margin:0 !important;padding-bottom:16px;z-index:1050 !important;box-shadow:0 -4px 20px rgba(0,0,0,0.15);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);"]):(0,a.AH)(["position:static !important;margin:1.5rem auto 0 auto !important;z-index:1000;box-shadow:none;backdrop-filter:none;-webkit-backdrop-filter:none;"])}),S=a.Ay.button.withConfig({componentId:"sc-f420165d-15"})(["flex:1;padding:1rem;border:none;border-radius:20px;font-size:16px;font-weight:700;cursor:",";transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:8px;position:relative;overflow:hidden;background-color:",";"," color:",";&:hover{transform:",";box-shadow:",";}@media (max-width:768px){padding:0.875rem;font-size:14px;border-radius:16px;gap:6px;&:hover{transform:",";}}"],e=>"locked"===e.$variant?"not-allowed":"pointer",e=>"locked"===e.$variant?"#e0e0e0":"cancel"===e.$variant?"#990033":"#000000",e=>"join"===e.$variant&&(0,a.AH)(["background:linear-gradient( 90deg,#000000 0%,#000000 25%,#1a0808 35%,#2a0808 45%,#3a1010 50%,#2a0808 55%,#1a0808 65%,#000000 75%,#000000 100% );background-size:200% 100%;animation:"," 3s ease-in-out infinite;box-shadow:0 4px 15px rgba(0,0,0,0.3);"],h),e=>"locked"===e.$variant?"#999":"white",e=>"locked"!==e.$variant?"translateY(-2px)":"none",e=>"locked"===e.$variant?"none":"join"===e.$variant?"0 8px 25px rgba(0, 0, 0, 0.4)":"0 4px 12px rgba(0, 0, 0, 0.15)",e=>"locked"!==e.$variant?"translateY(-1px)":"none"),E=a.Ay.div.withConfig({componentId:"sc-f420165d-16"})(["position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:1050;"]),_=a.Ay.div.withConfig({componentId:"sc-f420165d-17"})(["background-color:white;padding:2rem;border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.3);display:flex;flex-direction:column;gap:1rem;width:90%;max-width:400px;text-align:center;h3{margin-top:0;font-size:1.5rem;color:#333;}p{font-size:1rem;color:#555;margin-bottom:1rem;}"]),F=a.Ay.button.withConfig({componentId:"sc-f420165d-18"})(["padding:0.75rem 1rem;border-radius:8px;border:1px solid ",";background-color:",";color:",";font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;&:hover{opacity:0.8;}"],e=>{let{$primary:i}=e;return i?"#000":"#ccc"},e=>{let{$primary:i}=e;return i?"#000":"white"},e=>{let{$primary:i}=e;return i?"white":"#333"});function D(){let e=(0,o.useParams)(),i=(0,o.useRouter)(),{currentUser:t,accountStatus:a}=(0,p.A)(),[h,D]=(0,r.useState)(null),[L,H]=(0,r.useState)(!0),[P,T]=(0,r.useState)(null),[B,N]=(0,r.useState)(0),O=(0,r.useRef)(null),[U,R]=(0,r.useState)(!1),M=null==e?void 0:e.id,[W,Y]=(0,r.useState)(!1),[q,G]=(0,r.useState)(!1),[Q,J]=(0,r.useState)(null),K=(0,r.useMemo)(()=>!!t&&!!h&&(h.participants.includes(t.uid)||h.leaders.includes(t.uid)),[t,h]);(0,r.useEffect)(()=>{if(!M){T("Event ID is required"),H(!1);return}let e=(0,s.ge)(M,e=>{D(e),H(!1),e?T(null):T("Event not found")});return()=>{e&&e()}},[M]),(0,r.useEffect)(()=>{if(h&&h.image_urls.length>1){let e=setInterval(()=>{N(e=>(e+1)%h.image_urls.length)},3e3);return()=>clearInterval(e)}},[h]);let V=async()=>{if(!t)return void i.push("/auth");if(!h)return void alert("이벤트 정보가 없습니다.");if(K)try{await (0,s.Gi)(h.id,t.uid),alert("밋업 참가가 취소되었습니다.")}catch(i){let e=i instanceof Error?i.message:"알 수 없는 오류가 발생했습니다.";alert("오류: 참가 취소에 실패했습니다. (".concat(e,")"))}else{try{if(!await (0,l.gD)(t.uid))return void G(!0)}catch(e){alert("구독 상태를 확인하는 중 오류가 발생했습니다. 다시 시도해주세요.");return}if("admin"===a||"leader"===a)Y(!0);else try{await (0,s.Pu)(h.id,t.uid,"participant"),alert("밋업에 참가자로 등록되셨습니다!")}catch(i){let e=i instanceof Error?i.message:"알 수 없는 오류가 발생했습니다.";alert("오류: 참가 신청에 실패했습니다. (".concat(e,")"))}}},X=async e=>{if(Y(!1),!t||!h)return void alert("사용자 정보 또는 이벤트 정보가 없습니다.");try{if(!await (0,l.gD)(t.uid))return void G(!0)}catch(e){alert("구독 상태를 확인하는 중 오류가 발생했습니다. 다시 시도해주세요.");return}try{await (0,s.Pu)(h.id,t.uid,e),alert("밋업에 ".concat("leader"===e?"리더":"참가자","로 등록되셨습니다!"))}catch(t){let i=t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다.";alert("오류: ".concat("leader"===e?"리더":"참가자","로 참가 신청에 실패했습니다. (").concat(i,")"))}};if(L)return(0,n.jsx)(u,{children:(0,n.jsx)("div",{style:{paddingTop:"80px",textAlign:"center",padding:"2rem"},children:(0,n.jsx)("div",{style:{color:"#666",fontSize:"16px",marginBottom:"1rem"},children:"Loading event details..."})})});if(P||!h)return(0,n.jsx)(u,{children:(0,n.jsxs)("div",{style:{paddingTop:"80px",textAlign:"center",padding:"2rem"},children:[(0,n.jsx)("div",{style:{color:"#666",fontSize:"16px",marginBottom:"1rem"},children:P||'Event with ID "'.concat(M,'" was not found.')}),(0,n.jsx)(S,{$variant:"join",onClick:()=>{i.push("/meetup")},style:{position:"static",margin:"0 auto",maxWidth:"200px"},children:"← Back to Events"})]})});let Z=(0,d.FQ)(h),ee=Z.isLocked,ei=h.title.toLowerCase().includes("movie")?"Movie Night":h.title.toLowerCase().includes("business")?"Socializing":"Discussion",{countdownPrefix:et,eventTitle:en,isUrgent:er}=(0,d.z0)(h),eo=h.participants.length+h.leaders.length,ea=async()=>t?!1===Q?void G(!0):void await V():void i.push("/auth");return(0,n.jsxs)(u,{children:[(0,n.jsx)(m,{children:h.image_urls.length>0?h.image_urls.map((e,i)=>(0,n.jsx)(g,{src:e,alt:"Event ".concat(i+1),$active:i===B},i)):(0,n.jsx)(f,{children:"\uD83D\uDDBC️"})}),(0,n.jsxs)(w,{children:[(0,n.jsxs)(b,{$category:ei,children:[(0,n.jsx)("span",{children:(e=>{switch(e.toLowerCase()){case"discussion":return"\uD83D\uDCAC";case"movie night":return"\uD83C\uDFAC";case"picnic":return"\uD83C\uDF49";case"socializing":return"\uD83D\uDC65";default:return"\uD83D\uDCC5"}})(ei)}),ei]}),(0,n.jsxs)(v,{children:[et&&(0,n.jsx)(j,{$isUrgent:er,children:et}),en]}),(0,n.jsx)(y,{children:h.description}),(0,n.jsx)(C,{children:"세부 사항"}),(0,n.jsxs)(k,{children:[(0,n.jsx)(z,{children:(0,n.jsx)(x.O4,{width:"18px",height:"18px"})}),(0,n.jsxs)(A,{children:["일정 시간: ",h.duration_minutes,"분"]})]}),(0,n.jsxs)(k,{children:[(0,n.jsx)(z,{children:(0,n.jsx)(x.CT,{width:"18px",height:"18px"})}),(0,n.jsxs)(A,{children:["시작 시간: ",(0,d.pd)(h)]})]}),(0,n.jsxs)(k,{children:[(0,n.jsx)(z,{children:(0,n.jsx)(x.ts,{width:"18px",height:"18px"})}),(0,n.jsxs)(A,{children:[h.location_name," (",h.location_address,","," ",h.location_extra_info,")"]})]}),(0,n.jsxs)(C,{children:["참가 예정 (",eo,"/",h.max_participants,")"]}),(0,n.jsxs)(I,{children:[h.participants.slice(0,12).map(e=>(0,n.jsx)(c.H8,{uid:e,size:40,isLeader:!1,onClick:()=>{}},e)),h.participants.length>12&&(0,n.jsxs)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#666"},children:["+",h.participants.length-12]},"more-participants")]}),(0,n.jsx)(C,{children:"운영진 및 리더"}),(0,n.jsx)(I,{children:h.leaders.map(e=>(0,n.jsx)(c.H8,{uid:e,size:40,isLeader:!0,onClick:()=>{}},e))}),(0,n.jsx)($,{ref:O,$isFloating:U,children:(0,n.jsxs)(S,{$variant:ee?"locked":K?"cancel":"join",onClick:ee?void 0:ea,children:[(0,n.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:ee?"\uD83D\uDD12":K?(0,n.jsx)(x.EO,{fillColor:"#FFFFFF",width:"20px",height:"20px"}):(0,n.jsx)(x.Cy,{fillColor:"#FFFFFF",width:"20px",height:"20px"})}),(()=>{if(!ee)return t?!1===Q?"구독하고 참가하기":K?"취소":"참가 신청하기":"로그인하고 참가하기";switch(Z.reason){case"started":case"lockdown":default:return"모집 종료";case"full":return"참가 인원 초과"}})()]})})]}),W&&(0,n.jsx)(E,{onClick:()=>Y(!1),children:(0,n.jsxs)(_,{onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h3",{children:"참여 방식 선택"}),(0,n.jsx)("p",{children:"이 밋업에 어떤 역할로 참여하시겠습니까?"}),(0,n.jsx)(F,{$primary:!0,onClick:()=>X("leader"),children:"리더로 참여"}),(0,n.jsx)(F,{onClick:()=>X("participant"),children:"참가자로 참여"}),(0,n.jsx)(F,{onClick:()=>Y(!1),style:{marginTop:"0.5rem"},children:"취소"})]})}),q&&(0,n.jsx)(E,{onClick:()=>G(!1),children:(0,n.jsxs)(_,{onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h3",{children:"구독이 필요합니다"}),(0,n.jsx)("p",{children:"밋업에 참가하시려면 활성화된 구독이 필요합니다."}),(0,n.jsx)("p",{children:"결제 페이지에서 구독을 시작하시겠습니까?"}),(0,n.jsx)(F,{$primary:!0,onClick:()=>{G(!1),i.push("/payment")},children:"결제 페이지로 이동"}),(0,n.jsx)(F,{onClick:()=>G(!1),style:{marginTop:"0.5rem"},children:"취소"})]})})]})}},62269:(e,i,t)=>{"use strict";t.d(i,{A:()=>c,default:()=>l});var n=t(95155),r=t(12115),o=t(16203),a=t(22661),s=t(35317);let d=(0,r.createContext)({currentUser:null,isLoading:!0,hasActiveSubscription:null,accountStatus:null,logout:async()=>{}}),c=()=>(0,r.useContext)(d),l=e=>{let{children:i}=e,[t,c]=(0,r.useState)(null),[l,p]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null),[u,m]=(0,r.useState)(null);(0,r.useEffect)(()=>(0,o.hg)(a.j2,async e=>{if(c(e),e)try{let i=(0,s.H9)(a.db,"users",e.uid),t=await (0,s.x7)(i);if(t.exists()){let e=t.data();h(e.hasActiveSubscription||!1),m(e.account_status||"user")}else h(!1),m("user")}catch(e){console.error("Error fetching user data:",e),h(!1),m("user")}else h(null),m(null);p(!1)}),[]);let g=async()=>{await (0,o.CI)(a.j2)};return(0,n.jsx)(d.Provider,{value:{currentUser:t,isLoading:l,hasActiveSubscription:x,accountStatus:u,logout:g},children:i})}},86224:(e,i,t)=>{Promise.resolve().then(t.bind(t,2942))}},e=>{var i=i=>e(e.s=i);e.O(0,[992,888,262,432,60,441,964,358],()=>i(86224)),_N_E=e.O()}]);