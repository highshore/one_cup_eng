"use strict";exports.id=131,exports.ids=[131],exports.modules={9086:(e,t,r)=>{let o;r.d(t,{db:()=>o});var i=r(46675),n=r.n(i),a=r(33873),s=r.n(a),l=r(29021),d=r.n(l);let c="1"===process.env.VERCEL&&!process.env.VERCEL_ENV;try{if(n().apps.length||c)c?o={collection:()=>({where:()=>({get:()=>Promise.resolve({docs:[]})}),doc:()=>({get:()=>Promise.resolve({exists:!1,data:()=>null})})})}:(o=n().firestore(),n().auth());else{let e=null;try{let t=s().join(process.cwd(),"firebase_service_account.json");d().existsSync(t)&&(console.log("Initializing Firebase Admin SDK with service account file"),e=n().credential.cert(t))}catch(e){console.log("Service account file not available, trying environment variables")}if(!e){let t=process.env.FIREBASE_PROJECT_ID,r=process.env.FIREBASE_PRIVATE_KEY,o=process.env.FIREBASE_CLIENT_EMAIL;if(t&&r&&o){console.log("Initializing Firebase Admin SDK with environment variables");try{let i=r.replace(/\\n/g,"\n");e=n().credential.cert({projectId:t,privateKey:i,clientEmail:o})}catch(e){console.error("Failed to create Firebase credential:",e)}}else console.log("Firebase environment variables not found - this is normal during build")}e?(n().initializeApp({credential:e,databaseURL:"https://one-cup-eng-default-rtdb.firebaseio.com/"}),o=n().firestore(),n().auth()):(console.log("Firebase Admin SDK not initialized - using mock objects"),o={collection:()=>({where:()=>({get:()=>Promise.resolve({docs:[]})}),doc:()=>({get:()=>Promise.resolve({exists:!1,data:()=>null})})})})}}catch(e){console.warn("Firebase Admin SDK initialization failed:",e),o={collection:()=>({where:()=>({get:()=>Promise.resolve({docs:[]})}),doc:()=>({get:()=>Promise.resolve({exists:!1,data:()=>null})})})}}},36099:(e,t,r)=>{r.d(t,{c:()=>_});var o=r(60687),i=r(43210),n=r(4529),a=r(70146),s=r(83503);let l=e=>{let t=Date.now(),r=Math.random().toString(36).substring(2,15),o=e.split(".").pop()||"jpg";return`${t}_${r}.${o}`},d=async e=>{try{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))throw Error("Only JPEG, PNG, and WebP images are allowed");if(e.size>5242880)throw Error("Image size must be less than 5MB");let t=l(e.name),r=(0,a.KR)(s.IG,`blog/${t}`),o=await (0,a.D)(r,e),i=await (0,a.qk)(o.ref);return console.log("Blog image uploaded successfully:",i),i}catch(e){throw console.error("Error uploading blog image:",e),e}},c=e=>{let t=[],r=[],o=Array.from(e),i=["image/jpeg","image/jpg","image/png","image/webp"];return o.forEach((e,o)=>i.includes(e.type)?e.size>5242880?void r.push(`File ${o+1}: Image size must be less than 5MB`):void t.push(e):void r.push(`File ${o+1}: Only JPEG, PNG, and WebP images are allowed`)),{valid:t,errors:r}},g={primary:"#2C1810",primaryLight:"#4A2F23",primaryPale:"#F5EBE6",primaryBg:"#FDF9F6",accent:"#C8A27A",text:{dark:"#2C1810",medium:"#4A2F23",light:"#8B6B4F"}},p=n.Ay.div.withConfig({componentId:"sc-e274f75c-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;overflow-y:auto;"]),m=n.Ay.div.withConfig({componentId:"sc-e274f75c-1"})(['background:white;border-radius:16px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;box-shadow:0 16px 48px rgba(0,0,0,0.2);font-family:"Noto Sans KR",sans-serif;@media (max-width:768px){max-height:95vh;border-radius:14px;}']),u=n.Ay.div.withConfig({componentId:"sc-e274f75c-2"})(["padding:1.25rem 1.75rem;border-bottom:1px solid ",";background:",";border-radius:16px 16px 0 0;@media (max-width:768px){padding:1rem 1.25rem;border-radius:14px 14px 0 0;}"],g.primaryPale,g.primaryBg),h=n.Ay.h2.withConfig({componentId:"sc-e274f75c-3"})(["font-size:1.4rem;font-weight:700;color:",';margin:0;font-family:"Noto Sans KR",sans-serif;@media (max-width:768px){font-size:1.2rem;}'],g.text.dark),f=n.Ay.form.withConfig({componentId:"sc-e274f75c-4"})(["padding:1.5rem;@media (max-width:768px){padding:1.25rem;}"]),x=n.Ay.div.withConfig({componentId:"sc-e274f75c-5"})(["margin-bottom:1.25rem;@media (max-width:768px){margin-bottom:1rem;}"]),b=n.Ay.label.withConfig({componentId:"sc-e274f75c-6"})(["display:block;font-size:0.85rem;font-weight:600;color:",';margin-bottom:0.4rem;font-family:"Noto Sans KR",sans-serif;'],g.text.dark),y=n.Ay.input.withConfig({componentId:"sc-e274f75c-7"})(["width:100%;padding:0.6rem 0.8rem;border:2px solid ",";border-radius:10px;font-size:0.95rem;color:",';background:white;transition:all 0.2s ease;box-sizing:border-box;font-family:"Noto Sans KR",sans-serif;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}&::placeholder{color:",";}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.9rem;border-radius:8px;}"],g.primaryPale,g.text.dark,g.accent,g.text.light),w=n.Ay.textarea.withConfig({componentId:"sc-e274f75c-8"})(["width:100%;min-height:100px;padding:0.6rem 0.8rem;border:2px solid ",";border-radius:10px;font-size:0.85rem;color:",';background:white;transition:all 0.2s ease;resize:vertical;font-family:"Noto Sans KR",sans-serif;line-height:1.5;box-sizing:border-box;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}&::placeholder{color:",";}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.8rem;min-height:80px;border-radius:8px;}"],g.primaryPale,g.text.dark,g.accent,g.text.light),v=n.Ay.textarea.withConfig({componentId:"sc-e274f75c-9"})(["width:100%;min-height:280px;padding:0.8rem;border:2px solid ",";border-radius:10px;font-size:0.95rem;color:",';background:white;transition:all 0.2s ease;resize:vertical;font-family:"Noto Sans KR",sans-serif;line-height:1.6;box-sizing:border-box;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}&::placeholder{color:",";}@media (max-width:768px){padding:0.7rem;font-size:0.9rem;min-height:220px;border-radius:8px;}"],g.primaryPale,g.text.dark,g.accent,g.text.light),A=n.Ay.select.withConfig({componentId:"sc-e274f75c-10"})(["width:100%;padding:0.6rem 0.8rem;border:2px solid ",";border-radius:10px;font-size:0.95rem;color:",';background:white;transition:all 0.2s ease;box-sizing:border-box;font-family:"Noto Sans KR",sans-serif;&:focus{outline:none;border-color:',";box-shadow:0 0 0 3px rgba(200,162,122,0.1);}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.9rem;border-radius:8px;}"],g.primaryPale,g.text.dark,g.accent),j=(0,n.Ay)(y).withConfig({componentId:"sc-e274f75c-11"})(["&::placeholder{color:",";}"],g.text.light),I=n.Ay.div.withConfig({componentId:"sc-e274f75c-12"})(["display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;@media (max-width:768px){grid-template-columns:1fr;gap:0.6rem;}"]),k=n.Ay.div.withConfig({componentId:"sc-e274f75c-13"})(["display:flex;gap:0.8rem;justify-content:flex-end;margin-top:1.5rem;padding-top:1.25rem;border-top:1px solid ",";@media (max-width:768px){flex-direction:column-reverse;gap:0.6rem;margin-top:1.25rem;padding-top:1rem;}"],g.primaryPale),C=n.Ay.button.withConfig({componentId:"sc-e274f75c-14"})(['padding:0.6rem 1.25rem;border:none;border-radius:25px;font-size:0.95rem;font-weight:600;font-family:"Noto Sans KR",sans-serif;cursor:pointer;transition:all 0.3s ease;min-width:110px;'," &:active{transform:translateY(0);}&:disabled{opacity:0.6;cursor:not-allowed;transform:none;}@media (max-width:768px){padding:0.5rem 1rem;font-size:0.9rem;min-width:90px;}"],e=>{switch(e.$variant){case"primary":return`
          background: ${g.primary};
          color: white;
          box-shadow: 0 4px 12px rgba(44, 24, 16, 0.2);
          
          &:hover {
            background: ${g.primaryLight};
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(44, 24, 16, 0.3);
          }
        `;case"danger":return`
          background: #ef4444;
          color: white;
          box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
          
          &:hover {
            background: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.3);
          }
        `;default:return`
          background: ${g.primaryPale};
          color: ${g.text.dark};
          
          &:hover {
            background: ${g.accent};
            color: white;
            transform: translateY(-2px);
          }
        `}}),E=n.Ay.div.withConfig({componentId:"sc-e274f75c-15"})(["text-align:right;font-size:0.75rem;color:",';margin-top:0.2rem;font-family:"Noto Sans KR",sans-serif;'],g.text.light),D=n.Ay.div.withConfig({componentId:"sc-e274f75c-16"})(["font-size:0.75rem;color:",';margin-top:0.2rem;line-height:1.4;font-family:"Noto Sans KR",sans-serif;'],g.text.light),z=n.Ay.button.withConfig({componentId:"sc-e274f75c-17"})(["padding:0.6rem 0.8rem;background:",';color:white;border:none;border-radius:8px;font-size:0.85rem;font-weight:600;font-family:"Noto Sans KR",sans-serif;cursor:pointer;transition:all 0.2s ease;white-space:nowrap;display:flex;align-items:center;gap:0.4rem;min-width:110px;justify-content:center;&:hover{background:',";transform:translateY(-1px);}&:disabled{opacity:0.6;cursor:not-allowed;transform:none;}@media (max-width:768px){padding:0.5rem 0.7rem;font-size:0.8rem;min-width:90px;gap:0.3rem;}"],g.accent,g.primaryLight),S=n.Ay.input.withConfig({componentId:"sc-e274f75c-18"})(["display:none;"]),F=n.Ay.div.withConfig({componentId:"sc-e274f75c-19"})(["margin-top:0.4rem;display:flex;align-items:center;gap:0.4rem;img{width:50px;height:50px;object-fit:cover;border-radius:6px;border:1px solid ",";}@media (max-width:768px){margin-top:0.3rem;gap:0.3rem;img{width:40px;height:40px;border-radius:5px;}}"],g.primaryPale),P=n.Ay.button.withConfig({componentId:"sc-e274f75c-20"})(["background:#ef4444;color:white;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;&:hover{background:#dc2626;transform:scale(1.1);}"]),R=n.Ay.div.withConfig({componentId:"sc-e274f75c-21"})(["display:flex;gap:0.5rem;margin-bottom:0.5rem;flex-wrap:wrap;@media (max-width:768px){gap:0.375rem;}"]),B=n.Ay.div.withConfig({componentId:"sc-e274f75c-22"})(["display:flex;gap:0.5rem;align-items:center;margin-bottom:0.5rem;flex-wrap:wrap;padding:0.5rem;background:",";border-radius:8px;@media (max-width:768px){gap:0.4rem;padding:0.4rem;}"],g.primaryBg),K=n.Ay.button.withConfig({componentId:"sc-e274f75c-23"})(["background:",";color:",";border:1px solid ",';border-radius:6px;padding:0.4rem 0.6rem;font-size:0.85rem;font-weight:600;font-family:"Noto Sans KR",sans-serif;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:0.3rem;&:hover{background:',";}&:disabled{opacity:0.5;cursor:not-allowed;}@media (max-width:768px){padding:0.3rem 0.5rem;font-size:0.8rem;}"],e=>e.$active?g.accent:"white",e=>e.$active?"white":g.text.dark,g.primaryPale,e=>e.$active?g.primaryLight:g.primaryPale),$=n.Ay.div.withConfig({componentId:"sc-e274f75c-24"})(["display:flex;flex-direction:column;gap:0.5rem;"]),N=n.Ay.button.withConfig({componentId:"sc-e274f75c-25"})(["padding:0.5rem 0.75rem;background:",";color:",";border:none;border-radius:6px;font-size:0.8rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:0.375rem;&:hover{background:",";color:white;}&:disabled{opacity:0.6;cursor:not-allowed;}@media (max-width:768px){padding:0.4rem 0.6rem;font-size:0.75rem;}"],g.primaryPale,g.text.dark,g.accent),T=n.Ay.div.withConfig({componentId:"sc-e274f75c-26"})(["margin-top:0.5rem;padding:0.5rem;background:",";border-radius:6px;font-size:0.8rem;color:",";border:1px solid ",";"],g.primaryBg,g.text.medium,g.primaryPale),_=({post:e,onSave:t,onCancel:r})=>{let[n,a]=(0,i.useState)({title:"",content:"",excerpt:"",status:"draft",featuredImage:"",tags:""}),[s,l]=(0,i.useState)(!1),[g,_]=(0,i.useState)(!1),[L,G]=(0,i.useState)(""),J=(0,i.useRef)(null),Y=(0,i.useRef)(null);(0,i.useEffect)(()=>{e&&a({title:e.title||"",content:e.content||"",excerpt:e.excerpt||"",status:e.status||"draft",featuredImage:e.featuredImage||"",tags:e.tags?.join(", ")||""})},[e]);let H=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))},M=async e=>{if(e.preventDefault(),!n.title.trim())return void alert("제목을 입력해주세요.");if(!n.content.trim())return void alert("내용을 입력해주세요.");l(!0);try{let e={title:n.title.trim(),content:n.content.trim(),status:n.status};if(n.excerpt.trim()&&(e.excerpt=n.excerpt.trim()),n.featuredImage.trim()&&(e.featuredImage=n.featuredImage.trim()),n.tags.trim()){let t=n.tags.split(",").map(e=>e.trim()).filter(e=>e.length>0);t.length>0&&(e.tags=t)}console.log("Submitting blog post data:",e),await t(e)}catch(e){console.error("Failed to save post:",e),alert("저장에 실패했습니다. 다시 시도해주세요.")}finally{l(!1)}},V=async e=>{let t=e.target.files;if(!t||0===t.length)return;let{valid:r,errors:o}=c(t);if(o.length>0)return void alert("이미지 업로드 오류:\n"+o.join("\n"));if(0!==r.length)try{_(!0),G("대표 이미지 업로드 중...");let e=await d(r[0]);a(t=>({...t,featuredImage:e})),G("")}catch(e){console.error("Featured image upload failed:",e),alert("이미지 업로드에 실패했습니다: "+(e instanceof Error?e.message:String(e)))}finally{_(!1),J.current&&(J.current.value="")}},q=async e=>{let t=e.target.files;if(!t||0===t.length)return;let{valid:r,errors:o}=c(t);if(o.length>0)return void alert("이미지 업로드 오류:\n"+o.join("\n"));if(0!==r.length)try{_(!0),G("컨텐츠 이미지 업로드 중...");let e=await d(r[0]),t=`
![이미지 설명](${e})
`,o=document.getElementById("content");if(o){let e=o.selectionStart,r=o.selectionEnd,i=n.content,s=i.substring(0,e)+t+i.substring(r);a(e=>({...e,content:s})),setTimeout(()=>{o.focus(),o.setSelectionRange(e+t.length,e+t.length)},100)}else a(e=>({...e,content:e.content+t}));G("")}catch(e){console.error("Content image upload failed:",e),alert("이미지 업로드에 실패했습니다: "+(e instanceof Error?e.message:String(e)))}finally{_(!1),Y.current&&(Y.current.value="")}},O=e=>{let t=document.getElementById("content");if(t){let r=t.scrollTop,o=t.selectionStart,i=t.selectionEnd,s=n.content,l=s.substring(o,i);if(!l)return;let d="";"bold"===e?d=`**${l}**`:"crimson"===e&&(d=`<span style="color: crimson; font-weight: bold;">${l}</span>`);let c=s.substring(0,o)+d+s.substring(i);a(e=>({...e,content:c})),setTimeout(()=>{let e=o+d.length;t.setSelectionRange(e,e),t.scrollTop=r,t.focus()},50)}};return(0,o.jsx)(p,{onClick:e=>{e.target===e.currentTarget&&r()},children:(0,o.jsxs)(m,{children:[(0,o.jsx)(u,{children:(0,o.jsx)(h,{children:e?"포스트 편집":"새 포스트 작성"})}),(0,o.jsxs)(f,{onSubmit:M,children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{htmlFor:"title",children:"제목 *"}),(0,o.jsx)(y,{id:"title",name:"title",type:"text",value:n.title,onChange:H,placeholder:"블로그 포스트 제목을 입력하세요",required:!0}),(0,o.jsxs)(E,{children:[n.title.length,"/100"]})]}),(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{htmlFor:"excerpt",children:"요약"}),(0,o.jsx)(w,{id:"excerpt",name:"excerpt",value:n.excerpt,onChange:H,placeholder:"포스트의 간단한 요약을 작성하세요 (선택사항)",rows:3}),(0,o.jsxs)(E,{children:[n.excerpt.length,"/300"]})]}),(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{htmlFor:"content",children:"내용 *"}),(0,o.jsxs)(R,{children:[(0,o.jsx)(N,{type:"button",onClick:()=>{let e=document.getElementById("content");if(e){let t=e.scrollTop,r=e.selectionStart,o=e.selectionEnd,i=n.content,s=i.substring(0,r),l=""===s||s.endsWith("\n")?"# ":"\n# ",d=i.substring(0,r)+l+i.substring(o);a(e=>({...e,content:d})),setTimeout(()=>{e.setSelectionRange(r+l.length,r+l.length),e.scrollTop=t,e.focus()},50)}},disabled:g,children:"\uD83D\uDCDD 헤더 삽입"}),(0,o.jsx)(N,{type:"button",onClick:()=>{Y.current?.click()},disabled:g,children:"\uD83D\uDDBC️ 이미지 삽입"}),(0,o.jsx)(D,{style:{margin:0,fontSize:"0.75rem"},children:"헤더는 '# ' 형식으로, 이미지는 마크다운 형식으로 커서 위치에 삽입됩니다"})]}),(0,o.jsxs)(B,{children:[(0,o.jsxs)(K,{type:"button",onClick:()=>O("bold"),disabled:g,title:"굵은 텍스트",children:[(0,o.jsx)("strong",{children:"B"}),"굵게"]}),(0,o.jsxs)(K,{type:"button",onClick:()=>O("crimson"),disabled:g,title:"빨간 굵은 텍스트",style:{color:"crimson"},children:[(0,o.jsx)("strong",{style:{color:"crimson"},children:"A"}),"빨간색"]}),(0,o.jsx)(D,{style:{margin:0,fontSize:"0.75rem"},children:"텍스트를 선택한 후 버튼을 클릭하거나, 버튼을 클릭하여 서식을 삽입하세요"})]}),(0,o.jsx)(v,{id:"content",name:"content",value:n.content,onChange:H,placeholder:"여기에 블로그 포스트 내용을 작성하세요...",required:!0}),(0,o.jsxs)(E,{children:[n.content.length," 글자"]}),(0,o.jsx)(S,{ref:Y,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:q})]}),(0,o.jsxs)(I,{children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{htmlFor:"status",children:"상태"}),(0,o.jsxs)(A,{id:"status",name:"status",value:n.status,onChange:H,children:[(0,o.jsx)("option",{value:"draft",children:"초안"}),(0,o.jsx)("option",{value:"published",children:"발행"})]})]}),(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{children:"대표 이미지"}),(0,o.jsxs)($,{children:[(0,o.jsx)(z,{type:"button",onClick:()=>{J.current?.click()},disabled:g,children:"\uD83D\uDCC1 파일 선택"}),n.featuredImage&&(0,o.jsxs)(F,{children:[(0,o.jsx)("img",{src:n.featuredImage,alt:"대표 이미지 미리보기"}),(0,o.jsx)(P,{type:"button",onClick:()=>{a(e=>({...e,featuredImage:""}))},title:"이미지 제거",children:"✕"})]}),(0,o.jsx)(S,{ref:J,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:V})]})]})]}),(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{htmlFor:"tags",children:"태그"}),(0,o.jsx)(j,{id:"tags",name:"tags",type:"text",value:n.tags,onChange:H,placeholder:"태그를 쉼표로 구분하여 입력하세요 (예: 영어학습, 비즈니스, 팁)"}),(0,o.jsx)(D,{children:"태그는 쉼표(,)로 구분하여 입력해주세요. 독자들이 관련 포스트를 찾는데 도움이 됩니다."})]}),L&&(0,o.jsx)(T,{children:L}),(0,o.jsxs)(k,{children:[(0,o.jsx)(C,{type:"button",onClick:r,disabled:g,children:"취소"}),(0,o.jsx)(C,{type:"submit",$variant:"primary",disabled:s||g,children:s?"저장 중...":g?"업로드 중...":e?"수정하기":"발행하기"})]})]})]})})}},43136:(e,t,r)=>{r.d(t,{UA:()=>s,ck:()=>l,lo:()=>a});var o=r(9086);let i="blog_posts",n=e=>{let t=e.data();return{id:e.id,title:t.title||"",content:t.content||"",excerpt:t.excerpt||"",createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()||new Date,publishedAt:t.publishedAt?.toDate()||null,status:t.status||"draft",slug:t.slug||"",featuredImage:t.featuredImage||"",tags:t.tags||[],views:t.views||0,likes:t.likes||0,likedBy:t.likedBy||[]}},a=async()=>{try{if(!o.db.collection)return console.warn("Firebase Admin SDK not initialized, returning empty blog posts"),[];let e=o.db.collection(i);return(await e.get()).docs.map(n).filter(e=>"published"===e.status).sort((e,t)=>{let r=e.publishedAt||e.createdAt;return(t.publishedAt||t.createdAt).getTime()-r.getTime()})}catch(e){return console.error("Error fetching published blog posts on server:",e),[]}},s=async e=>{try{if(!o.db.collection)return console.warn("Firebase Admin SDK not initialized, returning null for blog post"),null;let t=o.db.collection(i).doc(e),r=await t.get();if(r.exists){let e=n(r);if("published"===e.status)return e}return null}catch(e){return console.error("Error fetching published blog post by ID on server:",e),null}},l=async()=>{try{if(!o.db.collection)return console.warn("Firebase Admin SDK not initialized, returning empty blog post IDs"),[];let e=o.db.collection(i);return(await e.get()).docs.map(n).filter(e=>"published"===e.status).map(e=>e.id)}catch(e){return console.error("Error fetching blog post IDs on server:",e),[]}}},87850:(e,t,r)=>{r.d(t,{$r:()=>d,CF:()=>l,Fd:()=>p,TB:()=>c,ZA:()=>g,m0:()=>u,s2:()=>m});var o=r(75535),i=r(83503);let n="blog_posts",a=e=>e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").trim(),s=e=>{let t=e.data();return{id:e.id,title:t.title||"",content:t.content||"",excerpt:t.excerpt||"",createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()||new Date,publishedAt:t.publishedAt?.toDate()||null,status:t.status||"draft",slug:t.slug||"",featuredImage:t.featuredImage||"",tags:t.tags||[],views:t.views||0,likes:t.likes||0,likedBy:t.likedBy||[]}},l=async()=>{try{let e=(0,o.rJ)(i.db,n);return(await (0,o.GG)(e)).docs.map(s).filter(e=>"published"===e.status).sort((e,t)=>{let r=e.publishedAt||e.createdAt;return(t.publishedAt||t.createdAt).getTime()-r.getTime()})}catch(e){return console.error("Error fetching blog posts:",e),[]}},d=async()=>{try{let e=(0,o.rJ)(i.db,n);return(await (0,o.GG)(e)).docs.map(s).sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime())}catch(e){return console.error("Error fetching all blog posts:",e),[]}},c=async e=>{try{let t=(0,o.H9)(i.db,n,e),r=await (0,o.x7)(t);if(r.exists())return s(r);return null}catch(e){throw console.error("Error fetching blog post:",e),Error("Failed to fetch blog post")}},g=async e=>{try{let t=(0,o.H9)(i.db,n,e),r=await (0,o.x7)(t);if(!r.exists())return null;{let e=s(r);if("published"===e.status)return e;return null}}catch(e){throw console.error("Error fetching published blog post:",e),Error("Failed to fetch blog post")}},p=async e=>{try{console.log("Creating blog post with data:",e);let t=new Date,r=a(e.title||""),s={title:e.title||"",content:e.content||"",createdAt:o.Dc.fromDate(t),updatedAt:o.Dc.fromDate(t),publishedAt:"published"===e.status?o.Dc.fromDate(t):null,status:e.status||"draft",slug:r};e.excerpt&&(s.excerpt=e.excerpt),e.featuredImage&&(s.featuredImage=e.featuredImage),e.tags&&e.tags.length>0&&(s.tags=e.tags),console.log("Final blog post object:",s);let l=(0,o.rJ)(i.db,n),d=await (0,o.gS)(l,s);return console.log("Blog post created successfully with ID:",d.id),d.id}catch(e){throw console.error("Error creating blog post:",e),console.error("Error stack:",e instanceof Error?e.stack:"No stack"),Error("Failed to create blog post: "+(e instanceof Error?e.message:String(e)))}},m=async(e,t)=>{try{console.log("Updating blog post ID:",e,"with data:",t);let r=(0,o.H9)(i.db,n,e),s=new Date,l={updatedAt:o.Dc.fromDate(s)};if(void 0!==t.title&&(l.title=t.title,l.slug=a(t.title)),void 0!==t.content&&(l.content=t.content),void 0!==t.excerpt&&(l.excerpt=t.excerpt),void 0!==t.status&&(l.status=t.status),void 0!==t.featuredImage&&(l.featuredImage=t.featuredImage),void 0!==t.tags&&(l.tags=t.tags),"published"===t.status){let e=(await (0,o.x7)(r)).data();e?.publishedAt||(l.publishedAt=o.Dc.fromDate(s))}console.log("Final update data:",l),await (0,o.mZ)(r,l),console.log("Blog post updated successfully")}catch(e){throw console.error("Error updating blog post:",e),console.error("Error stack:",e instanceof Error?e.stack:"No stack"),Error("Failed to update blog post: "+(e instanceof Error?e.message:String(e)))}},u=async e=>{try{let t=(0,o.H9)(i.db,n,e);await (0,o.kd)(t)}catch(e){throw console.error("Error deleting blog post:",e),Error("Failed to delete blog post")}}}};