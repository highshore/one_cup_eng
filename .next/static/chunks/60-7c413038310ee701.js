"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{3985:(e,t,a)=>{a.d(t,{gD:()=>s,l2:()=>i});var n=a(35317),r=a(22661);let o=new Map,i=async e=>{if(o.has(e))return o.get(e)||null;try{let t=(0,n.H9)(r.db,"users",e),a=await (0,n.x7)(t);if(a.exists()){let t=a.data(),n=t.photoURL||t.avatar,r=n&&""!==n.trim()?n:void 0,i={uid:e,displayName:t.displayName||t.name||"User ".concat(e.substring(0,6)),photoURL:r,email:t.email,account_status:t.account_status,hasActiveSubscription:!0===t.hasActiveSubscription};return o.set(e,i),i}{console.warn("User document not found in Firestore for UID: ".concat(e,". Using fallback."));let t={uid:e,displayName:"User ".concat(e.substring(0,6)),photoURL:void 0,account_status:void 0,hasActiveSubscription:!1};return o.set(e,t),t}}catch(a){console.error("Error fetching user profile for ".concat(e," from Firestore:"),a);let t={uid:e,displayName:"User ".concat(e.substring(0,6)),photoURL:void 0,account_status:void 0,hasActiveSubscription:!1};return o.set(e,t),t}},s=async e=>{try{let t=(0,n.H9)(r.db,"users",e),a=await (0,n.x7)(t);if(!a.exists())return console.warn("User document not found for UID: ".concat(e)),!1;{let e=a.data();return!0===e.hasActiveSubscription}}catch(t){return console.error("Error checking subscription status for ".concat(e,":"),t),!1}}},9932:(e,t,a)=>{a.d(t,{Gi:()=>u,Pu:()=>d,UZ:()=>s,eF:()=>c,ge:()=>l});var n=a(35317),r=a(22661),o=a(24735);let i="meetup",s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{let a=(0,n.rJ)(r.db,i),s=(0,n.P)(a,(0,n.My)("date_time","desc"),(0,n.AB)(t));e&&(s=(0,n.P)(a,(0,n.My)("date_time","desc"),(0,n.HM)(e),(0,n.AB)(t)));let c=await (0,n.GG)(s),l=[],d=null;return c.forEach(e=>{let t=e.data(),a={id:e.id,...t};l.push((0,o.Ee)(a)),d=e}),{events:l,lastDoc:d}}catch(e){throw console.error("Error fetching meetup events:",e),e}},c=async()=>{try{let e=n.Dc.now(),t=(0,n.rJ)(r.db,i),a=(0,n.P)(t,(0,n._M)("date_time",">=",e),(0,n.My)("date_time","asc")),s=await (0,n.GG)(a),c=[];return s.forEach(e=>{let t=e.data(),a={id:e.id,...t};c.push((0,o.Ee)(a))}),c}catch(e){throw console.error("Error fetching upcoming meetup events:",e),e}},l=(e,t)=>{try{let a=(0,n.H9)(r.db,i,e);return(0,n.aQ)(a,e=>{if(e.exists()){let a=e.data(),n={id:e.id,...a};t((0,o.Ee)(n))}else t(null)},a=>{console.error("Error in real-time subscription for event ".concat(e,":"),a),t(null)})}catch(t){return console.error("Error setting up real-time subscription for event ".concat(e,":"),t),()=>{}}},d=async(e,t,a)=>{let o=(0,n.H9)(r.db,i,e);try{await (0,n.c4)(r.db,async e=>{var r,i,s,c;let l=await e.get(o);if(!l.exists())throw Error("Event does not exist!");let d=l.data(),u=null==(r=d.participants)?void 0:r.includes(t),p=null==(i=d.leaders)?void 0:i.includes(t);if("participant"===a&&u||"leader"===a&&p)return void console.log("User ".concat(t," already in the event as ").concat(a,"."));let h=((null==(s=d.participants)?void 0:s.length)||0)+((null==(c=d.leaders)?void 0:c.length)||0);if("participant"===a&&h>=d.max_participants)throw Error("Event is already full for participants.");let g={};"participant"===a?(g.participants=(0,n.hq)(t),p&&(g.leaders=(0,n.C3)(t))):(g.leaders=(0,n.hq)(t),u&&(g.participants=(0,n.C3)(t))),e.update(o,g)}),console.log("User ".concat(t," successfully joined event ").concat(e," as ").concat(a,"."))}catch(e){throw console.error("Error joining event:",e),e}},u=async(e,t)=>{let a=(0,n.H9)(r.db,i,e);try{await (0,n.c4)(r.db,async r=>{var o,i;let s=await r.get(a);if(!s.exists())throw Error("Event does not exist!");let c=s.data(),l=null==(o=c.participants)?void 0:o.includes(t),d=null==(i=c.leaders)?void 0:i.includes(t);if(!l&&!d)return void console.log("User ".concat(t," is not part of event ").concat(e,"."));let u={};l&&(u.participants=(0,n.C3)(t)),d&&(u.leaders=(0,n.C3)(t)),r.update(a,u)}),console.log("User ".concat(t," successfully canceled participation for event ").concat(e,"."))}catch(e){throw console.error("Error canceling participation:",e),e}}},22661:(e,t,a)=>{a.d(t,{Cn:()=>p,IG:()=>u,db:()=>d,j2:()=>l});var n=a(23915),r=a(16203),o=a(35317),i=a(90858),s=a(81427);let c=(0,n.Wp)({apiKey:"AIzaSyBC62vsKGQqdgpyC9RugoHEfh9UcRi2SMA",authDomain:"one-cup-eng.firebaseapp.com",projectId:"one-cup-eng",storageBucket:"one-cup-eng.firebasestorage.app",messagingSenderId:"615807178262",appId:"1:615807178262:web:9a96a5f0d94ae628d74737"}),l=(0,r.xI)(c),d=(0,o.aU)(c),u=(0,i.c7)(c),p=(0,s.Uz)(c,"asia-northeast3")},24735:(e,t,a)=>{a.d(t,{Ee:()=>o,FQ:()=>s,pd:()=>c,z0:()=>d});var n=a(35317);let r=e=>{let t;return{date:(t=e&&"function"==typeof e.toDate?e.toDate():e&&e.seconds?new Date(1e3*e.seconds):"string"==typeof e?new Date(e):new Date).toISOString().split("T")[0],time:t.toTimeString().slice(0,5)}},o=e=>{let t,a,n,o,i,s,{date:c,time:l}=r(e.date_time);return void 0!==e.location_name&&void 0!==e.latitude&&void 0!==e.longitude?(t=e.location_name,a=e.location_address,n=e.location_map_url,o=e.latitude,i=e.longitude,s=e.location_extra_info):e.location&&Array.isArray(e.location)&&e.location.length>=5?(t=e.location[0],a=e.location[1],n=e.location[2],o="number"==typeof e.location[3]?e.location[3]:0,i="number"==typeof e.location[4]?e.location[4]:0,s=e.location[5]||""):(t="N/A",a="N/A",n="",o=0,i=0,s=""),{id:e.id,title:e.title,date:c,time:l,description:e.description,location_name:t,location_address:a,location_map_url:n,latitude:o,longitude:i,location_extra_info:s,duration_minutes:e.duration_minutes,lockdown_minutes:e.lockdown_minutes,max_participants:e.max_participants,participants:e.participants||[],leaders:e.leaders||[],image_urls:e.image_urls||[],topics:e.topics||[],articles:e.articles||[]}};n.Dc.fromDate(new Date("2024-02-07T17:00:00+09:00")),n.Dc.fromDate(new Date("2024-01-15T19:00:00+09:00")),n.Dc.fromDate(new Date("2024-01-20T14:00:00+09:00")),n.Dc.fromDate(new Date("2024-01-25T18:30:00+09:00"));let i=e=>{let t=new Date("".concat(e.date,"T").concat(e.time));return new Date>=t},s=e=>{if(i(e))return{isLocked:!0,reason:"started"};if(e.participants.length+e.leaders.length>=e.max_participants)return{isLocked:!0,reason:"full"};if(e.lockdown_minutes>0){let t=new Date(new Date("".concat(e.date,"T").concat(e.time)).getTime()-60*e.lockdown_minutes*1e3);if(new Date>=t)return{isLocked:!0,reason:"lockdown"}}return{isLocked:!1,reason:null}},c=e=>{let t=new Date("".concat(e.date,"T").concat(e.time)),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"][t.getDay()],i=t.getHours(),s=t.getMinutes().toString().padStart(2,"0");return"".concat(a,"년 ").concat(n,"월 ").concat(r,"일 (").concat(o,") ").concat(i,":").concat(s)},l=e=>{let t=new Date,a=new Date(e.date),n=new Date(t.toISOString().split("T")[0]);return Math.ceil((a.getTime()-n.getTime())/864e5)},d=e=>{let t=l(e),a="",n=!1;return t>0?(a="[D-".concat(t,"] "),n=t<=3):0===t?(a="[D-DAY] ",n=!0):a="",{countdownPrefix:a,eventTitle:e.title,isUrgent:n,daysUntil:t}}},35695:(e,t,a)=>{var n=a(18999);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}}),a.o(n,"useServerInsertedHTML")&&a.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},64045:(e,t,a)=>{a.d(t,{CT:()=>i,Cy:()=>c,EO:()=>l,O4:()=>s,ts:()=>o});var n=a(95155);a(12115);let r="20px",o=e=>{let{className:t,fillColor:a,width:o,height:i}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:a||"currentColor",width:o||r,height:i||r,className:t,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})})},i=e=>{let{className:t,fillColor:a,width:o,height:i}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:a||"currentColor",width:o||r,height:i||r,className:t,children:[(0,n.jsx)("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"})]})},s=e=>{let{className:t,fillColor:a,width:o,height:i}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:a||"currentColor",width:o||r,height:i||r,className:t,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"})})},c=e=>{let{className:t,fillColor:a,width:o,height:i}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:a||"currentColor",width:o||r,height:i||r,className:t,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 3.75a6.715 6.715 0 0 0-3.722 1.118.75.75 0 1 1-.828-1.25 8.25 8.25 0 0 1 12.8 6.883c0 3.014-.574 5.897-1.62 8.543a.75.75 0 0 1-1.395-.551A21.69 21.69 0 0 0 18.75 10.5 6.75 6.75 0 0 0 12 3.75ZM6.157 5.739a.75.75 0 0 1 .21 1.04A6.715 6.715 0 0 0 5.25 10.5c0 1.613-.463 3.12-1.265 4.393a.75.75 0 0 1-1.27-.8A6.715 6.715 0 0 0 3.75 10.5c0-1.68.503-3.246 1.367-4.55a.75.75 0 0 1 1.04-.211ZM12 7.5a3 3 0 0 0-3 3c0 3.1-1.176 5.927-3.105 8.056a.75.75 0 1 1-1.112-1.008A10.459 10.459 0 0 0 7.5 10.5a4.5 4.5 0 1 1 9 0c0 .547-.022 1.09-.067 1.626a.75.75 0 0 1-1.495-.123c.041-.495.062-.996.062-1.503a3 3 0 0 0-3-3Zm0 2.25a.75.75 0 0 1 .75.75c0 3.908-1.424 7.485-3.781 10.238a.75.75 0 0 1-1.14-.975A14.19 14.19 0 0 0 11.25 10.5a.75.75 0 0 1 .75-.75Zm3.239 5.183a.75.75 0 0 1 .515.927 19.417 19.417 0 0 1-2.585 5.544.75.75 0 0 1-1.243-.84 17.915 17.915 0 0 0 2.386-5.116.75.75 0 0 1 .927-.515Z",clipRule:"evenodd"})})},l=e=>{let{className:t,fillColor:a,width:o,height:i}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:a||"currentColor",width:o||r,height:i||r,className:t,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"})})}},93035:(e,t,a)=>{a.d(t,{H8:()=>u,Vy:()=>p});var n=a(95155),r=a(12115),o=a(43262),i=a(3985);let s=o.Ay.div.withConfig({componentId:"sc-5269cd0e-0"})(["width:","px;height:","px;border-radius:50%;background-color:",";position:",";left:","px;border:2px solid white;display:flex;align-items:center;justify-content:center;cursor:",";transition:transform 0.2s;filter:",";overflow:hidden;&:hover{transform:",";}"],e=>e.$size,e=>e.$size,e=>e.$bgColor||"#e0e0e0",e=>void 0!==e.$index?"absolute":"relative",e=>void 0!==e.$index?e.$index*(.6*e.$size):0,e=>e.$isClickable?"pointer":"default",e=>e.$isPast?"grayscale(50%)":"none",e=>e.$isClickable?"scale(1.1)":"none"),c=o.Ay.img.withConfig({componentId:"sc-5269cd0e-1"})(["width:100%;height:100%;object-fit:cover;border-radius:50%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;"]),l=o.Ay.div.withConfig({componentId:"sc-5269cd0e-2"})(["color:white;font-size:",";font-weight:600;display:flex;align-items:center;justify-content:center;"],e=>e.$size>30?"16px":"10px"),d=o.Ay.div.withConfig({componentId:"sc-5269cd0e-3"})(["width:","px;height:","px;border:2px solid #f3f3f3;border-top:2px solid #666;border-radius:50%;animation:spin 1s linear infinite;@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"],e=>Math.min(.5*e.$size,16),e=>Math.min(.5*e.$size,16)),u=e=>{let{uid:t,size:a=40,isLeader:o=!1,className:l,onClick:u,index:p,isPast:h=!1}=e,[g,f]=(0,r.useState)(null),[m,v]=(0,r.useState)(!0),[w,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{try{v(!0),x(!1);let e=await (0,i.l2)(t);f(e)}catch(e){console.error("Error loading user profile for ".concat(t,":"),e)}finally{v(!1)}};t?e():v(!1)},[t]);let b=(null==g?void 0:g.displayName)||"User ".concat(t?t.substring(0,8):""),y=((e,t)=>{let a=t?["#9c27b0","#673ab7","#3f51b5"]:["#2196f3","#03a9f4","#00bcd4","#009688","#4caf50"],n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;let r=Math.abs(n)%a.length;return a[r]})(t||"",o),D=(null==g?void 0:g.photoURL)&&""!==g.photoURL.trim(),M=D&&!w?g.photoURL:"/default_user.jpg";return(0,n.jsx)(s,{$size:a,$bgColor:y,$index:p,$isPast:h,$isClickable:!!u,className:l,onClick:u,children:m?(0,n.jsx)(d,{$size:a}):(0,n.jsx)(c,{src:M,alt:b,draggable:!1,onContextMenu:e=>e.preventDefault(),onDragStart:e=>e.preventDefault(),onError:D&&!w?()=>{x(!0)}:void 0})})},p=e=>{let{uids:t,maxAvatars:a=5,size:r=22,isLeader:o=!1,isPast:i=!1,onAvatarClick:c}=e,d=t.slice(0,a),p=t.length>a,h=t.length-a;return(0,n.jsxs)("div",{style:{position:"relative",height:"".concat(r,"px"),minWidth:"".concat(d.length>0?d.length*r*.6+.4*r:r,"px")},children:[d.map((e,t)=>(0,n.jsx)(u,{uid:e,size:r,isLeader:o,index:t,isPast:i,onClick:c?()=>c(e):void 0},e)),p&&(0,n.jsx)(s,{$size:r,$bgColor:"#f0f0f0",$index:d.length,$isPast:i,$isClickable:!1,children:(0,n.jsxs)(l,{$size:r,children:["+",h]})},"more-count")]})}}}]);